/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Tue Nov 16 2021 10:43:22 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-007669ac"],{"3a04":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"vab-fullscreen":e.isFullscreen}},[r("div",{staticClass:"components"},[r("vab-dialog",{attrs:{show:e.activePopShow},on:{"update:show":function(t){e.activePopShow=t}}},[r("h3",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.$translateTitle("cloudTest.add"))+e._s(e.$translateTitle("cloudTest.report template"))+" ")]),r("div",{staticClass:"content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px",model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.Template name"),prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.category"),prop:"category"}},[r("el-input",{model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.Trade Names"),prop:"factory",required:""}},[r("el-input",{model:{value:e.ruleForm.factory,callback:function(t){e.$set(e.ruleForm,"factory",t)},expression:"ruleForm.factory"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.Template file"),prop:"file",required:""}},[r("el-upload",{key:e.momentKey,ref:"upload",staticClass:"upload-demo",attrs:{accept:".doc,.docx",action:"string","before-upload":e.onBeforeUploadImage,"file-list":e.fileList,"http-request":e.UploadImage,limit:1,"list-type":"text","on-change":e.fileChange},model:{value:e.ruleForm.file,callback:function(t){e.$set(e.ruleForm,"file",t)},expression:"ruleForm.file"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(" "+e._s(e.$translateTitle("application.selectfile"))+" ")])],1)],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" "+e._s(e.$translateTitle("product.createnow"))+" ")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v(" "+e._s(e.$translateTitle("zetadevices.reset"))+" ")])],1)]),r("vab-dialog",{attrs:{show:e.tempPopShow},on:{"update:show":function(t){e.tempPopShow=t}}},[r("h3",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.$translateTitle("cloudTest.report template"))+" ")]),r("div",{key:e.height,staticClass:"content"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.tempList,height:e.$baseTableHeight(3),size:e.lineHeight,stripe:e.stripe},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.number"),"show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.Template name"),prop:"name","show-overflow-tooltip":"",width:"auto"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.Template content"),width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{"preview-src-list":[""+(e.$FileServe+a.icon)],src:e.$FileServe+a.icon}})]}}])}),r("el-table-column",{attrs:{align:"center",flex:"right",label:e.$translateTitle("product.Template management"),"show-overflow-tooltip":"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handlekonva(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.mapping"))+" ")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.handleDelete(a,1)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.delete"))+" ")])]}}])})],1)],1)])],1),r("vab-query-form",[r("vab-query-form-left-panel",[r("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-select",{attrs:{multiple:"",placeholder:e.$translateTitle("cloudTest.Please select review status")},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:function(t){return e.fetchData(e.queryForm)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.search"))+" ")]),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleAdd}},[e._v(" "+e._s(e.$translateTitle("cloudTest.add"))+" ")])],1)],1)],1),r("vab-query-form-right-panel",[r("el-button",{staticStyle:{margin:"0 10px 10px 0 !important"},attrs:{type:"primary"},on:{click:e.clickFullScreen}},[r("vab-icon",{attrs:{icon:e.isFullscreen?"fullscreen-exit-fill":"fullscreen-fill"}}),e._v(" "+e._s(e.$translateTitle("cloudTest.full screen"))+" ")],1),r("el-popover",{ref:"popover",attrs:{"popper-class":"custom-table-checkbox",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("el-button",{staticStyle:{margin:"0 10px 10px 0 !important"},attrs:{type:"primary"}},[r("vab-icon",{attrs:{icon:"line-height"}}),e._v(" "+e._s(e.$translateTitle("cloudTest.size"))+" ")],1)]},proxy:!0}])},[r("el-radio-group",{model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},[r("el-radio",{attrs:{label:"medium"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.medium"))+" ")]),r("el-radio",{attrs:{label:"small"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.small"))+" ")]),r("el-radio",{attrs:{label:"mini"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.mini"))+" ")])],1)],1),r("el-popover",{attrs:{"popper-class":"custom-table-checkbox",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("el-button",{staticStyle:{margin:"0 0 10px 0 !important"},attrs:{icon:"el-icon-setting",type:"primary"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Draggable column"))+" ")])]},proxy:!0}])},[r("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[r("vab-draggable",e._b({attrs:{list:e.columns}},"vab-draggable",e.dragOptions,!1),e._l(e.columns,(function(t,a){return r("div",{key:t+a},[r("vab-icon",{attrs:{icon:"drag-drop-line"}}),r("el-checkbox",{attrs:{disabled:!0===t.disableCheck,label:t.label}},[e._v(" "+e._s(e.$translateTitle("cloudTest."+t.label))+" ")])],1)})),0)],1)],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.list,height:e.height,size:e.lineHeight,stripe:e.stripe},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.number"),"show-overflow-tooltip":"",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),e._l(e.finallyColumns,(function(t,a){return r("el-table-column",{key:a,attrs:{align:"center",label:e.$translateTitle("cloudTest."+t.label),prop:t.prop,"show-overflow-tooltip":"",sortable:t.sortable,width:t.width}})})),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("deviceLog.status"),"show-overflow-tooltip":"",width:"185"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tag",{attrs:{effect:"dark",type:["success","info","warning","danger"][a.basedata.testStatus]||0}},[e._v(" "+e._s([e.$translateTitle("product.notstarted"),e.$translateTitle("product.testing"),e.$translateTitle("product.finishtest")][a.basedata.testStatus]||e.$translateTitle("product.notested"))+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.operate"),"show-overflow-tooltip":"",width:"185"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleManagement(a)}}},[e._v(" "+e._s(e.$translateTitle("product.Template management"))+" ")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.handleDelete(a,0)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.delete"))+" ")])]}}])})],2),r("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",page:e.queryForm.pageNo,"page-size":e.queryForm.pageSize,"page-sizes":e.queryForm.pageSizes,total:e.queryForm.total},on:{"update:page":function(t){return e.$set(e.queryForm,"pageNo",t)},"current-change":e.currentChange,"size-change":e.sizeChange}}),r("table-edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},n=[],o=a("fb07"),i=a("e97b"),s=a("d0d7"),l=a.n(s),c=(a("a0e0"),a("3dec"),a("f764"),a("5662"),a("16b8"),a("04d6"),a("79da"),a("9c6a"),a("1285")),u=a("58dd"),d=a("43ee"),m=a("289a"),p=a.n(m),f=a("5880"),h={name:"TaskIndex",components:{VabDraggable:p.a,TableEdit:d["default"]},data:function(){var e=function(e,t,a){""===t?a(new Error("请上传文件")):a()};return{options:[{value:"Underreview",label:"审核中"},{value:"finishreview",label:"审核完成"}],fileList:[],momentKey:moment(new Date).valueOf(),ruleForm:{file:null,name:"",category:"",factory:"",date2:""},rules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],category:[{required:!0,message:"请输入所属品类",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],factory:[{required:!0,message:"请输入厂商名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],file:[{validator:e,trigger:"blur"}]},activePopShow:!1,tempPopShow:!1,isFullscreen:!1,border:!0,height:this.$baseTableHeight(0)-20,stripe:!0,lineHeight:"medium",checkList:["Inspection number","mission name","Inspection template","Trade Names","Creation time","Starting time","end time"],columns:[{label:"Inspection number",width:"auto",prop:"basedata.BasicInfo.bianhao",sortable:!0,disableCheck:!0},{label:"mission name",width:"auto",prop:"name",sortable:!0},{label:"Inspection template",width:"auto",prop:"basedata.bedname",sortable:!0},{label:"Creation time",width:"auto",prop:"createdAt",sortable:!0},{label:"Starting time",width:"auto",prop:"basedata.starttime",sortable:!0},{label:"end time",width:"auto",prop:"basedata.endtime",sortable:!0}],list:[],tempList:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",temprow:{},queryForm:{pageSizes:[10,20,30,50],limit:10,order:"-createdAt",keys:"count(*)",total:0,skip:0,pageNo:1,pageSize:10,name:["审核中","审核完成"]}}},computed:Object(i["a"])(Object(i["a"])({},Object(f["mapGetters"])({language:"settings/language",collapse:"settings/collapse"})),{},{dragOptions:function(){return{animation:600,group:"description"}},finallyColumns:function(){var e=this;return this.columns.filter((function(t){return e.checkList.includes(t.label)}))}}),watch:{language:{deep:!0,limit:!0,handler:function(e){}}},created:function(){this.fetchData(this.queryForm)},methods:{onBeforeUploadImage:function(e){var t=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"],a=t.includes(e.type),r=e.size/1024/1024<30;return a||this.$message.error("上传文件只能是doc/docx格式!"),r||this.$message.error("上传文件大小不能超过 30MB!"),this.momentKey=moment(new Date).valueOf(),a&&r},UploadImage:function(e){this.ruleForm.file=e.file},fileChange:function(e){this.$refs.upload.clearFiles(),this.logo=e.raw,this.fileList=[{name:e.name,url:e.url}]},submitUpload:function(){this.$refs.upload.submit()},handlePreview:function(e){},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(l.a.mark((function e(a){var r,n,o,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=24;break}return r=new FormData,n={identifier:"inspectionReportTemp",client:t.ruleForm.factory},r.append("devType",t.ruleForm.category),r.append("name",t.ruleForm.name),r.append("config",JSON.stringify(n)),r.append("file",t.ruleForm.file),o=t.$baseColorfullLoading(1),e.prev=8,e.next=11,Object(u["postReportFile"])(r);case 11:i=e.sent,i.result,t.$message.success(t.$translateTitle("cloudTest.Template created successfully")),t.activePopShow=!1,t.fetchData(t.queryForm),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](8),t.$message.error(t.$translateTitle("cloudTest.Template creation failed"));case 21:o.close(),e.next=25;break;case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}())},sizeChange:function(e){this.queryForm.limit=e,this.fetchData(this.queryForm)},currentChange:function(e){this.queryForm.skip=(e-1)*this.queryForm.limit,this.fetchData(this.queryForm)},resetForm:function(e){this.ruleForm.file=null,this.fileList=[],this.$refs[e].resetFields()},clickFullScreen:function(){this.isFullscreen=!this.isFullscreen,this.handleHeight()},handleHeight:function(){this.isFullscreen?this.height=this.$baseTableHeight(1)+210:this.height=this.$baseTableHeight(1)},handleAdd:function(){this.activePopShow=!0},handlekonva:function(e){this.$router.push({path:"/Topo",query:{productid:e.objectId,icon:e.icon,type:"Evidence"}})},handleManagement:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r,n,o,i,s;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.temprow=e,r={limit:50,skip:0,keys:"count(*)",where:{devType:t.temprow.devType,nodeType:0},order:"createdAt"},n=t.$baseColorfullLoading(1),a.prev=3,a.next=6,Object(c["queryDevice"])(r);case 6:o=a.sent,i=o.count,void 0===i?0:i,s=o.results,t.tempList=s,a.next=15;break;case 13:a.prev=13,a.t0=a["catch"](3);case 15:t.tempPopShow=!0,n.close();case 17:case"end":return a.stop()}}),a,null,[[3,13]])})))()},handleDelete:function(e,t){var a=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,Object(o["a"])(l.a.mark((function r(){return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,delProduct(e.objectId);case 2:if(r.sent,a.$baseMessage(a.$translateTitle("successfully deleted"),"success","vab-hey-message-success"),0!=t){r.next=9;break}return r.next=7,a.fetchData(a.queryForm);case 7:r.next=11;break;case 9:return r.next=11,a.handleManagement(a.temprow);case 11:case"end":return r.stop()}}),r)}))))},fetchData:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r,n,o,i,s,u,d;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={limit:e.limit,order:e.order,skip:t.queryForm.name.length?0:e.skip,keys:e.keys,where:{"basedata.identifier":"inspectionReportTemp"}},t.listLoading=!0,n={results:[{objectId:"0ac4f9eb2f",createdAt:"2021-04-29T14:31:28.274Z",updatedAt:"2021-10-30T07:28:16.718Z",basedata:{name:"taskInfo",index:0,layer:{width:600,height:850,backColor:"#eee",backgroundImage:"",widthHeightRatio:""},client:["电动泵"],remark:"",bedaddr:"9f7c90228fff",bedname:"南方泵业台体",endtime:1618884e6,deviceid:"",reportId:"633e7fa7d6",BasicInfo:{guige:"/",pizun:"",wendu:"",beizhu:"/",daqiya:"",dengji:"/",shenhe:"",taishu:"/",xiaolv:"/",bianhao:"BB2021042-(1)",bianzhi:"",lianxidh:"",scdwAdrr:"/",wtdwAdrr:"/",chanpinxh:"/",jianceren:"",pizhunren:"",shenheren:"",chuchangbh:"/",qianfaData:"",shengchanN:"/",shiyanName:"/",chanpinName:"/",chouyangNum:"",daoyangData:"",dynamicTags:[],jianyanData:"",jianyanyiju:"",yangpinName:"管道式离心泵",chouyangAddr:"/",chouyangAdrr:"厂成品库",chouyangData:"",weituodanwei:"/",chouyangjishu:"0",yanshoudengji:"",chanpinbianhao:"/",jianyanxingzhi:"委托校验",shengchangData:"",shiyanDateTime:"",songyangdanwei:"/",jianyanbiaozhun:"/",songyangDateTime:"",yangpinzhuangtai:""},groupname:"南方泵业",starttime:16188804e5,components:[],identifier:"inspectionReportTemp",reportList:[{ACL:{"role:方威检测室":{read:!0,write:!0}},desc:"0",icon:"",name:"南方泵业管道循环泵",config:{name:"南方泵业管道循环泵",index:0,layer:{width:600,height:850,backColor:"#eee",backgroundImage:"",widthHeightRatio:""},client:["电动泵"],deviceid:"",components:[],identifier:"inspectionReportTemp"},devType:"管道循环泵",category:"Evidence",children:{__type:"Relation",className:"Product"},nodeType:1,objectId:"633e7fa7d6",createdAt:"2021-04-29T03:52:10.368Z",updatedAt:"2021-04-29T03:52:10.368Z",productSecret:"c6b084b31bfe5553c0a4a4eae76bf6e3"},{ACL:{"role:方威检测室":{read:!0,write:!0}},desc:"0",icon:"",name:"南方家用泵",config:{name:"南方家用泵",index:0,layer:{width:600,height:850,backColor:"#eee",backgroundImage:"",widthHeightRatio:""},client:"潜水泵",deviceid:"",components:[],identifier:"a28b149a-0f31-fe7d-cadc-0be47faf8a8d"},devType:"潜水泵",category:"Evidence",children:{__type:"Relation",className:"Product"},nodeType:1,objectId:"c5f31fa3a4",createdAt:"2021-01-12T12:18:59.570Z",updatedAt:"2021-01-12T12:18:59.570Z",productSecret:"productSecret"}],testStatus:2,TestSetting:{BasicSetting:{AcceptParam:{tHf:.1,tQz:.16,tp_up:.16,te_down:-.05,th_down:0,tq_down:0},dengji_test:"2U",testPrecision:"1"},FormulaSetting:{SpeedConversionFormula:"GB/t3216-2016"},ParameterSetting:{SumAverage:!1,RemoveMaxMinGetAverage:!1},StabilitySetting:{Speed:"GB/T3216-2016",FlowHeadEfficiency:"GB/T3216-2016"},QualifiedConditionsSetting:{QualifiedConditions:"GB/T3216-2016"}},verifyStatus:0,insectionName:"南方泵业管道循环泵",PrescribedPoint:{H1:"",H2:"",H3:"",Q1:"",Q2:"",Q3:"",tR:"",rpm:"",DJXL:"",NpRC:"",NpshG:"",glysG:"",point:"",glysRC:"",qishi1:"",qishi2:"",qishi3:"",temzcG:"",xiaolv1:"",xiaolv2:"",xiaolv3:"",zhougv1:"",zhougv2:"",zhougv3:"",zhendongG:"",pointDataArr:[]},SouthPrescribedPoint:{H1:"",H2:"",H3:"",Q1:"",Q2:"",Q3:"",tR:"",rpm:"",DJXL:"",NpRC:"",NpshG:"",glysG:"",point:"",glysRC:"",qishi1:"",qishi2:"",qishi3:"",temzcG:"",xiaolv1:"",xiaolv2:"",xiaolv3:"",zhougv1:"",zhougv2:"",zhougv3:"",zhendongG:"",pointDataArr:[]}},detail:{desc:"南方泵业管道循环泵检测",brand:"数蛙桌面采集网关",batchId:{batch_name:"2021429",createdtime:1619706688},devModel:"SW_WIN_CAPTURE",isEnable:!0},devaddr:"a4889298366f",ip:"",isEnable:!0,name:"南方泵业管道循环泵检测",product:{objectId:"633e7fa7d6",__type:"Pointer",className:"Product"},status:"ONLINE",ACL:{"role:方威检测室":{read:!0,write:!0}}},{objectId:"d19ed1c4c0",createdAt:"2021-01-12T12:25:15.088Z",updatedAt:"2021-04-21T03:58:48.584Z",basedata:{name:"taskInfo",remark:"",bedaddr:"9f7c90228fff",bedname:"南方泵业台体",endtime:16101576e5,reportId:"c5f31fa3a4",BasicInfo:{name:"南方泵业集团",guige:"IG40-100",pizun:"霍林",wendu:"33",beizhu:"/",daqiya:"1",dengji:"样品状态完好，适于检验",shenhe:"唐炜炜",taishu:"1",xiaolv:"76",bianhao:"2021GJW00198",bianzhi:"刘晓冬",xinghao:"6",lianxidh:"0571-86390083",scdwAdrr:"杭州市余杭区仁和街道",wtdwAdrr:"杭州市余杭区仁和街道",chanpinxh:"IG40-100",jianceren:"李少清",pizhunren:"霍林",shenheren:"唐炜炜",chuchangbh:"201217",qianfaData:"2021-01-10T16:00:00.000Z",shengchanN:"南方泵业集团",shiyanName:"王国军",chanpinName:"中开泵",chouyangNum:"1",daoyangData:"2021-01-09T16:00:00.000Z",dynamicTags:["流量计","温度计","压力变送器"],jianyanData:"2021-01-10T16:00:00.000Z",jianyanyiju:"JB/T 6878-2006、GB/T 3216-2016、GB/T 29531-2013、GB/T 29529-2013",yangpinName:"中开泵",chouyangAddr:"南方泵业集团",chouyangAdrr:"厂成品库",chouyangData:"2021-01-04T16:00:00.000Z",weituodanwei:"南方泵业集团",chouyangjishu:"10",yanshoudengji:"2B",chanpinbianhao:"2101084523",jianyanxingzhi:"委托校验",shengchangData:"2020-12-16T16:00:00.000Z",shiyanDateTime:"2021-01-10T16:00:00.000Z",songyangdanwei:"南方泵业集团",chuchangbianhao:"8",jianyanbiaozhun:"/",songyangDateTime:"2021-01-09T16:00:00.000Z",yangpinzhuangtai:"样品状态完好，适于检验"},groupname:"南方泵业",starttime:1610154e6,identifier:"inspectionReportTemp",reportList:[{ACL:{"role:方威检测室":{read:!0,write:!0}},desc:"0",icon:"",name:"南方家用泵",config:{name:"南方家用泵",index:0,layer:{width:600,height:850,backColor:"#eee",backgroundImage:"",widthHeightRatio:""},client:"潜水泵",deviceid:"",components:[],identifier:"a28b149a-0f31-fe7d-cadc-0be47faf8a8d"},devType:"潜水泵",category:"Evidence",children:{__type:"Relation",className:"Product"},nodeType:1,objectId:"c5f31fa3a4",createdAt:"2021-01-12T12:18:59.570Z",updatedAt:"2021-01-12T12:18:59.570Z",productSecret:"productSecret"}],testStatus:1,TestSetting:{BasicSetting:{AcceptParam:{tHf:.05,tQz:.08,tp_up:.08,te_down:-.05,th_down:-.05,tq_down:-.08},dengji_test:"2B",testPrecision:"2"},FormulaSetting:{SpeedConversionFormula:"GB/t3216-2016"},ParameterSetting:{SumAverage:!1,AverageNumber:"15",AcquisitionCycle:"30",RemoveMaxMinGetAverage:!1,HeightOfSubmersiblePump:"0.5",GravitationalAcceleration:"9.81"},StabilitySetting:{Speed:"GB/T3216-2016",FlowHeadEfficiency:"GB/T3216-2016"},QualifiedConditionsSetting:{QualifiedConditions:"GB/T3216-2016"}},verifyStatus:0,insectionName:"南方家用泵",PrescribedPoint:{H1:"",H2:"43",H3:"",Q1:"",Q2:"10",Q3:"",tR:"0.05",rpm:"2950",DJXL:"",NpRC:"0.01",NpshG:"2",gddxl:"72",glysG:"0.86",point:"",glysRC:"0.08",qishi1:"",qishi2:"2",qishi3:"",temzcG:"35",xiaolv1:"",xiaolv2:"72",xiaolv3:"",zhougv1:"",zhougv2:"2200",zhougv3:"",zhendongG:"4.5",pointDataArr:[]},SouthPrescribedPoint:{H1:"",H2:"43",H3:"",Q1:"",Q2:"10",Q3:"",tR:"0.05",rpm:"2950",DJXL:"",NpRC:"0.01",NpshG:"2",gddxl:"72",glysG:"0.86",point:"",glysRC:"0.08",qishi1:"",qishi2:"2",qishi3:"",temzcG:"35",xiaolv1:"",xiaolv2:"72",xiaolv3:"",zhougv1:"",zhougv2:"2200",zhougv3:"",zhendongG:"4.5",pointDataArr:[]}},detail:{desc:"南方泵业家用泵检测",brand:"数蛙桌面采集网关",batchId:{batch_name:"2021112",createdtime:1610454315},devModel:"SW_WIN_CAPTURE",isEnable:!0},devaddr:"cf4f2e4c63e2",ip:"",isEnable:!0,name:"南方泵业家用泵检测",product:{objectId:"c5f31fa3a4",__type:"Pointer",className:"Product"},status:"ONLINE",ACL:{"role:方威检测室":{read:!0,write:!0}}}]},a.next=5,Object(c["queryDevice"])(r);case 5:o=a.sent,i=o.count,s=void 0===i?0:i,u=o.results,d=void 0===u?[]:u,t.list=d.length?d:n.results,d.forEach((function(e){e.basedata.endtime=moment(e.basedata.endtime).format("YYYY-MM-DD HH:mm:ss"),e.basedata.starttime=moment(e.basedata.starttime).format("YYYY-MM-DD HH:mm:ss"),e.createdAt=moment(e.createdAt).format("YYYY-MM-DD HH:mm:ss")})),t.queryForm.total=s,t.listLoading=!1;case 14:case"end":return a.stop()}}),a)})))()}}},g=h,b=a("bdd7"),v=Object(b["a"])(g,r,n,!1,null,null,null);t["default"]=v.exports},"3ea0":function(e,t,a){var r={"./docDialog.vue":"da40"};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id="3ea0"},"3f60":function(e,t,a){},"60eb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dgiot-doc"},[a("div",{staticClass:"dialog"},[a("doc-dialog",{ref:"DocDialog"})],1),a("a-row",[a("a-col",{attrs:{span:4}},[a("div",{staticClass:"dgiot-doc-tree"},[a("a-tree",{attrs:{"auto-expand-parent":!0,"block-node":!0,"default-expand-all":!0,"default-expanded-keys":e.selectedKeys,"default-selected-keys":e.selectedKeys,"show-icon":!0,"show-line":!0,"tree-data":e.docDetails},on:{click:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){var r=t.objectId,n=t.name;return[a("a-dropdown",{attrs:{trigger:["contextmenu"]},scopedSlots:e._u([{key:"overlay",fn:function(){return[a("a-menu",{on:{click:function(t){var a=t.key;return e.onContextMenuClick(r,a)}}},[a("a-menu-item",{key:"child"},[e._v(" "+e._s(e.$translateTitle("article.New category"))+" ")]),a("a-menu-item",{key:"edit"},[e._v(" "+e._s(e.$translateTitle("article.edit category"))+" ")]),a("a-menu-item",{key:"delete"},[e._v(" "+e._s(e.$translateTitle("button.delete"))+" ")])],1)]},proxy:!0}],null,!0)},[a("span",[e._v(e._s(n))])])]}}])})],1)]),a("a-col",{attrs:{span:20}},[a("div",{staticClass:"text"},[a("vab-vditor",{ref:"vditor",attrs:{value:e.productDetail.data}})],1)])],1)],1)},n=[],o=a("fb07"),i=a("e97b"),s=(a("1d17"),a("98da"),a("16b8"),a("d0d7")),l=a.n(s),c=a("0e9a"),u=a("5880"),d=a("07e2"),m=a("ec86"),p={name:"DgiotDoc",components:Object(i["a"])({},Object(c["requireModule"])(a("3ea0"))),data:function(){return{editId:"",collapsed:!1,productDetail:{},setKey:moment(new Date).valueOf()}},computed:{selectedKeys:{get:function(){return this.$store.state.global.selectedKeys},set:function(e){return this.setSelectedKeys(e)}},detailsId:function(){return this.$route.query.details},docDetails:{get:function(){return this.$store.state.global.docDetails||{}},set:function(e){return this.set_docDetails(e)}},articleId:function(){return this.$route.query.article}},mounted:function(){this.getTree(this.$route.query),this.articleId&&this.getArticle(this.$route.query)},created:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){this.set_docDetails([]),this.setSelectedKeys([])},activated:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(u["mapMutations"])({delVisitedRoute:"tabs/delVisitedRoute",setSelectedKeys:"global/setSelectedKeys",set_docDetails:"global/set_docDetails"})),{},{onContextMenuClick:function(e,t){switch(t){case"child":this.newCategory(t,e);break;case"edit":this.editId=e,this.editCategory(e);break;case"delete":this.deletDoc(e);break}},editCategory:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(m["getArticle"])(e);case 2:r=a.sent,t.$refs.DocDialog.dialogFormVisible=!0,t.$refs.DocDialog.form=r,t.$refs.DocDialog.form.type="edit";case 6:case"end":return a.stop()}}),a)})))()},deletDoc:function(e){var t=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,Object(o["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$baseColorfullLoading(),a.next=3,Object(m["delArticle"])(e);case 3:a.sent,t.$baseMessage(t.$translateTitle("Maintenance.successfully deleted"),"success","vab-hey-message-success"),setTimeout((function(){r.close(),t.getTree(t.$route.query)}),800);case 6:case"end":return a.stop()}}),a)}))))},init:function(){this.$refs.DocDialog.$refs.form.resetFields(),this.$refs.DocDialog.dialogFormVisible=!1,this.getTree(this.$route.query)},getTree:function(e){var t=this;return Object(o["a"])(l.a.mark((function e(){var a,r,n,o,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a='{"keys":["parent","name","data","projectId","order","category","data","Icon","desc"],"where":{"projectId":"LYjcKG3ysu"}}'.replace("LYjcKG3ysu",t.$route.query.details),r={class:"Article",filter:a,parent:"parent"},e.next=4,Object(d["post_tree"])(r);case 4:n=e.sent,o=n.results,i=void 0===o?[]:o,t.docDetails=i;case 8:case"end":return e.stop()}}),e)})))()},getArticle:function(e){var t=this;return Object(o["a"])(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.$baseColorfullLoading(),e.next=4,Object(m["getArticle"])(t.articleId);case 4:r=e.sent,t.productDetail=r,t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),a.close(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(e.t0),"error","vab-hey-message-error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getSetting:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r,n,o,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=t.$baseColorfullLoading(),a.next=4,Object(m["queryArticle"])({where:{parent:e.details}});case 4:n=a.sent,o=n.results,void 0===o?[]:o,i=_.merge(docDetails,t.docDetails),t.docDetails=i,t.setKey=moment(new Date).valueOf(),r.close(),t.init(),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 17:case"end":return a.stop()}}),a,null,[[0,14]])})))()},onSelect:function(e,t){var a=this;this.$nextTick((function(){a.$refs.DocDialog.form.category=t.category,a.$refs.DocDialog.form.type="add",a.$refs.DocDialog.form.projectId=a.detailsId,a.$refs.DocDialog.form.parent.objectId=t.dataRef.objectId}));var r=[];t.dataRef.children;r.push(t.eventKey),this.setSelectedKeys(r);var n=this.$route.path,o={details:this.detailsId,article:t.dataRef.objectId};this.delVisitedRoute(n),this.$router.push({path:"/doc/details",query:o})},newCategory:function(e,t){var a=this;return Object(o["a"])(l.a.mark((function e(){var r,n;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.$refs.DocDialog.form={type:"",name:"",parent:{objectId:"article",__type:"Pointer",className:"Article"},data:"",order:0,category:"",Icon:"",desc:""},e.prev=1,r=a.$baseColorfullLoading(),e.next=5,Object(m["getArticle"])(t);case 5:n=e.sent,a.$refs.DocDialog.form.projectId=a.detailsId,a.$refs.DocDialog.key=moment(new Date).valueOf(),a.$refs.DocDialog.form.parent.objectId=n.objectId,a.$refs.DocDialog.form.category=n.category,a.$refs.DocDialog.form.type="add",a.$refs.DocDialog.dialogFormVisible=!0,r.close(),e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](1);case 17:case"end":return e.stop()}}),e,null,[[1,15]])})))()},createDoc:function(e,t){var a=this;"edit"==t.type&&this.putDoc(t),delete t.type,this.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(o["a"])(l.a.mark((function e(r){var n,o,i,s,c;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}return n=a.$baseColorfullLoading(),o=t,e.next=5,Object(m["createArticle"])(o);case 5:i=e.sent,s=i.createdAt,c=void 0===s?"":s,n.close(),c.length&&a.init(),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editDoc:function(e,t){var a=this;return Object(o["a"])(l.a.mark((function r(){return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(o["a"])(l.a.mark((function e(r){var n,o;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return n=a.$baseColorfullLoading(),o={category:t.category,ico:t.ico,name:t.name,order:t.order},e.next=5,Object(m["putArticle"])(t.objectId,o);case 5:e.sent,n.close(),setTimeout((function(){a.getTree(a.$route.query),a.init()}),800),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},putDoc:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return delete e.createdAt,delete e.updatedAt,delete e.parent,delete e.objectId,delete e.createdAt,a.prev=5,r=t.$baseColorfullLoading(),a.next=9,Object(m["putArticle"])(t.editId,e);case 9:a.sent,t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),r.close(),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](5),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 17:case"end":return a.stop()}}),a,null,[[5,14]])})))()}})},f=p,h=(a("d5fc"),a("bdd7")),g=Object(h["a"])(f,r,n,!1,null,"b4bdbcca",null);t["default"]=g.exports},8951:function(e,t,a){"use strict";a("eccf")},a0a6:function(e,t,a){"use strict";a("3f60")},c0d35:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"vab-fullscreen":e.isFullscreen}},[r("div",{key:e.height,staticClass:"components"},[r("vab-dialog",{attrs:{show:e.activePopShow},on:{"update:show":function(t){e.activePopShow=t}}},[r("h3",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.$translateTitle("cloudTest.add"))+e._s(e.$translateTitle("cloudTest.report template"))+" ")]),r("div",{staticClass:"content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px",model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.Template name"),prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.category"),prop:"category"}},[r("el-input",{model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.Trade Names"),prop:"factory",required:""}},[r("el-input",{model:{value:e.ruleForm.factory,callback:function(t){e.$set(e.ruleForm,"factory",t)},expression:"ruleForm.factory"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.Template file"),prop:"file",required:""}},[r("el-upload",{key:e.momentKey,ref:"upload",staticClass:"upload-demo",attrs:{accept:".doc,.docx",action:"string","before-upload":e.onBeforeUploadImage,"file-list":e.fileList,"http-request":e.UploadImage,limit:1,"list-type":"text","on-change":e.fileChange},model:{value:e.ruleForm.file,callback:function(t){e.$set(e.ruleForm,"file",t)},expression:"ruleForm.file"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(" "+e._s(e.$translateTitle("application.selectfile"))+" ")])],1)],1)],1)],1),r("Vab-amis",{attrs:{schema:e.amisJson}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" "+e._s(e.$translateTitle("product.createnow"))+" ")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v(" "+e._s(e.$translateTitle("zetadevices.reset"))+" ")])],1)],1),r("vab-dialog",{attrs:{show:e.tempPopShow},on:{"update:show":function(t){e.tempPopShow=t}}},[r("h3",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.$translateTitle("cloudTest.report template"))+" ")]),r("div",{staticClass:"content"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.tempList,height:e.$baseTableHeight(3),size:e.lineHeight,stripe:e.stripe},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.number"),"show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.Template name"),prop:"name","show-overflow-tooltip":"",width:"auto"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.Template content"),width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{"preview-src-list":[e.$FileServe+a.icon],src:e.$FileServe+a.icon}})]}}])}),r("el-table-column",{attrs:{align:"center",flex:"right",label:e.$translateTitle("product.Template management"),"show-overflow-tooltip":"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handlekonva(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.mapping"))+" ")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.handleDelete(a,1)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.delete"))+" ")])]}}])})],1)],1)])],1),r("vab-query-form",[r("vab-query-form-left-panel",[r("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-input",{attrs:{placeholder:e.$translateTitle("cloudTest.Please enter the query content")},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:function(t){return e.fetchData(e.queryForm)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.search"))+" ")]),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleAdd}},[e._v(" "+e._s(e.$translateTitle("cloudTest.add"))+" ")])],1)],1)],1),r("vab-query-form-right-panel",[r("el-button",{staticStyle:{margin:"0 10px 10px 0 !important"},attrs:{type:"primary"},on:{click:e.clickFullScreen}},[r("vab-icon",{attrs:{icon:e.isFullscreen?"fullscreen-exit-fill":"fullscreen-fill"}}),e._v(" "+e._s(e.$translateTitle("cloudTest.full screen"))+" ")],1),r("el-popover",{ref:"popover",attrs:{"popper-class":"custom-table-checkbox",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("el-button",{staticStyle:{margin:"0 10px 10px 0 !important"},attrs:{type:"primary"}},[r("vab-icon",{attrs:{icon:"line-height"}}),e._v(" "+e._s(e.$translateTitle("cloudTest.size"))+" ")],1)]},proxy:!0}])},[r("el-radio-group",{model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},[r("el-radio",{attrs:{label:"medium"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.medium"))+" ")]),r("el-radio",{attrs:{label:"small"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.small"))+" ")]),r("el-radio",{attrs:{label:"mini"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.mini"))+" ")])],1)],1),r("el-popover",{attrs:{"popper-class":"custom-table-checkbox",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("el-button",{staticStyle:{margin:"0 0 10px 0 !important"},attrs:{icon:"el-icon-setting",type:"primary"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Draggable column"))+" ")])]},proxy:!0}])},[r("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[r("vab-draggable",e._b({attrs:{list:e.columns}},"vab-draggable",e.dragOptions,!1),e._l(e.columns,(function(t,a){return r("div",{key:t+a},[r("vab-icon",{attrs:{icon:"drag-drop-line"}}),r("el-checkbox",{attrs:{disabled:!0===t.disableCheck,label:t.label}},[e._v(" "+e._s(e.$translateTitle("cloudTest."+t.label))+" ")])],1)})),0)],1)],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.list,height:e.height,size:e.lineHeight,stripe:e.stripe},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.number"),"show-overflow-tooltip":"",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),e._l(e.finallyColumns,(function(t,a){return r("el-table-column",{key:a,attrs:{align:"center",label:e.$translateTitle("cloudTest."+t.label),prop:t.prop,"show-overflow-tooltip":"",sortable:t.sortable,width:t.width}})})),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.operate"),"show-overflow-tooltip":"",width:"185"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleManagement(a)}}},[e._v(" "+e._s(e.$translateTitle("product.Template management"))+" ")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.handleDelete(a,0)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.delete"))+" ")])]}}])})],2),r("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",page:e.queryForm.pageNo,"page-size":e.queryForm.pageSize,"page-sizes":e.queryForm.pageSizes,total:e.queryForm.total},on:{"update:page":function(t){return e.$set(e.queryForm,"pageNo",t)},"current-change":e.currentChange,"size-change":e.sizeChange}}),r("table-edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},n=[],o=a("fb07"),i=a("e97b"),s=a("d0d7"),l=a.n(s),c=(a("a0e0"),a("3dec"),a("f764"),a("5662"),a("16b8"),a("04d6"),a("79da"),a("9c6a"),a("7212")),u=a("58dd"),d=a("43ee"),m=a("289a"),p=a.n(m),f=a("5880"),h=a("07e2"),g={name:"ReportIndex",components:{VabDraggable:p.a,TableEdit:d["default"]},data:function(){var e=function(e,t,a){""===t?a(new Error("请上传文件")):a()};return{categoryTreeData:[],amisJson:{},fileList:[],momentKey:moment(new Date).valueOf(),ruleForm:{file:null,name:"",category:"",factory:"",date2:""},rules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],category:[{required:!0,message:"请输入所属品类",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],factory:[{required:!0,message:"请输入厂商名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],file:[{validator:e,trigger:"blur"}]},activePopShow:!1,tempPopShow:!1,isFullscreen:!1,border:!0,height:this.$baseTableHeight(0)-20,stripe:!0,lineHeight:"medium",checkList:["objectId","Template name","category","Trade Names","Creation time"],columns:[{label:"objectId",width:"auto",prop:"objectId",sortable:!0,disableCheck:!0},{label:"Template name",width:"auto",prop:"name",sortable:!0},{label:"category",width:"auto",prop:"category.name",sortable:!0},{label:"Trade Names",width:"auto",prop:"devType",sortable:!0},{label:"Creation time",width:"auto",prop:"createdAt",sortable:!0}],list:[],tempList:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",temprow:{},queryForm:{pageSizes:[10,20,30,50],limit:10,order:"-createdAt",keys:"count(*)",total:0,skip:0,pageNo:1,pageSize:10,name:""}}},computed:Object(i["a"])(Object(i["a"])({},Object(f["mapGetters"])({language:"settings/language",collapse:"settings/collapse"})),{},{dragOptions:function(){return{animation:600,group:"description"}},finallyColumns:function(){var e=this;return this.columns.filter((function(t){return e.checkList.includes(t.label)}))}}),watch:{language:{deep:!0,limit:!0,handler:function(e){}}},created:function(){this.fetchData(this.queryForm)},mounted:function(){this.categorytree()},methods:{categorytree:function(){var e=this;return Object(o["a"])(l.a.mark((function t(){var a,r,n,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level"],"where":{"parent": "d6ad425529"}}',parent:"parent"},t.prev=1,t.next=4,Object(h["post_tree"])(a);case 4:r=t.sent,n=r.results,o=void 0===n?[]:n,e.categoryTreeData=o,t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})))()},onBeforeUploadImage:function(e){var t=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"],a=t.includes(e.type),r=e.size/1024/1024<30;return a||this.$message.error("上传文件只能是doc/docx格式!"),r||this.$message.error("上传文件大小不能超过 30MB!"),this.momentKey=moment(new Date).valueOf(),a&&r},UploadImage:function(e){this.ruleForm.file=e.file},fileChange:function(e){this.$refs.upload.clearFiles(),this.logo=e.raw,this.fileList=[{name:e.name,url:e.url}]},submitUpload:function(){this.$refs.upload.submit()},handlePreview:function(e){},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(l.a.mark((function e(a){var r,n,o,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=24;break}return r=new FormData,n={identifier:"inspectionReportTemp",client:t.ruleForm.factory},r.append("devType",t.ruleForm.category),r.append("name",t.ruleForm.name),r.append("config",JSON.stringify(n)),r.append("file",t.ruleForm.file),o=t.$baseColorfullLoading(1),e.prev=8,e.next=11,Object(u["postReportFile"])(r);case 11:i=e.sent,i.result,t.$message.success(t.$translateTitle("cloudTest.Template created successfully")),t.activePopShow=!1,t.fetchData(t.queryForm),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](8),t.$message.error(t.$translateTitle("cloudTest.Template creation failed"));case 21:o.close(),e.next=25;break;case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}())},sizeChange:function(e){this.queryForm.limit=e,this.fetchData(this.queryForm)},currentChange:function(e){this.queryForm.skip=(e-1)*this.queryForm.limit,this.fetchData(this.queryForm)},resetForm:function(e){this.ruleForm.file=null,this.fileList=[],this.$refs[e].resetFields()},clickFullScreen:function(){this.isFullscreen=!this.isFullscreen,this.handleHeight()},handleHeight:function(){this.isFullscreen?this.height=this.$baseTableHeight(1)+210:this.height=this.$baseTableHeight(1)},handleAdd:function(){this.activePopShow=!0},handlekonva:function(e){this.$router.push({path:"/Topo",query:{productid:e.objectId,icon:e.icon,type:"Evidence"}})},handleManagement:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r,n,o,i,s;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.temprow=e,r={limit:50,skip:0,keys:"count(*)",where:{$relatedTo:{object:{__type:"Pointer",className:"Product",objectId:t.temprow.objectId},key:"children"}},order:"createdAt"},n=t.$baseColorfullLoading(1),a.prev=3,a.next=6,Object(c["queryProduct"])(r);case 6:o=a.sent,i=o.count,void 0===i?0:i,s=o.results,t.tempList=s,a.next=15;break;case 13:a.prev=13,a.t0=a["catch"](3);case 15:t.tempPopShow=!0,n.close();case 17:case"end":return a.stop()}}),a,null,[[3,13]])})))()},handleDelete:function(e,t){var a=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,Object(o["a"])(l.a.mark((function r(){return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["delProduct"])(e.objectId);case 2:if(r.sent,a.$baseMessage(a.$translateTitle("successfully deleted"),"success","vab-hey-message-success"),0!=t){r.next=9;break}return r.next=7,a.fetchData(a.queryForm);case 7:r.next=11;break;case 9:return r.next=11,a.handleManagement(a.temprow);case 11:case"end":return r.stop()}}),r)}))))},fetchData:function(e){var t=this;return Object(o["a"])(l.a.mark((function a(){var r,n,o,i,s,u;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={limit:e.limit,order:e.order,skip:t.queryForm.name?0:e.skip,keys:e.keys,include:"category",where:{name:t.queryForm.name?{$regex:t.queryForm.name}:{$ne:null},category:"d6ad425529",nodeType:1}},t.listLoading=!0,a.next=4,Object(c["queryProduct"])(r);case 4:n=a.sent,o=n.count,i=void 0===o?0:o,s=n.results,u=void 0===s?[]:s,u.forEach((function(e){e.createdAt=moment(e.createdAt).format("YYYY-MM-DD HH:mm:ss")})),t.list=u,t.queryForm.total=i,t.listLoading=!1;case 13:case"end":return a.stop()}}),a)})))()}}},b=g,v=a("bdd7"),y=Object(v["a"])(b,r,n,!1,null,null,null);t["default"]=y.exports},c0ff:function(e,t,a){},cee2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index-container"},[a("div",{staticClass:"index-content"},[e._v(" "+e._s(e.infoData)+" ")])])},n=[],o={name:"CloudTest",components:{},data:function(){return{infoData:"index"}},computed:{},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},i=o,s=(a("a0a6"),a("bdd7")),l=Object(s["a"])(i,r,n,!1,null,"36afbec4",null);t["default"]=l.exports},d5fc:function(e,t,a){"use strict";a("c0ff")},da40:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"doc-dialog"},[a("el-dialog",{key:e.key,attrs:{"append-to-body":"",title:"add"==e.form.type?e.$translateTitle("article.New category"):e.$translateTitle("article.edit category"),visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.handleClose}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("article.name"),"label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.parent.objectId.includes("article"),expression:"form.parent.objectId.includes('article')"}],attrs:{label:e.$translateTitle("article.category"),"label-width":e.formLabelWidth,prop:"category"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.parent.objectId.includes("article"),expression:"form.parent.objectId.includes('article')"}],attrs:{label:e.$translateTitle("article.Icon"),"label-width":e.formLabelWidth,prop:"ico"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.ico,callback:function(t){e.$set(e.form,"ico",t)},expression:"form.ico"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("article.order"),"label-width":e.formLabelWidth,prop:"order"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{autocomplete:"off",min:0,step:1},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:e.$translateTitle("article.parent"),"label-width":e.formLabelWidth,prop:"parent.objectId"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.parent.objectId,callback:function(t){e.$set(e.form.parent,"objectId",t)},expression:"form.parent.objectId"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("button.cancel"))+" ")]),"add"==e.form.type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$parent.createDoc("form",e.form,e.form.type)}}},[e._v(" "+e._s(e.$translateTitle("button.create"))+" ")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$parent.editDoc("form",e.form,e.form.type)}}},[e._v(" "+e._s(e.$translateTitle("button.modify"))+" ")])],1)],1)],1)},n=[],o={name:"DocDialog",data:function(){return{key:moment(new Date).valueOf(),dialogFormVisible:!1,form:{type:"",name:"",parent:{objectId:"article",__type:"Pointer",className:"Article"},data:"",order:0,category:"",Icon:"",desc:""},rules:{name:[{required:!0,message:"请输入文档名",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],category:[{required:!0,message:"请输入类别",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],ico:[],order:[{required:!0,type:"number",message:"请选择排序",trigger:"blur"}],"parent.objectId":[{required:!0,type:"string",message:"请输入父及",trigger:"blur"}]},formLabelWidth:"60px"}},computed:{},mounted:function(){},created:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{handleClose:function(e){this.$refs.form.resetFields(),this.form={type:"",name:"",parent:{objectId:"article",__type:"Pointer",className:"Article"},data:"",order:0,category:"",Icon:"",desc:""}}}},i=o,s=a("bdd7"),l=Object(s["a"])(i,r,n,!1,null,null,null);t["default"]=l.exports},eccf:function(e,t,a){},ed10:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dgiot-doc custom-table-container"},[a("div",{staticClass:"dialog"},[a("doc-dialog",{ref:"DocDialog"})],1),a("div",{staticClass:"dgiot-doc-header"},[a("vab-query-form",[a("vab-query-form-left-panel",[a("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:e.$translateTitle("product.title")},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:e.queryDoc}},[e._v(" "+e._s(e.$translateTitle("concentrator.search"))+" ")]),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.newCategory("add")}}},[e._v(" "+e._s(e.$translateTitle("article.New category"))+" ")])],1)],1)],1)],1)],1),a("div",{staticClass:"dgiot-doc-center"},[a("a-row",{staticClass:"dgiot-doc-center-row",attrs:{gutter:24}},e._l(e.HomePageForDetails,(function(t){return a("a-col",{key:t.objectId,staticClass:"dgiot-doc-center-row-antdcol",attrs:{lg:8,md:8,sm:12,span:6,xl:6,xs:24,xxl:4.5}},[a("a-card",{staticClass:"dgiot-doc-center-row-antdcol-card ant-card-bordered",attrs:{bordered:!1,hoverable:"",title:t.name}},[a("el-image",{attrs:{slot:"cover",alt:t.ico,src:t.ico},slot:"cover"},[a("div",{staticClass:"block image-slot",attrs:{slot:"error"},slot:"error"},[a("vab-empty",{attrs:{height:"100px",width:"100"}})],1)]),a("template",{staticClass:"ant-card-actions",slot:"actions"},[a("a-icon",{key:"edit",attrs:{type:"edit"},on:{click:function(a){return e.newCategory("edit",t)}}}),a("a-icon",{key:"delete",attrs:{type:"delete"},on:{click:function(a){return e.deletDoc(t)}}})],1),a("el-button",{attrs:{type:"success"},nativeOn:{click:function(a){return e.goChild(t)}}},[e._v(" "+e._s(e.$translateTitle("article.view"))+" ")])],2)],1)})),1),a("el-empty",{directives:[{name:"show",rawName:"v-show",value:0==e.HomePageForDetails.length,expression:"HomePageForDetails.length == 0"}],attrs:{"image-size":200}})],1)])},n=[],o=a("fb07"),i=a("e97b"),s=(a("16b8"),a("f764"),a("5662"),a("d0d7")),l=a.n(s),c=a("ed08"),u=a("0e9a"),d=a("ec86"),m={name:"DgiotDoc",components:Object(i["a"])({},Object(u["requireModule"])(a("3ea0"))),data:function(){return{iconStyle:{width:"22px",height:"22px"},queryForm:{name:""},HomePageForDetails:{},settingDetails:{}}},computed:{},mounted:function(){},created:function(){this.queryDoc()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{init:function(){this.$refs.DocDialog.$refs.form.resetFields(),this.$refs.DocDialog.dialogFormVisible=!1,this.queryDoc()},newCategory:function(e,t){this.$refs.DocDialog.dialogFormVisible=!0,t&&(this.$refs.DocDialog.form=t),this.$refs.DocDialog.form.type=e},deletDoc:function(e){var t=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,Object(o["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$baseColorfullLoading(),a.next=3,Object(d["delArticle"])(e.objectId);case 3:a.sent,r.close(),t.$baseMessage(t.$translateTitle("Maintenance.successfully deleted"),"success","vab-hey-message-success"),setTimeout((function(){t.queryDoc()}),1200);case 7:case"end":return a.stop()}}),a)}))))},queryDoc:function(){var e=this;return Object(o["a"])(l.a.mark((function t(){var a,r,n,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.HomePageForDetails=[],t.prev=1,a=e.$baseColorfullLoading(),t.next=5,Object(d["queryArticle"])({where:{parent:"article",name:e.queryForm.name.length?{$regex:e.queryForm.name}:{$ne:null}}});case 5:r=t.sent,n=r.results,o=void 0===n?[]:n,e.HomePageForDetails=o,a.close(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.$baseMessage(e.$translateTitle("alert.Data request error")+"".concat(t.t0),"error","vab-hey-message-error");case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},createDoc:function(e,t){var a=this;delete t.type,t.parent.objectId.includes("article")&&(t.projectId="pid_".concat(Object(c["uuid"])(6))),this.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(o["a"])(l.a.mark((function e(r){var n,o,i,s,c;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}return n=a.$baseColorfullLoading(),o=t,e.next=5,Object(d["createArticle"])(o);case 5:i=e.sent,s=i.createdAt,c=void 0===s?"":s,n.close(),c.length&&a.init(),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editDoc:function(e,t){var a=this;return Object(o["a"])(l.a.mark((function r(){return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(o["a"])(l.a.mark((function e(r){var n,o;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return n=a.$baseColorfullLoading(),o={category:t.category,ico:t.ico,name:t.name,order:t.order},e.next=5,Object(d["putArticle"])(t.objectId,o);case 5:e.sent,n.close(),setTimeout((function(){a.init()}),800),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},goChild:function(e){this.$router.push({path:"/doc/details",query:{details:e.projectId}})}}},p=m,f=(a("8951"),a("bdd7")),h=Object(f["a"])(p,r,n,!1,null,"8bd6f4a8",null);t["default"]=h.exports}}]);