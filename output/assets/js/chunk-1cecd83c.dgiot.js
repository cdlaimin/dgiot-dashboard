/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Wed Nov 17 2021 04:11:42 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cecd83c"],{"23e2":function(e,t,a){},3553:function(e,t,a){},5028:function(e,t,a){},"55a4":function(e,t,a){},5854:function(e,t,a){},"66a7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personpump"},[a("h3",[e._v("个人资质审核")]),a("div",{staticClass:"empower_top"},[a("div",{staticClass:"block_table"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{border:"","cell-style":e.rowClass,data:e.tableData,"header-cell-style":e.headClass,size:"mini",stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"企业名称",prop:"data.name"}}),a("el-table-column",{attrs:{label:"姓名",prop:"data.name"}}),a("el-table-column",{attrs:{label:"企业职务",prop:"data.job"}}),a("el-table-column",{attrs:{label:"出生日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$timestampToTime(t.row.data.birthday).substring(0,11))+" ")])]}}])}),a("el-table-column",{attrs:{label:"最高学历"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.education))])]}}])}),a("el-table-column",{attrs:{label:"主修专业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.professional))])]}}])}),a("el-table-column",{attrs:{label:"个人职称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.positional_titles))])]}}])}),a("el-table-column",{attrs:{label:"联系方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.userphone))])]}}])}),a("el-table-column",{attrs:{label:"从业时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$timestampToTime(t.row.data.start_time).substring(0,11))+" ")])]}}])}),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$utc2beijing(t.row.createdAt).substring(0,13))+" ")])]}}])}),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"info"}},[e._v(" 待审核 ")]):1==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 审核通过 ")]):2==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 审核未通过 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.data.auditDate)))])]}}])}),a("el-table-column",{attrs:{label:"审核意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.data.suggestion?a("span",[e._v(" "+e._s(t.row.data.suggestion)+" ")]):a("span")]}}])}),a("el-table-column",{attrs:{label:"审核管理",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.lookUp(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 审核 ")])]}}])})],1)],1),a("div",{staticClass:"block_page"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:"个人资质审核",visible:e.dialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.name)}})],1),a("el-form-item",{attrs:{label:"出生日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.birthday).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"毕业院校"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.graduate_institutions)}})],1),a("el-form-item",{attrs:{label:"身份证编号\n"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.identity)}})],1),a("el-form-item",{attrs:{label:"身份证正反面"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.frontimageUrl}})]),a("el-form-item",{attrs:{label:"家庭地址"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.regionData},model:{value:e.currentRow.data.addr,callback:function(t){e.$set(e.currentRow.data,"addr",t)},expression:"currentRow.data.addr"}})],1),a("el-form-item",{attrs:{label:"相关工作年限"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.working_seniority+"年")}})],1),a("el-form-item",{attrs:{label:"培训经历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.training_experience)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业职务"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.job)}})],1),a("el-form-item",{attrs:{label:"最高学历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.education)}})],1),a("el-form-item",{attrs:{label:"主修专业"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.professional)}})],1),a("el-form-item",{attrs:{label:"个人职称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.positional_titles)}})],1),a("el-form-item",{attrs:{label:"职业资质"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.joblicenseUrl}})]),a("el-form-item",{attrs:{label:"开始时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.start_time).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.userphone)}})],1),a("el-form-item",{attrs:{label:"相关从业经历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.practitioners_experience)}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:"认证审核",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"verifyFormRef",attrs:{"label-width":"100px",model:e.verifyForm,rules:e.verifyFormRules}},[a("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[a("el-radio-group",{model:{value:e.verifyForm.status,callback:function(t){e.$set(e.verifyForm,"status",t)},expression:"verifyForm.status"}},[a("el-radio",{attrs:{label:0}},[e._v(" 审核中 ")]),a("el-radio",{attrs:{label:2}},[e._v(" 审核未通过 ")]),a("el-radio",{attrs:{label:1}},[e._v(" 审核通过 ")])],1)],1),a("el-form-item",{attrs:{label:"审核意见",prop:"suggestion"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.verifyForm.suggestion,callback:function(t){e.$set(e.verifyForm,"suggestion",t)},expression:"verifyForm.suggestion"}})],1),a("h3",{staticStyle:{height:"40px","padding-left":"20px","line-height":"40px",border:"1px solid #cccccc"}},[e._v(" U盾认证信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾序列号",prop:"unumber"}},[a("el-input",{attrs:{placeholder:"请输入U盾序列号"},model:{value:e.verifyForm.unumber,callback:function(t){e.$set(e.verifyForm,"unumber",t)},expression:"verifyForm.unumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾KEY值",prop:"ukey"}},[a("el-input",{attrs:{placeholder:"请输入U盾KEY值"},model:{value:e.verifyForm.ukey,callback:function(t){e.$set(e.verifyForm,"ukey",t)},expression:"verifyForm.ukey"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm("verifyFormRef")}}},[e._v(" 提 交 ")])],1)])],1)},l=[],i=a("23a5"),n=(a("926a"),{data:function(){return{dialogVisible:!1,formInline:{name:"",status:"all",starttime:"",endtime:""},tableData:[],pagesize:10,start:0,total:0,regionData:i["regionData"],verifyForm:{status:1,unumber:"",ukey:"",suggestion:""},verifyFormRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}],suggestion:[{required:!0,message:"请填写认证审核意见",trigger:"blur"}],unumber:[{required:!0,message:"请填写U盾序列号",trigger:"blur"}],ukey:[{required:!0,message:"请填写U盾KEY",trigger:"blur"}]},currentRow:{data:{}},dialogFormVisible:!1}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.personEmpower()},methods:{headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},personEmpower:function(e){var t=this,a=this.$loading({background:"rgba(0, 0, 0, 0.5)"});this.$axiosWen.get("/classes/Dict",{params:{where:{type:"PersonAuthtication"},order:"-updatedAt"}}).then((function(e){if(a.close(),e&&e.results){var r=e.results;t.tableData=r}else t.tableData=r})).catch((function(e){a.close()}))},handleSizeChange:function(e){this.pagesize=e,this.personEmpower()},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.personEmpower()},lookUp:function(e){this.dialogFormVisible=!0,this.currentRow=e},examine:function(e){this.currentRow=e,this.dialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r=(new Date).getTime();t.currentRow.data.verifyStatus=t.verifyForm.status,t.currentRow.data.unumber=t.verifyForm.unumber,t.currentRow.data.ukey=t.verifyForm.ukey,t.currentRow.data.suggestion=t.verifyForm.suggestion,t.currentRow.data.auditDate=r,t.$axiosWen.put("classes/Dict/"+t.currentRow.objectId,{data:t.currentRow.data}).then((function(a){a&&(t.$message({type:"success",message:"审核成功"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.personEmpower())})).catch((function(e){t.$message({message:"审核失败"})}))}))}}}),s=n,o=(a("7065"),a("a57f"),a("2877")),d=Object(o["a"])(s,r,l,!1,null,"9b495e26",null);t["default"]=d.exports},"6af8":function(e,t,a){"use strict";a("55a4")},"6dd2f":function(e,t,a){},7065:function(e,t,a){"use strict";a("5028")},"753f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"u_shield"},[a("div",{staticStyle:{width:"360px",height:"100vh"}}),a("div",{staticClass:"u_shieldright",staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"U盾状态分类"}},[a("el-select",{attrs:{placeholder:"U盾状态分类"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"全部",value:"all"}})],1)],1),a("el-form-item",{attrs:{label:"应用实验室"}},[a("el-select",{attrs:{placeholder:"应用实验室"},model:{value:e.formInline.laboratory,callback:function(t){e.$set(e.formInline,"laboratory",t)},expression:"formInline.laboratory"}},[a("el-option",{attrs:{label:"全部",value:"all"}})],1)],1),a("el-form-item",{attrs:{label:"U盾编号"}},[a("el-input",{attrs:{placeholder:"U盾编号"},model:{value:e.formInline.unumber,callback:function(t){e.$set(e.formInline,"unumber",t)},expression:"formInline.unumber"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSubmit.apply(null,arguments)}}},[e._v(" 查询 ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.reseting.apply(null,arguments)}}},[e._v(" 查询 ")])],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.uShield}},[e._v(" U盾扫描 ")])],1),a("div",{staticClass:"blocktable"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"U盾序列号",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.SerialNumber))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"证书拥有者",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.Subject))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"颁发机构",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.Issuer))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"数据签名","show-overflow-tooltip":"",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.bstrCertB64))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"发证时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.beforeDate))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"到期时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.afterDate))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"分配状态",width:"100"}}),a("el-table-column",{attrs:{align:"center",label:"授权单位",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"授权个人",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"U盾管理",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit",size:"small",type:"primary"},on:{click:function(a){return e.editorUdun(t.row)}}}),a("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger"}})]}}])})],1)],1),a("div",{staticClass:"blocktable"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:"U盾设备赋权",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ushieldform",attrs:{model:e.ushieldform,rules:e.ushieldrule,size:"small"}},[a("p",{staticStyle:{height:"40px","margin-top":"0","font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" U盾详情信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾序列号","label-width":e.formLabelWidth,prop:"unumber"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾序列号，插入U盾自动填充",readonly:""},model:{value:e.ushieldform.unumber,callback:function(t){e.$set(e.ushieldform,"unumber",t)},expression:"ushieldform.unumber"}})],1),a("el-form-item",{attrs:{label:"证书拥有者","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾申办人姓名，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.name,callback:function(t){e.$set(e.ushieldform,"name",t)},expression:"ushieldform.name"}})],1),a("el-form-item",{attrs:{label:"发证日期","label-width":e.formLabelWidth,prop:"startdate"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾正式适用日期，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.startdate,callback:function(t){e.$set(e.ushieldform,"startdate",t)},expression:"ushieldform.startdate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"颁发机构","label-width":e.formLabelWidth,prop:"bidunit"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"取证设备颁发机构",readonly:""},model:{value:e.ushieldform.bidunit,callback:function(t){e.$set(e.ushieldform,"bidunit",t)},expression:"ushieldform.bidunit"}})],1),a("el-form-item",{attrs:{label:"到期日期","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾有效期到期日期，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.enddate,callback:function(t){e.$set(e.ushieldform,"enddate",t)},expression:"ushieldform.enddate"}})],1),a("el-form-item",{attrs:{label:"Ukey证书","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入Ukey证书信息",readonly:"",rows:4,type:"textarea"},model:{value:e.ushieldform.ukey,callback:function(t){e.$set(e.ushieldform,"ukey",t)},expression:"ushieldform.ukey"}})],1)],1)],1),a("p",{directives:[{name:"show",rawName:"v-show",value:""!=e.ushieldid,expression:"ushieldid != ''"}],staticStyle:{height:"40px","font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" U盾认证信息 ")]),a("el-row",{directives:[{name:"show",rawName:"v-show",value:""!=e.ushieldid,expression:"ushieldid != ''"}]},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"授权单位","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择通过资质认证的企业"},model:{value:e.ushieldform.company,callback:function(t){e.$set(e.ushieldform,"company",t)},expression:"ushieldform.company"}},e._l(e.companylist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.empower.abbrname,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"授权个人","label-width":e.formLabelWidth}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"请选择通过资质认证的个人"},model:{value:e.ushieldform.username,callback:function(t){e.$set(e.ushieldform,"username",t)},expression:"ushieldform.username"}},e._l(e.personlist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.name,value:e.id}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addUshield.apply(null,arguments)}}},[e._v(" 确 定 ")])],1)],1)],1)},l=[],i=(a("7db0"),a("d3b7"),a("b0c0"),a("926a")),n=a("1cd8"),s=(a("61f7"),{components:{},data:function(){return{formInline:{unumber:"",status:"all",laboratory:""},tableData:[],dialogFormVisible:!1,formLabelWidth:"120px",ushieldform:{name:"",unumber:"",bidunit:"",issueunit:"",phone:"",ukey:"",startdate:"",enddate:"",address:"",company:"",username:""},ushieldrule:{name:[{required:!0,message:"申办人姓名不能为空",trigger:"blur"}],unumber:[{required:!0,message:"U盾序列号不能为空",trigger:"blur"}],bidunit:[{required:!0,message:"申办单位名称不能为空",trigger:"blur"}],startdate:[{required:!0,message:"发证日期不能为空",trigger:"blur"}],address:[{required:!0,message:"申办单位地址不能为空",trigger:"blur"}]},companylist:[],personlist:[],pagesize:10,start:0,total:0,ushieldid:""}},mounted:function(){this.getUshield()},methods:{getUshield:function(e){var t=this;0==e&&(this.start=0);var a=Parse.Object.extend("Devices"),r=new Parse.Query(a);r.skip(this.start),r.limit(this.pagesize),r.equalTo("basedata.type","ukey"),r.count().then((function(e){t.total=e,r.find().then((function(e){t.tableData=e}))}),(function(e){Object(i["returnLogin"])(e)}))},editorUdun:function(e){var t=this;this.ushieldid=e.id,this.dialogFormVisible=!0;var a=Parse.Object.extend("Devices"),r=new Parse.Query(a);r.get(this.ushieldid).then((function(e){t.ushieldform.unumber=e.attributes.basedata.SerialNumber,t.ushieldform.name=e.attributes.basedata.Subject,t.ushieldform.startdate=e.attributes.basedata.beforeDate,t.ushieldform.enddate=e.attributes.basedata.afterDate,t.ushieldform.bidunit=e.attributes.basedata.Issuer,t.ushieldform.ukey=e.attributes.basedata.bstrCertB64}),(function(e){Object(i["returnLogin"])(e)}))},uShield:function(){var e=this;this.dialogFormVisible=!0,this.ushieldid="",Object(n["getCert"])().then((function(t){t&&(e.ushieldform.unumber=t.SerialNumber,e.ushieldform.name=t.Subject,e.ushieldform.startdate=t.beforeDate,e.ushieldform.enddate=t.afterDate,e.ushieldform.bidunit=t.Issuer,e.ushieldform.ukey=t.bstrCertB64)})).catch((function(t){e.$message.error(t.error)}))},getCompany:function(){var e=this,t=Parse.Object.extend("Authentication"),a=new Parse.Query(t);a.equalTo("status","Pass"),a.find().then((function(t){e.companylist=t}),(function(e){Object(i["returnLogin"])(e)}))},getPerson:function(){var e=this,t=Parse.Object.extend("PersonAuthtication"),a=new Parse.Query(t);a.equalTo("status","Pass"),a.find().then((function(t){e.personlist=t}),(function(e){Object(i["returnLogin"])(e)}))},addUshield:function(){var e=this,t=Parse.Object.extend("Product"),a=new Parse.Query(t);a.equalTo("devType","ukey"),a.find().then((function(a){var r=Parse.Object.extend("Devices"),l=new r,n=new Parse.Query(r);n.equalTo("basedata.SerialNumber",e.ushieldform.unumber),n.find().then((function(r){if(0==r.length){""!=e.ushieldid&&(l.id=e.ushieldid);Parse.Object.extend("Product");var n=new t;n.id=a[0].id,l.set("product",n),l.set("basedata",{SerialNumber:e.ushieldform.unumber,Subject:e.ushieldform.name,beforeDate:e.ushieldform.startdate,afterDate:e.ushieldform.enddate,Issuer:e.ushieldform.bidunit,bstrCertB64:e.ushieldform.ukey,type:"ukey"}),l.save().then((function(t){t&&(e.$message.success("U盾创建成功"),e.ushieldid="",e.dialogFormVisible=!1)}),(function(e){Object(i["returnLogin"])(e)}))}else e.$message.error("此U盾已存在")}),(function(e){Object(i["returnLogin"])(e)}))}),(function(e){Object(i["returnLogin"])(e)}))}}}),o=s,d=(a("6af8"),a("2877")),c=Object(d["a"])(o,r,l,!1,null,"7515853f",null);t["default"]=c.exports},"8c3f":function(e,t,a){},"930e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"testbedpump"},[a("Pumpdepartment",{staticStyle:{"flex-shrink":"0",width:"360px",height:"100vh",padding:"10px",overflow:"scroll"},on:{pumpDetail:e.getPumpNode}}),a("div",{staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("div",{staticClass:"bedtop"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"检测台状态"}},[a("el-select",{attrs:{placeholder:"检测台状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),a("el-option",{attrs:{label:"良好",value:"fine"}}),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),a("el-form-item",{attrs:{label:"检测台"}},[a("el-input",{attrs:{placeholder:"检测台"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.getBedtable(e.departmentid)}}},[e._v(" 查询 ")])],1)],1)],1),a("div",{staticClass:"bedtable"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{border:"",data:e.bedData},on:{"selection-change":e.handleSelectionBed}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",label:"序号",prop:"index",type:"index",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"检测台名称",prop:"basedata.name",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"所属实验室",prop:"basedata.laboratory",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"检测台编号",prop:"basedata.number",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"检测台型号",prop:"basedata.model",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"生产厂家",prop:"basedata.factory",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"健康状况"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.basedata?a("p",["healthy"==t.row.basedata.state?a("span",[e._v("健康")]):"fine"==t.row.basedata.state?a("span",[e._v("良好")]):"commonly"==t.row.basedata.state?a("span",[e._v(" 一般 ")]):e._e()]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["init"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 运行中 ")]):e._e(),"ONLINE"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"编辑",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.showUpdateDeviceForm(t.$index)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v(" 删除 ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.devicesDetail(t.row)}}},[e._v(" 查看设备 ")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[1,5,10],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("div",{staticClass:"addbeddialog"},[a("el-dialog",{attrs:{"append-to-body":!0,title:"测试台体"+e.actionTypeMap[e.actionType],visible:e.beddialog},on:{"update:visible":function(t){e.beddialog=t}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("label",{attrs:{for:""}},[e._v("测试台名称:")]),a("el-input",{staticStyle:{width:"200px"},model:{value:e.testbedname,callback:function(t){e.testbedname=t},expression:"testbedname"}})],1),a("div",{staticClass:"devicecompany"},[a("el-form",{attrs:{inline:!0,model:e.devicelist}},[a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{on:{change:e.selectCompany},model:{value:e.devicelist.departmentid,callback:function(t){e.$set(e.devicelist,"departmentid",t)},expression:"devicelist.departmentid"}},e._l(e.departmentlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{model:{value:e.devicelist.testbedid,callback:function(t){e.$set(e.devicelist,"testbedid",t)},expression:"devicelist.testbedid"}},e._l(e.testbedlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})})),1)],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{border:"",data:e.devicesData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"100"}}),a("el-table-column",{attrs:{align:"center",label:"设备类别"},scopedSlots:e._u([{key:"default",fn:function(t){return["DTU"==t.row.attributes.basedata.type?a("span",[e._v(" 控制器 ")]):"PC"==t.row.attributes.basedata.type?a("span",[e._v(" 控制台 ")]):a("span",[e._v("摄像头")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.devicepagesize,"page-sizes":[10,20,50],total:e.devicetotal},on:{"current-change":e.handleDeviceCurrentChange,"size-change":e.handleDeviceSizeChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.beddialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addtestbed(e.testbedid)}}},[e._v(" 确 定 ")])],1)],1)],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:e.testbedname+"的设备",visible:e.bedDevicedialog,width:"80%"},on:{"update:visible":function(t){e.bedDevicedialog=t}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"deviceheader"},[a("div",{staticClass:"headerone"},[e._v(" 网关设备 ")]),a("div",{staticClass:"headertwo"},[e._v(" 网络层级:2 ")]),a("div",{staticClass:"headerthree"},[e._v(" 网关编号:11223334455 ")]),a("div",{staticClass:"headerfourth"},[e._v(" 网关状态: "),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.gatewaystatus,callback:function(t){e.gatewaystatus=t},expression:"gatewaystatus"}})],1)]),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{border:"",data:e.bedDevicesData}},[a("el-table-column",{attrs:{align:"center",label:"设备类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"网络设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"设备厂商"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.factory))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"通信协议"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.agreement))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"网络层级"}}),a("el-table-column",{attrs:{align:"center",label:"设备状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"投运时间"}}),a("el-table-column",{attrs:{align:"center",label:"操作"}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"devicetwo"},[a("div",{staticClass:"devicetwoone"},[e._v(" 传感器 ")]),a("div",{staticClass:"devicetwotwo"},[e._v(" 传感器数量:6 ")]),a("div",{staticClass:"devicetwothree"},[e._v(" 在线设备:10 ")]),a("div",{staticClass:"devicetwofourth"},[e._v(" 故障设备:2 ")])]),a("el-table",{ref:"multipleTable1",staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.bedDevicesData},on:{"selection-change":e.deviceSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",label:"传感器名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"传感器编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"设备厂家"}}),a("el-table-column",{attrs:{align:"center",label:"设备型号"}}),a("el-table-column",{attrs:{align:"center",label:"设备协议"}}),a("el-table-column",{attrs:{align:"center",label:"网络层级"}}),a("el-table-column",{attrs:{align:"center",label:"内网编号"}}),a("el-table-column",{attrs:{align:"center",label:"最新采集时间"}}),a("el-table-column",{attrs:{align:"center",label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bedDevicedialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.bedDevicedialog=!1}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:"检测台"+e.actionTypeMap[e.actionType],visible:e.addbeddialogNew,width:"50%"},on:{"update:visible":function(t){e.addbeddialogNew=t},open:e.diologOpen}},[a("div",[a("el-form",{ref:"addbedFormRef",staticClass:"demo-ruleForm",attrs:{"label-width":"100px",model:e.addbedForm,rules:e.addbedFormrule}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"检测台名称",prop:"name"}},[a("el-input",{model:{value:e.addbedForm.name,callback:function(t){e.$set(e.addbedForm,"name",t)},expression:"addbedForm.name"}})],1),a("el-form-item",{attrs:{label:"检测台编号"}},[a("el-input",{model:{value:e.addbedForm.number,callback:function(t){e.$set(e.addbedForm,"number",t)},expression:"addbedForm.number"}})],1),a("el-form-item",{attrs:{label:"生产厂家"}},[a("el-input",{model:{value:e.addbedForm.factory,callback:function(t){e.$set(e.addbedForm,"factory",t)},expression:"addbedForm.factory"}})],1),a("el-form-item",{attrs:{label:"控制台信息"}},[e.addbedForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addbedForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{enctype:"multipart/form-data",method:"POST"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})])])],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"网关选择",prop:"product"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择台体所属网关"},model:{value:e.addbedForm.product,callback:function(t){e.$set(e.addbedForm,"product",t)},expression:"addbedForm.product"}},e._l(e.productlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:"所属实验室",prop:"laboratory"}},[a("el-select",{attrs:{placeholder:"请选择所属实验室"},model:{value:e.addbedForm.laboratory,callback:function(t){e.$set(e.addbedForm,"laboratory",t)},expression:"addbedForm.laboratory"}},[a("el-option",{key:"99",attrs:{label:"实验室1",value:99}}),e._l(e.departmentList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"测试台型号"}},[a("el-input",{model:{value:e.addbedForm.model,callback:function(t){e.$set(e.addbedForm,"model",t)},expression:"addbedForm.model"}})],1),a("el-form-item",{attrs:{label:"测试台状况",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择测试台状况"},model:{value:e.addbedForm.state,callback:function(t){e.$set(e.addbedForm,"state",t)},expression:"addbedForm.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),a("el-option",{attrs:{label:"良好",value:"fine"}}),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.addbedForm.desc,callback:function(t){e.$set(e.addbedForm,"desc",t)},expression:"addbedForm.desc"}})],1)],1)])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v(" 计算机配置 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机名称"}},[a("el-select",{attrs:{placeholder:"请选择计算机名称"},model:{value:e.addbedForm.computername,callback:function(t){e.$set(e.addbedForm,"computername",t)},expression:"addbedForm.computername"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机key"}},[a("el-select",{attrs:{placeholder:"请选择计算机key"},model:{value:e.addbedForm.computerkey,callback:function(t){e.$set(e.addbedForm,"computerkey",t)},expression:"addbedForm.computerkey"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addbeddialogNew=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"update"==e.actionType,expression:"actionType == 'update'"}],attrs:{type:"primary"},on:{click:e.doUpdateDevice}},[e._v(" 确 定 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"add"==e.actionType,expression:"actionType == 'add'"}],attrs:{type:"primary"},on:{click:function(t){return e.Determine("addbedForm")}}},[e._v(" 确 定 ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:"提示",visible:e.disposeVisible,width:"50%"},on:{"update:visible":function(t){e.disposeVisible=t}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.bedForm,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入测试台名称搜索"},model:{value:e.bedForm.name,callback:function(t){e.$set(e.bedForm,"name",t)},expression:"bedForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.getAllBed.apply(null,arguments)}}},[e._v(" 搜 索 ")])],1)],1)],1),a("div",{staticClass:"dispose",staticStyle:{display:"flex"}},[a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("测试台体")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUBed}},[e._v(" 清空 ")])],1),e._l(e.alltestbed,(function(t,r){return a("div",{key:r,staticClass:"text item"},[a("el-radio",{attrs:{label:t.id},model:{value:e.updatedId,callback:function(t){e.updatedId=t},expression:"updatedId"}},[e._v(" "+e._s(t.attributes.name)+" ")])],1)}))],2),a("div",{staticStyle:{margin:"0 20px","text-align":"center"}},[a("span",{staticClass:"svg-container",staticStyle:{"line-height":"300px"}},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"relation"}})],1)]),a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实验仪器")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleCheckAllChange}},[e._v(" 全选 ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUpDevice}},[e._v(" 清空 ")])],1),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkdevice,callback:function(t){e.checkdevice=t},expression:"checkdevice"}},e._l(e.allpumpdevice,(function(t,r){return a("el-checkbox",{key:r,staticStyle:{display:"block"},attrs:{label:t.id}},[e._v(" "+e._s(t.attributes.devaddr)+" ")])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.disposeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addTestRelation.apply(null,arguments)}}},[e._v(" 确 定 ")])],1)])],1)},l=[],i=(a("4de4"),a("d3b7"),a("b0c0"),a("7db0"),a("d81d"),a("ac1f"),a("1276"),a("c19f"),a("5cc69"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("a9e3"),a("5d752")),n=a("926a"),s={components:{Pumpdepartment:i["default"]},data:function(){return{testbedSelection:[],disposeVisible:!1,addbedForm:{name:"",state:"",laboratory:"",factory:"",number:"",imgsrc:"",desc:"",product:"",computername:"",computerkey:"",model:""},addbedFormrule:{name:[{required:!0,message:"请输入测试台名称",trigger:"blur"}],laboratory:[{required:!0,message:"请选择所属实验室",trigger:"change"}],state:[{required:!0,message:"请选择测试台状况",trigger:"change"}],product:[{required:!0,message:"请选择测试台网关",trigger:"change"}]},addbeddialogNew:!1,formInline:{laboratory:"",name:"",state:""},gatewaystatus:!1,bedData:[],devicesData:[],beddialog:!1,multipleSelection:[],testbedname:"",testbedid:"",testbeddevices:[],origindevices:[],pagesize:10,total:0,start:0,devicelist:{departmentid:"",testbedid:""},departmentid:"",devicesstart:0,bedDevicedialog:!1,devicepagesize:10,devicestart:0,devicetotal:0,bedDevicesData:[],multipleTable1:[],testbedlist:[],departmentList:[],departmentlist:[],alltestbed:[],allpumpdevice:[],updatedId:"",checkdevice:[],bedForm:{name:""},productlist:[],actionTypeMap:{add:"新增",update:"更新"},actionType:"",curDeviceId:""}},mounted:function(){this.getDepartmentList(),this.getDevices()},methods:{getDevices:function(){var e=this;this.$axiosWen.get("iotapi/classes/Device",{params:{include:"product",order:"-createdAt",where:{}}}).then((function(t){t&&t.results?e.bedData=t.results.filter((function(e){return"shuwa_iot_hub"==e.product.devType})):e.bedData=[]})).catch((function(e){})),this.$axiosWen.get("iotapi/classes/Product").then((function(t){t&&t.results&&(e.productlist=t.results)}))},getAllBed:function(){var e=this,t=Parse.Object.extend("Testbed"),a=new Parse.Query(t);a.ascending(["-createdAt","name"]),a.limit(1e3),""!=this.bedForm.name&&a.matches("name",this.bedForm.name,"i"),a.find().then((function(t){e.alltestbed=t}),(function(e){Object(n["returnLogin"])(e)}))},getAllPumpDevice:function(){var e=this,t=Parse.Object.extend("PumpDevice"),a=new Parse.Query(t);a.equalTo("basedata.type","PUMP_DTU"),a.ascending("createdAt"),a.limit(1e3),a.find().then((function(t){e.allpumpdevice=t}),(function(e){Object(n["returnLogin"])(e)}))},handleCheckedCitiesChange:function(e){},clearUBed:function(){this.updatedId=""},handleCheckAllChange:function(e){var t=this;this.allpumpdevice.map((function(e){t.checkdevice.push(e.id)}))},testBedAdd:function(){this.actionType="add",this.addbedForm={},this.addbeddialogNew=!0},diologOpen:function(){var e=this;setTimeout((function(){e.$refs["addbedFormRef"].resetFields()}),100)},clearUpDevice:function(){this.checkdevice=[]},addTestRelation:function(){var e=this,t=Parse.Object.extend("Testbed"),a=new t,r=Parse.Object.extend("PumpDevice"),l=new r;if(""!=this.updatedId){a.id=this.updatedId;var i=a.relation("devices");this.checkdevice.map((function(e){l.set("objectId",e),i.add(l)})),a.save().then((function(t){t&&(e.$message.success("设备关联成功"),e.disposeVisible=!1,e.checkdevice=[],e.updatedId="",e.getBedtable(e.departmentid))}),(function(e){Object(n["returnLogin"])(e)}))}},getDepartmentList:function(){var e=this,t=Parse.Object.extend("PumpDepartment"),a=new Parse.Query(t);a.equalTo("org_type","实验室"),a.find().then((function(t){e.departmentList=t}),(function(e){Object(n["returnLogin"])(e)}))},Determine:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return t.$message.error("有必填项未填写"),!1;if(""!=t.addbedForm.imgsrc){var r=Parse.Object.extend("Testbed"),l=new r,i=Parse.Object.extend("PumpDepartment"),s=new i;s.id=t.addbedForm.laboratory,l.set("department",s),l.set("status","init"),l.set("name",t.addbedForm.name),l.set("model",t.addbedForm.model),l.set("number",t.addbedForm.number),l.set("factory",t.addbedForm.factory),l.set("state",t.addbedForm.state),l.set("imgsrc",t.addbedForm.imgsrc),l.set("deviceaddr",t.addbedForm.product),l.save().then((function(a){a&&(t.$message.success("测试台体新增成功"),t.$refs[e].resetFields(),t.addbeddialogNew=!1,t.getBedtable(t.departmentid))}),(function(e){Object(n["returnLogin"])(e)}))}else t.$message.error("请上传测试台信息")}))},showUpdateDeviceForm:function(e){this.actionType="update";var t=this.bedData[e],a=t["basedata"];a||(a={}),t["objectId"]?this.curDeviceId=t["objectId"]:this.curDeviceId="",this.addbedForm={name:a.name,state:a.state,laboratory:a.laboratory,factory:a.factory,number:a.number,imgsrc:a.imgsrc,desc:a.desc,computername:a.computername,computerkey:a.computerkey,model:a.model},this.addbedForm.product=t.product.objectId,this.addbeddialogNew=!0},doUpdateDevice:function(){var e=this;this.curDeviceId?this.$refs["addbedFormRef"].validate((function(t){if(!t)return e.$message.error("有必填项未填写"),!1;""!=e.addbedForm.imgsrc?e.$axiosWen.put("classes/Device/"+e.curDeviceId,{basedata:e.addbedForm}).then((function(t){e.addbeddialogNew=!1,e.$message({type:"success",message:"更新成功!"}),e.getDevices()})).catch((function(e){})):e.$message.error("请上传测试台信息")})):this.$message.error("curDeviceId null")},upload:function(e){if(e){var t=e.target.files[0],a=t.name,r=e.target.files[0].type,l=(t.type.split("/")[0],"image/jpeg"===r||"image/JPEG"===r||"image/png"===r||"image/PNG"===r||"image/bpm"===r||"image/BPM"===r);if(!l)return this.$message({message:"只能上传图片文件",type:"error"}),!1;var i=new FileReader;i.readAsDataURL(t);var n=this;i.onloadend=function(){var e=i.result,t=n.dataURItoBlob(e);n.uploadFile(t,a)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),l=new Uint8Array(r),i=0;i<t.length;i++)l[i]=t.charCodeAt(i);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",this.$Cookies.get("appids")),r.append("scene",this.$Cookies.get("appids")),r.append("auth_token",this.$Cookies.get("access_token_pump"));this.$http.post(this.$Cookies.get("fileserver"),r).then((function(e){e&&(a.addbedForm.imgsrc=e.body.url)})).catch((function(e){a.$message.error(e)}))},getPumpNode:function(e){this.departmentid=e.objectId,this.getBedtable(this.departmentid)},devicesDetail:function(e){var t=e["devaddr"];this.$router.push({path:"/devicemanage/evidence_devices",query:{devaddr:t}})},disposeTestbed:function(){this.disposeVisible=!0},handleEdit:function(e){var t=this;this.testbedid=e,this.disposeVisible=!0;var a=Parse.Object.extend("Testbed"),r=new Parse.Query(a),l=Parse.Object.extend("PumpDevice"),i=new Parse.Query(l);this.updatedId=e,r.get(e).then((function(e){var a=e.relation("devices"),r=a.query();i.equalTo("basedata.type","PUMP_DTU"),i.ascending("createdAt"),t.devicesData=i,r.find().then((function(e){e.map((function(e){t.checkdevice.push(e.id)}))}))}))},selectCompany:function(e){var t=this;this.devicelist.testbedid="";var a=Parse.Object.extend("PumpDepartment"),r=new Parse.Query(a);r.equalTo("ParentId",e),r.find().then((function(e){t.testbedlist=e}))},deviceSelect:function(e){this.multipleTable1=e},handleDeviceSizeChange:function(e){this.devicepagesize=e,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDeviceCurrentChange:function(e){this.devicestart=(e-1)*this.devicepagesize,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除当前测试台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.get(e).then((function(e){e.destroy().then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getBedtable(t.departmentid)}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getBedtable:function(e){var t=this,a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.limit(this.pagesize),r.skip(this.start),r.ascending(["-createdAt","name"]),e&&r.equalTo("department",e),""!=this.formInline.state&&r.equalTo("state",this.formInline.state),""!=this.formInline.name&&r.equalTo("name",this.formInline.name),this.formInline.laboratory&&r.equalTo("department",this.formInline.laboratory),r.count().then((function(e){t.total=e,r.find().then((function(e){t.bedData=e}))}))},addTest:function(){var e=this;this.testbedid="",this.beddialog=!0;var t=Parse.Object.extend("PumpDevice"),a=new Parse.Query(t);a.equalTo("basedat.type","PUMP_DTU"),a.skip(this.devicestart),a.limit(this.devicepagesize),a.count().then((function(t){e.devicetotal=t,a.find().then((function(t){e.devicesData=t}),(function(e){}))}));var r=Parse.Object.extend("PumpDepartment"),l=new Parse.Query(r);l.equalTo("org_type","泵单位"),l.find().then((function(t){e.departmentlist=t}))},handleSelectionBed:function(e){this.testbedSelection=e},deleteTestBed:function(){var e=this,t=[];0!=this.testbedSelection.length?this.$confirm("此操作将永久删除选中检测台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.testbedSelection.map((function(a){t.push(new Promise((function(e,t){var r=Parse.Object.extend("Testbed"),l=new r;return l.id=a.id,l.destroy().then((function(t){e(t)}),(function(e){t(e.message)}))}))),Promise.all(t).then((function(t){e.$message({message:"删除成功",type:"success"}),t.length==e.testbedSelection.length&&e.getBedtable(e.departmentid)})).catch((function(t){e.$message({message:t,type:"error"})}))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message.warning("请勾选要删除的检测台体")},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map((function(e){t.multipleSelection.push(e.id)}))},addtestbed:function(e){var t=this;if(""==e){var a=Parse.Object.extend("Testbed"),r=new a;r.set("name",this.testbedname),r.set("status","init");var l=r.relation("devices"),i=Parse.Object.extend("PumpDevice"),n=new i,s=Parse.Object.extend("PumpDepartment"),o=new s;o.id=this.devicelist.testbedid,r.set("department",o),this.multipleSelection.map((function(e){n.set("objectId",e),l.add(n)})),r.save().then((function(e){t.$message({message:"添加成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid),t.testbedname=""}))}else{a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.get(e).then((function(e){e.set("name",t.testbedname);var a=e.relation("devices"),l=Parse.Object.extend("PumpDevice"),i=new l,n=Parse.Object.extend("PumpDepartment"),s=new n;s.id=t.devicelist.testbedid,r.set("department",s),t.multipleSelection.map((function(e){t.testbeddevices.includes(e)||(i.set("objectId",e),a.add(i)),t.testbeddevices.map((function(e){t.multipleSelection.includes(e)||(i.set("objectId",e),a.remove(i))}))})),e.save().then((function(e){t.$message({message:"修改成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid)}))}))}},handleSizeChange:function(e){this.pagesize=e,this.getBedtable(this.departmentid)},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.getBedtable(this.departmentid)}}},o=s,d=(a("e7bc"),a("da40c"),a("2877")),c=Object(d["a"])(o,r,l,!1,null,"f3b90d02",null);t["default"]=c.exports},a57f:function(e,t,a){"use strict";a("8c3f")},b244:function(e,t,a){"use strict";a("23e2")},c69d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CompanyAuthentication"},[a("h3",[e._v("企业资质审核")]),a("div",{staticClass:"CompanyAuthentication_top"},[a("div",{staticClass:"pump_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"","cell-style":e.rowClass,data:e.tableData,"header-cell-style":e.headClass}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"企业名称",prop:"data.CompanyAuthentication.abbrname"}}),a("el-table-column",{attrs:{label:"统一社会信用代码",prop:"data.CompanyAuthentication.creditcode"}}),a("el-table-column",{attrs:{label:"法定代表人姓名",prop:"data.CompanyAuthentication.businessname",width:"150"}}),a("el-table-column",{attrs:{label:"法定代表人身份证号码",prop:"data.CompanyAuthentication.identity"}}),a("el-table-column",{attrs:{label:"注册地址",prop:"data.CompanyAuthentication.addr"}}),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{label:"实验室名称",prop:"data.Laboratory.laboratoryInfo.name"}}),a("el-table-column",{attrs:{label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.auditDate))])]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"info"}},[e._v(" 待审核 ")]):1==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 审核通过 ")]):2==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 审核未通过 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核意见",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.suggestion))])]}}])}),a("el-table-column",{attrs:{label:"审核管理",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.lookUp(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 审核 ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[10,200,30,50],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:"认证审核",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"verifyFormRef",attrs:{"label-width":"100px",model:e.verifyForm,rules:e.verifyFormRules}},[a("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[a("el-radio-group",{model:{value:e.verifyForm.status,callback:function(t){e.$set(e.verifyForm,"status",t)},expression:"verifyForm.status"}},[a("el-radio",{attrs:{label:0}},[e._v(" 待审核 ")]),a("el-radio",{attrs:{label:2}},[e._v(" 审核未通过 ")]),a("el-radio",{attrs:{label:1}},[e._v(" 审核通过 ")])],1)],1),a("el-form-item",{attrs:{label:"审核意见",prop:"suggestion"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.verifyForm.suggestion,callback:function(t){e.$set(e.verifyForm,"suggestion",t)},expression:"verifyForm.suggestion"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm("verifyFormRef")}}},[e._v(" 提 交 ")])],1)]),e.dialogFormVisible?a("el-dialog",{attrs:{"append-to-body":!0,title:"企业资质审核",visible:e.dialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"认证信息",name:"first"}},[a("el-form",{attrs:{"label-width":"160px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.abbrname)}})],1),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessname)}})],1),a("el-form-item",{attrs:{label:"法人代表名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.corporname)}})],1),a("el-form-item",{attrs:{label:"法人代表身份证"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.CompanyAuthentication.contraryimageUrl}})]),a("el-form-item",{attrs:{label:"注册地址"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.regionData},model:{value:e.currentRow.data.CompanyAuthentication.addr,callback:function(t){e.$set(e.currentRow.data.CompanyAuthentication,"addr",t)},expression:"currentRow.data.CompanyAuthentication.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessduration+"年")}})],1),a("el-form-item",{attrs:{label:"注册资金"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.registeredcapital)}})],1),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessdesc)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.englishname)}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.creditcode)}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.identity)}})],1),a("el-form-item",{attrs:{label:"企业营业执照"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.CompanyAuthentication.businesslicense}})]),a("el-form-item",{attrs:{label:"街道地址"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.roadress)}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.region)}})],1),a("el-form-item",{attrs:{label:"经营范围"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessscope)}})],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"实验室信息",name:"third"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实验室名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.name)}})],1),a("el-form-item",{attrs:{label:"实验室级别"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:""},model:{value:e.currentRow.data.Laboratory.laboratoryInfo.level,callback:function(t){e.$set(e.currentRow.data.Laboratory.laboratoryInfo,"level",t)},expression:"currentRow.data.Laboratory.laboratoryInfo.level"}},[a("el-option",{attrs:{label:"国家级",value:"1"}}),a("el-option",{attrs:{label:"省级",value:"2"}}),a("el-option",{attrs:{label:"地市级",value:"3"}}),a("el-option",{attrs:{label:"县(区)级",value:"4"}}),a("el-option",{attrs:{label:"其他",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"实验室地址"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.addr)}})],1),a("el-form-item",{attrs:{label:"建设起止日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.buildstarttime).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"实验室负责人"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.leadingname)}})],1),a("el-form-item",{attrs:{label:"实验室联系人"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.linkname)}})],1),a("el-form-item",{attrs:{label:"实验室照片"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.Laboratory.laboratoryInfo.imgsrc}})]),a("el-form-item",{attrs:{label:"主管单位"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.unit)}})],1),a("el-form-item",{attrs:{label:"实验室类别"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:"",placeholder:"请选择实验室类别"},model:{value:e.currentRow.data.Laboratory.laboratoryInfo.category,callback:function(t){e.$set(e.currentRow.data.Laboratory.laboratoryInfo,"category",t)},expression:"currentRow.data.Laboratory.laboratoryInfo.category"}},[a("el-option",{attrs:{label:"主实验室",value:"1"}}),a("el-option",{attrs:{label:"辅助实验室",value:"2"}}),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"实验室面积"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.area+"平方")}})],1),a("el-form-item",{attrs:{label:"最新投运时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.operationtime).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"负责人电话"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.leadingphone)}})],1),a("el-form-item",{attrs:{label:"联系人电话"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.linkphone)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实验室认证类型"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.region)}})],1),a("el-form-item",{attrs:{label:"发证机关"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.licencsIssuing)}})],1),a("el-form-item",{attrs:{label:"初次认可"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.initialRecognition).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.desc)}})],1),a("el-form-item",{attrs:{label:"证书编号"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.credentialsname)}})],1),a("el-form-item",{attrs:{label:"签发日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.dateOfIssue).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"有效期至"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.termOfValidity).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"更新时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.updatedDate).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"证书电子文件"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.Laboratory.laboratoryInfo.imgsrc1}})])],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 确 定 ")])],1)],1):e._e()],1)},l=[],i=(a("ac1f"),a("00b4"),a("b0c0"),a("a15b"),a("23a5")),n=(a("926a"),{name:"",data:function(){return{dialogVisible:!1,formInline:{user:"",region:"all"},tableData:[],start:0,pagesize:10,total:0,authenticationid:"",verifyForm:{status:1,suggestion:""},verifyFormRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}],suggestion:[{required:!0,message:"请填写认证审核意见",trigger:"blur"}]},dialogFormVisible:!1,form1:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},regionData:i["regionData"],verifyForm1:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},verifyForm2:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},previewother:{otherform:[]},currentRow:{data:{}},activeName:"first"}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.getEmpower()},methods:{headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},getAddr:function(e){e.length;for(var t="",a=0;a<e.length;a++)t+=i["CodeToText"][e[a]]+"/";return t},Others:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].name);return t.join(",")},getEmpower:function(){var e=this,t=this.$loading({background:"rgba(0, 0, 0, 0.5)"});this.$axiosWen.get("iotapi/classes/Dict",{params:{where:{type:"CompanyAuthentication"},order:"-updatedAt"}}).then((function(a){t.close(),a&&a.results?e.tableData=a.results:e.tableData=[]})).catch((function(a){e.tableData=[],t.close()}))},lookUp:function(e){this.dialogFormVisible=!0,this.currentRow=e,this.currentRow.data=e.data},examine:function(e){this.currentRow=e,this.dialogVisible=!0},handleSizeChange:function(e){},handleCurrentChange:function(e){},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r=(new Date).getTime();t.currentRow.data.verifyStatus=t.verifyForm.status,t.currentRow.data.suggestion=t.verifyForm.suggestion,t.currentRow.data.auditDate=r,t.$axiosWen.put("classes/Dict/"+t.currentRow.objectId,{data:t.currentRow.data}).then((function(a){a&&(t.$message({type:"success",message:"审核成功"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.getEmpower())})).catch((function(e){t.$message({message:"审核失败"})}))}))}}}),s=n,o=(a("eee6"),a("b244"),a("2877")),d=Object(o["a"])(s,r,l,!1,null,"2fe4cf0a",null);t["default"]=d.exports},da40c:function(e,t,a){"use strict";a("5854")},e7bc:function(e,t,a){"use strict";a("3553")},eee6:function(e,t,a){"use strict";a("6dd2f")}}]);