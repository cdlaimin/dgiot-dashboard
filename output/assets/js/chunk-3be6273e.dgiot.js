/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Wed Nov 17 2021 04:11:49 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be6273e"],{"0370":function(e,t,a){"use strict";a.r(t);var r,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"custom-table",staticClass:"devproduct devproduct-container",class:{"vab-fullscreen":e.isFullscreen}},[a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("wmxdetail",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDomain:e.addDomain,removeDomain:e.removeDomain,submitForm:e.submitFormwmx,wmxhandleClose:e.wmxhandleClose}})],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.preserve}},[e._v(" "+e._s(e.$translateTitle("equipment.update"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:e.formConfig.uid,top:"1vh",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("vab-parser",{attrs:{"dba-table":e.DbaTable,dict:e.parserDict,"form-config":e.formConfig,parserindex:e.editIndex,productid:e.producttempId},on:{ParserSave:e.saveParse}})],1),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{"append-to-body":"",visible:e.parserView},on:{"update:visible":function(t){e.parserView=t}}},[a("f-render",{attrs:{config:e.formConfig,pure:""},model:{value:e.formConfig,callback:function(t){e.formConfig=t},expression:"formConfig"}})],1),a("div",{staticClass:"prosecond"},[a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"100px",model:e.formInline},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("resource.category")}},[a("div",{staticClass:"border-panel"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{clear:e.clearCategory},model:{value:e.formInline.category,callback:function(t){e.$set(e.formInline,"category",t)},expression:"formInline.category"}},e._l(e.categoryList,(function(t,r){return a("el-option",{key:r,attrs:{label:t.name,value:t.objectId},nativeOn:{click:function(a){return e.categoryChange(t)}}})})),1)],1)]),a("el-form-item",{attrs:{label:e.$translateTitle("alert.product name")}},[a("el-input",{staticStyle:{width:"90%"},attrs:{clearable:"",placeholder:e.$translateTitle("product.searchproductname"),size:"mini"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}},[a("el-button",{staticStyle:{padding:"0 !important",margin:"0 !important"},attrs:{slot:"append",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.queryProduttemp({})}},slot:"append"})],1)],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.$loadsh.isEmpty(e.productDetail),expression:"!$loadsh.isEmpty(productDetail)"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isFullscreen=!e.isFullscreen}}},[a("vab-icon",{attrs:{icon:e.isFullscreen?"fullscreen-exit-fill":"fullscreen-fill"}}),e._v(" "+e._s(e.isFullscreen?e.$translateTitle("alert.Exit Full Screen"):e.$translateTitle("alert.full screen"))+" ")],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{lg:4,md:5,sm:6,xl:3,xs:12}},[a("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"},style:{height:e.tableHeight+"px"}},e._l(e.categorysonList,(function(t,r){return a("li",{key:r,staticClass:"infinite-list-item",attrs:{disabled:""},on:{click:function(a){return a.stopPropagation(),e.categorysonChange(t)}}},[a("el-link",{attrs:{type:e.linkType==t.name?"success":""}},[e._v(" "+e._s(t.name)+"    ")]),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.addproducttemp(t)}}})],1)})),0)]),a("el-col",{attrs:{lg:10,md:6,sm:6,xl:5,xs:12}},[a("div",{staticClass:"protable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.proTableData,"header-cell-style":{"text-align":"center"},height:e.tableHeight,"highlight-current-row":"",size:"medium"},on:{"row-click":e.StepsListRowClick}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.productname"),"show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.classification"),"show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.category?t.row.category.name:""))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:e.$translateTitle("developer.operation"),width:"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success",underline:!1},on:{click:function(a){return a.stopPropagation(),e.editproducttemp(t.row)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(a){return a.stopPropagation(),e.deleteproducttemp(t.row)}},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1)],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)]),a("el-col",{attrs:{lg:10,md:13,sm:18,xl:16,xs:24}},[a("profile-descriptions",{ref:"ProfileDescription",attrs:{"thing-key":e.thingKey,"decoder-table-list":e.decoderTableList,"dict-table-list":e.dictTableList,"parser-table-list":e.parserTableList,"product-detail":e.productDetail,"product-id":e.producttempId,"table-loading":e.tableLoading,"table-type":e.tableType,things:e.things}})],1)],1)],1),a("profile-drawer",{ref:"drawer",attrs:{"parser-table":e.parserTable,"parser-tables":e.parserTables}}),a("profile-dict",{ref:"dict",attrs:{allunit:e.allunit,"data-list":e.dataList,"dict-visible":e.dictVisible,"edit-flag":e.edit_dict_temp_dialog,"parser-table":e.parserTable,rules:e.dictrules,tempparam:e.tempparams,"title-dict":e.title_dict_edit_dialog,"title-temp-dialog":e.title_temp_dialog}}),a("product-templet",{ref:"templet",on:{"fetch-data":function(t){return e.queryProduttemp({})}}}),a("el-drawer",{attrs:{"append-to-body":"","before-close":e.handleClose,"close-on-click-modal":!1,size:"50%",title:e.moduleTitle,top:"5vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"devproduct-prodialog-content"},[a("div",{staticClass:"contentone"},[a("el-form",{ref:"form",attrs:{"label-width":"150px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.Producttemplatename"),prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.classification")}},[a("el-input",{attrs:{disabled:e.addflag,placeholder:e.$translateTitle("product.pleaseselectyourcate")},on:{focus:function(t){e.showTree=!e.showTree}},model:{value:e.form.categoryname,callback:function(t){e.$set(e.form,"categoryname",t)},expression:"form.categoryname"}}),e.showTree?a("div",[a("el-tree",{attrs:{data:e.categorytree,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1),a("el-form-item",{attrs:{label:e.$translateTitle("menu.icon"),prop:"icon"}},[e.imageUrl?a("div",[a("img",{staticClass:"avatar",attrs:{src:e.$FileServe+e.imageUrl}}),a("el-button",{staticStyle:{"vertical-align":"text-bottom"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return t.stopPropagation(),e.deleteImgsrc.apply(null,arguments)}}},[e._v(" 删除 ")])],1):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(t){return e.uploadCkick("producttemp_ico")}}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute",visibility:"hidden"},attrs:{enctype:"multipart/form-data",method:"POST"}},[a("input",{staticStyle:{position:"relative","z-index":"5",width:"100px",height:"100px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})]),a("br")]),a("vab-input",{ref:"uploadFinish",attrs:{params:e.inputParams},on:{fileInfo:e.fileInfo,files:e.files}}),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)]),a("div",{staticClass:"devproduct-prodialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),a("el-button",{on:{click:function(t){return e.handleCloseDialogForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)])],1)},o=[],n=a("1da1"),s=a("5530"),l=(a("96cf"),a("d3b7"),a("159b"),a("ddb0"),a("ac1f"),a("5319"),a("25f0"),a("b0c0"),a("99af"),a("a434"),a("caad"),a("e9c4"),a("a9e3"),a("d81d"),a("03b1")),c=a("5880"),d=a("7212"),u=a("e0e9"),p=a("e455"),m=a("5da9"),f=a("7497"),g=a("ed07"),h=a("ef68"),b=a("0af3"),v=a("ed08"),y=a("4080"),T=a("5118"),$=a("07e2"),w=a("46c2"),C={};w.keys().forEach((function(e){var t=w(e);C[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=t.default}));var k={components:Object(s["a"])(Object(s["a"])({},C),{},{wmxdetail:y["default"]}),props:{},data:function(){return{tableHeight:this.$baseTableHeight(0),dataList:[{}],dictrules:{},isFullscreen:!1,things:[],tableType:"things",multipleTable:[],thingKey:moment(new Date).valueOf().toString(),productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}},linkType:"",productOptions:[],DbaTable:[],parserView:!1,parserTable:!1,parserType:"",parserTables:[],parserTableList:[],dictTableList:[],decoderTableList:{},productConfig:{},parserFromId:"",dialogVisible:!1,moduleTitle:this.$translateTitle("product.createproducttemplate"),allunit:[],productInfo:{},edit_dict_temp_dialog:!1,title_dict_edit_dialog:"新增字典数据",tempparams:{name:"",identifier:"",type:"",order:0,address:"",bytes:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},unit:""},elactiveName:"Table",elactiveName1:"Table1",editDictTempId:"",title_temp_dialog:"",dictTempForm:{},rule:[],dictVisible:!1,listLoading:!1,tableLoading:!1,custom_row:{},custom_status:"add",hashkey:"",defaultProps:{children:"children",label:"label"},length:10,total:0,start:0,activeName:"first",formInline:{productname:"",category:""},uploadHeaders:{sessionToken:Cookies.get("access_token")},uploadAction:"",uploadData:{},fileList:[],producttempId:"",productIdentifier:"",proTableData:[],formLabelWidth:"120px",dialogFormVisible:!1,importDialogShow:!1,categorytree:[],inputParams:{},form:{name:"",decoder:{},thing:{},config:{},nodeType:0,netType:"",icon:""},formPro:{name:"",url:""},rules:{name:[{required:!0,message:"请输入产品",trigger:"blur"}]},option:[],ruleoptions:[],channel:[{label:"蜂窝(2G/3G/4G)(直连)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道(直连)",value:"5G"},{label:"WIFI通道(直连)",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"Modbus",value:"Modbus"},{label:"LoRa(WAN)(直连)",value:"LoRaWAN"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接(直连)",value:"网线连接"},{label:"自定义",value:"OTHER"}],imageUrl:"",parserDict:[],formConfig:{},editIndex:0,Parserzh:"",parseren:"",loading:!1,categoryList:[],categorysonList:[],queryForm:{name:""},categoryListOptions:[],fileServer:"",access_token:"",projectid:"",allTableDate:[],showTree:!1,addflag:!0,wmxdialogVisible:!1,schemadialogVisible:!1,wmxSituation:"新增",modifyIndex:-1}},computed:Object(s["a"])({},Object(c["mapGetters"])({token:"user/token",roleTree:"user/roleTree",sizeForm:"konva/sizeForm"})),watch:{productDetail:{handler:function(e){this.$nextTick((function(){var t;null!==e&&void 0!==e&&null!==(t=e.thing)&&void 0!==t&&t.properties&&this.properties(e.thing.properties)}))},immediate:!0,deep:!0}},mounted:function(){var e=this;this.$baseEventBus.$off("profileDialog"),this.$baseEventBus.$on("profileDialog",(function(t){var a=t.config,r=t.type,i=t.flag,o=t.productInfo;t.parserType;e.productDetail=o,e.productInfo=o,e.parserType=r,e.productConfig=_.merge({basedate:{params:{}}},a),e.editorParser(a,r,i)}));var t=this.$route.query.project,a=void 0===t?"":t;this.formInline.productname=a,this.querycategorylist(),this.featchTable(),this.queryProduttemp({})},methods:Object(s["a"])(Object(s["a"])({doUpload:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.files[0],i=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(b["ImportParse"])("Product",r);case 5:a.sent,i.close(),t.$message.success(""),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),i.close(),t.$message.error("".concat(a.t0));case 14:t.$baseEventBus.$emit("reload-router-view");case 15:case"end":return a.stop()}}),a,null,[[2,10]])})))()},querycategorylist:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order:"createdAt",keys:"count(*)",where:{level:{$in:[0,1]}}},t.next=3,Object(l["queryCategory"])(a);case 3:r=t.sent,i=r.results,e.categoryList=i,i&&"/dashboard/profile"==e.$route.fullPath&&e.$nextTick((function(){e.categoryChange({name:"所有领域"})}));case 7:case"end":return t.stop()}}),t)})))()},StepsListRowClick:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},i=!0,a.prev=2,o=i=!1,a.next=6,Object(h["getProductTemplet"])(e.objectId);case 6:n=a.sent,r=_.merge(n,{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}}),t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),i&&o.close(),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](2),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 15:t.producttempId=e.objectId,t.productDetail=r,t.$refs.ProfileDescription.productDetail=r;case 18:case"end":return a.stop()}}),a,null,[[2,12]])})))()},clearCategory:function(){this.linkType="",this.queryProduttemp({})},categoryChange:function(e){var t=this;this.linkType=e.name;var a=this.$baseColorfullLoading();this.categorysonList=[];var r={order:"createdAt",include:"parent",where:{}};"所有领域"==e.name?(r.where={level:{$gte:1}},Object(l["queryCategory"])(r).then((function(e){t.categorysonList=e.results}))):(r.where={parent:e.objectId},Object(l["queryCategory"])(r).then((function(a){t.categorysonList=[e].concat(a.results)}))),a.close()},categorysonChange:function(e){this.linkType=e.name,this.queryProduttemp({category:e.objectId})},addproducttemp:function(e){this.fetchData(),this.addflag=!0,this.form={name:"",decoder:{},thing:{},config:{},nodeType:0,netType:"",categoryname:e.name,categoryid:e.objectId},this.dialogFormVisible=!0,this.producttempId=moment(new Date).valueOf().toString()},editproducttemp:function(e){this.fetchData(),this.addflag=!1,this.form=e,this.producttempId=e.objectId,this.$set(this.form,"categoryname",e.category?e.category.name:""),this.$set(this.form,"categoryid",e.category?e.category.objectId:""),this.dialogFormVisible=!0},deleteproducttemp:function(e){var t=this;Object(h["delProductTemplet"])(e.objectId).then((function(a){a?t.$message({type:"success",message:"产品模板删除成功"}):t.$message({type:"error",message:"产品模板删除失败"}),t.queryProduttemp({category:e.category.objectId})}))},handleNodeClick:function(e){this.$set(this.form,"categoryid",e.objectId),this.$set(this.form,"categoryname",e.name),this.showTree=!this.showTree},fetchData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.queryForm.name.length?'{ "$regex": "'+e.queryForm.name+'"}':'{ "$ne": "null" }',r={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level"],"where":{"level": {"$gte": 1}, "name":'+a+"}}",parent:"parent"},t.next=4,Object($["post_tree"])(r);case 4:i=t.sent,o=i.results,n=void 0===o?[]:o,e.categorytree=n;case 8:case"end":return t.stop()}}),t)})))()},queryProduttemp:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,s,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$baseColorfullLoading(),i={order:"-createdAt",keys:"count(*)",include:"category,name",where:{name:t.queryForm.name?{$regex:t.queryForm.name,$options:"i"}:{$ne:null}}},e.category&&(i.where.category=e.category),a.prev=3,a.next=6,Object(h["queryProductTemplet"])(i);case 6:o=a.sent,n=o.results,s=void 0===n?[]:n,l=o.count,c=void 0===l?0:l,r.close(),t.proTableData=s,t.total=c,a.next=20;break;case 16:a.prev=16,a.t0=a["catch"](3),r.close(),t.$message.error("".concat(a.t0));case 20:case"end":return a.stop()}}),a,null,[[3,16]])})))()},properties:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"things";this.tableLoading=!0,this.things=e,this.tableType=a,Object(T["setTimeout"])((function(){return t.tableLoading=!1}),1200)},previewParse:function(e){this.parserView=!0,this.formConfig=e},addParse:function(e){e.push({name:this.parserType+"name",enname:this.parserType+"English Name",uid:Object(v["uuid"])(6),config:{},type:this.parserType,identifier:"identifier",visible:!0,table:"Device",class:"profile",description:this.parserType+"description"}),this.saveParse(e,-1,!1)},editParse:function(e,t){var a=this;this.formConfig=t,this.editIndex=e,this.parserTable=!1,this.$nextTick((function(){a.dialogVisible=!0}))},deleteParse:function(e,t,a){a.forEach((function(t,r){t.uid==e&&a.splice(r,1)})),this.saveParse(a,-1,!1)},editorParser:function(e,t,a){var r,i,o,n,s=this.productDetail,l=s.objectId,c=s.thing,d=void 0===c?{}:c,u=[],p=[],m=[];this.producttempId=l,this.parserFromId=l,this.editDictTempId=l,this.parserType=t,this.tableType=t,this.productConfig=_.merge({basedate:{params:{}}},e);var f=["parser","profile","basedate.params"];f.includes(t)&&(this.parserTable=a,this.parserTables=this.productDetail.config["".concat(this.tableType)],this.parserTableList=this.productDetail.config["".concat(this.tableType)],this.dictTableList=this.productConfig.config.basedate.params||[]),"basedate.params"==t&&(this.parserTable=!1,this.editorDict(e),this.dictVisible=!!a),null!==(r=this.productDetail)&&void 0!==r&&null!==(i=r.basedate)&&void 0!==i&&null!==(o=i.params)&&void 0!==o&&o.length&&this.productDetail.basedate.params.forEach((function(e){u.push({field:e.identifier,label:e.name,default:e.default})})),null!==d&&void 0!==d&&null!==(n=d.properties)&&void 0!==n&&n.length&&d.properties.forEach((function(e){p.push({field:e.identifier,label:e.name,default:e.default||""})})),localStorage.setItem("_sourceDict",JSON.stringify(u)),localStorage.setItem("_sourceModule",p),localStorage.setItem("_sourceField",m),this.decoderTableList={}},saveParse:function(e){var t=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:-1,o=!(t.length>2&&void 0!==t[2])||t[2],n=a.productConfig.config["".concat(a.parserType)],i+1>0?n[i]=_.merge({},e):a.productConfig.config["".concat(a.parserType)]=e,r.prev=4,r.next=7,Object(d["putProduct"])(a.parserFromId,{config:a.productConfig.config});case 7:r.sent,a.$message.success(a.$translateTitle("user.Save the template successfully")),a.dialogVisible=!1,o&&(a.parserTable=!1,a.queryProduttemp({})),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](4),a.$message.error(a.$translateTitle("user.Save the template error")+"".concat(r.t0));case 16:case"end":return r.stop()}}),r,null,[[4,13]])})))()},featchTable:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g["getTable"])();case 3:a=t.sent,r=a.results,i=void 0===r?[]:r,e.DbaTable=i,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},uploadCkick:function(e){this.loading=!0,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click")),this.inputParams={file:"",scene:"app",path:"producttemp/ico/",filename:"".concat(this.producttempId,".").concat(e)}},fileInfo:function(e){this.imageUrl=e.path,this.loading=!1},files:function(e,t){this.inputParams.filename="".concat(this.producttempId,".").concat(t),this.inputParams.file=e},getAllunit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(u["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]);case 6:case"end":return t.stop()}}),t)})))()},onJsonSave:function(e,t){var a=this;this.$refs.dict.$refs[e].validate((function(e){e&&a.put_Dict_temp(a.editDictTempId,t)}))},put_Dict_temp:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o,n,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=a.productInfo.config,o=void 0===i?{basedate:{}}:i,o.basedate=t,n={config:o},r.next=5,Object(d["putProduct"])(e,n);case 5:s=r.sent,l=s.updatedAt,void 0!=l?(a.dictVisible=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 8:case"end":return r.stop()}}),r)})))()},changeNode:function(e,t){0!=t&&(this.form.netType=""),this.channel=0==e?[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道",value:"5G"},{label:"WIFI通道",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"LoRa(WAN)",value:"LoRaWAN"},{label:"Modbus",value:"Modbus"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接",value:"网线连接"},{label:"自定义",value:"OTHER"}]:[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"5G通道",value:"5G"},{label:"WIFI通道",value:"WIFI"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"LoRaWAN",value:"LoRaWAN"},{label:"网线连接",value:"网线连接"},{label:"自定义",value:"OTHER"}]},selectApp:function(e){var t=this;e&&Object(m["getServer"])(e).then((function(e){e&&(t.fileServer=e.file,t.access_token=e.access_token)}))},deleteImgsrc:function(){this.imageUrl=""},handleClose:function(){this.dialogFormVisible=!1},handleCloseDialogForm:function(){var e=this;this.dialogFormVisible=!1,this.$nextTick((function(){e.$refs["form"].resetFields()}))},submitForm:function(){var e=this,t={"*":{read:!0,write:!0}},a={name:this.form.name,category:{objectId:this.form.categoryid,__type:"Pointer",className:"Category"},icon:this.imageUrl?this.imageUrl:"",desc:this.form.desc?this.form.desc:""};this.$refs.form.validate((function(r){r?e.addflag?(a.ACL=t,Object(h["postProductTemplet"])(a).then((function(t){t.objectId?e.$message({type:"success",message:"产品模板创建成功"}):e.$message({type:"error",message:"产品模板创建失败"}),e.queryProduttemp({category:e.form.categoryid}),e.dialogFormVisible=!1}))):Object(h["putProductTemplet"])(e.producttempId,a).then((function(t){t.updatedAt?e.$message({type:"success",message:"产品模板修改成功"}):e.$message({type:"error",message:"产品模板修改失败"}),e.queryProduttemp({category:e.form.categoryid}),e.dialogFormVisible=!1})):e.$message("必填项未填")}))},productSizeChange:function(e){this.length=e,this.queryProduttemp({})},productCurrentChange:function(e){this.start=(e-1)*this.length,this.queryProduttemp({})},blackDict:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i={data:t,key:e,type:"Product"},r.next=3,Object(u["postDict"])(i);case 3:o=r.sent,o?a.$message({type:"success",message:"备份成功"}):a.$message({type:"error",message:"备份失败"});case 5:case"end":return r.stop()}}),r)})))()},CloneData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={category:e.attributes.category,devType:e.attributes.devType,name:e.attributes.name,thing:e.attributes.thing},a.next=3,Object(f["getHashClass"])("Product",r);case 3:i=a.sent,o=i.objectId,n=i.code,200==n&&t.blackDict(o,r);case 7:case"end":return a.stop()}}),a)})))()},proudctClone:function(e){e.attributes.config.cloneState=!0,e.attributes.config.cloneState=!0;var t=e,a=Object(d["putProduct"])(e.id,t);a&&this.CloneData(e)},proudctEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?drawProudctid=").concat(e.objectId,"&proudctid=").concat(e.objectId);localStorage.setItem("rowId",e.objectId),window.open(r,"__blank")},proudctView:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#/views/").concat(e.objectId);window.open(r,"__blank")},goTopoview:function(){var e=window.location.origin+"/spa",t="production";e="development"==t?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var a="".concat(e,"/#/view");window.open(a,"__blank")},lockingParse:function(e,t,a){var r=a["".concat(t)].disable,i=void 0!==r&&r;a["".concat(t)].disable=!i,this.saveParse(a,-1,!1)},exportpro:function(){this.allTableDate?Object(p["export_txt_to_zip"])(JSON.stringify(this.allTableDate),"Dict","Dict"):this.$message({type:"warning",message:"数据为空,无法导出"})}},Object(c["mapMutations"])({setSizeForm:"konva/setSizeForm"})),{},{getFormOrginalData:function(){return{devicetype:this.devicetype,strategy:"20",resource:1,identifier:"",dis:"0X10",dinumber:"null",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",isshow:!0,unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:{},precision:3,round:"all",struct:[{attribute:"",attributevalue:""}],rate:1,offset:0,order:0,protocol:"normal",operatetype:"readCoils",originaltype:"int",slaveid:"0X10",collection:"%s",control:"%d",nobound:[],editdatatype:!1,iscount:"0",countstrategy:20,countround:"all",countcollection:"%s"}},createProperty:function(){this.setSizeForm(this.getFormOrginalData()),this.wmxdialogVisible=!0,this.wmxSituation="新增"},wmxhandleClose:function(){this.wmxdialogVisible=!1,this.setSizeForm(this.getFormOrginalData())},removeDomain:function(e){var t=this.sizeForm.struct.indexOf(e);-1!==t&&this.sizeForm.struct.splice(t,1)},addDomain:function(){this.sizeForm.struct.push({attribute:"",attributevalue:""})},deletewmx:function(e){var t=this;this.productDetail.thing.properties.splice(e,1);var a={thing:{properties:this.productDetail.thing.properties}};Object(h["putProductTemplet"])(this.producttempId,a).then((function(e){e.updatedAt?t.$message({type:"success",message:"删除成功"}):t.$message({type:"warning",message:"删除失败"})})).catch((function(e){}))},wmxDataFill:function(e,t){this.modifyIndex=t,this.wmxdialogVisible=!0,this.wmxSituation="编辑";var a={};if(-1!=["float","double","int","long"].indexOf(e.dataType.type))a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,endnumber:this.$objGet(e,"dataType.specs.max"),startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),precision:this.$objGet(e,"dataType.specs.precision"),dis:this.$objGet(e,"dataForm.address"),round:this.$objGet(e,"dataForm.round"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),slaveid:this.$objGet(e,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0},e.dataForm&&(a.collection=e.dataForm.collection,a.control=e.dataForm.control,a.strategy=e.dataForm.strategy);else if("bool"==e.dataType.type)a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,true:e.dataType.specs[1],false:e.dataType.specs[0],startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!1,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0};else if("image"==e.dataType.type)a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,imagevalue:e.dataType.imagevalue,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!1,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0};else if("enum"==e.dataType.type){var r=[];for(var i in e.dataType.specs)r.push({attribute:i,attributevalue:e.dataType.specs[i]});a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,specs:e.dataType.specs,struct:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}}else"struct"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,struct:e.dataType.specs,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,identifier:void 0==e.dataForm?"":e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}:"text"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,string:e.dataType.size,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}:"date"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),order:this.$objGet(e,"dataForm.order"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0}:"geopoint"==e.dataType.type&&(a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,gpstype:e.dataType.gpstype,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),order:this.$objGet(e,"dataForm.order"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0});this.setSizeForm(a)},submitFormwmx:function(e){var t=this,a={name:e.name,devicetype:e.devicetype,dataForm:{round:e.round,data:e.dinumber,address:e.dis,rate:e.rate,offset:e.offset,order:e.order,protocol:e.protocol,operatetype:e.operatetype,originaltype:e.originaltype,slaveid:e.slaveid,collection:e.collection,control:e.control,strategy:e.strategy,iscount:e.iscount,countstrategy:e.countstrategy,countround:e.countround,countcollection:e.countcollection},ico:e.ico,required:!0,accessMode:e.isread,isshow:e.isshow,identifier:e.identifier};if("float"==e.type||"double"==e.type||"int"==e.type||"long"==e.type){var r={dataType:{type:e.type.toLowerCase(),specs:{max:e.endnumber,min:e.startnumber,step:e.step,precision:Number(e.precision),unit:""==e.unit?"":e.unit}}};Object.assign(a,r)}else if("image"==e.type)r={dataType:{type:e.type.toLowerCase(),imagevalue:e.imagevalue,specs:{}}},Object.assign(a,r);else if("bool"==e.type)r={dataType:{type:e.type.toLowerCase(),specs:{0:e.false,1:e.true}}},Object.assign(a,r);else if("enum"==e.type){var i={};e.struct.map((function(e){var t=e["attribute"];i[t]=e["attributevalue"]})),r={dataType:{type:e.type.toLowerCase(),specs:i}},Object.assign(a,r)}else"struct"==e.type?(r={dataType:{type:e.type.toLowerCase(),specs:e.struct}},Object.assign(a,r)):"text"==e.type?(r={dataType:{type:e.type.toLowerCase(),size:e.string,specs:{}}},Object.assign(a,r)):"date"==e.type?(r={dataType:{type:e.type.toLowerCase(),specs:{}}},Object.assign(a,r)):"geopoint"==e.type&&(r={dataType:{type:e.type.toLowerCase(),gpstype:e.gpstype,specs:{}}},Object.assign(a,r));delete a.index,"新增"==this.wmxSituation?this.productDetail.thing.properties.unshift(a):"编辑"==this.wmxSituation&&(this.productDetail.thing.properties[this.modifyIndex]=a,this.thingKey=moment(new Date).valueOf().toString());var o={thing:{properties:this.productDetail.thing.properties}};Object(h["putProductTemplet"])(this.producttempId,o).then((function(e){e.updatedAt?t.$message({type:"success",message:t.wmxSituation+"成功"}):t.$message({type:"warning",message:t.wmxSituation+"失败"})})),this.wmxdialogVisible=!1},checkschema:function(){var e=this;this.schemadialogVisible=!0,Object(T["setTimeout"])((function(){r=ace.edit("editor1"),r.session.setMode("ace/mode/json"),r.setTheme("ace/theme/eclipse"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),r.setValue(JSON.stringify(e.productDetail.thing,null,4))}),1)},preserve:function(){var e=this,t={thing:JSON.parse(r.getValue())};Object(h["putProductTemplet"])(this.producttempId,t).then((function(t){e.$message({type:"success",message:e.wmxSituation+"成功"})})),this.schemadialogVisible=!1},goKonva:function(e){this.$router.push({path:"/Topo?productid",query:{productid:e}})}})},x=k,I=(a("4a42"),a("2877")),S=Object(I["a"])(x,i,o,!1,null,"02a7245a",null);t["default"]=S.exports},"0d16":function(e,t,a){},"1aa4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log log-container"},[a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleClose,title:e.$translateTitle("node.joincluster"),visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v(e._s(e.$translateTitle("node.nodename")))]),a("el-input",{attrs:{type:"text"},model:{value:e.form.nodename,callback:function(t){e.$set(e.form,"nodename",t)},expression:"form.nodename"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.join.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1)},i=[],o=a("bb22"),n={data:function(){return{form:{nodename:""},height:this.$baseTableHeight(0)-25,tableData5:[],node:null,start:1,length:10,total:0,draw:1,search:"",dialogVisible:!1,installtion:[],selsectinstall:[{value:"info",label:"info"},{value:"error",label:"error"},{value:"warning",label:"warning"},{value:"debug",label:"debug"},{value:"mqtt",label:"mqtt"},{value:"kafka",label:"kafka"},{value:"alert",label:"alert"},{value:"critical",label:"critical"},{value:"emergency",label:"emergency"},{value:"notice",label:"notice"}]}},mounted:function(){this.Getinformation()},methods:{Getinformation:function(){var e=this;Object(o["getNode"])(this.start,this.lengt).then((function(t){t&&(e.tableData5=t.nodes,e.total=t.nodes.length)}))},handleSizeChange:function(e){this.length=e,this.start=1},handleCurrentChange:function(e){this.start=e},join:function(){var e=this;Object(o["joinNode"])("join",this.form.nodename).then((function(t){t&&(e.$message({type:"success",message:"加入成功"}),e.dialogVisible=!1,e.Getinformation())})).catch((function(t){e.$message(t.error)}))},removeNode:function(e){var t=this;Object(o["joinNode"])("leave",e.node).then((function(e){e&&(t.$message({type:"success",message:"移除成功"}),t.Getinformation())})).catch((function(e){t.$message(e.error)}))},install:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1}}},s=n,l=a("2877"),c=Object(l["a"])(s,r,i,!1,null,null,null);t["default"]=c.exports},"1b62f":function(e,t,a){"use strict";a("2927")},"1c35":function(e,t,a){"use strict";a("837a")},2927:function(e,t,a){},"48e7":function(e,t,a){},"4a42":function(e,t,a){"use strict";a("abe9")},"4f55":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"devproduct devproduct-container"},[a("vab-input",{ref:"uploadFinish",on:{fileInfo:e.fileInfo}}),a("div",{staticClass:"prosecond"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.classification")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("task.Select")},on:{change:e.handleCateSearch},model:{value:e.queryForm.category,callback:function(t){e.$set(e.queryForm,"category",t)},expression:"queryForm.category"}},e._l(e.categoryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:e.$translateTitle("product.searchproductname")},model:{value:e.formInline.productname,callback:function(t){e.$set(e.formInline,"productname",t)},expression:"formInline.productname"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchProduct(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),a("el-form-item",{staticStyle:{float:"right","text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addproduct}},[e._v(" "+e._s(e.$translateTitle("product.createproduct"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.exportpro}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleImport()}}},[e._v(" "+e._s(e.$translateTitle("product.importpro"))+" ")])],1)],1),a("div",{staticClass:"protable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.tableData,"header-cell-style":{"text-align":"center"},height:e.height}},[a("el-table-column",{attrs:{label:"ProductID",prop:"objectId","show-overflow-tooltip":"",sortable:""}}),a("el-table-column",{attrs:{label:e.$translateTitle("product.productname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.productgrouping")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.netType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.addingtime"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:e.$translateTitle("developer.operation"),width:"340"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",underline:!1},on:{click:function(a){return e.deviceToDetail(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.config"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.goKonva(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.konva"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success",underline:!1},on:{click:function(a){return e.editorProduct(t.row)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-popover",{ref:"popover-"+t.$index,staticStyle:{"margin-left":"10px"},attrs:{placement:"top",width:"300"}},[a("p",[e._v("确定删除这个"+e._s(t.row.name)+"产品吗？")]),a("div",{staticStyle:{margin:"0","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t._self.$refs["popover-"+t.$index].doClose()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.makeSure(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)]}}])})],1)],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)],1),a("div",{staticClass:"devproduct-prodialog"},[a("el-drawer",{attrs:{"before-close":e.handleClose,"close-on-click-modal":!1,size:"60%",title:e.moduleTitle,top:"5vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"devproduct-prodialog-content"},[a("div",{staticClass:"contentone"},[a("div",{staticStyle:{display:"flex"}},[a("span",[e._v(" "+e._s(e.$translateTitle("product.productinformation"))+" ")]),a("p",{staticStyle:{"flex-grow":"2",width:"auto",height:"1px",margin:"10px","border-top":"1px dashed #dddddd"}})]),a("el-form",{ref:"form",attrs:{"label-width":"产品名称"==e.$translateTitle("product.productname")?"120px":"160px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.productname"),prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.productgrouping"),prop:"devType"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.devType,callback:function(t){e.$set(e.form,"devType",t)},expression:"form.devType"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.classification"),prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[a("el-option",{staticStyle:{height:"auto",padding:"0"},attrs:{value:e.treeDataValue}},[a("el-tree",{ref:"workGroup",attrs:{data:e.categoryTreeData,"default-expand-all":"","expand-on-click-node":!1,"node-key":"index"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,i=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{class:{selected:!1},on:{click:function(t){return e.handleCateClick(r,i)}}},[e._v(" "+e._s(r.label)+" ")])])}}])})],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.applicationtype"),prop:"relationApp"}},[a("el-input",{attrs:{disabled:"edit"==e.custom_status&&""!=e.form.relationApp,placeholder:e.$translateTitle("product.pleaseselectyourapp"),readonly:""},on:{focus:function(t){e.showTree=!e.showTree}},model:{value:e.form.relationApp,callback:function(t){e.$set(e.form,"relationApp",t)},expression:"form.relationApp"}}),e.showTree?a("div",[a("el-tree",{attrs:{data:e.allApps,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1),a("el-form-item",{attrs:{label:e.$translateTitle("menu.icon"),prop:"icon"}},[e.imageUrl?a("div",[a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}),a("el-button",{staticStyle:{"vertical-align":"text-bottom"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return t.stopPropagation(),e.deleteImgsrc.apply(null,arguments)}}},[e._v(" 删除 ")])],1):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:e.uploadCkick}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute",visibility:"hidden"},attrs:{enctype:"multipart/form-data",method:"POST"}},[a("input",{staticStyle:{position:"relative","z-index":"5",width:"100px",height:"100px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})]),a("br")]),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)]),a("div",{staticClass:"devproduct-prodialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),a("el-button",{on:{click:function(t){return e.handleCloseDialogForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)])],1),a("VabRender",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{config:e.config,loading:!0}})],1)},i=[],o=a("1da1"),n=a("5530"),s=(a("96cf"),a("d3b7"),a("159b"),a("ddb0"),a("ac1f"),a("5319"),a("a9e3"),a("b0c0"),a("99af"),a("d81d"),a("a434"),a("e9c4"),a("4de4"),a("1276"),a("c19f"),a("5cc69"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("caad"),a("2532"),a("0370"),a("ed08")),l=a("5880"),c=a("7212"),d=a("e0e9"),u=a("1285"),p=a("5da9"),m=a("7497"),f=a("bae0"),g=a.n(f),h=a("0af3"),b=a("ef68"),v=a("03b1"),y=a("07e2"),T=a("46c2"),w={};T.keys().forEach((function(e){var t=T(e);w[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=t.default}));var C={components:{},data:function(){return{selectedRow:{},tableData:[],allTemp:[],category:g.a,descriptions:{tableType:"things",things:[],productId:"",dictTableList:[],decoderTableList:{},productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}},parserTableList:[],tableLoading:!1},queryForm:{name:"",category:"",productId:"",productFlag:!1,pageNo:1,pageSize:20,searchDate:[],limt:10,skip:0,total:0,order:"-createdAt",keys:"count(*)"},cascaderDrawer:!1,drawerWidth:Number($(window).width())-240,height:this.$baseTableHeight(0),config:{},dataList:[{}],parserView:!1,parserTable:!1,parserTableList:{parser:[]},parserFromId:"",dialogVisible:!1,moduleTitle:this.$translateTitle("product.createproduct"),allunit:[],productInfo:{},edit_dict_temp_dialog:!1,title_dict_edit_dialog:"新增字典数据",tempparams:{name:"",identifier:"",type:"",order:0,address:"",bytes:"",registersnumber:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},unit:"",inactivevalue:"",activevalue:""},elactiveName:"Table",elactiveName1:"Table1",editDictTempId:"",title_temp_dialog:"",dictTempForm:"",rule:[],dictVisible:!1,listLoading:!1,custom_row:{},custom_status:"add",hashkey:"",defaultProps:{children:"children",label:"label"},length:10,total:0,start:0,activeName:"first",formInline:{productname:""},uploadHeaders:{sessionToken:Cookies.get("access_token")},uploadAction:"",uploadData:{},fileList:[],proTableData:[],dialogFormVisible:!1,importDialogShow:!1,cType:"",treeDataValue:"",categoryTreeData:[],curCatementId:"",form:{type:1,storageStrategy:"",name:"",category:"",nodeType:3,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},formPro:{name:"",url:""},rules:{name:[{required:!0,message:"请输入产品",trigger:"blur"}],devType:[{required:!0,message:"请输入产品标识，用于区分不同设备",trigger:"blur"}],category:[{required:!0,message:"请选择所属分类",trigger:"change"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],netType:[{required:!0,message:"请选择联网方式",trigger:"change"}],relationApp:[{required:!0,message:"请选择产品可见角色",trigger:"change"}]},option:[],ruleoptions:[],dialogProfile:!1,imageUrl:"",selectfromtype:"",productid:"",parserDict:[],formConfig:{},editIndex:0,Parserzh:"",parseren:"",loading:!1,allApps:[],categoryList:[],fileServer:"",access_token:"",projectid:"",projectName:"",allTableDate:[],showTree:!1,showcateTree:!1,multipleSelection:[]}},computed:Object(n["a"])({},Object(l["mapGetters"])({token:"user/token",roleTree:"user/roleTree"})),mounted:function(){this.queryProdut({}),this.categorytree(),this.categorylist(),this.searchProduct(0)},beforeDestroy:function(){this.projectName=""},methods:{handleIconClick:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogProfile=!t.dialogProfile,e.next=3,t.$refs.dialogProfile.StepsListRowClick(t.selectedRow);case 3:case"end":return e.stop()}}),e)})))()},handleCateClick:function(e,t){this.form.category=t.objectId,this.curCatementId=t.name},queryProdut:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,s,l,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.categorys,i=t.$baseColorfullLoading(),e.limit||(e=t.queryForm),o={limit:e.limit,order:e.order,skip:e.skip,keys:e.keys,where:{category:r?{$in:r}:{$ne:null},name:e.name?{$regex:e.name,$options:"i"}:{$ne:null}}},a.prev=4,a.next=7,Object(b["queryProductTemplet"])(o);case 7:n=a.sent,s=n.results,l=void 0===s?[]:s,c=n.count,d=void 0===c?0:c,i.close(),t.tableData=l,t.queryForm.total=d,a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](4),i.close(),t.$message.error("".concat(a.t0));case 21:case"end":return a.stop()}}),a,null,[[4,17]])})))()},goKonva:function(e){this.$router.push({path:"/Topo?productid",query:{productid:e}})},uploadCkick:function(){this.loading=!0,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click"))},fileInfo:function(e){this.imageUrl=e.url,this.loading=!1},getAllunit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(d["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]);case 6:case"end":return t.stop()}}),t)})))()},submitEnum:function(){var e=this;"Enum"==this.tempparams.type&&this.tempparams.specs.map((function(t){var a=t["attribute"];e.tempparams.struct[a]=t["attributevalue"]}))},addDomain:function(){this.tempparams.specs.push({attribute:"",attributevalue:""})},removeDomain:function(e){var t=this.tempparams.specs.indexOf(e);-1!==t&&this.tempparams.specs.splice(t,1)},delRow:function(e,t){t.splice(e,1)},editRow:function(e,t,a){this.editIndexId=t,this.title_dict_edit_dialog="修改字典数据",this.edit_dict_temp_dialog=!0,this.tempparams=e},closeDict:function(){this.edit_dict_temp_dialog=!this.edit_dict_temp_dialog},onJsonSave:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.put_Dict_temp(t.editDictTempId,t.dictTempForm)}))},put_Dict_temp:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,o,n,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=a.productInfo.config,o=void 0===i?{basedate:{}}:i,o.basedate=t,n={config:o},r.next=5,Object(c["putProduct"])(e,n);case 5:s=r.sent,l=s.updatedAt,void 0!=l?(a.dictVisible=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 8:case"end":return r.stop()}}),r)})))()},submitFormTempDict:function(){this.submitEnum(),this.edit_dict_temp_dialog=!1,void 0!=this.editIndexId?(this.dictTempForm.params[this.editIndexId]=this.tempparams,this.$message("编辑成功")):(this.dictTempForm.params.push(this.tempparams),this.$message("新增成功"))},opendialog:function(e){var t=this;this.$nextTick((function(){t.$refs[e].clearValidate()}))},tempTypeChange:function(e){"bool"==e?(this.tempparams.default=!0,this.tempparams.default=!0):this.tempparams.default="int"==e?0:void 0},addRow:function(e){this.editIndexId=void 0,this.title_dict_edit_dialog="新增字典数据",this.edit_dict_temp_dialog=!0,this.tempparams={name:"",identifier:"",type:"",order:0,address:"",bytes:"",registersnumber:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},collection:"%s",setting:"%s",unit:""}},onError:function(){this.$message("非Json数据类型")},handleNodeClick:function(e){this.$set(this.form,"relationApp",e.name),this.showTree=!this.showTree},selectApp:function(e){var t=this;e&&Object(p["getServer"])(e).then((function(e){e&&(t.fileServer=e.file,t.access_token=e.access_token)}))},treeData:function(e){var t=JSON.parse(JSON.stringify(e));return t.filter((function(e){var a=t.filter((function(t){return e.objectId==t.parent.objectId}));return a.length>0&&(e.children=a),0==e.parent.objectId}))},deleteImgsrc:function(){this.imageUrl=""},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([r],{type:a})},submitUpload:function(){var e=this;this.uploadAction="/product",this.$nextTick((function(){e.uploadData.appid=Cookies.get("appids"),e.$refs.fileUpload.submit()}))},handleUploadSuccess:function(e,t,a){this.$message({type:"success",message:"产品导入成功"}),this.importDialogShow=!1,this.$refs["uploadProForm"].resetFields(),this.searchProduct()},handleUploadError:function(e,t,a){this.$message({showClose:!0,message:e})},handleChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},searchProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,s,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.listLoading=!0,0==e&&(t.start=0),r=[],i={count:"objectId",order:"-updatedAt",limit:t.length,skip:t.start,where:{name:t.formInline.productname.length?{$regex:t.formInline.productname}:{$ne:null}}},a.next=7,t.$query_object("Product",i);case 7:o=a.sent,n=o.results,s=void 0===n?[]:n,l=o.count,c=void 0===l?0:l,s&&(s.map((function(e){""!=e.category&&e.category&&"report"!=e.devType&&r.push(e.category)})),t.listLoading=!1,t.proTableData=s,t.total=c),t.getApps(),a.next=20;break;case 16:a.prev=16,a.t0=a["catch"](0),t.listLoading=!1,t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 20:case"end":return a.stop()}}),a,null,[[0,16]])})))()},getApps:function(){this.allApps=this.roleTree},handleClose:function(){this.dialogFormVisible=!1},chooseTemplate:function(e){this.selectedRow=e,this.form.category=e.category,this.cascaderDrawer=!this.cascaderDrawer},handleCloseDialogForm:function(){var e=this;this.dialogFormVisible=!1,this.$nextTick((function(){e.$refs["form"].resetFields()}))},properties:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"things";this.descriptions.tableLoading=!0,this.descriptions.things=e,this.descriptions.tableType=a,setTimeout((function(){return t.descriptions.tableLoading=!1}),1200)},addproduct:function(){this.custom_status="add",this.moduleTitle=this.$translateTitle("product.createproduct"),this.imageUrl="",this.handleNodeClick(this.allApps[0]),this.form={name:"",type:1,category:"",nodeType:3,desc:"",netType:" ",devType:"",productSecret:"",relationApp:this.allApps[0].name,roles:[]},this.dialogFormVisible=!0},getParent:function(e,t,a){var r=this;return t.map((function(i){e==i.id?(a.unshift(i.value),r.getParent(i.parentid,t,a)):0==i.parentid&&i.id==e&&a.unshift(i.value)})),this.form.category=a[0],a},getIndustryParent:function(e,t){var a=this;t.map((function(r){r.value==e&&a.getParent(r.id,t,[])}))},editorParser:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parserFromId=e,a.prev=1,a.next=4,Object(c["getProduct"])(e);case 4:r=a.sent,i=r.config,o=void 0===i?{parser:[]}:i,n=r.thing,s=void 0===n?{}:n,t.parserTableList=o,t.parserDict=_.merge(s,o),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](1),t.parserTableList={parser:[]};case 16:t.parserTable=!0;case 17:case"end":return a.stop()}}),a,null,[[1,13]])})))()},editParse:function(e,t){this.formConfig=t,this.editIndex=e,this.dialogVisible=!0},saveParse:function(e){var t=arguments,a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:-1,i+2>0&&(a.parserTableList.parser[i]=_.merge({},e)),r.prev=2,r.next=5,Object(c["putProduct"])(a.parserFromId,{config:i+2>0?a.parserTableList:e});case 5:r.sent,a.$message.success(a.$translateTitle("user.Save the template successfully")),a.dialogVisible=!1,a.parserTable=!1,r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](2),a.$message.error(a.$translateTitle("user.Save the template error")+"".concat(r.t0));case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()},previewParse:function(e){this.parserView=!0,this.formConfig=e},addParse:function(e){e["parser"].push({name:Object(s["uuid"])(6),enname:Object(s["uuid"])(6),config:{}})},deleteParse:function(e,t){t.splice(e,1)},editorDict:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.getAllunit(),a.next=3,Object(c["getProduct"])(e);case 3:r=a.sent,i=r.config,o=void 0===i?{basedate:{}}:i,t.productInfo=r,t.editDictTempId=e,t.dictTempForm={name:"",cType:"",enable:"1",description:"",params:[]},t.title_temp_dialog="创建字典模板",o.basedate&&o.basedate.name&&(t.title_temp_dialog="修改字典模板",t.dictTempForm=o.basedate),t.rule={name:[{required:!0,message:"请输入字典模板名称",trigger:"blur"}],cType:[{required:!0,message:"请输入字典模板类型",trigger:"blur"}],enable:[{required:!0,message:"请选择状态",trigger:"change"}]},t.dictVisible=!0;case 12:case"end":return a.stop()}}),a)})))()},editorProduct:function(e){this.imageUrl="",this.moduleTitle=this.$translateTitle("product.editproduct"),this.custom_status="edit",this.custom_row=e,this.dialogFormVisible=!0,this.productid=e.objectId,this.getIndustryParent(e.category,this.categoryList),this.form.desc=e.desc,this.form.name=e.name,this.form.nodeType=e.nodeType,this.form.netType=e.netType,this.form.devType=e.devType,this.form.productSecret=e.productSecret,e.icon&&(this.imageUrl=e.icon);var t=[];for(var a in e.ACL)t.push(a),a.includes("role")&&(this.form.relationApp=a?a.substr(5):"")},categorylist:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order:"createdAt",keys:"count(*)",where:{level:{$in:[0,1]}}},t.next=3,Object(v["queryCategory"])(a);case 3:r=t.sent,i=r.results,e.categoryList=i;case 6:case"end":return t.stop()}}),t)})))()},categorytree:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.queryForm.name.length?'{ "$regex": "'+e.queryForm.name+'"}':'{ "$ne": "null" }',e.listLoading=!0,r={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level"],"where":{"level": {"$gte": 1}, "name":'+a+"}}",parent:"parent"},t.next=5,Object(y["post_tree"])(r);case 5:i=t.sent,o=i.results,n=void 0===o?[]:o,e.categoryTreeData=n,e.listLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},handleCateSearch:function(e){var t=this;if(this.queryForm.category=e,this.showcateTree=!this.showcateTree,"a60a85475a"==e)this.queryProdut({});else{var a={keys:"objectId",where:{parent:{className:"Category",objectId:e,__type:"Pointer"}}};Object(v["queryCategory"])(a).then((function(a){var r=[];r.push(e),a.results.forEach((function(e){r.push(e.objectId)})),t.queryProdut({categorys:r})}))}},submitForm:function(){var e=this;this.form.name,this.form.nodeType,this.form.netType,this.imageUrl,this.form.devType,this.form.desc;this.$refs.form.validate((function(t){t?e.custom_status:e.$message("必填项未填")}))},doUpload:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.files[0],i=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(h["ImportParse"])("Product",r);case 5:a.sent,i.close(),t.$message.success(""),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),i.close(),t.$message.error("".concat(a.t0));case 14:t.$baseEventBus.$emit("reload-router-view");case 15:case"end":return a.stop()}}),a,null,[[2,10]])})))()},createProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$create_object("Product",e);case 2:r=a.sent,r.objectId?t.initQuery("产品创建成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},editProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$update_object("Product",t.custom_row.objectId,e);case 2:r=a.sent,r.updatedAt?t.initQuery("产品修改成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},initQuery:function(e,t){this.$message({type:t||"info",message:e}),this.dialogFormVisible=!1,this.resetProductForm(),this.$refs["form"].resetFields(),this.searchProduct()},resetProductForm:function(){this.form={name:"",category:"",nodeType:3,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},this.imageUrl=""},deviceToDetail:function(e){this.$router.push({path:"/roles/detailproduct",query:{id:e.objectId}})},GoTodevices:function(e){this.$router.push({path:"/roles/thing",query:{productid:e.objectId}})},makeSure:function(e){var t=this,a={count:"objectId",skip:0,limit:1,where:{product:e.row.objectId}};Object(u["queryDevice"])(a).then((function(a){a.count>0?t.$message("请先删除该产品下设备"):Object(c["delProduct"])(e.row.objectId).then((function(a){a&&(t.$message({type:"success",message:"删除成功"}),e._self.$refs["popover-".concat(e.$index)].doClose(),t.searchProduct())}))}))},productSizeChange:function(e){this.length=e,this.searchProduct()},productCurrentChange:function(e){this.start=(e-1)*this.length,this.searchProduct()},blackDict:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i={data:t,key:e,type:"Product"},r.next=3,Object(d["postDict"])(i);case 3:o=r.sent,o?a.$message({type:"success",message:"备份成功"}):a.$message({type:"error",message:"备份失败"});case 5:case"end":return r.stop()}}),r)})))()},CloneData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={category:e.attributes.category,devType:e.attributes.devType,name:e.attributes.name,thing:e.attributes.thing},a.next=3,Object(m["getHashClass"])("Product",r);case 3:i=a.sent,o=i.objectId,n=i.code,200==n&&t.blackDict(o,r);case 7:case"end":return a.stop()}}),a)})))()},proudctClone:function(e){e.attributes.config.cloneState=!0,e.attributes.config.cloneState=!0;var t=e,a=Object(c["putProduct"])(e.id,t);a&&this.CloneData(e)},proudctEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?drawProudctid=").concat(e.objectId,"&proudctid=").concat(e.objectId);localStorage.setItem("rowId",e.objectId),window.open(r,"__blank")},proudctView:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#/views/").concat(e.objectId);window.open(r,"__blank")},goTopoview:function(){var e=window.location.origin+"/spa",t="production";e="development"==t?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var a="".concat(e,"/#/view");window.open(a,"__blank")},handleImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uploader.click();case 2:case"end":return t.stop()}}),t)})))()},exportpro:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$baseColorfullLoading(2),t.prev=1,t.next=4,Object(h["ExportParse"])("Product",{});case 4:r=t.sent,a.close(),e.$convertRes2Blob(r),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),a.close(),e.$message.error("".concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},k=C,x=(a("6dcb"),a("4f7d"),a("2877")),I=Object(x["a"])(k,r,i,!1,null,"6bccd297",null);t["default"]=I.exports},"4f7d":function(e,t,a){"use strict";a("d828")},"68a8":function(e,t,a){"use strict";a("7cd1")},"6dcb":function(e,t,a){"use strict";a("a6dc")},"778d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"custom-table",staticClass:"devproduct devproduct-container",class:{"vab-fullscreen":e.isFullscreen}},[a("el-dialog",{attrs:{"append-to-body":!0,title:e.formConfig.uid,top:"1vh",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("vab-parser",{attrs:{"dba-table":e.DbaTable,dict:e.parserDict,"form-config":e.formConfig,parserindex:e.editIndex,productid:e.productid},on:{ParserSave:e.saveParse}})],1),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{"append-to-body":"",visible:e.parserView},on:{"update:visible":function(t){e.parserView=t}}},[a("f-render",{attrs:{config:e.formConfig,pure:""},model:{value:e.formConfig,callback:function(t){e.formConfig=t},expression:"formConfig"}})],1),a("div",{staticClass:"prosecond"},[a("vab-query-form",{directives:[{name:"show",rawName:"v-show",value:!e.isProduct,expression:"!isProduct"}]},[a("vab-query-form-top-panel",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"100px",model:e.formInline},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("resource.Servicetype")}},[a("div",{staticClass:"border-panel"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{clear:e.clearCategory},model:{value:e.formInline.category,callback:function(t){e.$set(e.formInline,"category",t)},expression:"formInline.category"}},e._l(e.category,(function(t,r){return a("el-option",{key:r,attrs:{label:t.data.CategoryName,value:t.type},nativeOn:{click:function(a){return e.categoryChange(t,r)}}})})),1)],1)]),a("el-form-item",{attrs:{label:e.$translateTitle("alert.product name")}},[a("el-input",{staticStyle:{width:"90%"},attrs:{clearable:"",placeholder:e.$translateTitle("product.searchproductname"),size:"mini"},model:{value:e.formInline.productname,callback:function(t){e.$set(e.formInline,"productname",t)},expression:"formInline.productname"}},[a("el-button",{staticStyle:{padding:"0 !important",margin:"0 !important"},attrs:{slot:"append",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.searchProduct(0)}},slot:"append"})],1)],1)],1),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$refs["templet"].showEdit()}}},[e._v(" "+e._s(e.$translateTitle("product.Product template"))+" ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.$loadsh.isEmpty(e.productDetail),expression:"!$loadsh.isEmpty(productDetail)"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isFullscreen=!e.isFullscreen}}},[a("vab-icon",{attrs:{icon:e.isFullscreen?"fullscreen-exit-fill":"fullscreen-fill"}}),e._v(" "+e._s(e.isFullscreen?e.$translateTitle("alert.Exit Full Screen"):e.$translateTitle("alert.full screen"))+" ")],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.isProduct,expression:"!isProduct"}],attrs:{lg:4,md:5,sm:6,xl:3,xs:12}},[a("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"},style:{height:e.tableHeight+"px"}},e._l(e.category,(function(t,r){return a("li",{key:r,staticClass:"infinite-list-item",attrs:{disabled:""},on:{click:function(a){return e.categoryChange(t,r)}}},[a("el-link",{attrs:{type:e.linkType==r?"success":""}},[e._v(" "+e._s(t.data.CategoryName)+" ")])],1)})),0)]),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.isProduct,expression:"!isProduct"}],attrs:{lg:e.$loadsh.isEmpty(e.productDetail)?20:4,md:e.$loadsh.isEmpty(e.productDetail)?19:6,sm:e.$loadsh.isEmpty(e.productDetail)?18:6,xl:e.$loadsh.isEmpty(e.productDetail)?21:3,xs:e.$loadsh.isEmpty(e.productDetail)?24:12}},[a("div",{staticClass:"protable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.proTableData,"header-cell-style":{"text-align":"center"},height:e.tableHeight,"highlight-current-row":"",size:"medium"},on:{"row-click":e.StepsListRowClick}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.productname"),"show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])})],1)],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)]),a("el-col",{attrs:{lg:e.isProduct?24:e.$loadsh.isEmpty(e.productDetail)?0:16,md:e.isProduct?24:e.$loadsh.isEmpty(e.productDetail)?0:13,sm:e.isProduct?24:e.$loadsh.isEmpty(e.productDetail)?0:12,xl:e.isProduct?24:e.$loadsh.isEmpty(e.productDetail)?0:18,xs:(e.isProduct||e.$loadsh.isEmpty(e.productDetail),24)}},[a("profile-descriptions",{ref:"ProfileDescription",attrs:{"decoder-table-list":e.decoderTableList,"dict-table-list":e.dictTableList,"parser-table-list":e.parserTableList,"product-detail":e.productDetail,"product-id":e.productId,"table-loading":e.tableLoading,"table-type":e.tableType,things:e.things}})],1)],1)],1),a("profile-drawer",{ref:"drawer",attrs:{"parser-table":e.parserTable,"parser-tables":e.parserTables}}),a("profile-dict",{ref:"dict",attrs:{allunit:e.allunit,"data-list":e.dataList,"dict-visible":e.dictVisible,"edit-flag":e.edit_dict_temp_dialog,"parser-table":e.parserTable,rules:e.dictrules,tempparam:e.tempparams,"title-dict":e.title_dict_edit_dialog,"title-temp-dialog":e.title_temp_dialog}}),a("product-templet",{ref:"templet",on:{"fetch-data":function(t){return e.searchProduct(0)}}})],1)},i=[],o=a("2909"),n=a("1da1"),s=a("5530"),l=(a("96cf"),a("d3b7"),a("159b"),a("ddb0"),a("ac1f"),a("5319"),a("b0c0"),a("99af"),a("d81d"),a("a434"),a("4de4"),a("e9c4"),a("1276"),a("c19f"),a("5cc69"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("6062"),a("3ca3"),a("caad"),a("2532"),a("a9e3"),a("ed08")),c=a("5880"),d=a("7212"),u=a("e0e9"),p=a("1285"),m=a("e455"),f=a("5da9"),g=a("7497"),h=a("bae0"),b=a.n(h),v=a("ed07"),y=a("ef68"),T=a("46c2"),$={};T.keys().forEach((function(e){var t=T(e);$[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=t.default}));var w={components:Object(s["a"])({},$),props:{isProduct:{type:Boolean,default:function(){return!1},required:!1}},data:function(){return{tableHeight:this.$baseTableHeight(0),dataList:[{}],dictrules:{},isFullscreen:!1,things:[],tableType:"things",multipleTable:[],productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}},linkType:0,productOptions:[],DbaTable:[],parserView:!1,parserTable:!1,parserType:"",parserTables:[],parserTableList:[],dictTableList:[],decoderTableList:{},productConfig:{},parserFromId:"",dialogVisible:!1,moduleTitle:this.$translateTitle("product.createproduct"),allunit:[],productInfo:{},category:b.a,edit_dict_temp_dialog:!1,title_dict_edit_dialog:"新增字典数据",tempparams:{name:"",identifier:"",type:"",order:0,address:"",bytes:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},unit:""},elactiveName:"Table",elactiveName1:"Table1",editDictTempId:"",title_temp_dialog:"",dictTempForm:{},rule:[],dictVisible:!1,listLoading:!1,tableLoading:!1,custom_row:{},custom_status:"add",hashkey:"",defaultProps:{children:"children",label:"label"},length:10,total:0,start:0,activeName:"first",formInline:{productname:"",category:""},uploadHeaders:{sessionToken:Cookies.get("access_token")},uploadAction:"",uploadData:{},fileList:[],productId:"",productIdentifier:"",proTableData:[],formLabelWidth:"120px",dialogFormVisible:!1,importDialogShow:!1,form:{name:"",category:[],nodeType:0,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},formPro:{name:"",url:""},rules:{name:[{required:!0,message:"请输入产品",trigger:"blur"}],devType:[{required:!0,message:"请输入产品标识，用于区分不同设备",trigger:"blur"}],category:[{required:!0,message:"请选择所属分类",trigger:"change"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],netType:[{required:!0,message:"请选择联网方式",trigger:"change"}],relationApp:[{required:!0,message:"请选择产品可见角色",trigger:"change"}]},option:[],ruleoptions:[],channel:[{label:"蜂窝(2G/3G/4G)(直连)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道(直连)",value:"5G"},{label:"WIFI通道(直连)",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"Modbus",value:"Modbus"},{label:"LoRa(WAN)(直连)",value:"LoRaWAN"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接(直连)",value:"网线连接"},{label:"自定义",value:"OTHER"}],imageUrl:"",productid:"",parserDict:[],formConfig:{},editIndex:0,Parserzh:"",parseren:"",loading:!1,allApps:[],categoryList:[],categoryListOptions:[],fileServer:"",access_token:"",projectid:"",allTableDate:[],showTree:!1}},computed:Object(s["a"])({},Object(c["mapGetters"])({token:"user/token",roleTree:"user/roleTree"})),watch:{productDetail:{handler:function(e){this.$nextTick((function(){var t;null!==e&&void 0!==e&&null!==(t=e.thing)&&void 0!==t&&t.properties&&this.properties(e.thing.properties)}))},immediate:!0,deep:!0}},mounted:function(){var e=this.$route.query.project,t=void 0===e?"":e;this.formInline.productname=t,this.Industry(),this.featchTable(),this.searchProduct(0),this.categoryChange(this.category[0],0)},methods:{StepsListRowClick:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},i=!0,a.prev=2,o=t.isProduct?i=!1:t.$baseColorfullLoading(),a.next=6,Object(d["getProduct"])(e.objectId);case 6:n=a.sent,r=_.merge(n,{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}}),t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),i&&o.close(),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](2),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 15:t.productId=e.objectId,t.productDetail=r,t.$refs.ProfileDescription.productDetail=r;case 18:case"end":return a.stop()}}),a,null,[[2,12]])})))()},moveTemplate:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.t0=e,r.next="set"===r.t0?3:"update"===r.t0?5:"view"===r.t0?6:"delete"===r.t0?7:8;break;case 3:return a.setTemplate(t),r.abrupt("break",8);case 5:return r.abrupt("break",8);case 6:return r.abrupt("break",8);case 7:return r.abrupt("break",8);case 8:case"end":return r.stop()}}),r)})))()},setTemplate:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,s,l,c,d,u,p,m,f,g,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.config,i=void 0===r?{}:r,o=e.decoder,n=void 0===o?{}:o,s=e.ACL,l=e.name,c=e.thing,d=void 0===c?{}:c,u=e.netType,p=e.icon,m=e.nodeType,f=e.category,g={config:i,decoder:n,ACL:s,name:l,thing:d,netType:u,icon:p,nodeType:m,category:f},a.prev=2,h=t.$baseColorfullLoading(),a.next=6,Object(y["postProductTemplet"])(g);case 6:a.sent,h.close(),t.$message.success(t.$translateTitle("user.Save the template successfully")),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),t.$message.error(t.$translateTitle("user.Save the template error")+"".concat(a.t0));case 14:case"end":return a.stop()}}),a,null,[[2,11]])})))()},clearCategory:function(){this.linkType=-1,this.searchProduct(0)},categoryChange:function(e,t){this.linkType=t,this.proTableData=[],this.productDetail={},this.formInline.category=e.type,this.searchProduct(0)},featchTable:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(v["getTable"])();case 3:a=t.sent,r=a.results,i=void 0===r?[]:r,e.DbaTable=i,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},uploadCkick:function(){this.loading=!0,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click"))},fileInfo:function(e){this.imageUrl=e.url,this.loading=!1},getAllunit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(u["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]);case 6:case"end":return t.stop()}}),t)})))()},submitEnum:function(){var e=this;"Enum"==this.tempparams.type&&this.tempparams.specs.map((function(t){var a=t["attribute"];e.tempparams.struct[a]=t["attributevalue"]}))},addDomain:function(){this.tempparams.specs.push({attribute:"",attributevalue:""})},removeDomain:function(e){var t=this.tempparams.specs.indexOf(e);-1!==t&&this.tempparams.specs.splice(t,1)},konvaDevice:function(e){this.$router.push({path:"/Topo",query:{productid:e.objectId}})},getCategory:function(e){var t="";return this.category.filter((function(a){a.type==e&&(t=a.data.CategoryName)})),t},delRow:function(e,t){t.splice(e,1)},editRow:function(e,t,a){this.editIndexId=t,this.title_dict_edit_dialog="修改字典数据",this.edit_dict_temp_dialog=!0,this.tempparams=e},closeDict:function(){this.edit_dict_temp_dialog=!this.edit_dict_temp_dialog},onJsonSave:function(e,t){var a=this;this.$refs.dict.$refs[e].validate((function(e){e&&a.put_Dict_temp(a.editDictTempId,t)}))},put_Dict_temp:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o,n,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=a.productInfo.config,o=void 0===i?{basedate:{}}:i,o.basedate=t,n={config:o},r.next=5,Object(d["putProduct"])(e,n);case 5:s=r.sent,l=s.updatedAt,void 0!=l?(a.dictVisible=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 8:case"end":return r.stop()}}),r)})))()},submitFormTempDict:function(){this.submitEnum(),this.edit_dict_temp_dialog=!1,void 0!=this.editIndexId?(this.dictTempForm.params[this.editIndexId]=this.tempparams,this.$message("编辑成功")):(this.dictTempForm.params.push(this.tempparams),this.$message("新增成功"))},opendialog:function(e){var t=this;this.$nextTick((function(){t.$refs.dict.$refs[e].clearValidate()}))},tempTypeChange:function(e){"bool"==e?(this.tempparams.default=!0,this.tempparams.default=!0):this.tempparams.default="int"==e?0:void 0},addRow:function(e){this.editIndexId=void 0,this.title_dict_edit_dialog="新增字典数据",this.edit_dict_temp_dialog=!0,this.tempparams={name:"",identifier:"",type:"",order:0,address:"",bytes:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},collection:"%s",setting:"%s",unit:""}},onError:function(){this.$message("非Json数据类型")},handleNodeClick:function(e){this.$set(this.form,"relationApp",e.name),this.showTree=!this.showTree},changeNode:function(e,t){0!=t&&(this.form.netType=""),this.channel=0==e?[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道",value:"5G"},{label:"WIFI通道",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"LoRa(WAN)",value:"LoRaWAN"},{label:"Modbus",value:"Modbus"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接",value:"网线连接"},{label:"自定义",value:"OTHER"}]:[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"5G通道",value:"5G"},{label:"WIFI通道",value:"WIFI"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"LoRaWAN",value:"LoRaWAN"},{label:"网线连接",value:"网线连接"},{label:"自定义",value:"OTHER"}]},selectApp:function(e){var t=this;e&&Object(f["getServer"])(e).then((function(e){e&&(t.fileServer=e.file,t.access_token=e.access_token)}))},treeData:function(e){var t=JSON.parse(JSON.stringify(e));return t.filter((function(e){var a=t.filter((function(t){return e.id==t.parentid}));return a.length>0&&(e.children=a),0==e.parentid}))},deleteImgsrc:function(){this.imageUrl=""},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([r],{type:a})},submitUpload:function(){var e=this;this.uploadAction="/product",this.$nextTick((function(){e.uploadData.appid=Cookies.get("appids"),e.$refs.fileUpload.submit()}))},handleUploadSuccess:function(e,t,a){this.$message({type:"success",message:"产品导入成功"}),this.importDialogShow=!1,this.$refs["uploadProForm"].resetFields(),this.searchProduct()},handleUploadError:function(e,t,a){this.$message({showClose:!0,message:e})},handleChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getDict:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=Object(o["a"])(new Set(e)),r={limit:100,where:{"data.key":"category",type:e[0]}},a.next=4,t.$query_object("Dict",r);case 4:i=a.sent,t.allTableDate=i.results;case 6:case"end":return a.stop()}}),a)})))()},properties:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"things";this.tableLoading=!0,this.things=e,this.tableType=a,setTimeout((function(){return t.tableLoading=!1}),1200)},searchProduct:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.listLoading=!0,0==e&&(t.start=0),r=[],i={count:"objectId",order:"-updatedAt",limit:t.length,skip:t.start,keys:"name",where:{category:t.formInline.category?{$regex:t.formInline.category}:{$ne:null},name:t.formInline.productname?{$regex:t.formInline.productname}:{$ne:null}}},a.next=6,t.$query_object("Product",i);case 6:o=a.sent,n=o.results,s=o.count,n&&(n.map((function(e){""!=e.category&&e.category&&"report"!=e.devType&&r.push(e.category)})),t.listLoading=!1,t.proTableData=n,t.total=s,t.$nextTick((function(){var e;null!==(e=t.proTableData)&&void 0!==e&&e.length&&(t.StepsListRowClick(t.proTableData[0]),t.$refs.multipleTable.setCurrentRow(t.proTableData[0],!0))}))),t.getApps();case 11:case"end":return a.stop()}}),a)})))()},getApps:function(){this.allApps=this.roleTree},handleClose:function(){this.dialogFormVisible=!1},handleCloseDialogForm:function(){var e=this;this.dialogFormVisible=!1,this.$nextTick((function(){e.$refs["form"].resetFields()}))},addproduct:function(){this.moduleTitle=this.$translateTitle("product.createproduct"),this.imageUrl="",this.handleNodeClick(this.allApps[0]),this.form={name:"",category:["IotHub"],nodeType:0,desc:"",netType:" ",devType:"",productSecret:"",relationApp:this.allApps[0].name,roles:[]},this.custom_status="add",this.dialogFormVisible=!0},getParent:function(e,t,a){var r=this;return t.map((function(i){e==i.id?(a.unshift(i.value),r.getParent(i.parentid,t,a)):0==i.parentid&&i.id==e&&a.unshift(i.value)})),this.form.category=a[0],a},getIndustryParent:function(e,t){var a=this;t.map((function(r){r.value==e&&a.getParent(r.id,t,[])}))},editorParser:function(e,t,a){var r,i,o,n,s=this.productDetail,l=s.objectId,c=s.thing,d=void 0===c?{}:c,u=[],p=[],m=[];this.productid=l,this.parserFromId=l,this.editDictTempId=l,this.parserType=t,this.tableType=t,this.productConfig=e;var f=["parser","profile","basedate.params"];f.includes(t)&&(this.parserTable=a,this.parserTables=this.productDetail.config["".concat(this.tableType)],this.parserTableList=this.productDetail.config["".concat(this.tableType)],this.dictTableList=this.productConfig.config.basedate.params||[]),"basedate.params"==t&&(this.parserTable=!1,this.editorDict(e),this.dictVisible=!!a),null!==(r=this.productDetail)&&void 0!==r&&null!==(i=r.basedate)&&void 0!==i&&null!==(o=i.params)&&void 0!==o&&o.length&&this.productDetail.basedate.params.forEach((function(e){u.push({field:e.identifier,label:e.name,default:e.default})})),null!==d&&void 0!==d&&null!==(n=d.properties)&&void 0!==n&&n.length&&d.properties.forEach((function(e){p.push({field:e.identifier,label:e.name,default:e.default||""})})),localStorage.setItem("_sourceDict",JSON.stringify(u)),localStorage.setItem("_sourceModule",p),localStorage.setItem("_sourceField",m),this.decoderTableList={}},editParse:function(e,t){var a=this;this.formConfig=t,this.editIndex=e,this.parserTable=!1,this.$nextTick((function(){a.dialogVisible=!0}))},saveParse:function(e){var t=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:-1,o=!(t.length>2&&void 0!==t[2])||t[2],n=a.productConfig["".concat(a.parserType)],i+1>0?n[i]=_.merge({},e):a.productConfig["".concat(a.parserType)]=e,r.prev=4,r.next=7,Object(d["putProduct"])(a.parserFromId,{config:a.productConfig.config});case 7:r.sent,a.$message.success(a.$translateTitle("user.Save the template successfully")),a.dialogVisible=!1,o&&(a.parserTable=!1,a.searchProduct(0)),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](4),a.$message.error(a.$translateTitle("user.Save the template error")+"".concat(r.t0));case 16:case"end":return r.stop()}}),r,null,[[4,13]])})))()},previewParse:function(e){this.parserView=!0,this.formConfig=e},addParse:function(e){e.push({name:this.parserType+"name",enname:this.parserType+"English Name",uid:Object(l["uuid"])(6),config:{},type:this.parserType,identifier:"identifier",visible:!0,table:"Device",class:"profile",description:this.parserType+"description"}),this.saveParse(e,-1,!1)},deleteParse:function(e,t,a){a.forEach((function(t,r){t.uid==e&&a.splice(r,1)})),this.saveParse(a,-1,!1)},lockingParse:function(e,t,a){var r=a["".concat(t)].disable,i=void 0!==r&&r;a["".concat(t)].disable=!i,this.saveParse(a,-1,!1)},editorDict:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.getAllunit(),t.productInfo=e,t.dictTempForm={name:"",cType:"",enable:"1",description:"",params:[]},t.title_temp_dialog="创建字典模板",e.basedate&&e.basedate.name&&(t.title_temp_dialog="修改字典模板",t.dictTempForm=e.basedate),t.dictrules={name:[{required:!0,message:"请输入字典模板名称",trigger:"blur"}],cType:[{required:!0,message:"请输入字典模板类型",trigger:"blur"}],enable:[{required:!0,message:"请选择状态",trigger:"change"}]},t.$refs.dict.dictTempForm=t.dictTempForm,t.dictVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},editorProduct:function(e){this.imageUrl="",this.moduleTitle=this.$translateTitle("product.editproduct"),this.custom_status="edit",this.custom_row=e,this.dialogFormVisible=!0,this.productid=e.objectId,this.getIndustryParent(e.category,this.categoryList),this.form.desc=e.desc,this.form.name=e.name,this.form.nodeType=e.nodeType,this.form.netType=e.netType,this.form.devType=e.devType,this.form.productSecret=e.productSecret,this.changeNode(e.nodeType,0),e.icon&&(this.imageUrl=e.icon);var t=[];for(var a in e.ACL)t.push(a),a.includes("role")&&(this.form.relationApp=a?a.substr(5):"")},Industry:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={limit:100,where:{"data.key":"category"}},t.next=3,e.$query_object("Dict",a);case 3:r=t.sent,i=r.results,i.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.categoryList.push(a)})),e.categoryListOptions=e.treeData(e.categoryList);case 7:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this,t={},a={name:this.form.name,nodeType:this.form.nodeType,netType:this.form.netType,icon:this.imageUrl,devType:this.form.devType,desc:this.form.desc};this.$refs.form.validate((function(r){if(r)if("add"===e.custom_status){var i=Math.ceil(25*Math.random()),o=Base64.encode(String.fromCharCode(65+i)+Math.ceil(1e7*Math.random())+Number(new Date)),n="role:"+e.form.relationApp,s={};s[n]={read:!0,write:!0};var l={category:e.form.category[e.form.category.length-1],productSecret:o,ACL:s,topics:[],dynamicReg:!1,config:{konva:{Stage:{attrs:{x:14,y:29,id:"container",width:1868,height:469,draggable:!0},children:[{attrs:{id:"Layer_"+Mock.mock("@string")},children:[{attrs:{id:"Group_"+Mock.mock("@string"),width:2e3,height:2e3},children:[],className:"Group"}],className:"Layer"}],className:"Stage"}}}};t=Object.assign(a,l),e.createProduct(t)}else{var c={};t=Object.assign(a,c),e.editProduct(t)}else e.$message("必填项未填")}))},createProduct:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$create_object("Product",e);case 2:r=a.sent,r.objectId?t.initQuery("产品创建成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},editProduct:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$update_object("Product",t.custom_row.objectId,e);case 2:r=a.sent,r.updatedAt?t.initQuery("产品修改成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},initQuery:function(e,t){this.$message({type:t||"info",message:e}),this.dialogFormVisible=!1,this.resetProductForm(),this.$refs["form"].resetFields(),this.searchProduct()},resetProductForm:function(){this.form={name:"",category:[],nodeType:0,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},this.imageUrl=""},deviceToDetail:function(e){this.$router.push({path:"/roles/detailproduct",query:{id:e.objectId}})},GoTodevices:function(e){this.$router.push({path:"/roles/thing",query:{productid:e.objectId}})},makeSure:function(e){var t=this,a={count:"objectId",skip:0,limit:1,where:{product:e.row.objectId}};Object(p["queryDevice"])(a).then((function(a){a.count>0?t.$message("请先删除该产品下设备"):Object(d["delProduct"])(e.row.objectId).then((function(a){a&&(t.$message({type:"success",message:"删除成功"}),e._self.$refs["popover-".concat(e.$index)].doClose(),t.searchProduct())}))}))},productSizeChange:function(e){this.length=e,this.searchProduct()},productCurrentChange:function(e){this.start=(e-1)*this.length,this.searchProduct()},blackDict:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i={data:t,key:e,type:"Product"},r.next=3,Object(u["postDict"])(i);case 3:o=r.sent,o?a.$message({type:"success",message:"备份成功"}):a.$message({type:"error",message:"备份失败"});case 5:case"end":return r.stop()}}),r)})))()},CloneData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={category:e.attributes.category,devType:e.attributes.devType,name:e.attributes.name,thing:e.attributes.thing},a.next=3,Object(g["getHashClass"])("Product",r);case 3:i=a.sent,o=i.objectId,n=i.code,200==n&&t.blackDict(o,r);case 7:case"end":return a.stop()}}),a)})))()},proudctClone:function(e){e.attributes.config.cloneState=!0,e.attributes.config.cloneState=!0;var t=e,a=Object(d["putProduct"])(e.id,t);a&&this.CloneData(e)},proudctEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?drawProudctid=").concat(e.objectId,"&proudctid=").concat(e.objectId);localStorage.setItem("rowId",e.objectId),window.open(r,"__blank")},proudctView:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#/views/").concat(e.objectId);window.open(r,"__blank")},goTopoview:function(){var e=window.location.origin+"/spa",t="production";e="development"==t?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var a="".concat(e,"/#/view");window.open(a,"__blank")},exportpro:function(){this.allTableDate?Object(m["export_txt_to_zip"])(JSON.stringify(this.allTableDate),"Dict","Dict"):this.$message({type:"warning",message:"数据为空,无法导出"})}}},C=w,k=(a("b5c4"),a("2877")),x=Object(k["a"])(C,r,i,!1,null,"977ec064",null);t["default"]=x.exports},"7b51":function(e,t,a){},"7cd1":function(e,t,a){},"837a":function(e,t,a){},"8e6e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serverlist serverlist-container"},[a("div",{staticClass:"servercontent"},[a("el-breadcrumb",{staticStyle:{"margin-bottom":"20px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/applicationManagement"}}},[e._v(" "+e._s(e.$translateTitle("application.return"))+" ")]),a("el-breadcrumb-item",[e._v(" "+e._s(e.$translateTitle("developer.DeploymentServices"))+" ")])],1),a("h3",[e._v(" "+e._s(e.$translateTitle("developer.Serverdeployment"))+" ")]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{staticStyle:{float:"left"}},[a("el-button",{staticClass:"el-icon-download",attrs:{disabled:e.appid&&0==e.appid.length,type:"success"},on:{click:function(t){return e.downlictool()}}},[e._v(" "+e._s(e.$translateTitle("product.Downloadbootscripts"))+" ")])],1),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$translateTitle("product.entertheusername")},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:e.$translateTitle("equipment.runningstate")},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[a("el-option",{attrs:{label:e.$translateTitle("zetadevices.all"),value:1}}),a("el-option",{attrs:{label:e.$translateTitle("zetadevices.online"),value:!0}}),a("el-option",{attrs:{label:e.$translateTitle("zetadevices.offline"),value:!1}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:e.$translateTitle("product.Nameofapplicationprovider")},model:{value:e.formInline.app,callback:function(t){e.$set(e.formInline,"app",t)},expression:"formInline.app"}},e._l(e.applist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:e.$translateTitle("developer.selectapplicationtype")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}},[a("el-option",{attrs:{label:e.$translateTitle("product.Standard"),value:"standard"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Enterprise"),value:"enterprise"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Flagship"),value:"ultimate"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.getOrigin(0)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.search"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addServer.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.newlyadded"))+" ")])],1)],1)],1),a("div",{staticClass:"servertable"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,height:e.height}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.number"),type:"index",width:"80"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("user.Customername"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customer_name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("user.Customerapplication"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.appname))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.product?a("span",[e._v(" "+e._s(t.row.product.shuwa_iot_software)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("resource.server")+" IP",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.private_ip?a("p",[e._v(" "+e._s(t.row.private_ip+"("+e.$translateTitle("task.private")+")")+" ")]):e._e(),t.row.public_ip?a("p",[e._v(" "+e._s(t.row.public_ip+"("+e.$translateTitle("task.pubic")+")")+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Serverconfiguration"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.private_ip?[a("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a("p",[e._v(" "+e._s(e.$translateTitle("equipment.ipaddress"))+": "+e._s(t.row.private_ip)+" ")]),a("p",[e._v(" "+e._s(e.$translateTitle("equipment.macaddress"))+": "+e._s(t.row.mac)+" ")]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{effect:"dark"}},[a("span",[e._v(" "+e._s(t.row.core+e.$translateTitle("node.core")+t.row.memory+" "+t.row.disk+e.$translateTitle("node.memory"))+" ")])])],1)])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Machinecode"),"show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.key))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.authcode")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.license))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("concentrator.connection"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.is_online?a("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.online"))+" ")]):a("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.offline"))+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.Deployment"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["unauthorized"==t.row.status?a("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.$translateTitle("developer.Unauthorized"))+" ")]):"start_install"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.$translateTitle("product.Startdeployment"))+" ")]):"installing"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.$translateTitle("product.Underdeployment"))+" ")]):a("span",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.$translateTitle("product.Deploymentcomplete"))+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("node.operation"),width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v(" "+e._s(e.$translateTitle("application.detail"))+" ")]),a("el-button",{attrs:{icon:"el-icon-s-operation",size:"mini",type:"primary"},on:{click:function(a){return e.addserver(t.row)}}},[e._v(" "+e._s(e.$translateTitle("zetadevices.Onlineinstallation"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.uploadLicense1(t.row)}}},[e._v(" "+e._s(e.$translateTitle("zetadevices.Offlineinstallation"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.onlineLictool(t.row)}}},[e._v(" "+e._s(e.$translateTitle("zetadevices.Onlineupgrade"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.offlineLictool(t.row)}}},[e._v(" "+e._s(e.$translateTitle("zetadevices.Offlineupgrade"))+" ")])]}}])})],1)],1),a("div",{staticClass:"serverpagina"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("developer.Servicedeployment"),visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px",model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.applicationtype"),prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择应用类型"},model:{value:e.ruleForm.region,callback:function(t){e.$set(e.ruleForm,"region",t)},expression:"ruleForm.region"}},[a("el-option",{attrs:{label:e.$translateTitle("product.Standard"),value:"standard"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Enterprise"),value:"enterprise"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Flagship"),value:"ultimate"}})],1),a("p",{staticStyle:{position:"absolute",top:"30px",margin:"0",color:"#cc6e00"}},[e._v(" "+e._s(e.$translateTitle("product.Thestandardversionisthestandaloneversion"))+" ")])],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.authcode"),prop:"licensekey"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.enterthelicensecode")},model:{value:e.ruleForm.licensekey,callback:function(t){e.$set(e.ruleForm,"licensekey",t)},expression:"ruleForm.licensekey"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("user.Customername"),prop:"username"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.enter1")+e.$translateTitle("user.Customername")},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version"),prop:"version"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.enter1")+e.$translateTitle("plugins.version")},model:{value:e.ruleForm.version,callback:function(t){e.$set(e.ruleForm,"version",t)},expression:"ruleForm.version"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updatedLicense("ruleForm")}}},[e._v(" "+e._s(e.$translateTitle("developer.deploy"))+" ")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.details"),visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-input",{attrs:{readonly:"",rows:20,type:"textarea"},model:{value:e.licensedetail,callback:function(t){e.licensedetail=t},expression:"licensedetail"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})]),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.Serverconfiguration"),visible:e.serverdialogVisible,width:"50%"},on:{"update:visible":function(t){e.serverdialogVisible=t}}},[a("el-form",{ref:"serverForm",staticClass:"demo-serverForm",attrs:{"label-width":"150px",model:e.serverForm,rules:e.serverrules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.username"),prop:"customer_name"}},[a("el-input",{model:{value:e.serverForm.customer_name,callback:function(t){e.$set(e.serverForm,"customer_name",t)},expression:"serverForm.customer_name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.appid"),prop:"app"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.Nameofapplicationprovider")},model:{value:e.serverForm.app,callback:function(t){e.$set(e.serverForm,"app",t)},expression:"serverForm.app"}},e._l(e.applist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.desc,value:e.desc}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("resource.server")+" IP("+e.$translateTitle("task.private")+")",prop:"serverip"}},[a("el-input",{model:{value:e.serverForm.serverip,callback:function(t){e.$set(e.serverForm,"serverip",t)},expression:"serverForm.serverip"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("resource.server")+" IP("+e.$translateTitle("task.public")+")",prop:"publicip"}},[a("el-input",{model:{value:e.serverForm.publicip,callback:function(t){e.$set(e.serverForm,"publicip",t)},expression:"serverForm.publicip"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("equipment.macaddress"),prop:"mac"}},[a("el-input",{model:{value:e.serverForm.mac,callback:function(t){e.$set(e.serverForm,"mac",t)},expression:"serverForm.mac"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.Serverconfiguration"),required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"serverhe"}},[a("el-input",{model:{value:e.serverForm.serverhe,callback:function(t){e.$set(e.serverForm,"serverhe",t)},expression:"serverForm.serverhe"}},[a("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("node.core"))+" ")])],2)],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v(" - ")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"serverg"}},[a("el-input",{model:{value:e.serverForm.serverg,callback:function(t){e.$set(e.serverForm,"serverg",e._n(t))},expression:"serverForm.serverg"}},[a("template",{slot:"append"},[e._v(" G ")])],2)],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("node.memory"),prop:"disk"}},[a("el-input",{model:{value:e.serverForm.disk,callback:function(t){e.$set(e.serverForm,"disk",e._n(t))},expression:"serverForm.disk"}},[a("template",{slot:"append"},[e._v(" G ")])],2)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.Machinecode"),prop:"serverkey"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.enter1")+e.$translateTitle("product.Machinecode")},model:{value:e.serverForm.serverkey,callback:function(t){e.$set(e.serverForm,"serverkey",t)},expression:"serverForm.serverkey"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.authcode")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.enter1")+e.$translateTitle("developer.authcode")+" ("+e.$translateTitle("developer.Unauthorizedcanbeempty")+")"},model:{value:e.serverForm.licence,callback:function(t){e.$set(e.serverForm,"licence",t)},expression:"serverForm.licence"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("resource.server")+e.$translateTitle("node.state"),prop:"status"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.Nameofapplicationprovider")},model:{value:e.serverForm.status,callback:function(t){e.$set(e.serverForm,"status",t)},expression:"serverForm.status"}},[a("el-option",{attrs:{label:e.$translateTitle("developer.Unauthorized"),value:"unauthorized"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Startdeployment"),value:"start_install"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Underdeployment"),value:"installing"}}),a("el-option",{attrs:{label:e.$translateTitle("product.Deploymentcomplete"),value:"installed"}})],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("zetadevices.onlinestate"),"label-width":50,prop:"online"}},[e.serverForm.online?a("span",{staticStyle:{color:"#13ce66"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.online"))+" ")]):a("span",{staticStyle:{color:"#ff4949"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.offline"))+" ")]),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.serverForm.online,callback:function(t){e.$set(e.serverForm,"online",t)},expression:"serverForm.online"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.serverdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.serverOption("serverForm")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:e.$translateTitle("zetadevices.Onlineupgrade"),visible:e.dialogOnline},on:{"update:visible":function(t){e.dialogOnline=t}}},[a("el-form",{ref:"onlineform",attrs:{model:e.onlineform,rules:e.onlineformrule}},[a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version"),"label-width":"120px",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:e.$translateTitle("product.enter1")+e.$translateTitle("plugins.version")},model:{value:e.onlineform.name,callback:function(t){e.$set(e.onlineform,"name",t)},expression:"onlineform.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogOnline=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateLictool("onlineform")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1)},i=[],o=a("1da1"),n=(a("96cf"),a("ac1f"),a("00b4"),a("a9e3"),a("5319"),a("b0c0"),a("e9c4"),a("1c4e")),s=a("58dd"),l={},c={data:function(){var e=this,t=function(e,t,a){var r=/^[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/;r.test(t)?a():a(new Error("需要输入正确的服务器IP"))},a=function(e,t,a){var r=/^[A-Za-z0-9]{32}$/;r.test(t)?a():a(new Error("需要输入正确32位机器码"))},r=function(e,t,a){var r=/^[+]?(0|([1-9]\d*))(\.\d+)?$/g;""===t?a(new Error("请输入正数")):r.test(t)?a():a(new Error("请输入数字"))};return{height:this.$baseTableHeight(1),appid:"",appsecret:"",serverdialogVisible:!1,dialogFormVisible:!1,dialogVisible:!1,dialogOnline:!1,onlineform:{name:""},onlineformrule:{name:[{required:!0,message:"请输入要更新的版本号",trigger:"blur"}]},licensedetail:{},formInline:{user:"",region:1,app:"",version:""},tableData:[],pagesize:10,total:0,start:0,licenseid:"",ruleForm:{name:"",region:"standard",date1:"",date2:"",appname:"",licensekey:"",username:"",version:""},serverForm:{app:"",serverip:"",serverhe:"",serverg:"",serverkey:"",license:"",online:!1,customer_name:"",disk:Number("50G".replace(/G/g,"")),status:"unauthorized",publicip:"",mac:""},applist:[],rules:{name:[{required:!0,message:"请输入预计设计规模"},{type:"number",message:"预计设计规模 必须为数字值"}],region:[{required:!0,message:"请选择应用类型",trigger:"change"}],appname:[{required:!0,message:"请选择需要应用",trigger:"change"}],licensekey:[{required:!0,message:"license必填",trigger:"blur"}],username:[{required:!0,message:"客户名称必填",trigger:"blur"}],version:[{required:!0,message:"应用版本必填",trigger:"blur"}],date1:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}]},serverrules:{app:[{required:!0,message:"请选择客户名称",trigger:"change"}],serverip:[{required:!0,message:"请输入服务器私网IP",trigger:"blur"},{validator:t}],publicip:[{required:!0,message:"请输入服务器公网IP",trigger:"blur"},{validator:t}],mac:[{required:!0,message:"请输入服务器MAC地址",trigger:"blur"}],serverhe:[{required:!0,message:"请输入服务器配置"},{validator:r,type:"number",message:"服务器配置必须为数字值"}],serverg:[{required:!0,message:"请输入服务器配置"},{type:"number",message:"服务器配置必须为数字值"}],serverkey:[{required:!0,message:"请输入机器码",trigger:"blur"},{validator:a}],customer_name:[{required:!0,message:"请输入用户名称",trigger:"blur"}],disk:[{required:!0,message:"请输入服务器内存"},{type:"number",message:"服务器内存必须为数字值"}],stauts:[{required:!0,message:"请选择服务器状态",trigger:"change"}]},pickerOptionsStart:{disabledDate:function(t){var a=e.ruleForm.date2;return a&&t.getTime()>new Date(a).getTime()||t.getTime()<Date.now()-864e5}},pickerOptionsEnd:{disabledDate:function(t){var a=e.ruleForm.date1;return a?t.getTime()<new Date(a).getTime():t.getTime()<Date.now()-864e5}},isupdatedserver:"",licenseObj:{id:""}}},mounted:function(){this.getApp(),this.$route.query.appid&&(this.formInline.app=this.$route.query.appid),this.getOrigin(0)},methods:{addServer:function(){this.serverForm={app:"",serverip:"127.7.0.1",serverhe:4,serverg:8,serverkey:"EtXWoGpE74FnpANsLGDvj9uwkat8c7AU",license:"127.7.0.1",online:!1,customer_name:"addServe",disk:Number("50G".replace(/G/g,"")),status:"unauthorized",publicip:"127.7.0.1",mac:"127.7.0.1"},this.serverdialogVisible=!0},serverOption:function(e){var t=this;this.$refs[e].validate(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(r){var i,o,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=23;break}return i=t.$Cookies.get("appids"),o={},o[i]={read:!0,write:!0},s={ACL:o},s.appname=t.serverForm.customer_name,s.detail={},s.product={},s.key=t.serverForm.serverkey,s.private_ip=t.serverForm.serverip,s.is_online=t.serverForm.online,s.customer_name=t.serverForm.customer_name,s.public_ip=t.serverForm.publicip,s.disk=t.serverForm.disk+"G",s.core=t.serverForm.serverhe,s.memory=t.serverForm.serverg+"G",s.mac=t.serverForm.mac,s.license=t.serverForm.license,s.app={__type:"Pointer",className:"App",objectId:t.serverForm.app},a.next=21,Object(n["postLicense"])(s);case 21:l=a.sent,l&&(t.$message("添加成功"),t.$refs[e].resetFields(),t.getOrigin(0),t.serverdialogVisible=!1);case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getApp:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.appid=e.$route.query.appid,e.appsecret=e.$route.query.appsecret,t.next=4,Object(s["app_count"])({});case 4:a=t.sent,r=a.results,r&&(e.applist=r);case 7:case"end":return t.stop()}}),t)})))()},getOrigin:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return 0==e&&(t.start=0),r={order:"-updatedAt",skip:t.start,limit:t.pagesize,count:"objectId",where:{}},1!==t.formInline.region&&(r.where.is_online=t.formInline.region),""!==t.formInline.app&&(r.where.app=t.formInline.app),""!==t.formInline.user&&(r.where.customer_name=t.formInline.user),""!==t.formInline.version&&(r.type=t.formInline.version),a.next=8,Object(n["queryLicense"])(r);case 8:i=a.sent,o=i.count,s=i.results,o&&(t.total=o),s&&(t.tableData=s);case 13:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.pagesize=e,this.getOrigin(1)},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.getOrigin(1)},addserver:function(e){var t=this;if(this.licenseid=e.id,this.ruleForm.version=e.attributes.software,e.attributes.license?this.ruleForm.licensekey=e.attributes.license:this.ruleForm.licensekey="",this.ruleForm.username=e.attributes.customer_name,e.attributes.product)for(var a in e.attributes.product)l[a]=e.attributes.product[a];"installed"==e.attributes.status||"start_install"==e.attributes.status||"installing"==e.attributes.status?this.$confirm("".concat("installed"==e.attributes.status?"是否重新部署服务器, 是否继续?":"服务器正在部署中，是否重新部署"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dialogFormVisible=!0})).catch((function(){t.$message({type:"info",message:"已取消重新部署"})})):this.dialogFormVisible=!0},updatedLicense:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={type:t.ruleForm.region,license:t.ruleForm.licensekey,status:"start_install",customer_name:t.ruleForm.username,software:t.ruleForm.version};return Object(n["putLicense"])(t.licenseid,a).then((function(e){e&&(t.$message("正在部署中"),t.dialogFormVisible=!1,t.getOrigin(1))})).catch((function(e){return!1})),!0}}))},uploadLicense1:function(e){Object(n["uploadServer"])(e.attributes.license).then((function(t){window.open(window.location.origin+"/licsetup?license="+e.attributes.license,"_blank")}))},onlineLictool:function(e){for(var t in this.licenseObj.id=e.id,e.attributes.product)this.licenseObj[t]=e.attributes.product[t];this.dialogOnline=!0},updateLictool:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={status:"start_update",software:t.onlineform.name};Object(n["putLicense"])(t.licenseid,a).then((function(e){e&&(t.dialogOnline=!1,t.$message("正在升级中"))})).catch((function(e){return!1}))}}))},offlineLictool:function(e){Object(n["offlineServer"])(e.attributes.license).then((function(t){window.open(window.location.origin+"/licsetup?license="+e.attributes.license,"_blank")}))},downlictool:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["uploadLicense"])(e.appid,e.appsecret);case 2:a=t.sent,a&&window.open(window.location.origin+"/lictool?appid="+e.appid+"&appsecret="+e.appsecret,"_blank");case 4:case"end":return t.stop()}}),t)})))()},handleDetail:function(e,t){this.dialogVisible=!0,this.licensedetail=JSON.stringify(t.attributes.product,null,10)},startDate:function(){this.ruleForm.date2<=this.ruleForm.date1&&""!=this.ruleForm.date2&&null!=this.ruleForm.date2&&(this.$message("采集结束时间要小于开始时间"),this.ruleForm.date1=""),this.ruleForm.date1<Date.now()-2e3&&(this.$message("采集开始时间要大于当前时间"),this.ruleForm.date1="")},endDate:function(){this.ruleForm.date2<=this.ruleForm.date1&&(this.$message("采集结束时间要小于开始时间"),this.ruleForm.date2=""),this.ruleForm.date2<Date.now()-2e3&&(this.$message("采集结束时间要大于当前时间"),this.ruleForm.date2="")}}},d=c,u=(a("68a8"),a("2877")),p=Object(u["a"])(d,r,i,!1,null,"c7425ca2",null);t["default"]=p.exports},9421:function(e,t,a){},a2f7:function(e,t,a){"use strict";a.r(t);var r,i,o,n,s,l,c,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editproduct"},[a("div",{staticClass:"editheader"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/product"}}},[e._v(" "+e._s(e.$translateTitle("route.产品管理"))+" ")]),a("el-breadcrumb-item",[e._v(" "+e._s(e.$translateTitle("route.产品详情"))+" ")])],1),a("div",{staticClass:"product"},[a("ul",[a("li",[e._v(" "+e._s(e.$translateTitle("product.productname"))+": "),a("span",[e._v(e._s(e.productName))])]),a("li",[a("span",[e._v("ProductSecret:")]),0==e.isshow?a("span",[e._v(" ******************** "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!0}}},[e._v(" "+e._s(e.$translateTitle("product.display"))+" ")])],1):a("span",[e._v(" "+e._s(e.ProductSecret)+" "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!1}}},[e._v(" "+e._s(e.$translateTitle("product.hidden"))+" ")])],1)]),a("li",[a("span",[e._v(e._s(e.$translateTitle("product.numberofequipment"))+":")]),a("span",[e._v(" "+e._s(e.form.ProductAll)+" "),a("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary",underline:!1},on:{click:e.goToDevices}},[e._v(" "+e._s(e.$translateTitle("product.gotoequipment"))+" ")])],1)]),a("li",[a("div",{staticClass:"block"},[e.productimg?a("el-image",{staticStyle:{position:"relative",top:"-40px","max-width":"200px",height:"auto"},attrs:{src:e.productimg}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)])])])],1),a("div",[a("el-tabs",{ref:"_tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("product.productinformation"),name:"first"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"addtopic"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportProduct}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),a("div",[a("table",{staticClass:"mailtable",staticStyle:{width:"100%"},attrs:{border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.productname"))+" ")]),a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.productdetail.name)+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.nodetype"))+" ")]),1==e.productdetail.nodeType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]):a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.addingtime"))+" ")]),a("td",[e._v(e._s(e.productdetail.createdAt))])]),a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.productdetail.category)+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.dynamicregistration"))+" "),a("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:e.$translateTitle("product.text1"),effect:"light",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("td",{staticClass:"notbottom"},[0==e.dynamicReg?a("span",{staticStyle:{color:"#cccccc"}},[e._v(" "+e._s(e.$translateTitle("product.close"))+" ")]):a("span",[e._v(e._s(e.$translateTitle("product.open")))]),a("el-switch",{attrs:{"active-color":"#5eb058","active-value":!0,"inactive-color":"#cccccc","inactive-value":!1},on:{change:function(t){return e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],1),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.networking"))+" ")]),"CELLULAR"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.honeycomb"))+"(2G/3G/4G) ")]):"WIFI"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" WiFi ")]):"ETHERNET"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.ethernet"))+" ")]):"LORA"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" LoRaWAN ")]):a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.productdetail.netType)+" ")])]),a("tr",[a("td",{staticClass:"cloumn"},[e._v(" "+e._s(e.$translateTitle("developer.describe"))+" ")]),a("td",{attrs:{colspan:"6"}},[e._v(" "+e._s(e.productdetail.desc)+" ")])])])])],1)]),a("el-tab-pane",{attrs:{label:"Topic"+e.$translateTitle("product.list"),name:"second"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"addtopic"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.topicdialogVisible=!0}}},[e._v(" "+e._s(e.$translateTitle("product.customtopicclass"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength)}},[a("el-table-column",{attrs:{align:"left",label:"Topic"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.topic.replace("${ProductId}",e.productId))+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.operationauthority")},scopedSlots:e._u([{key:"default",fn:function(t){return["pub"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.pub"))+" ")]):e._e(),"sub"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.sub"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe"),prop:"desc"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdef?e._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.updatetopic(t.row,t.$index)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t.row.isdef?e._e():a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(a){return e.deletetopic(t,t.$index)}},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.topiclength,"page-sizes":[10,20,30,50],total:e.topicData.length},on:{"current-change":e.topicCurrentChange,"size-change":e.topicSizeChange}})],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.definetopicclass"),visible:e.topicdialogVisible,width:"40%"},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[a("div",{staticClass:"topiccontent"},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px","font-size":"16px",background:"#e6f9fc"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.$translateTitle("product.text2"))+" ")]),a("div",{staticClass:"topicform"},[a("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[a("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[a("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[a("template",{slot:"prepend"},[e._v(" "+e._s("thing/"+e.productId+"/${DevAddr}/")+" ")])],2)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.operationauthority"),prop:"type"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.selectdeviceoperationpermission")},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.sub"),value:"sub"}}),a("el-option",{attrs:{label:e.$translateTitle("product.pub"),value:"pub"}})],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.topicdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.subTopic("topicform",e.topicform.isupdated)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalmodel"),name:"third"}},[a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addMachine"),visible:e.machine,width:"30%"},on:{"update:visible":function(t){e.machine=t}}},[a("div",[a("el-form",{ref:"sizeForm",attrs:{"label-position":"left","label-width":"80px",model:e.machineForm,size:"mini"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.devicetype"),prop:"devicetype"}},[a("el-input",{model:{value:e.machineForm.name,callback:function(t){e.$set(e.machineForm,"name",t)},expression:"machineForm.name"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.machine=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.savemachine(e.machineForm)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{lg:4,md:5,sm:6,xl:3,xs:24}},[a("vab-query-form",{staticClass:"query-form"},[a("vab-query-form-top-panel",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addMachine.apply(null,arguments)}}},[e._v(" 添加类型 ")])],1)],1),a("el-table",{staticStyle:{width:"60vh",overflow:"auto"},attrs:{border:"",data:e.FromMachine,"row-class-name":e.tableRowClassName},on:{"row-click":e.clickmachine}},[a("el-table-column",{attrs:{align:"center",label:"序号",prop:"sort",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.$index+1)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"设备类型",prop:"name"}})],1)],1),a("el-col",{attrs:{lg:20,md:19,sm:18,xl:21,xs:24}},[a("vab-query-form",{staticClass:"query-form"},[a("vab-query-form-right-panel",{staticStyle:{width:"100%"}},[a("div",{staticClass:"stripe-panel"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.checkAddTest}},[e._v(" "+e._s(e.$translateTitle("product.collectionformulaofobjectmodel"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.checkschema}},[e._v(" "+e._s(e.$translateTitle("product.viewobjectmodel"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.createProperty}},[e._v(" "+e._s(e.$translateTitle("product.newcustomattribute"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addcategory}},[e._v(" "+e._s(e.$translateTitle("product.newstandardattribute"))+" ")])],1)])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize),"default-expand-all":!1,"default-sort":{prop:"date",order:"descending"},"row-class-name":e.getRowClass,"row-key":"identifier"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return"struct"==t.row.dataType.type?[a("el-table",{staticStyle:{"box-sizing":"border-box",width:"60%","text-align":"center"},attrs:{data:t.row.dataType.specs}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.identifier))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes")}},[a("span",[e._v(" "+e._s(e.$translateTitle("product.attribute"))+" ")])]),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}],null,!0)})],1)]:void 0}}],null,!0)}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.order"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.order)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.devicetype"),prop:"devicetype",width:"80"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Rounds"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.round)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Strategy"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.strategy)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocol"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.protocol)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes"),width:"90"}},[a("span",[e._v(e._s(e.$translateTitle("product.attribute")))])]),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier"),prop:"identifier",width:"100"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datatype"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.dataaddr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.dataForm.address)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.dataType.specs||"double"!=t.row.dataType.type&&"float"!=t.row.dataType.type&&"int"!=t.row.dataType.type?"string"==t.row.dataType.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.datalength")+":"+t.row.dataType.size+e.$translateTitle("product.byte"))+" ")]):"date"==t.row.dataType.type?a("span"):"struct"!=t.row.dataType.type?a("span",[e._v(" "+e._s(t.row.dataType.specs)+" ")]):a("span"):a("span",[e._v(" "+e._s(e.$translateTitle("product.rangeofvalues")+t.row.dataType.specs.min+"~"+t.row.dataType.specs.max)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletewmx(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.wmxDataFill(t.row,t.row.index)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.wmxPageSize,"page-sizes":[10,20,30,50],total:e.wmxData.length},on:{"current-change":e.wmxCurrentChange,"size-change":e.wmxSizeChange}})],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addfunction"),visible:e.originwmx,width:"50%"},on:{"update:visible":function(t){e.originwmx=t}}},[a("div",[a("div",{staticStyle:{margin:"20px 0"}},[a("label",{attrs:{for:""}},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),a("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getPropData(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData}},[a("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.SuperId))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.applicabletype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.CategoryName))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addProCategory(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])]}}])})],1)],1),a("div",[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.productlength,"page-sizes":[10,20,30,50],small:"",total:e.producttotal},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("wmxdetail",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDomain:e.addDomain,removeDomain:e.removeDomain,submitForm:e.submitForm,wmxhandleClose:e.wmxhandleClose}})],1)],1),a("el-tab-pane",{staticStyle:{diaplay:"none"},attrs:{disabled:!0,label:e.$translateTitle("product.matteranalysis"),name:"fourth"}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce("formInline",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce1("formInline")}}},[e._v(" "+e._s(e.$translateTitle("product.setaspublic"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")])],1),a("el-form-item",{staticStyle:{display:"block"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.updatesubdialog}},[e._v(" "+e._s(e.$translateTitle("product.thermalloading"))+" ")])],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.tdthermalloading"),visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.version))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.desc))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.createdAt")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editordata(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletedata(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name1"}})]),a("pre",{staticClass:"ace_editor ace-monokai ace_dark",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name2"}})]),a("div",{staticStyle:{padding:"5px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalaccess"),name:"fiveth"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[a("el-button",{attrs:{disabled:"",size:"small",type:"primary"},on:{click:e.showAllChannel}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):3==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:"",size:"mini",type:"danger"},on:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.updatesub(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.overloadconfiguration"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.channellength,"page-sizes":[10,20,30,50],total:e.channeltotal},on:{"current-change":e.channelCurrentChange,"size-change":e.channelSizeChange}})],1)],1)],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.preserve.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("equipment.update"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("equipment.addchannel"),visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"addchannel"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):2==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addProductChannel(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.add"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.allChannellength,"page-sizes":[10,20,30,50],total:e.allChanneltotal},on:{"current-change":e.allChannelCurrentChange,"size-change":e.allChannelSizeChange}})],1)],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseSubdialog,"close-on-click-modal":!1,title:e.channelname+"日志",visible:e.subdialog,width:"85%"},on:{"update:visible":function(t){e.subdialog=t}}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("pre",{staticClass:"ace_editor",staticStyle:{width:"100%","min-height":"300px"},attrs:{id:"subdialog"}},[e._v("                      "),a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}}),e._v("        ")])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-switch",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"自动刷新"},on:{change:e.stopsub},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.closeWuDialog,"close-on-click-modal":!1,"show-close":!1,top:"1vh",visible:e.resourcedialogFormVisible,width:"90%"},on:{"update:visible":function(t){e.resourcedialogFormVisible=t}}},[a("el-form",{ref:"resourceform",attrs:{model:e.resourceform}},[a("div",{staticClass:"wumoxing"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:e.$translateTitle("product.physicalmodel")}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editormodel"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:e.$translateTitle("product.customizedatamodel")}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editorcreate"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)])],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeWuDialog}},[e._v(" "+e._s(e.$translateTitle("product.quit"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addData.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:e.$translateTitle("product.export"),visible:e.exportDialogShow,width:"25%"},on:{"update:visible":function(t){e.exportDialogShow=t}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-right",attrs:{size:"small"},on:{click:function(t){e.exportDialogShow=!1}}},[e._v(" "+e._s(e.$translateTitle("tagsView.close"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseCollecttion,"close-on-click-modal":!1,fullscreen:!0,title:e.$translateTitle("product.viewcollectionformula"),visible:e.collectionDialogVisible,width:"100%"},on:{"update:visible":function(t){e.collectionDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"diaCollLeftCls"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex}},[e._l(e.wmxData,(function(t,r){return[a("el-menu-item",{key:r+"",attrs:{index:t.identifier},on:{click:function(a){return e.menuTabClick(t,r)}}},[t.dataType.specs?a("ol",[e._v(" "+e._s(t.identifier+"        "+t.name+"        取值范围"+t.dataType.specs.min+"~"+t.dataType.specs.max)+" ")]):a("ol",[e._v(" "+e._s(t.identifier+"        "+t.name)+" ")])])]}))],2)],1)]),a("el-col",{attrs:{span:18}},[a("el-tabs",{attrs:{closable:"",type:"card"},on:{"tab-click":e.handleRightTopTabClick,"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,r){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("div",{staticClass:"diaCollRightCls"},[a("el-row",{staticStyle:{margin:"10px"}},[a("el-button",{attrs:{type:"success"}},[e._v(" "+e._s(e.$translateTitle("rule.Test"))+" ")]),a("el-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.onReductionTap(r)}}},[e._v(" "+e._s(e.$translateTitle("product.reduction"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSaveTap(r)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1),a("pre",{staticClass:"ace_editor3",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:t.name}},[a("textarea",{staticClass:"ace_text-input"})])],1)])})),1)],1)],1)],1)],1)},u=[],p=a("1da1"),m=a("5530"),f=(a("96cf"),a("ac1f"),a("00b4"),a("e9c4"),a("4de4"),a("d3b7"),a("b0c0"),a("99af"),a("d81d"),a("3ca3"),a("ddb0"),a("a434"),a("a9e3"),a("159b"),a("b64b"),a("5319"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("a15b"),a("5880")),g=a("1285"),h=a("7212"),b=a("e0e9"),v=a("89e8"),y=a("1b07"),T=a("bb22"),$=a("5118"),w=a("c620"),C=a("4080"),k=a("926a"),x={},I=a("f43e").Base64,S="",F="",j={components:{wmxdetail:C["default"]},data:function(){var e=this,t=function(e,t,a){var r=/[0-9a-zA-Z]/;r.test(t)?a():a(new Error("协议名称由数字和字母组合"))},a=function(t,a,r){""===a?r(new Error("最小值不能为空")):""!==e.sizeForm.endnumber&&(a>=e.sizeForm.endnumber?r(new Error("最小值小于最大值")):r())},r=function(t,a,r){""===a?r(new Error("最大值不能为空")):""!==e.sizeForm.startnumber&&(a<=e.sizeForm.startnumber?r(new Error("最大值必须大于最小值")):r())},i=function(t,a,r){a<0?r(new Error("步长大于0")):a>=e.sizeForm.endnumber-e.sizeForm.startnumber?r(new Error("步长必须小于最大值和最小值的差值")):r()},o=function(t,a,r){""===a?r(new Error("最小值不能为空")):""!==e.structform.endnumber&&(a>=e.structform.endnumber?r(new Error("最小值小于最大值")):r())},n=function(t,a,r){""===a?r(new Error("最大值不能为空")):""!==e.structform.startnumber&&(a<=e.structform.startnumber?r(new Error("最大值必须大于最小值")):r())},s=function(t,a,r){a<0?r(new Error("步长大于0")):a>=e.structform.endnumber-e.structform.startnumber?r(new Error("步长必须小于最大值和最小值的差值")):r()};return{FromMachine:[{name:"ALL"}],machineForm:{},machine:!1,devicetype:"",machinestatus:"add",machineindex:0,options:[{value:"first",label:"第一轮"},{value:"last",label:"最后一轮"},{value:"all",label:"全部"}],activeIndex:"",editableTabsValue:"1",editableTabs:[],tabIndex:1,sizeOption:[{label:"20",val:"20"},{label:"不采集(计算值)",val:"计算值"},{label:"不采集(主动上报)",val:"主动上报"}],showList:!1,collapseName:["1","2","3","4"],multipleSelection:[],protolchannel:[],protoldialog:!1,productimg:"",topicdialogVisible:!1,topicform:{topic:"",type:"",desc:"",isupdated:-1},exportDialogShow:!1,exportUrl:"",exportName:"",decodertotal:0,decoderstart:0,leftItemPos:0,ed3isShow:!1,rightCollection:"",decoderlength:10,topicrule:{topic:[{required:!0,message:"请输入Topic类",trigger:"blur"}],type:[{required:!0,message:"请选择Topic权限",trigger:"change"}]},topicstart:1,topiclength:10,topictotal:0,channelData:[],allchannelData:[],innerVisible:!1,allChannelstart:0,allChannellength:20,allChanneltotal:0,category:[],current:0,schemadialogVisible:!1,collectionDialogVisible:!1,PropData:[],originwmx:!1,wmxdialogVisible:!1,wmxSituation:"新增",allunit:[],sizerule:{step:[{required:!0,trigger:"blur",validator:i}],string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],startnumber:[{validator:a,required:!0,trigger:"blur"}],endnumber:[{validator:r,required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},structrule:{string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],step:[{required:!0,trigger:"blur",validator:s}],startnumber:[{validator:o,required:!0,trigger:"blur"}],endnumber:[{validator:n,required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},structdialog:!1,structform:{resource:1,identifier:"",type:"INT",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",date:"String类型的UTC时间戳 (毫秒)",string:"",specs:[],dis:"0X10",dinumber:"null"},tableData:[],activeName:"first",form:{Productname:"",ProductKey:"",ProductAll:0},ProductSecret:"",dynamicReg:!1,productId:"",productName:"",productdetail:{},topicData:[],topic:[{topic:"thing/${ProductId}/${DevAddr}/post",type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/${ProductId}/${DevAddr}",type:"sub",desc:"消息下发",isdef:!0}],isshow:!1,addRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:t,trigger:"blur"}]},dialogTableVisible:!1,gridData:[],formInline:{name:"",version:"",desc:"",resource:!1},option:[],CategoryKey:"",productstart:0,productlength:10,producttotal:0,wmxstart:1,wmxPageSize:10,wmxtotal:20,wmxData:[],wmxDataBk:[],editorList:[],warningeditror:[],channellength:20,channelstart:0,channeltotal:0,isupdatedstruct:-1,issub:!1,subtimer:null,subdialog:!1,textarea:"",subdialogtimer:null,subdialogid:"",subaction:"stop",channelname:"",value4:!0,rulepagesize:10,rulestart:0,ruletotal:0,engineData:[],channeltype:0,resourcechannelData:[],resourcestart:0,resourcelength:10,resourcetotal:0,resourcedialogFormVisible:!1,resourceform:{},resourcechannelid:"",isreload:1,modifyIndex:-1,iframeShow:!1}},computed:Object(m["a"])({treeData:function(){var e=JSON.parse(JSON.stringify(this.option));return e.filter((function(t){var a=e.filter((function(e){return t.id==e.parentid}));return a.length>0&&(t.children=a),0==t.parentid}))},showNewItem:function(){return!(!this.sizeForm||"modbus"!=this.sizeForm.protocol)}},Object(f["mapGetters"])({sizeForm:"konva/sizeForm"})),watch:{issub:{deep:!0,handler:function(e){var t=this;this.subtimer=window.setInterval((function(){t.subAce("formInline",!1)}),5e3)}}},mounted:function(){var e=this;this.$nextTick((function(){e.$refs._tabs.$children[0].$refs.tabs[3].style.display="none"})),this.Industry(),this.getAllunit(),o=ace.edit("editor2"),o.session.setMode("ace/mode/text"),o.setTheme("ace/theme/monokai"),o.setReadOnly(!0),o.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},beforeDestroy:function(){window.clearInterval(this.subtimer),this.subtimer=null,window.clearInterval(this.subdialogtimer),this.subdialogtimer=null},methods:Object(m["a"])(Object(m["a"])({},Object(f["mapMutations"])({setSizeForm:"konva/setSizeForm"})),{},{tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""},selectStruct:function(e){},toggleList:function(){this.showList=!this.showList},getFormOrginalData:function(){return{devicetype:this.devicetype,strategy:"20",resource:1,identifier:"",dis:"0X10",dinumber:"null",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",isshow:!0,unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:{},precision:3,round:"all",struct:[{attribute:"",attributevalue:""}],rate:1,offset:0,order:0,protocol:"normal",operatetype:"readCoils",originaltype:"short16_AB",slaveid:"0X10",collection:"%s",control:"%d",nobound:[],editdatatype:!1,iscount:"0",countstrategy:20,countround:"all",countcollection:"%s"}},changeValue:function(e){this.$refs[e].validateField("startnumber",(function(e){if(e)return!1}))},changeStructValue:function(e){this.$refs[e].validateField("startnumber",(function(e){if(e)return!1}))},getRowClass:function(e,t){if("struct"!=e.row.dataType.type)return"row-expand-cover"},getChannelEnable:function(e,t){return 1==e.row.isEnable?"green_active":"red_active"},handleClick:function(e){"fourth"==e.name||("fiveth"==e.name?this.getProductChannel():"second"==e.name?this.getTopic():"seven"==e.name?this.getResourceChannel():"sixeth"==e.name?this.orginRule():"eighth"==e.name?this.isreload++:"fourth"!=e.name&&(window.clearInterval(this.subtimer),this.subtimer=null))},getAllunit:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(b["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]),e.allunit.unshift({data:{Name:"无",Symbol:""}});case 7:case"end":return t.stop()}}),t)})))()},getTopic:function(){var e=this;this.$get_object("Product",this.productId).then((function(t){t&&(e.topicData=t.topics.concat(e.topic))})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}))},exportProduct:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={name:e.productName},t.next=3,Object(h["queryProduct"])(a);case 3:r=t.sent,r&&window.open(window.location.origin+"/product?name="+e.productName,"_blank");case 5:case"end":return t.stop()}}),t)})))()},updatesubdialog:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.protoldialog=!0,a="1",r={__type:"Pointer",className:"Product",objectId:e.productId},Object(v["getChannelCountByProduct"])(e.channellength,e.channelstart,r,a).then((function(t){e.protolchannel=t.results,e.$refs.multipleTable.toggleAllSelection()})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}));case 4:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.multipleSelection=e},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map((function(e){t.push(new Promise((function(t,a){return Object(T["subupadte"])(e.objectId,"update").then((function(e){e&&t(e)})).catch((function(e){a(e)}))})))})),Promise.all(t).then((function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)})).catch((function(t){e.$message({message:t,type:"error"})}))}},showAllChannel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.allChanneltotal=0,this.allchannelData=[],this.channeltype=1,this.innerVisible=!0;var a={$in:["1","3"]},r={$ne:{__type:"Pointer",className:"Product",objectId:this.productId}};Object(v["getChannelCountByProduct"])(""!=t?this.allChannellength:this.channellength,""!=t?this.allChannelstart:this.channelstart,r,a).then((function(t){e.allChanneltotal=t.count,e.allchannelData=t.results})).catch((function(e){}))},getProductChannel:function(){var e=this,t={$in:["1","3"]},a={__type:"Pointer",className:"Product",objectId:this.productId};Object(v["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.channeltotal=t.count,e.channelData=t.results,0==t.results.length})).catch((function(e){}))},resourceShowAllChannel:function(){var e=this;this.allChanneltotal=0,this.allchannelData=[],this.channeltype=0,this.innerVisible=!0;var t={$in:["2"]},a={$ne:{__type:"Pointer",className:"Product",objectId:this.productId}};Object(v["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.allChanneltotal=t.count,e.allchannelData=t.results})).catch((function(e){}))},getResourceChannel:function(){var e=this,t={$in:["2"]},a={__type:"Pointer",className:"Product",objectId:this.productId};Object(v["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.resourcetotal=t.count,e.resourcechannelData=t.results})).catch((function(e){}))},addProductChannel:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={product:{__op:"AddRelation",objects:[{__type:"Pointer",className:"Product",objectId:t.productId}]}},a.next=3,Object(v["saveChanne"])(e,r);case 3:i=a.sent,i&&(t.$message({type:"success",message:"添加成功"}),1==t.channeltype?(t.showAllChannel(),t.getProductChannel()):(t.resourceShowAllChannel(),t.getResourceChannel()));case 5:case"end":return a.stop()}}),a)})))()},deleteRelation:function(e){var t=this,a={product:{__op:"RemoveRelation",objects:[{__type:"Pointer",className:"Product",objectId:this.productId}]}};Object(v["saveChanne"])(e.objectId,a).then((function(e){e&&t.$message({type:"success",message:"移除成功"}),t.getProductChannel(),t.getResourceChannel()}))},channelSizeChange:function(e){this.channellength=e,this.getProductChannel()},channelCurrentChange:function(e){this.channelstart=(e-1)*this.channellength,this.getProductChannel()},resourcechannelSizeChange:function(e){this.resourcelength=e,this.getResourceChannel()},resourcechannelCurrentChange:function(e){this.resourcestart=(e-1)*this.resourcelength,this.getResourceChannel()},allChannelSizeChange:function(e){this.allChannellength=e,this.showAllChannel("Channel")},allChannelCurrentChange:function(e){this.allChannelstart=(e-1)*this.allChannellength,this.showAllChannel("Channel")},customize:function(e){var t=this;this.resourcedialogFormVisible=!0,this.resourcechannelid=e.objectId,x=JSON.parse(JSON.stringify(e.config)),Object($["setTimeout"])((function(){s=ace.edit("editormodel"),s.session.setMode("ace/mode/json"),s.setTheme("ace/theme/twilight"),s.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),s.setReadOnly(!0),s.setValue(JSON.stringify(t.productdetail.thing,null,4)),l=ace.edit("editorcreate"),l.session.setMode("ace/mode/mysql"),l.setTheme("ace/theme/twilight"),l.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),e.config.datamodel&&""!=e.config.datamodel?l.setValue(e.config.datamodel):l.setValue('{\n          "vars":{\n            "database":"aosong",\n            "stable":"meter",\n            "value":[\n              {\n                "timestamp":"TIMESTAMP",\n                "bytes":8\n              },\n              {\n                "temperature":"FLOAT",\n                "bytes":4\n              },\n              {\n                "humidity":"FLOAT",\n                "bytes":4\n              }\n            ],\n            "tags":[\n              {\n                "devaddr":"BINARY",\n                "bytes":12\n              }\n            ],\n            "table":"devaddr",\n            "keep":3650\n          },\n          "sql":{\n            "create_database":"CREATE DATABASE IF NOT EXISTS ${database} KEEP ${keep}",\n            "drop_database":"DROP DATABASE IF EXISTS ${database}",\n            "creat_stable":"CREATE TABLE IF NOT EXISTS ${database}.${stable} (${timestamp} TIMESTAMP, temperature FLOAT, humidity FLOAT) TAGS(devaddr BINARY[12]);",\n            "drop_stable":"DROP TABLE ${database}.${stable}",\n            "insert_stable":"INSERT INTO ${database}.${table} USING ${database}.${stable} TAGS (${devaddr}) VALUES (${temperature}, ${humidity})",\n            "insert_table":"INSERT INTO ${database}.${table} VALUES (${temperature}, ${humidity})",\n            "create_table":"CREATE TABLE ${databas}.${table} USING ${database}.${stable} TAGS (${devaddr});"\n          }\n        }')}))},questionModel:function(){Object($["setTimeout"])((function(){c=ace.edit("editorinsert"),c.session.setMode("ace/mode/mysql"),c.setTheme("ace/theme/gob"),c.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),c.setValue('{\n        "vars":{\n          "database":"database",\n          "table":"stable",\n          "value":[\n            {\n              "timestamp":"TIMESTAMP",\n              "bytes":8\n            },\n            {\n              "int":"INT",\n              "bytes":4\n            },\n            {\n              "bigint":"BIGINT",\n              "bytes":8\n            },\n            {\n              "float":"FLOAT",\n              "bytes":4\n            },\n            {\n              "double":"DOUBLE",\n              "bytes":8\n            },\n            {\n              "binary":"BINARY",\n              "bytes":"自定义"\n            },\n            {\n              "smallint":"SMALLINT",\n              "bytes":2\n            },\n            {\n              "tinyint":"TINYINT",\n              "bytes":1\n            },\n            {\n              "bool":"BOOL",\n              "bytes":1\n            },\n            {\n              "nchar":"NCHAR",\n              "bytes":"自定义"\n            }\n          ],\n          "tags":[\n            {\n              "int":"INT",\n              "bytes":4\n            },\n            {\n              "bigint":"BIGINT",\n              "bytes":8\n            },\n            {\n              "float":"FLOAT",\n              "bytes":4\n            },\n            {\n              "double":"DOUBLE",\n              "bytes":8\n            },\n            {\n              "binary":"BINARY",\n              "bytes":"自定义"\n            },\n            {\n              "smallint":"SMALLINT",\n              "bytes":2\n            },\n            {\n              "tinyint":"TINYINT",\n              "bytes":1\n            },\n            {\n              "bool":"BOOL",\n              "bytes":1\n            },\n            {\n              "nchar":"NCHAR",\n              "bytes":"自定义"\n            }\n          ]\n        },\n        "sql":{\n          "create_database":"CREATE DATABASE IF NOT EXISTS {{database}} KEEP {{keep}}",\n          "drop_database":"DROP DATABASE IF EXISTS {{database}}",\n          "creat_stable":"CREATE TABLE IF NOT EXISTS {{database}}.{{stable}} ({{timestamp}} TIMESTAMP, temperature FLOAT, humidity FLOAT) TAGS(devaddr BINARY[12]);",\n          "drop_stable":"DROP TABLE {{database}}.{{stable}}",\n          "insert_stable":"INSERT INTO {{database}}.{{table}} USING {{database}}.{{stable}} TAGS ({{devaddr}}) VALUES ({{temperature}}, {{humidity}})",\n          "insert_table":"INSERT INTO {{database}}.{{table}} VALUES ({{temperature}}, {{humidity}})",\n          "create_table":"CREATE TABLE {{database}}.{{table}} USING {{database}}.{{stable}} TAGS ({{devaddr}});"\n        }\n      }')}))},addData:function(){var e=this;x.datamodel=l.getValue();var t={config:x};this.$update_object("Channel",this.rproductdetailesourcechannelid,t).then((function(t){t&&e.$message("添加成功")}),(function(e){Object(k["returnLogin"])(e)}))},closeWuDialog:function(){this.resourcedialogFormVisible=!1,this.resourcechannelid=""},removeDomain:function(e){var t=this.sizeForm.struct.indexOf(e);-1!==t&&this.sizeForm.struct.splice(t,1)},addDomain:function(){this.sizeForm.struct.push({attribute:"",attributevalue:""})},removeDomain1:function(e){var t=this.structform.specs.indexOf(e);-1!==t&&this.structform.specs.splice(t,1)},addDomain1:function(){this.structform.specs.push({value:"",name:""})},submitForm:function(e){var t=this,a={name:e.name,devicetype:e.devicetype,dataForm:{round:e.round,data:e.dinumber,address:e.dis,rate:e.rate,offset:e.offset,order:e.order,protocol:e.protocol,operatetype:e.operatetype,originaltype:e.originaltype,slaveid:e.slaveid,collection:e.collection,control:e.control,strategy:e.strategy,iscount:e.iscount,countstrategy:e.countstrategy,countround:e.countround,countcollection:e.countcollection},ico:e.ico,required:!0,accessMode:e.isread,isshow:e.isshow,identifier:e.identifier};if("float"==e.type||"double"==e.type||"int"==e.type||"long"==e.type){var r={dataType:{type:e.type.toLowerCase(),specs:{max:e.endnumber,min:e.startnumber,step:e.step,precision:Number(e.precision),unit:""==e.unit?"":e.unit}}};Object.assign(a,r),this.showNewItem||(delete a.dataForm.operatetype,delete a.dataForm.originaltype,delete a.dataForm.slaveid)}else if("image"==e.type){var i={dataType:{type:e.type.toLowerCase(),imagevalue:e.imagevalue,specs:{}}};Object.assign(a,i)}else if("bool"==e.type){i={dataType:{type:e.type.toLowerCase(),specs:{0:e.false,1:e.true}}};Object.assign(a,i)}else if("enum"==e.type){var o={};e.struct.map((function(e){var t=e["attribute"];o[t]=e["attributevalue"]}));i={dataType:{type:e.type.toLowerCase(),specs:o}};Object.assign(a,i)}else if("struct"==e.type){i={dataType:{type:e.type.toLowerCase(),specs:e.struct}};Object.assign(a,i)}else if("text"==e.type){i={dataType:{type:e.type.toLowerCase(),size:e.string,specs:{}}};Object.assign(a,i)}else if("date"==e.type){i={dataType:{type:e.type.toLowerCase(),specs:{}}};Object.assign(a,i)}else if("geopoint"==e.type){i={dataType:{type:e.type.toLowerCase(),gpstype:e.gpstype,specs:{}}};Object.assign(a,i)}delete a.index;var n={item:a,productid:this.productId};"新增"==this.wmxSituation?Object(h["postThing"])(n).then((function(e){200==e.code?(t.$message({type:"success",message:"新增成功"}),t.getProDetail()):t.$message({type:"warning",message:"新增失败"+e.msg})})):"编辑"==this.wmxSituation&&Object(h["putThing"])(n).then((function(e){200==e.code?(t.$message({type:"success",message:"编辑成功"}),t.getProDetail()):t.$message({type:"warning",message:"编辑失败"+e.msg})})),this.wmxdialogVisible=!1},createProperty:function(){this.setSizeForm(this.getFormOrginalData()),this.wmxdialogVisible=!0,this.wmxSituation="新增"},wmxDataFill:function(e,t){this.modifyIndex=t,this.wmxdialogVisible=!0,this.wmxSituation="编辑";var a={};if(-1!=["float","double","int","long"].indexOf(e.dataType.type))a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,endnumber:this.$objGet(e,"dataType.specs.max"),startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),precision:this.$objGet(e,"dataType.specs.precision"),dis:this.$objGet(e,"dataForm.address"),round:this.$objGet(e,"dataForm.round"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),slaveid:this.$objGet(e,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0},e.dataForm&&(a.collection=e.dataForm.collection,a.control=e.dataForm.control,a.strategy=e.dataForm.strategy);else if("bool"==e.dataType.type)a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,true:e.dataType.specs[1],false:e.dataType.specs[0],startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!1,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0};else if("image"==e.dataType.type)a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,imagevalue:e.dataType.imagevalue,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!1,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0};else if("enum"==e.dataType.type){var r=[];for(var i in e.dataType.specs)r.push({attribute:i,attributevalue:e.dataType.specs[i]});a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,specs:e.dataType.specs,struct:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}}else"struct"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,struct:e.dataType.specs,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,identifier:void 0==e.dataForm?"":e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}:"text"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,string:e.dataType.size,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}:"date"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),order:this.$objGet(e,"dataForm.order"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0}:"geopoint"==e.dataType.type&&(a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,gpstype:e.dataType.gpstype,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),order:this.$objGet(e,"dataForm.order"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0});this.setSizeForm(a)},submitStruct:function(e){var t=this;this.$refs[e].validate((function(a){if(a){var r={};if("float"==t.structform.type||"double"==t.structform.type||"int"==t.structform.type)r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:{max:t.structform.endnumber,min:t.structform.startnumber,step:t.structform.step,unit:""==t.structform.unit?"":t.structform.unit}},dataForm:{address:t.structform.dis,data:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier};else if("bool"==t.structform.type)r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:{0:t.structform.false,1:t.structform.true}},dataForm:{address:t.structform.dis,data:t.structform.dinumber},required:!1,accessMode:t.structform.isread,identifier:t.structform.identifier};else if("enum"==t.structform.type){var i={};t.structform.struct.map((function(e){var t=e["attribute"];i[t]=e["attributevalue"]})),r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),struct:t.structform.struct,specs:i},dataForm:{address:t.structform.dis,data:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier}}else"text"==t.structform.type?r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),size:t.structform.string},dataForm:{address:t.structform.dis,data:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier}:"date"==t.structform.type&&(r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase()},dataForm:{address:t.structform.dis,data:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier});-1==t.isupdatedstruct?t.sizeForm.struct.push(r):(t.sizeForm.struct.splice(t.isupdatedstruct,1,r),t.isupdatedstruct=-1),t.$refs[e].resetFields(),t.structdialog=!1}}))},addStruct:function(e){this.structdialog=!0,this.structform={resource:1,identifier:"",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",specs:[],date:"String类型的UTC时间戳 (毫秒)",string:""}},editStruct:function(e,t){var a=this;if(this.isupdatedstruct=t,this.structdialog=!0,this.structform.type=e.dataType.type.toUpperCase(),this.structform.name=e.name,this.structform.identifier=e.identifier,this.structform.isread=e.accessMode,"float"==e.dataType.type||"double"==e.dataType.type||"int"==e.dataType.type)this.structform.startnumber=e.dataType.specs.min,this.structform.endnumber=e.dataType.specs.max,this.structform.step=e.dataType.specs.step,this.structform.unit=e.dataType.specs.unit;else if("bool"==e.dataType.type)this.structform.true=e.dataType.specs["1"],this.structform.false=e.dataType.specs["0"];else if("enum"==e.dataType.type){this.structform.specs=[];var r={};Object.keys(e.dataType.specs).forEach((function(t,i){r.attribute=t,r.attributevalue=e.dataType.specs[t],a.structform.specs.push(r)}))}else"text"==e.dataType.type&&(this.structform.string=e.dataType.size)},deleteStruct:function(e){this.sizeForm.struct.splice(e,1)},preserve:function(){var e=this,t={thing:JSON.parse(i.getValue())};this.$update_object("Product",this.productId,t).then((function(t){t&&(e.$message({type:"success",message:"添加成功"}),e.schemadialogVisible=!1)})).catch((function(e){}))},Industry:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.option=[],t.next=3,e.$getIndustry("category",100);case 3:a=t.sent,r=a.results,r.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)})),e.getProDetail();case 7:case"end":return t.stop()}}),t)})))()},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getPropData:function(e){var t=this;0==e&&(this.productstart=0),this.CategoryKey=this.$route.query.CategoryKey;var a={count:"objectId",limit:this.productlength,skip:this.productstart,where:{"data.key":"category"}};0!=this.category.length&&(a.where.type=this.category[this.category.length-1]),Object(b["getDictCount"])(a).then((function(e){t.producttotal=e.count,t.PropData=e.results})).catch((function(e){}))},productSizeChange:function(e){this.productlength=e,this.getPropData()},productCurrentChange:function(e){this.productstart=(e-1)*this.productlength,this.getPropData()},checkAddTest:function(){var e=this;this.collectionDialogVisible=!0,this.editableTabsValue=this.wmxData[0].identifier,this.activeIndex=this.wmxData[0].identifier,this.editableTabs=[],this.editorList=[],this.tabIndex=1,this.ed3isShow=!1,this.editableTabs.push({title:this.wmxData[0].identifier,name:this.wmxData[0].identifier,leftItemPos:0,content:void 0==this.wmxData[0].dataForm?"":this.wmxData[0].dataForm.collection}),0==this.ed3isShow&&Object($["setTimeout"])((function(){e.editorList.push(ace.edit(e.wmxData[0].identifier)),e.editorList[0].session.setMode("ace/mode/erlang"),e.editorList[0].setTheme("ace/theme/monokai"),e.editorList[0].setHighlightActiveLine(!0),e.editorList[0].setFontSize(20),e.editorList[0].setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),e.ed3isShow=!0,e.editorList[0].setValue(void 0==e.wmxData[0].dataForm?"":e.wmxData[0].dataForm.collection)}),1)},handleRightTopTabClick:function(e,t){this.activeIndex=e.label},menuTabClick:function(e,t){var a=this;this.activeIndex=e.identifier;var r=this.editableTabs,i=!1,o=0;r.forEach((function(t,a){t.name===e.identifier&&(i=!0,o=a)})),0==i?(this.editableTabs.push({title:e.identifier,name:e.identifier,leftItemPos:t,content:void 0==e.dataForm?"":e.dataForm.collection}),Object($["setTimeout"])((function(){a.editorList.push(ace.edit(e.identifier)),a.editorList[a.editorList.length-1].session.setMode("ace/mode/erlang"),a.editorList[a.editorList.length-1].setTheme("ace/theme/monokai"),a.editorList[a.editorList.length-1].setHighlightActiveLine(!0),a.editorList[a.editorList.length-1].setFontSize(20),a.editorList[a.editorList.length-1].setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),a.editorList[a.editorList.length-1].setValue(void 0==e.dataForm?"":e.dataForm.collection)}),1),this.editableTabsValue=e.identifier,this.rightCollection=void 0==e.dataForm?"":e.dataForm.collection):(this.editableTabsValue=e.identifier,this.editorList[o].setValue(void 0==e.dataForm?"":e.dataForm.collection))},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach((function(r,i){if(r.name===e){var o=t[i+1]||t[i-1];o&&(a=o.name)}})),this.editableTabsValue=a,this.activeIndex=a,this.editableTabs=t.filter((function(t){return t.name!==e}))},onSaveTap:function(e){var t=this,a=this.editableTabs[e].leftItemPos;this.productdetail.thing.properties[a].dataForm.collection=this.editorList[e].getValue();var r={thing:this.productdetail.thing};this.$update_object("Product",this.productId,r).then((function(e){e&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail())})).catch((function(e){}))},handleCloseCollecttion:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},onReductionTap:function(e){var t=this.editableTabs[e].leftItemPos;this.editorList[e].setValue(this.wmxData[t].dataForm.collection)},checkschema:function(){var e=this;this.schemadialogVisible=!0,Object($["setTimeout"])((function(){i=ace.edit("editor1"),i.session.setMode("ace/mode/json"),i.setTheme("ace/theme/eclipse"),i.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),i.setValue(JSON.stringify(e.productdetail.thing,null,4))}),1)},getProDetail:function(){var e=this;r=ace.edit("editor"),r.session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.productId=this.$route.query.id,this.queryDeviceCount(this.productId),this.$get_object("Product",this.productId).then((function(t){if(t){for(var a in e.productName=t.name,t)e.productdetail[a]=t[a];e.option.map((function(t){e.productdetail.category==t.value&&(e.productdetail.category=t.label)})),e.productdetail.createdAt=e.utc2beijing(t.createdAt),e.productdetail.id=t.id,e.dynamicReg=t.dynamicReg,e.productdetail.isshow=0,e.form.Productname=t.name,e.ProductSecret=t.productSecret,e.form.Productkey=e.productId,e.productimg=t.icon,t.decoder?(S=t.decoder.code,e.formInline.name=t.decoder.name,e.formInline.version=t.decoder.version,e.formInline.desc=t.decoder.desc):S="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4=",void 0!=e.productdetail.thing&&"{}"!=JSON.stringify(e.productdetail.thing)||(e.productdetail.thing={properties:[]}),e.wmxData=[],e.wmxDataBk=[],e.wmxData=e.productdetail.thing.properties.filter((function(e,t){return e.index=t,e.name&&e.dataType})),e.wmxDataBk=e.wmxData,e.wmxDataBk.forEach((function(t){if(t.devicetype){var a={name:t.devicetype};e.FromMachine.push(a)}})),e.FromMachine=_.uniqBy(e.FromMachine,"name"),r.setValue(I.decode(S)),r.gotoLine(r.session.getLength())}})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}))},queryDeviceCount:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["getDeviceCountByProduct"])(e);case 2:t.form.ProductAll=a.sent;case 3:case"end":return a.stop()}}),a)})))()},handelUpdate:function(e,t){var a,r=this;a=1!=e,this.dynamicReg=a;var i={dynamicReg:!a};this.$update_object("Product",this.productId,i).then((function(e){e&&(r.$message({type:"success",message:"修改成功"}),r.dynamicReg=!a)})).catch((function(e){}))},wmxhandleClose:function(){this.wmxdialogVisible=!1,this.setSizeForm(this.getFormOrginalData())},protol:function(){var e=this,t="";Object(T["Compile"])(I.encode(r.getValue())).then((function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map((function(e){t+=e+"\r\n"})),F+=t,o.setValue(F))})).catch((function(a){e.warningeditror=a.error,e.warningeditror.map((function(e){t+=e+"\r\n"})),F+=t,o.setValue(F)}))},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},deletedata:function(e){var t=this;this.$del_object("Dict",e).then((function(e){e&&(t.$message("成功删除"),t.chaxun())})).catch((function(e){}))},subAce:function(e,t){var a=this;this.$refs[e].validate((function(e){if(e){var i={name:a.formInline.name,version:a.formInline.version,code:I.encode(r.getValue()),desc:a.formInline.desc},n={decoder:i};a.$update_object("Product",a.productId,n).then((function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(F+="保存成功",o.setValue(F))),a.issub=!0})).catch((function(e){}))}else a.$message({type:"warning",message:"输入格式有误"})}))},subAce1:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={where:{"data.name":t.formInline.name,"data.version":t.formInline.version}};t.$query_object("Dict",a).then((function(e){e.results&&e.results.length>=1?t.$message("此协议版本已存在"):t.$get_object("Product",t.productId).then((function(e){if(e){var a={name:t.formInline.name,version:t.formInline.version,code:I.encode(r.getValue()),desc:t.formInline.desc},i={key:t.formInline.name+":"+t.formInline.version,type:"decoder",data:a,ACL:e.ACL};t.$create_object("Dict",i).then((function(e){e.error?t.$message({type:"error",message:e.error}):t.$message({type:"success",message:"保存到公共协议库成功"})})).catch((function(e){}))}}))})).catch((function(e){}))}else t.$message({type:"warning",message:"输入格式有误"})}))},updatesub:function(e){var t=this;Object(T["subupadte"])(e.objectId,"update").then((function(e){e&&t.$message("重载成功")})).catch((function(e){t.$message(e.error)}))},chaxun:function(){var e=this,t={count:"objectId",skip:this.decoderstart,limit:this.decoderlength,where:{type:"decoder"}};this.dialogTableVisible=!0,this.$query_object("Dict",t).then((function(t){t&&(e.decodertotal=t.count,e.gridData=t.results)})).catch((function(e){}))},editordata:function(e){this.formInline.name=e.data.name,this.formInline.version=e.data.version,this.formInline.desc=e.data.desc,this.formInline.resource=e.data.enable,r.setValue(I.decode(e.data.code)),this.dialogTableVisible=!1},goToDevices:function(){this.$router.push({path:"/roles/thing",query:{productid:this.productId}})},addcategory:function(){this.originwmx=!0,this.getPropData()},addMachine:function(){this.machineForm={},this.machine=!0,this.machinestatus="add"},savemachine:function(e){"edit"==this.machinestatus?this.FromMachine[this.machineindex]=e:this.FromMachine.push(e),this.machine=!1},clickmachine:function(e,t,a){"ALL"==e.name?this.wmxData=this.wmxDataBk:(this.devicetype=e.name,this.wmxData=this.wmxDataBk.filter((function(t){return t.devicetype==e.name})),this.wmxstart=1)},handleChange:function(e,t,a){},TypeInstall:function(e,t){t.map((function(t,a){if("enum"==t.DataType||"bool"==t.DataType){var r={dataType:{specs:{}}};r.name=t.Name,r.dataType.type=t.DataType,r.required=t.Required,r.identifier=t.Identifier,r.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map((function(e){for(var t in e){var a=e["value"],i=e["name"];r.dataType.specs[a]=i}})),e.push(r)}else if("double"==t.DataType||"int"==t.DataType||"float"==t.DataType){r={dataType:{specs:{}}};for(var i in r.name=t.Name,r.dataType.type=t.DataType,r.required=t.Required,r.identifier=t.Identifier,r.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecs))r.dataType.specs.min=JSON.parse(t.DataSpecs)["min"],r.dataType.specs.max=JSON.parse(t.DataSpecs)["max"],r.dataType.specs.step=JSON.parse(t.DataSpecs)["step"],r.dataType.specs.unit=JSON.parse(t.DataSpecs)["unit"];e.push(r)}else if("struct"==t.DataType){var o={dataType:{specs:[]}};o.name=t.Name,o.dataType.type=t.DataType,o.required=!t.Required,o.identifier=t.Identifier,o.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map((function(e){if("enum"==e.childDataType||"bool"==e.childDataType){var t={dataType:{specs:{}}};t.name=e.childName,t.dataType.type=e.childDataType.toLowerCase(),t.required=e.Required,t.identifier=e.identifier,t.accessMode=1==e.RwFlag?"r":"rw",e.childEnumSpecsDTO.map((function(e){for(var a in e){var r=e["value"],i=e["name"];t.dataType.specs[r]=i}})),o.dataType.specs.push(t)}else if("double"==e.childDataType||"int"==e.childDataType||"float"==e.childDataType){t={dataType:{specs:{}}};for(var a in t.name=e.childName,t.dataType.type=e.childDataType.toLowerCase(),t.required=e.Required,t.identifier=e.identifier,t.accessMode=1==e.RwFlag?"r":"rw",e.childSpecsDTO)t.dataType.specs.min=e.childSpecsDTO["min"],t.dataType.specs.max=e.childSpecsDTO["max"],t.dataType.specs.step=e.childSpecsDTO["precise"],t.dataType.specs.unit=e.childSpecsDTO["unit"];o.dataType.specs.push(t)}})),e.push(o)}}));var a={};e=e.reduce((function(e,t){return!a[t.identifier]&&(a[t.identifier]=e.push(t)),e}),[])},addProCategory:function(e){var t=this,a={where:{type:e.type,"data.key":"detail"}};this.$query_object("Dict",a).then((function(e){var a=e.results;if(a&&a[0].data.Ability){t.TypeInstall(t.productdetail.thing.properties,a[0].data.Ability);var r={thing:t.productdetail.thing};t.$update_object("Product",t.productId,r).then((function(e){e&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail())})).catch((function(e){}))}}))},deletewmx:function(e){var t=this,a={productid:this.productId,item:e};Object(h["deleteThing"])(a).then((function(e){200==e.code?(t.$message({type:"success",message:"删除成功"}),t.getProDetail()):t.$message({type:"warning",message:"删除失败 "+e.msg})}))},wmxSizeChange:function(e){this.wmxstart=1,this.wmxPageSize=e},wmxCurrentChange:function(e){this.wmxstart=e},nowtime:function(){var e=Date.parse(new Date),t=new Date(e),a=(t.getFullYear(),t.getMonth()+1<=10?t.getMonth():t.getMonth(),t.getDate()+1<=10?t.getDate():t.getDate(),(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":"),r=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",i=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();return a+r+i+" "},subProTopic:function(e){this.subdialog=!0,this.subdialogid=e.objectId,this.channelname=e.objectId,Object($["setTimeout"])((function(){n=ace.edit("subdialog"),n.session.setMode("ace/mode/text"),n.setTheme("ace/theme/gob"),n.setReadOnly(!0),n.setOptions({enableBasicAutocompletion:!1,enableSnippets:!0,enableLiveAutocompletion:!0})}));var t={topic:"log/channel/"+e.objectId+"/"+this.productId,qos:2},a=new RegExp("log/channel/"+e.objectId+"/"+this.productId),r="",i=this;w["Websocket"].add_hook(a,(function(e){n.session.getLength()>=1e3?r="":r+=i.nowtime()+e+"\n",n.setValue(r),n.gotoLine(n.session.getLength())}));var o=JSON.stringify({action:"start_logger"});w["Websocket"].subscribe(t,(function(t){if(t.result){var a={topic:"channel/"+e.objectId+"/"+i.productId,text:o,retained:!0,qos:2};w["Websocket"].sendMessage(a),i.subdialogtimer=window.setInterval((function(){w["Websocket"].sendMessage(a)}),6e5)}}))},handleCloseSubdialog:function(){var e=JSON.stringify({action:"stop_logger"}),t={topic:"channel/"+this.subdialogid+"/"+this.productId,text:e,retained:!0,qos:2};w["Websocket"].sendMessage(t),this.subdialog=!1,window.clearInterval(this.subdialogtimer),this.subdialogtimer=null},stopsub:function(e){var t;t=0==e?JSON.stringify({action:"stop_logger"}):JSON.stringify({action:"start_logger"});var a={topic:"channel/"+this.subdialogid+"/"+this.productId,text:t,retained:!0,qos:2};w["Websocket"].sendMessage(a)},subTopic:function(e,t){var a=this;this.$refs[e].validate((function(r){if(!r)return!1;var i="thing/"+a.productId+"/${DevAddr}/"+a.topicform.topic;a.$get_object("Product",a.productId).then((function(r){var o={topic:i,type:a.topicform.type,desc:a.topicform.desc},n=[];n.push(o);var s={};if(-1==t)n=n.concat(r.topics),s.topics=n;else{var l=r.topics.concat([]);l[t]=o,s.topics=l}a.$update_object("Product",a.productId,s).then((function(t){t&&(a.$message({type:"success",message:"成功"}),a.topicdialogVisible=!1,a.$refs[e].resetFields(),a.topicform.isupdated=-1,a.topicform.topic="",a.topicform.desc="",a.handleClick({name:"second"}))})).catch((function(e){}))}))}))},topicSizeChange:function(e){this.topicstart=1,this.topiclength=e},topicCurrentChange:function(e){this.topicstart=e},updatetopic:function(e,t){this.topicform.topic=e.topic.substr(e.topic.lastIndexOf("/")+1),this.topicform.type=e.type,this.topicform.desc=e.desc,this.topicdialogVisible=!0,this.topicform.isupdated=t},deletetopic:function(e,t){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var r,i,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$get_object("Product",a.productId);case 2:r=e.sent,i=r.topics,i&&(o=i.concat([]),o.splice(t,1),n={topics:o},a.$update_object("Product",a.productId,n),a.$message({type:"success",message:"删除成功"})),a.getTopic();case 6:case"end":return e.stop()}}),e)})))()},orginRule:function(){var e=this;Object(y["getRule"])().then((function(t){t&&(e.engineData=t)})).catch((function(t){e.$message(t.error)}))},handleSizeChange:function(e){},handleCurrentChange:function(e){},addEngine:function(){this.$router.push({path:"/rules_engine/addengine",query:{title:"新增",productid:this.productId}})},actions:function(e){var t=[];return e.map((function(e){t.push(e.name)})),t.join(",")},getRowindex:function(e,t,a){if(0==e.columnIndex)return"firstcolumn"},detailRules:function(e){this.$router.push({path:"/rules_engine/checkengine",query:{id:e}})}})},A=j,D=(a("daf54"),a("1c35"),a("ddce"),a("2877")),P=Object(D["a"])(A,d,u,!1,null,"c97453c4",null);t["default"]=P.exports},a6dc:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},aa5c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editproduct"},[a("div",{staticClass:"editheader"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/product"}}},[e._v(" "+e._s(e.$translateTitle("route.产品管理"))+" ")]),a("el-breadcrumb-item",[e._v(" "+e._s(e.$translateTitle("route.产品详情"))+" ")])],1),a("div",{staticClass:"product"},[a("ul",[a("li",[e._v(" "+e._s(e.$translateTitle("product.productname"))+": "),a("span",[e._v(e._s(e.productName))])]),a("li",[a("span",[e._v("ProductSecret:")]),0==e.isshow?a("span",[e._v(" ******************** "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!0}}},[e._v(" "+e._s(e.$translateTitle("product.display"))+" ")])],1):a("span",[e._v(" "+e._s(e.ProductSecret)+" "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!1}}},[e._v(" "+e._s(e.$translateTitle("product.hidden"))+" ")])],1)]),a("li",[a("span",[e._v(e._s(e.$translateTitle("product.numberofequipment"))+":")]),a("span",[e._v(" "+e._s(e.form.ProductAll)+" "),a("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary",underline:!1},on:{click:e.goToDevices}},[e._v(" "+e._s(e.$translateTitle("product.gotoequipment"))+" ")])],1)]),a("li",[a("div",{staticClass:"block"},[e.productimg?a("el-image",{staticStyle:{position:"relative",top:"-40px","max-width":"200px",height:"auto"},attrs:{src:e.productimg}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)])])])],1),a("div",[a("el-tabs",{ref:"_tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("product.productinformation"),name:"first"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"addtopic"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportProduct}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),a("div",[a("table",{staticClass:"mailtable",staticStyle:{width:"100%"},attrs:{border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.productname"))+" ")]),a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.productdetail.name)+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.nodetype"))+" ")]),1==e.productdetail.nodeType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]):a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.addingtime"))+" ")]),a("td",[e._v(e._s(e.productdetail.createdAt))])]),a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.productdetail.category)+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.dynamicregistration"))+" "),a("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:e.$translateTitle("product.text1"),effect:"light",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("td",{staticClass:"notbottom"},[0==e.dynamicReg?a("span",{staticStyle:{color:"#cccccc"}},[e._v(" "+e._s(e.$translateTitle("product.close"))+" ")]):a("span",[e._v(e._s(e.$translateTitle("product.open")))]),a("el-switch",{attrs:{"active-color":"#5eb058","active-value":!0,"inactive-color":"#cccccc","inactive-value":!1},on:{change:function(t){return e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],1),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.networking"))+" ")]),"CELLULAR"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.honeycomb"))+"(2G/3G/4G) ")]):"WIFI"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" WiFi ")]):"ETHERNET"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.ethernet"))+" ")]):"LORA"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" LoRaWAN ")]):a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.productdetail.netType)+" ")])]),a("tr",[a("td",{staticClass:"cloumn"},[e._v(" "+e._s(e.$translateTitle("developer.describe"))+" ")]),a("td",{attrs:{colspan:"6"}},[e._v(" "+e._s(e.productdetail.desc)+" ")])])]),a("dgiot-profile",{ref:"profile",attrs:{"is-product":!0}})],1)],1)]),a("el-tab-pane",{attrs:{label:"Topic"+e.$translateTitle("product.list"),name:"second"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"addtopic"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.topicdialogVisible=!0}}},[e._v(" "+e._s(e.$translateTitle("product.customtopicclass"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength)}},[a("el-table-column",{attrs:{align:"left",label:"Topic"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.topic.replace("${ProductId}",e.productId))+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.operationauthority")},scopedSlots:e._u([{key:"default",fn:function(t){return["pub"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.pub"))+" ")]):e._e(),"sub"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.sub"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe"),prop:"desc"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdef?e._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.updatetopic(t.row,t.$index)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t.row.isdef?e._e():a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(a){return e.deletetopic(t,t.$index)}},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.topiclength,"page-sizes":[10,20,30,50],total:e.topicData.length},on:{"current-change":e.topicCurrentChange,"size-change":e.topicSizeChange}})],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.definetopicclass"),visible:e.topicdialogVisible,width:"40%"},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[a("div",{staticClass:"topiccontent"},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px","font-size":"16px",background:"#e6f9fc"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.$translateTitle("product.text2"))+" ")]),a("div",{staticClass:"topicform"},[a("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[a("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[a("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[a("template",{slot:"prepend"},[e._v(" "+e._s("thing/"+e.productId+"/${DevAddr}/")+" ")])],2)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.operationauthority"),prop:"type"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.selectdeviceoperationpermission")},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.sub"),value:"sub"}}),a("el-option",{attrs:{label:e.$translateTitle("product.pub"),value:"pub"}})],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.topicdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.subTopic("topicform",e.topicform.isupdated)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalmodel"),name:"third"}},[a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addMachine"),visible:e.machine,width:"30%"},on:{"update:visible":function(t){e.machine=t}}},[a("div",[a("el-form",{ref:"sizeForm",attrs:{"label-position":"left","label-width":"80px",model:e.machineForm,size:"mini"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.devicetype"),prop:"devicetype"}},[a("el-input",{model:{value:e.machineForm.name,callback:function(t){e.$set(e.machineForm,"name",t)},expression:"machineForm.name"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.machine=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.savemachine(e.machineForm)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{lg:4,md:5,sm:6,xl:3,xs:24}},[a("vab-query-form",{staticClass:"query-form"},[a("vab-query-form-top-panel",[a("el-button",{attrs:{type:"primary"},on:{click:e.addMachine}},[e._v(" 添加类型 ")])],1)],1),a("el-table",{staticStyle:{width:"60vh",overflow:"auto"},attrs:{border:"",data:e.FromMachine,"row-class-name":e.tableRowClassName},on:{"row-click":e.clickmachine}},[a("el-table-column",{attrs:{align:"center",label:"序号",prop:"sort",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.$index+1)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"设备类型",prop:"name"}})],1)],1),a("el-col",{attrs:{lg:20,md:19,sm:18,xl:21,xs:24}},[a("vab-query-form",{staticClass:"query-form"},[a("vab-query-form-right-panel",{staticStyle:{width:"100%"}},[a("div",{staticClass:"stripe-panel"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.checkAddTest}},[e._v(" "+e._s(e.$translateTitle("product.collectionformulaofobjectmodel"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.checkschema}},[e._v(" "+e._s(e.$translateTitle("product.viewobjectmodel"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.createProperty}},[e._v(" "+e._s(e.$translateTitle("product.newcustomattribute"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addcategory}},[e._v(" "+e._s(e.$translateTitle("product.newstandardattribute"))+" ")])],1)])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize),"default-expand-all":!1,"default-sort":{prop:"date",order:"descending"},"row-class-name":e.getRowClass,"row-key":"identifier"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return"struct"==t.row.dataType.type?[a("el-table",{staticStyle:{"box-sizing":"border-box",width:"60%","text-align":"center"},attrs:{data:t.row.dataType.specs}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.identifier))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes")}},[a("span",[e._v(" "+e._s(e.$translateTitle("product.attribute"))+" ")])]),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}],null,!0)})],1)]:void 0}}],null,!0)}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.order"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.order)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.devicetype"),prop:"devicetype",width:"80"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Rounds"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.round)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Strategy"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.strategy)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocol"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.protocol)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes"),width:"90"}},[a("span",[e._v(e._s(e.$translateTitle("product.attribute")))])]),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier"),prop:"identifier",width:"100"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datatype"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.dataType.specs||"double"!=t.row.dataType.type&&"float"!=t.row.dataType.type&&"int"!=t.row.dataType.type?"string"==t.row.dataType.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.datalength")+":"+t.row.dataType.size+e.$translateTitle("product.byte"))+" ")]):"date"==t.row.dataType.type?a("span"):"struct"!=t.row.dataType.type?a("span",[e._v(" "+e._s(t.row.dataType.specs)+" ")]):a("span"):a("span",[e._v(" "+e._s(e.$translateTitle("product.rangeofvalues")+t.row.dataType.specs.min+"~"+t.row.dataType.specs.max)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletewmx(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.wmxDataFill(t.row,t.row.index)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.wmxPageSize,"page-sizes":[10,20,30,50],total:e.wmxData.length},on:{"current-change":e.wmxCurrentChange,"size-change":e.wmxSizeChange}})],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addfunction"),visible:e.originwmx,width:"50%"},on:{"update:visible":function(t){e.originwmx=t}}},[a("div",[a("div",{staticStyle:{margin:"20px 0"}},[a("label",{attrs:{for:""}},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),a("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getPropData(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData}},[a("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.SuperId))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.applicabletype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.CategoryName))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addProCategory(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])]}}])})],1)],1),a("div",[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.productlength,"page-sizes":[10,20,30,50],small:"",total:e.producttotal},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("dgiot-wmxdetail",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDomain:e.addDomain,removeDomain:e.removeDomain,submitForm:e.submitForm,wmxhandleClose:e.wmxhandleClose}})],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addparameter"),top:"15vh",visible:e.structdialog,width:"40%"},on:{"update:visible":function(t){e.structdialog=t}}},[a("div",{staticClass:"structheader"},[a("el-form",{ref:"structform",attrs:{model:e.structform,rules:e.structrule,size:"small"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[a("el-input",{model:{value:e.structform.name,callback:function(t){e.$set(e.structform,"name",t)},expression:"structform.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[a("el-input",{model:{value:e.structform.identifier,callback:function(t){e.$set(e.structform,"identifier",t)},expression:"structform.identifier"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[a("el-select",{model:{value:e.structform.type,callback:function(t){e.$set(e.structform,"type",t)},expression:"structform.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),a("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),a("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),a("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),a("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),a("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),a("el-option",{attrs:{label:e.$translateTitle("product.date"),value:"date"}})],1)],1)],1)],1),a("div",[a("el-form-item",{attrs:{label:"数据标识",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"dis"}},[a("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.structform.dis,callback:function(t){e.$set(e.structform,"dis",t)},expression:"structform.dis"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v(" - ")]),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"数据长度(字节)"},model:{value:e.structform.dinumber,callback:function(t){e.$set(e.structform,"dinumber",e._n(t))},expression:"structform.dinumber"}})],1)],1)],1)],1),a("div",[a("el-form-item",{attrs:{label:"取值范围",required:""}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"startnumber"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},on:{input:function(t){return e.changeStructValue("structform")}},model:{value:e.structform.startnumber,callback:function(t){e.$set(e.structform,"startnumber",e._n(t))},expression:"structform.startnumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"endnumber"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},model:{value:e.structform.endnumber,callback:function(t){e.$set(e.structform,"endnumber",e._n(t))},expression:"structform.endnumber"}})],1)],1)],1),a("el-form-item",{attrs:{label:"步长",prop:"step"}},[a("el-input",{attrs:{"controls-position":"right",min:0,precision:2,step:.01},model:{value:e.structform.step,callback:function(t){e.$set(e.structform,"step",t)},expression:"structform.step"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[a("el-select",{attrs:{filterable:"",placeholder:e.$translateTitle("product.unit")},model:{value:e.structform.unit,callback:function(t){e.$set(e.structform,"unit",t)},expression:"structform.unit"}},e._l(e.allunit,(function(e,t){return a("el-option",{key:t,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1),"bool"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),required:""}},[a("div",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),readonly:"",type:"number"},model:{value:e.structform.truevalue,callback:function(t){e.$set(e.structform,"truevalue",t)},expression:"structform.truevalue"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v(" - ")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.structform.true,callback:function(t){e.$set(e.structform,"true",t)},expression:"structform.true"}})],1)],1)],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),readonly:"",type:"number"},model:{value:e.structform.falsevalue,callback:function(t){e.$set(e.structform,"falsevalue",t)},expression:"structform.falsevalue"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v(" - ")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egclost")},model:{value:e.structform.false,callback:function(t){e.$set(e.structform,"false",t)},expression:"structform.false"}})],1)],1)],1)])],1):e._e(),"enum"==e.structform.type?a("div",[e._l(e.structform.specs,(function(t,r){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.structform.specs.length,expression:"structform.specs.length"}],key:r,attrs:{required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+r,prop:"specs."+r+".attribute",rules:[{required:!0,message:"输入属性"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v(" - ")]),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+r,prop:"specs."+r+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}}),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-link",{staticStyle:{"margin-top":"30px","margin-left":"5px"},attrs:{icon:"el-icon-minus",type:"primary",underline:!1},on:{click:function(a){return a.preventDefault(),e.removeDomain1(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)],1)})),a("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain1}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])],2):e._e(),"string"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[a("el-input",{attrs:{type:"number"},model:{value:e.structform.string,callback:function(t){e.$set(e.structform,"string",e._n(t))},expression:"structform.string"}},[a("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[a("el-input",{attrs:{readonly:""},model:{value:e.structform.date,callback:function(t){e.$set(e.structform,"date",t)},expression:"structform.date"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.structform.isread,callback:function(t){e.$set(e.structform,"isread",t)},expression:"structform.isread"}},[a("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.readandwrite"))+" ")]),a("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.onlyread"))+" ")])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.structdialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),a("el-tab-pane",{staticStyle:{diaplay:"none"},attrs:{disabled:!0,label:e.$translateTitle("product.matteranalysis"),name:"fourth"}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce("formInline",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce1("formInline")}}},[e._v(" "+e._s(e.$translateTitle("product.setaspublic"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")])],1),a("el-form-item",{staticStyle:{display:"block"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.updatesubdialog}},[e._v(" "+e._s(e.$translateTitle("product.thermalloading"))+" ")])],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.tdthermalloading"),visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateAllChannel}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.version))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.desc))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.createdAt")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editordata(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletedata(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name1"}})]),a("pre",{staticClass:"ace_editor ace-monokai ace_dark",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name2"}})]),a("div",{staticStyle:{padding:"5px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalaccess"),name:"fiveth"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showAllChannel}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):3==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.updatesub(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.overloadconfiguration"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.channellength,"page-sizes":[10,20,30,50],total:e.channeltotal},on:{"current-change":e.channelCurrentChange,"size-change":e.channelSizeChange}})],1)],1)],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.materialstorage"),name:"seven"}},[a("vab-query-form",[a("vab-query-form-left-panel",[a("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[a("el-popover",{attrs:{placement:"right",title:e.$translateTitle("developer.tipsforcustomdatamodel"),trigger:"hover",width:"600"},on:{show:e.questionModel}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editorinsert"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1),a("el-button",{attrs:{slot:"reference",icon:"el-icon-question",size:"mini",type:"primary"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.customizedatamodelhelp"))+" ")])],1),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},on:{click:e.resourceShowAllChannel}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),a("vab-query-form-right-panel",[a("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"manual"}})],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourcechannelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.customize(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.custommodel"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.resourcelength,"page-sizes":[10,20,30,50],total:e.resourcetotal},on:{"current-change":e.resourcechannelCurrentChange,"size-change":e.resourcechannelSizeChange}})],1)],1)],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.preserve}},[e._v(" "+e._s(e.$translateTitle("equipment.update"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("equipment.addchannel"),visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"addchannel"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):2==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addProductChannel(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.add"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.allChannellength,"page-sizes":[10,20,30,50],total:e.allChanneltotal},on:{"current-change":e.allChannelCurrentChange,"size-change":e.allChannelSizeChange}})],1)],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseSubdialog,"close-on-click-modal":!1,title:e.channelname+"日志",visible:e.subdialog,width:"85%"},on:{"update:visible":function(t){e.subdialog=t}}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("pre",{staticClass:"ace_editor",staticStyle:{width:"100%","min-height":"300px"},attrs:{id:"subdialog"}},[e._v("                      "),a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}}),e._v("        ")])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-switch",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"自动刷新"},on:{change:e.stopsub},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.closeWuDialog,"close-on-click-modal":!1,"show-close":!1,top:"1vh",visible:e.resourcedialogFormVisible,width:"90%"},on:{"update:visible":function(t){e.resourcedialogFormVisible=t}}},[a("el-form",{ref:"resourceform",attrs:{model:e.resourceform}},[a("div",{staticClass:"wumoxing"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:e.$translateTitle("product.physicalmodel")}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editormodel"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:e.$translateTitle("product.customizedatamodel")}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editorcreate"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)])],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeWuDialog}},[e._v(" "+e._s(e.$translateTitle("product.quit"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addData}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:e.$translateTitle("product.export"),visible:e.exportDialogShow,width:"25%"},on:{"update:visible":function(t){e.exportDialogShow=t}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-right",attrs:{size:"small"},on:{click:function(t){e.exportDialogShow=!1}}},[e._v(" "+e._s(e.$translateTitle("tagsView.close"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseCollecttion,"close-on-click-modal":!1,fullscreen:!0,title:e.$translateTitle("product.viewcollectionformula"),visible:e.collectionDialogVisible,width:"100%"},on:{"update:visible":function(t){e.collectionDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"diaCollLeftCls"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex}},[e._l(e.wmxData,(function(t,r){return[a("el-menu-item",{key:r+"",attrs:{index:t.identifier},on:{click:function(a){return e.menuTabClick(t,r)}}},[t.dataType.specs?a("ol",[e._v(" "+e._s(t.identifier+"        "+t.name+"        取值范围"+t.dataType.specs.min+"~"+t.dataType.specs.max)+" ")]):a("ol",[e._v(" "+e._s(t.identifier+"        "+t.name)+" ")])])]}))],2)],1)]),a("el-col",{attrs:{span:18}},[a("el-tabs",{attrs:{closable:"",type:"card"},on:{"tab-click":e.handleRightTopTabClick,"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,r){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("div",{staticClass:"diaCollRightCls"},[a("el-row",{staticStyle:{margin:"10px"}},[a("el-button",{attrs:{type:"success"}},[e._v(" "+e._s(e.$translateTitle("rule.Test"))+" ")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.onReductionTap(r)}}},[e._v(" "+e._s(e.$translateTitle("product.reduction"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSaveTap(r)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1),a("pre",{staticClass:"ace_editor3",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:t.name}},[a("textarea",{staticClass:"ace_text-input"})])],1)])})),1)],1)],1)],1)],1)},i=[],o=a("dd87"),n=(a("d4c0"),a("2877")),s=Object(n["a"])(o["a"],r,i,!1,null,"7c540d8c",null);t["default"]=s.exports},aa78:function(e,t,a){"use strict";a("0d16")},abe9:function(e,t,a){},b5c4:function(e,t,a){"use strict";a("48e7")},c077:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},ce0b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"vab-fullscreen":e.isFullscreen}},[r("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{accept:"zip",type:"file"},on:{change:function(t){return e.doUpload(t)}}}),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.list,height:e.height,size:e.lineHeight,stripe:e.stripe},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:"className",prop:"className","show-overflow-tooltip":"",sortable:""}}),r("el-table-column",{attrs:{align:"center",label:"fields","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a.fields?r("vab-json-editor",{attrs:{lang:"zh",mode:"code"},model:{value:a.fields,callback:function(t){e.$set(a,"fields",t)},expression:"row.fields"}}):e._e(),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v(" fields ")])],1)],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleExport("export",a)}}},[e._v(" "+e._s(e.$translateTitle("product.export"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleExport("import",a)}}},[e._v(" "+e._s(e.$translateTitle("product.import"))+" ")])]}}])})],1)],1)},i=[],o=a("1da1"),n=(a("96cf"),a("ed07")),s=a("0af3"),l={name:"Parse",components:{},data:function(){return{isFullscreen:!1,border:!0,height:this.$baseTableHeight(0)+100,stripe:!1,lineHeight:"medium",list:[],listLoading:!0,parseFile:"",parseClass:""}},computed:{},mounted:function(){this.fetchData()},created:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{handleExport:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t.className,a.parseClass=i,"export"!=e){r.next=19;break}return o=a.$baseColorfullLoading(2),r.prev=4,r.next=7,Object(s["ExportParse"])(a.parseClass,{});case 7:n=r.sent,o.close(),a.$convertRes2Blob(n),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](4),o.close(),a.$message.error("".concat(r.t0));case 16:o.close(),r.next=20;break;case 19:a.$refs.uploader.click();case 20:case"end":return r.stop()}}),r,null,[[4,12]])})))()},doUpload:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parseFile=e.target.files[0],r=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(s["ImportParse"])(t.parseClass,t.parseFile);case 5:a.sent,r.close(),t.$message.success(""),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),r.close(),t.$message.error("".concat(a.t0));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(n["getTable"])();case 3:a=t.sent,r=a.results,i=void 0===r?[]:r,e.list=i,e.listLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}}},c=l,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},d4c0:function(e,t,a){"use strict";a("7b51")},d5b1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"platform",staticClass:"platform"},[a("div",{staticClass:"home_dialog"},[a("el-dialog",{attrs:{"append-to-body":!0,title:e.deviceInfo.name,visible:e.deviceFlag,width:"100vh"},on:{"update:visible":function(t){e.deviceFlag=t}}},[a("info",{attrs:{devicedetail:e.deviceInfo}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deviceFlag=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.deviceFlag=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1),a("div",{staticClass:"map_header",style:{height:e.queryForm.workGroupTreeShow?"160px":"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0px"!=e.cardHeight,expression:"cardHeight != '0px'"}],staticClass:"map_card"},[a("el-row",[a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["product_count"],expression:"loadingConfig['product_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn"),"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading"}},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"projector-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/roles/product"}},[a("p",[e._v(e._s(e.$translateTitle("home.pro_count")))]),a("p",[e._v(e._s(e._product_count))])])],1)],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["app_count"],expression:"loadingConfig['app_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"apps-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/roles/applicationManagement"}},[a("p",[e._v(e._s(e.$translateTitle("home.app_count")))]),a("p",[e._v(e._s(e._app_count))])])],1)],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["device_count"],expression:"loadingConfig['device_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"device-recover-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/dashboard/devicelist"}},[a("p",[e._v(e._s(e.$translateTitle("home.dev_count")))]),a("p",[e._v(e._s(e._dev_count))])])],1)],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["warn_count"],expression:"loadingConfig['warn_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{staticClass:"card-left",attrs:{span:12}},[a("vab-icon",{attrs:{icon:"projector-2-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/CloudOt/alarm"}},[a("p",[e._v(" "+e._s(e.$translateTitle("equipment.Total number of alarms"))+" ")]),a("p",[e._v(e._s(e.warnCount))])])],1)],1)],1)],1)],1),a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{attrs:{inline:!0,model:e.queryForm,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("user.department")}},[a("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":function(t){return e.change(t)}},model:{value:e.queryForm.workGroupName,callback:function(t){e.$set(e.queryForm,"workGroupName",t)},expression:"queryForm.workGroupName"}},[a("el-option",{staticStyle:{height:"auto",padding:"0"},attrs:{value:e.treeDataValue}},[a("el-tree",{ref:"workGroup",attrs:{data:e.deptTreeData,"expand-on-click-node":!1,props:e.roleProps,"default-expand-all":"","node-key":"index"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,i=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{class:{selected:i.objectId==e.curDepartmentId},on:{click:function(t){return e.handleNodeClick(i,r)}}},[e._v(" "+e._s(r.label)+" ")])])}}])})],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("equipment.products")}},[a("el-select",{staticClass:"selectdetail",attrs:{size:"small"},on:{change:e.selectProdChange},model:{value:e.queryForm.account,callback:function(t){e.$set(e.queryForm,"account",t)},expression:"queryForm.account"}},e._l(e._Product,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("home.updatedAt")}},[a("el-date-picker",{attrs:{"end-placeholder":"结束日期",format:"yyyy-MM-dd","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.queryForm.searchDate,callback:function(t){e.$set(e.queryForm,"searchDate",t)},expression:"queryForm.searchDate"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" "+e._s(e.$translateTitle("concentrator.search"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){20==e.leftRow?e.leftRow=24:e.leftRow=20}}},[e._v(" "+e._s(20==e.leftRow?e.$translateTitle("konva.hide"):e.$translateTitle("konva.show"))+" "+e._s(e.$translateTitle("konva.right"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.toggleCard(e.cardHeight)}}},[e._v(" "+e._s("0px"!=e.cardHeight?e.$translateTitle("konva.hide"):e.$translateTitle("konva.show"))+" "+e._s(e.$translateTitle("konva.card"))+" ")])],1)],1)],1)],1)],1),a("el-row",{attrs:{row:24}},[a("el-col",{attrs:{span:e.leftRow,xs:24}},[a("el-row",{attrs:{span:24}},[a("div",{staticClass:"chart_map",staticStyle:{position:"relative"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"card_left"},[a("el-row",{staticClass:"card_left-row",attrs:{gutter:24}},[a("el-col",{staticClass:"card_left-row-col",attrs:{span:6}},[a("Card",{staticClass:"card_left-row-col-card",staticStyle:{"background-color":"#ffad33","border-color":"#ffad33"}},[a("div",{staticStyle:{"text-align":"center"}},[a("Tag",{staticStyle:{background:"rgb(255, 173, 51)"},attrs:{checkable:"",color:"warning"}},[e._v(" "+e._s(e.offlineData.length||0)+" ")]),a("p",[e._v(e._s(e.$translateTitle("zetadevices.offline")))])],1)])],1),a("el-col",{staticClass:"card_left-row-col",attrs:{offset:2,span:6}},[a("Card",{staticClass:"card_left-row-col-card",staticStyle:{"background-color":"#19be6b","border-color":"#19be6b"}},[a("div",{staticStyle:{"text-align":"center"}},[a("Tag",{staticStyle:{background:"rgb(25, 190, 107)"},attrs:{checkable:"",color:"success"}},[e._v(" "+e._s(e.dev_online_count||0)+" ")]),a("p",[e._v(e._s(e.$translateTitle("zetadevices.online")))])],1)])],1),a("el-col",{staticClass:"card_left-row-col",attrs:{offset:2,span:6}},[a("Card",{staticClass:"card_left-row-col-card",staticStyle:{"background-color":"#f16643","border-color":"#f16643"}},[a("div",{staticStyle:{"text-align":"center"}},[a("Tag",{staticStyle:{background:"rgb(241, 102, 67)"},attrs:{checkable:"",color:"error"}},[e._v(" "+e._s(e.warnCount)+" ")])],1),a("p",[e._v(" "+e._s(e.$translateTitle("leftbar.alarms"))+" ")])])],1)],1)],1),a("div",{staticClass:"card",staticStyle:{position:"absolute",right:"100px","z-index":"1000"}},[a("p",{staticStyle:{margin:"0","font-size":"18px",color:"#f16643","text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.offline"))+" ")]),a("Card",{staticStyle:{width:"80px",height:"80px",color:"#fff","background-color":"#ffad33","border-color":"#ffad33","border-radius":"50%",opacity:"0.89"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v(e._s(e.offlineData.length||0))])])]),a("p",{staticStyle:{margin:"0","font-size":"18px",color:"rgb(25, 190, 107)","text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.online"))+" ")]),a("Card",{staticStyle:{width:"80px",height:"80px",margin:"5px 0",color:"#fff","background-color":"#19be6b","border-color":"#19be6b","border-radius":"50%",opacity:"0.89"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v(e._s(e.dev_online_count||0))])])]),a("p",{staticStyle:{margin:"0","font-size":"18px",color:"rgb(241, 102, 67)","text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("leftbar.alarms"))+" ")]),a("Card",{staticStyle:{width:"80px",height:"80px",color:"#fff","background-color":"#f16643","border-color":"#f16643","border-radius":"50%",opacity:"0.89"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v(e._s(e.warnCount))])])])],1),a("baidu-map",{staticClass:"baidu_map",attrs:{id:"baidu_map",center:{lng:120.187273,lat:30.334877},"scroll-wheel-zoom":!0,zoom:e.sizeZoom,ak:"fnc5Z92jC7CwfBGz8Dk66E9sXEIYZ6TG"}},[a("bm-control",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=19}}},[e._v(" "+e._s(e.$translateTitle("home.max"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=10}}},[e._v(" "+e._s(e.$translateTitle("home.restore"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=3}}},[e._v(" "+e._s(e.$translateTitle("home.min"))+" ")]),a("el-button",{staticClass:"ri-fullscreen-fill",attrs:{size:"mini"},on:{click:function(t){return e.toggleFull()}}}),a("bm-panorama",{attrs:{offset:{width:500,height:0},anchor:"BMAP_ANCHOR_TOP_LEFT"}}),a("bm-overview-map",{attrs:{"is-open":!0}}),a("bm-scale",{attrs:{offset:{width:260,height:0}}}),a("bm-city-list",{attrs:{offset:{width:330,height:0}}}),a("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],offset:{width:400,height:0},anchor:"BMAP_ANCHOR_TOP_LEFT"}})],1),a("bml-marker-clusterer",{attrs:{"average-center":!0}},e._l(e._tableData,(function(t,r){return a("div",{key:r},[a("bm-marker",{ref:"bm_info"+r,refInFor:!0,attrs:{icon:{url:1==t.icon?e.icoPath.icoPath1:e.icoPath.icoPath2,size:{width:100,height:100}},position:{lng:t.location.longitude,lat:t.location.latitude}},on:{click:function(a){return e.showDeatils(t,r)}}},[a("bm-info-window",{key:r,staticStyle:{display:"none"},attrs:{position:{lng:t.location.longitude,lat:t.location.latitude},show:t.show},on:{close:function(a){return e.closeInfo(t,r)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.deviceInfo,expression:"deviceInfo"}],staticClass:"deviceInfo",staticStyle:{width:"400px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{"preview-src-list":[""+e.productIco],src:e.productIco}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline empty",staticStyle:{width:"100px",height:"100px"}})])])],1),a("el-col",{attrs:{span:14}},[a("p",{attrs:{title:e.deviceInfo.name}},[a("el-link",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$translateTitle("equipment.devicename"))+" ")]),e._v(" :"+e._s(e.deviceInfo.name)+" ")],1),a("p",[a("el-link",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$translateTitle("equipment.address"))+" ")]),e._v(" : "+e._s(e.deviceInfo.detail&&e.deviceInfo.detail.address?e.deviceInfo.detail.address:"")+" ")],1),a("p",[a("el-link",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.devicestatus"))+" ")]),e._v(" ： "),a("el-link",{attrs:{type:"ONLINE"===e.deviceInfo.status?"success":"warning",underline:!1}},[e._v(" "+e._s("ONLINE"===e.deviceInfo.status?e.$translateTitle("zetadevices.online"):e.$translateTitle("zetadevices.offline"))+" ")])],1),a("el-divider"),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.goLink("real-time",t)}}},[e._v(" "+e._s(e.$translateTitle("equipment.real-time"))+" ")])],1),a("el-col",{attrs:{span:6}},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.goLink("konva",t)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.konva"))+" ")])],1),a("el-col",{attrs:{span:6}},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.goLink("video",t)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.video"))+" ")])],1)],1)],1)],1)],1)])],1)],1)})),0),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),a("bm-geolocation",{attrs:{"auto-location":!0,"show-address-bar":!0,anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}})],1)],1)])],1),a("el-col",{attrs:{span:24-e.leftRow,xs:24}},[a("div",{staticClass:"home_card"},[a("el-tabs",{on:{"tab-click":e.resizeTheChart},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("home.info"),name:"first"}},[a("div",{staticClass:"box-card"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",[e._v(" "+e._s(e.$translateTitle("home.info"))+" ")])],1),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[e.Product?a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.Product,"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("menu.icon"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"26px",height:"26px"},attrs:{"preview-src-list":[""+e.row.icon],src:e.row.icon}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2122412985)}),a("el-table-column",{attrs:{label:e.$translateTitle("task.productname"),"show-overflow-tooltip":!0,prop:"name",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.goDevice(t.row.name)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}],null,!1,3462182419)}),a("el-table-column",{attrs:{label:e.$translateTitle("home.dev_count")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.goDevice(t.row.name)}}},[e._v(" "+e._s(t.row.deviceChild.length)+" ")])]}}],null,!1,1302968788)})],1):e._e()],1)])],1)],1)])],1),a("el-col",{attrs:{md:24,sm:24,xl:24,xs:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(" "+e._s(e.$translateTitle("equipment.Equipment Overview"))+" ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-refresh",type:"text"},on:{click:function(t){return e.resizeTheChart()}}})],1),a("div",{staticClass:"text item"},[a("vab-chart",{ref:"charts",attrs:{data:e._ChartStatus,"data-empty":!e.ChartStatus.rows,extend:e.chartExtend,loading:e.loading,settings:e.chartSettings,height:"160px",type:"ring"}})],1)])],1)],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("home.dev_unline"),name:"second"}},[a("div",{staticClass:"box-card"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-badge",{staticClass:"item",attrs:{value:e._dev_off_count}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e._goDevice("dev_unline")}}},[e._v(" "+e._s(e.$translateTitle("home.dev_unline"))+" ")])],1)],1),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{staticClass:"_el-table",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e._offlineData,"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.devicename"),prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.name+e.$translateTitle("home.Last online time")+t.row.updatedAt},on:{click:function(a){return e.showInfo(t.row.objectId)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])})],1)],1)])],1)],1)])],1)]),a("el-tab-pane",{attrs:{label:e.$translateTitle("home.dev_online"),name:"third"}},[a("div",{staticClass:"box-card"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-badge",{staticClass:"item",attrs:{value:e._dev_online_count}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e._goDevice("dev_online")}}},[e._v(" "+e._s(e.$translateTitle("home.dev_online"))+" ")])],1)],1),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{staticClass:"_el-table",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e._onlineData,"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.devicename"),prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.name+e.$translateTitle("home.Last online time")+t.row.updatedAt},on:{click:function(a){return e.showInfo(t.row.objectId)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])})],1)],1)])],1)],1)])],1)])],1)],1)])],1)],1)])},i=[],o=a("1da1"),n=a("5530"),s=(a("4de4"),a("d3b7"),a("99af"),a("159b"),a("d81d"),a("b0c0"),a("caad"),a("2532"),a("96cf"),a("fdeb")),l=a.n(s),c=a("327b"),d=a.n(c),u=a("7212"),p=a("1285"),m=a("5880"),f=a("bae0"),g=a.n(f),h=a("bc35"),b=a("39c4"),v=a("ed08"),y=a("c4e6"),_=a("9d14"),T=a("cb88");window.dgiotEnv=Object({NODE_ENV:"production",VUE_APP_TITLE:"物联网开发平台",VUE_APP_AUTHOR:"iotn2n",VUE_APP_UPDATE_TIME:"Wed Nov 17 2021 04:11:49 GMT+0000 (Coordinated Universal Time)",VUE_APP_VERSION:"4.3.6",VUE_APP_Keywords:"一站式物联网PaaS平台|物联网应用服务",VUE_APP_Description:"提供物联网垂直领域应用使能平台及解决方案",VUE_APP_URL:"http://prod.iotn2n.com",BASE_URL:""});var w={name:"Index",components:{BmInfoWindow:T["BmInfoWindow"],info:y["default"],BmScale:T["BmScale"],BmMapType:T["BmMapType"],BmOverviewMap:T["BmOverviewMap"],BmPanorama:T["BmPanorama"],BmControl:T["BmControl"],BaiduMap:T["BaiduMap"],BmNavigation:T["BmNavigation"],BmGeolocation:T["BmGeolocation"],BmCityList:T["BmCityList"],BmMarker:T["BmMarker"],BmlMarkerClusterer:T["BmlMarkerClusterer"]},data:function(){return this.chartSettings={radius:[5,40],offsetY:100},this.chartExtend={yAxisType:["percent"],tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"}},{icoPath:{icoPath1:l.a,icoPath2:d.a},router:"",topicKey:"",loadingConfig:{product_count:!1,app_count:!1,device_count:!1,warn_count:!1},warnCount:0,count:0,productIco:"",ChartStatus:{columns:["状态","数量"],rows:[{"状态":"在线","数量":0},{"状态":"离线","数量":0}]},clientId:"dgiot_clientId_",infoWindow:{show:!0,contents:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},loading:!0,marker:{},deviceFlag:!1,deviceInfo:{detail:{}},Product:[],imgurl:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",subtopic:"",isConnect:!1,queryForm:{account:"",searchDate:"",pageNo:1,pageSize:20,workGroupName:"",workGroupTreeShow:!1,access_token:""},roleProps:{children:"children",label:"name"},leftWidth:"",cardHeight:"",fixedPaddingTop:"",curDepartmentId:"",leftRow:24,treeDataValue:"",deptTreeData:[],show:!1,sizeZoom:19,tableData:[],offlineData:[],onlineData:[],chartSetting:{yAxis:{type:"value",minInterval:1}},msgtopic:"",NODE_ENV:"production",category:g.a,activeName:"second",filterBox:"filterBox-first",project_count:0,app_count:0,product_count:0,dev_count:0,active:!1,dev_active_count:0,dev_online_count:0,dev_off_count:0,projectList:[],formInline:{starttime:"",project:""}}},computed:Object(n["a"])({},Object(m["mapGetters"])({objectId:"user/objectId",roleTree:"user/roleTree",collapse:"settings/collapse",_Product:"user/_Product",language:"settings/language",_dev_count:"dashboard/_dev_count",_project_count:"dashboard/_project_count",_app_count:"dashboard/_app_count",_product_count:"dashboard/_product_count",token:"user/token",_dev_online_count:"dashboard/_dev_online_count",_onlineData:"dashboard/_onlineData",_dev_off_count:"dashboard/_dev_off_count",_offlineData:"dashboard/_offlineData",_ChartStatus:"dashboard/_ChartStatus",_tableData:"dashboard/_tableData",_pcimg:"dashboard/_pcimg",_role:"acl/role",_mimg:"dashboard/_mimg",mqttInfo:"mqttDB/mqttInfo"})),watch:{topicKey:{handler:function(e){var t=this;this.$dgiotBus.$off(e),this.$dgiotBus.$on(e,(function(e){var a=e.payload;t.mqttMsg(a)}))},deep:!0,limit:!0}},created:function(){},mounted:function(){this.router=this.$dgiotBus.router(this.$route.fullPath),this.initDgiotMqtt(),this.queryForm.account="zh"==this.language?"全部产品":"All Products"},activated:function(){this.resizeTheChart()},destroyed:function(){this.resizeTheChart()},methods:Object(n["a"])(Object(n["a"])({initDgiotMqtt:function(){this.getRoletree(),this.getProduct()},getWarnCount:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:{count:"*",where:{}},r.where["createdAt"]={$gt:{__type:"Date",iso:moment().subtract(1,"days").format("YYYY-MM-DD")}},r.where["updatedAt"]={$lt:{__type:"Date",iso:moment(new Date).format("YYYY-MM-DD")}},a.prev=3,a.next=6,t.$query_object("Maintenance",r);case 6:i=a.sent,o=i.count,n=void 0===o?0:o,t.warnCount=n,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](3),t.$message.error("".concat(a.t0));case 15:case"end":return a.stop()}}),a,null,[[3,12]])})))()},toggleFull:function(e){this.count++,this.count%2==0?this.$exitFull("baidu_map"):this.$beFull("baidu_map")},resizeTheChart:function(){var e=this;this.loading=!0;var t=this.$refs["charts"];t&&(t.$children[0].resize(),setTimeout((function(){e.loading=!1}),2e3))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":2===t?"success-row":""}},Object(m["mapMutations"])({resaveMqttInfo:"mqttDB/resaveMqttInfo",setRoleTree:"user/setRoleTree",set_Product:"user/set_Product",set_dev_count:"dashboard/set_dev_count",set_project_count:"dashboard/set_project_count",set_app_count:"dashboard/set_app_count",set_product_count:"dashboard/set_product_count",set_dev_online_count:"dashboard/set_dev_online_count",set_onlineData:"dashboard/set_onlineData",set_dev_off_count:"dashboard/set_dev_off_count",set_offlineData:"dashboard/set_offlineData",set_ChartStatus:"dashboard/set_ChartStatus",set_tableData:"dashboard/set_tableData"})),{},{deviceToDetail:function(e){this.$router.push({path:"/roles/editdevices",query:{deviceid:e.objectId,nodeType:"2",ischildren:"false"}})},getCategory:function(e){var t="";return this.category.filter((function(a){a.type==e&&(t=a.data.CategoryName)})),t},closeInfo:function(e,t){},showDeatils:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,o,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=a.$baseColorfullLoading(0),a.productIco="",r.next=4,Object(p["getDevice"])(e.objectId);case 4:return a.deviceInfo=r.sent,r.next=7,Object(u["queryProduct"])({count:"objectId",order:"-updatedAt",keys:"icon",where:{objectId:a.deviceInfo.product.objectId}});case 7:o=r.sent,n=o.results,s=void 0===n?[{icon:""}]:n,a.productIco=s[0].icon,e.show=!0,setTimeout((function(){i.close(),a.$refs["bm_info".concat(t)][0].$children[0].show=!0}),1e3);case 13:case"end":return r.stop()}}),r)})))()},showInfo:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(p["getDevice"])(e);case 2:t.deviceInfo=a.sent,r=t.deviceInfo.product.objectId||"undefined",i=t.deviceInfo.devaddr||"undefined",o=[{topic:"thing/".concat(r,"/").concat(i,"/post"),type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/".concat(r,"/").concat(i),type:"sub",desc:"消息下发",isdef:!0}],t.deviceInfo.product.topics?t.deviceInfo.topicData=t.deviceInfo.product.topics.concat(o):t.deviceInfo.topicData=o,t.deviceFlag=!0;case 8:case"end":return a.stop()}}),a)})))()},mqttMsg:function(e){var t=Object(v["isBase64"])(e)?Base64.decode(e):e,a=JSON.parse(t).value,r=JSON.parse(t).vuekey;switch(this.loadingConfig["".concat(r)]=!0,r){case"app_count":this.app_count=a.count,this.set_app_count(this.app_count);break;case"project_count":this.project_count=a.count,this.set_project_count(this.project_count);break;case"product_count":this.product_count=a.count,this.set_product_count(this.product_count),this.Product=a.results;break;case"dev_online_count":this.dev_online_count=a.count,this.set_dev_online_count(this.dev_online_count),this.onlineData=a.results,this.set_onlineData(this.onlineData);break;case"dev_off_count":this.dev_off_count=a.count,this.offlineData=a.results,this.set_dev_off_count(this.dev_off_count),this.set_offlineData(this.offlineData);break;case"warn_count":this.warnCount=a.count;break;case"ChartStatus":this.ChartStatus=a.chartData,this.set_ChartStatus(this.ChartStatus),this.resizeTheChart(),this.$forceUpdate();break;case"baiduMap":this.tableData=a,this.tableData.forEach((function(e){e.show=!1,e.color="0"===e.icon?"yellow":"1"===e.icon?"blue":"red"})),this.set_tableData(this.tableData),this.$forceUpdate();break;case"device_count":this.dev_count=a.count,this.set_dev_count(this.dev_count);break;default:break}this.$forceUpdate()},toggleCard:function(e){"0px"!=e?($(".map_card").css({height:"0px"}),this.cardHeight="0px"):($(".map_card").css({height:"98px"}),this.cardHeight="98px")},toggleLeftWidth:function(e){"0px"!=e?($(".vab-side-bar").css({width:"0px"}),$(".vab-main").css({"margin-left":"0px"}),this.leftWidth="0px"):($(".vab-side-bar").css({width:"200px"}),$(".vab-main").css({"margin-left":"200px"}),this.leftWidth="200px")},setPadding:function(e){"0px"!=e?($(".fixed").css({"padding-top":"0px"}),$(".fixed-header").css({height:"0px",display:"none"}),$(".vab-tabs").css({"nim-height":"0px"}),$(".baidu_map").css({height:"calc(78vh + 90px + 140px)"}),$("_el-table").css({height:"calc(78vh + 90px + 140px)"}),$(".el-tabs").css({height:"calc(78vh + 90px + 140px)"}),$("section").css({height:"calc(100vh - 60px* 2.7 + 110px)"})):($(".fixed").css({"padding-top":"110px"}),$(".fixed-header").css({height:"110px",display:"block"}),$(".vab-tabs").css({"nim-height":"50px"}),$(".baidu_map").css({height:"calc(78vh - 20px)"}),$("_el-table").css({height:"calc(78vh)"}),$(".el-tabs").css({height:"calc(78vh - 20px)"}),$("section").css({height:"calc(100vh - 60px* 2.7)"}))},selectProdChange:function(e){},queryData:function(){var e=this.$baseColorfullLoading(3);setTimeout((function(){e.close()}),3e3)},getRoletree:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return setTimeout((function(t){e.loadingConfig={product_count:!0,app_count:!0,device_count:!0,warn_count:!0}}),3e3),e.cardHeight=window.getComputedStyle($(".map_card")[0])["height"],t.next=4,Object(h["Roletree"])().then((function(t){e.setRoleTree(t.results),e.handleNodeClick(t.results[0],0),e.queryForm.workGroupTreeShow=!1})).catch((function(e){}));case 4:e.deptTreeData=e.roleTree;case 5:case"end":return t.stop()}}),t)})))()},getProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["queryProduct"])({count:"objectId",order:"-updatedAt",keys:"name,icon",where:{category:"IotHub"}});case 2:a=t.sent,r=a.results,r.unshift({name:"zh"==e.language?"全部产品":"All Products",objectId:"0"}),e.set_Product(r);case 6:case"end":return t.stop()}}),t)})))()},change:function(e){e&&$(".el-tree").css({height:"100px",display:"block","overflow-x":"auto"})},handleNodeClick:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,o,n,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=a._role.map((function(e){return e.name})),$(".el-tree").css({height:"0px",display:"none","overflow-x":"auto"}),$(".el-select-dropdown").css({display:"none"}),a.queryForm.workGroupName=e.label,a.treeDataValue=e.label,!i.includes(e.name)){r.next=9;break}a.queryForm.access_token=a.token,r.next=19;break;case 9:if(1==t.level){r.next=18;break}return r.next=12,Object(h["getToken"])(e.name);case 12:o=r.sent,n=o.access_token,s=void 0===n?"":n,a.queryForm.access_token=s,r.next=19;break;case 18:a.queryForm.access_token=a.token;case 19:a.queryForm.workGroupTreeShow=!a.queryForm.workGroupTreeShow,e.name,l=e.objectId,a.curDepartmentId=l,a.subtopic="dashboard/".concat(a.token,"/post"),a.topicKey=a.$dgiotBus.topicKey(a.router,a.subtopic),a.$dgiotBus.$emit("MqttSubscribe",{router:a.router,topic:a.subtopic,qos:0,ttl:108e5}),Object(b["StartDashboard"])(_["default"]);case 26:case"end":return r.stop()}}),r)})))()},handleChange:function(){},handleClickVisit:function(e){this.$router.push({path:"/Topo",query:{productid:e.objectId}})},goDevice:function(e){this.$router.push({path:"/dashboard/devicelist",query:{product:e}})},_goDevice:function(e){this.$router.push({path:"/dashboard/devicelist",query:{deciceType:e}})},goLink:function(e,t){var a;switch(e){case"real-time":this.$router.push({path:"/roles/editdevices",query:{deviceid:this.deviceInfo.objectId,nodeType:2,ischildren:"false"}});break;case"konva":this.$router.push({path:"/Topo",query:{productid:this.deviceInfo.product.objectId,devaddr:this.deviceInfo.devaddr,deviceid:this.deviceInfo.objectId,type:"device"}});break;case"video":var r=this.deviceInfo.basedata;if(null===r||void 0===r||null===(a=r.videoSrc)||void 0===a||!a.length)return this.$message.info(this.$translateTitle("equipment.The device is not bound to the video address yet")),!1;this.$router.push({path:"/tools/player",query:{type:r.videoType||"m3u8",url:r.videoSrc}});break}},Gotoproduct:function(e){this.$router.push({path:"/dashboard/productlist",query:{project:e}})}})},C=w,k=(a("aa78"),a("2877")),x=Object(k["a"])(C,r,i,!1,null,"309e1f14",null);t["default"]=x.exports},d828:function(e,t,a){},da7b:function(e,t,a){},daf54:function(e,t,a){"use strict";a("9421")},db64:function(e,t,a){"use strict";a.r(t);var r,i,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"things-parse"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.AllDict,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"ID",prop:"objectId"}}),a("el-table-column",{attrs:{label:e.$translateTitle("task.productname"),prop:"name"}})],1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"thingsParseModel",attrs:{inline:!0,model:e.thingsParseModel,rules:e.thingsParseRules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.thingsParseModel.name,callback:function(t){e.$set(e.thingsParseModel,"name",t)},expression:"thingsParseModel.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.thingsParseModel.version,callback:function(t){e.$set(e.thingsParseModel,"version",t)},expression:"thingsParseModel.version"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.thingsParseModel.desc,callback:function(t){e.$set(e.thingsParseModel,"desc",t)},expression:"thingsParseModel.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce("thingsParseModel",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce1("thingsParseModel")}}},[e._v(" "+e._s(e.$translateTitle("product.setaspublic"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.updatesubdialog}},[e._v(" "+e._s(e.$translateTitle("product.thermalloading"))+" ")])],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.tdthermalloading"),visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.version))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.desc))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("application.createtime")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editordata(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletedata(t.row.ObjectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),e.AllDict?a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("div",{staticStyle:{padding:"5px","margin-right":"80px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])]):e._e()],1)],1)],1)},n=[],s=a("1da1"),l=(a("96cf"),a("ac1f"),a("00b4"),a("d81d"),a("b0c0"),a("4de4"),a("d3b7"),a("99af"),a("3ca3"),a("ddb0"),a("5319"),a("1285")),c=a("89e8"),d=a("e0e9"),u=a("7212"),p=a("bb22"),m="",f="",g={name:"ThingsParse",props:{},data:function(){var e=function(e,t,a){var r=/[0-9a-zA-Z]/;r.test(t)?a():a(new Error("协议名称由数字和字母组合"))};return{currentRow:null,AllDict:[],productName:"",form:{Productname:"",ProductKey:"",ProductAll:0},decoderstart:0,decodertotal:0,decoderlength:10,protolchannel:[],productdetail:{},thingsParseModel:{name:"",version:"",desc:"",resource:!1},thingsParseRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:e,trigger:"blur"}]},dialogTableVisible:!1,gridData:[],protoldialog:!1}},computed:{tableFilterData:function(){return null}},mounted:function(){i=ace.edit("editor2"),i.session.setMode("ace/mode/text"),i.setTheme("ace/theme/monokai"),i.setReadOnly(!0),i.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.Industry(),this.getAllunit(),this.getAllDict(),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{handleCurrentChange:function(e){this.currentRow=e,this.$refs.singleTable.setCurrentRow(e),this.getProDetail(e.objectId)},getAllDict:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={where:{category:{$nin:["Evidence"]}},order:"updatedAt"},t.next=3,Object(u["queryProduct"])(a);case 3:r=t.sent,i=r.results,i&&(e.AllDict=i,e.handleCurrentChange(i[0]));case 6:case"end":return t.stop()}}),t)})))()},Industry:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.option=[],t.next=3,e.$getIndustry("category",100);case 3:a=t.sent,r=a.results,r.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)}));case 6:case"end":return t.stop()}}),t)})))()},getProDetail:function(e){var t=this;this.productId=e,r=ace.edit("editor"),r.session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.$get_object("Product",e).then((function(e){if(e){for(var a in t.productName=e.name,e)t.productdetail[a]=e[a];t.option.map((function(e){t.productdetail.category==e.value&&(t.productdetail.category=e.label)})),t.productdetail.createdAt=t.utc2beijing(e.createdAt),t.productdetail.id=e.id,t.dynamicReg=e.dynamicReg,t.productdetail.isshow=0,t.form.Productname=e.name,t.ProductSecret=e.productSecret,t.form.Productkey=t.productId,t.productimg=e.icon,e.decoder?(f=e.decoder.code,t.thingsParseModel.name=e.decoder.name,t.thingsParseModel.version=e.decoder.version,t.thingsParseModel.desc=e.decoder.desc):(t.$baseMessage("暂无decoder,将显示默认值","warning",!1),f="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4="),t.productdetail.thing||(t.productdetail.thing={properties:[]}),t.wmxData=t.productdetail.thing.properties.filter((function(e){return e.name&&e.dataType})),r.setValue(Base64.decode(f)),r.gotoLine(r.session.getLength()),t.queryDeviceCount(t.productId)}}))},queryDeviceCount:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["getDeviceCountByProduct"])(e);case 2:t.form.ProductAll=a.sent;case 3:case"end":return a.stop()}}),a)})))()},editordata:function(e){this.thingsParseModel.name=e.data.name,this.thingsParseModel.version=e.data.version,this.thingsParseModel.desc=e.data.desc,this.thingsParseModel.resource=e.data.enable,r.setValue(Base64.decode(e.data.code)),this.dialogTableVisible=!1},getAllunit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(d["getAllunit"])("unit",100);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]),e.allunit.unshift({data:{Name:"无",Symbol:""}});case 7:case"end":return t.stop()}}),t)})))()},subAce:function(e,t){var a=this;this.$refs[e].validate((function(o){if(o){var n={name:e.name,version:e.version,code:Base64.encode(r.getValue()),desc:e.desc},s={decoder:n};a.$update_object("Product",a.productId,s).then((function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(m+="保存成功",i.setValue(m))),a.issub=!0}))}else a.$message({type:"warning",message:"输入格式有误"})}))},subAce1:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={where:{"data.name":t.thingsParseModel.name,"data.version":t.thingsParseModel.version}};t.$query_object("Dict",a).then((function(e){e.results&&e.results.length>=1?t.$message("此协议版本已存在"):t.$get_object("Product",t.productId).then((function(e){if(e){var a={name:t.thingsParseModel.name,version:t.thingsParseModel.version,code:Base64.encode(r.getValue()),desc:t.thingsParseModel.desc},i={type:"decoder",data:a,ACL:e.ACL};t.$create_object("Dict",i).then((function(e){e.error?t.$message({type:"error",message:e.error}):t.$message({type:"success",message:"保存到公共协议库成功"})})).catch((function(e){}))}}))}))}else t.$message({type:"warning",message:"输入格式有误"})}))},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map((function(e){t.push(new Promise((function(t,a){return Object(p["subupadte"])(e.id,"update").then((function(e){e&&t(e)})).catch((function(e){a(e)}))})))})),Promise.all(t).then((function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)})).catch((function(t){e.$message({message:t,type:"error"})}))}},handleSelectionChange:function(e){this.multipleSelection=e},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getChannelEnable:function(e,t){return 1==e.isEnable?"green_active":"red_active"},deletedata:function(e){var t=this;this.$del_object("Dict",e).then((function(e){e&&(t.$message("成功删除"),t.chaxun())}))},updatesubdialog:function(){var e=this;this.protoldialog=!0;var t="1",a={__type:"Pointer",className:"Product",objectId:this.productId};Object(c["getChannelCountByProduct"])(10,0,a,t).then((function(t){t.count>0?(e.protolchannel=t.results,e.$refs.multipleTable.toggleAllSelection()):(e.protolchannel={},e.$refs.multipleTable.toggleAllSelection())})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}))},chaxun:function(){var e=this,t={skip:this.decoderstart,limit:this.decoderlength,order:"-createdAt",where:{type:"decoder"}};this.$query_object("Dict",t).then((function(t){t&&(e.decodertotal=t.count,e.dialogTableVisible=!0,e.gridData=t.results)}))},protol:function(){var e=this,t="";Object(p["Compile"])(Base64.encode(r.getValue())).then((function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map((function(e){t+=e+"\r\n"})),m+=t,i.setValue(m))})).catch((function(a){e.warningeditror=a.error,e.warningeditror.map((function(e){t+=e+"\r\n"})),m+=t,i.setValue(m)}))}}},h=g,b=(a("ef93"),a("2877")),v=Object(b["a"])(h,o,n,!1,null,null,null);t["default"]=v.exports},ddce:function(e,t,a){"use strict";a("da7b")},e116:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mqttws"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],attrs:{id:"msg",type:"text"},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}}),a("input",{attrs:{type:"button",value:"Send"},on:{click:e.send}}),a("input",{attrs:{type:"button",value:"Start"},on:{click:e.start}}),a("input",{attrs:{type:"button",value:"Stop"},on:{click:e.stop}})])},i=[],o={name:"Mqttws",data:function(){return{host:location.hostname,port:5080,clientId:"C_"+(new Date).getTime(),userName:"test",password:"test123",keepAlive:null,cleanSession:!0,useSSL:!1,client:{},options:{},msg:"order",count:0}},created:function(){this.client=new Paho.MQTT.Client(this.host,this.port,this.clientId);var e=this.client,t=this.options={invocationContext:{host:this.host,port:this.port,path:e.path,clientId:this.clientId},timeout:5,keepAliveInterval:50,cleanSession:!1,useSSL:!1,userName:"test",password:"test123",onSuccess:function(){e.subscribe("001/in")},onFailure:function(e){}};this.client.connect(t),this.client.onConnectionLost=this.onConnectionLost,this.client.onMessageArrived=this.onMessageArrived},methods:{onConnectionLost:function(e){e.errorCode},onMessageArrived:function(e){},onConnect:function(){this.client.subscribe("001/in")},send:function(){var e=this.msg;if(e){e="{time:"+new Date+", content:"+e+", from: web console}";var t=new Paho.MQTT.Message(e);t.destinationName=this.topic,this.client.send(t),this.msg=""}},start:function(){window.tester=window.setInterval(function(){if(this.client.isConnected){var e="{time:"+new Date+", content:"+this.count+++", from: web console}",t=new Paho.MQTT.Message(e);t.destinationName=this.topic,this.client.send(t)}}.bind(this),1e3)},stop:function(){window.clearInterval(window.tester)}}},n=o,s=a("2877"),l=Object(s["a"])(n,r,i,!1,null,null,null);t["default"]=l.exports},ef93:function(e,t,a){"use strict";a("c077")},f8ec:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"proddetail proddetail-container"},[r("div",{staticClass:"editheader"},[r("dgiot-profile",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"product-info":e.productInfo}}),r("div",{staticClass:"product"},[r("ul",[r("li",[e._v(" "+e._s(e.$translateTitle("product.productname"))+": "),r("span",[e._v(e._s(e.productName))])]),r("li",[r("span",[e._v("ProductSecret:")]),0==e.isshow?r("span",[e._v(" ******************** "),r("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!0}}},[e._v(" "+e._s(e.$translateTitle("product.display"))+" ")])],1):r("span",[r("span",{directives:[{name:"copyText",rawName:"v-copyText",value:e.ProductSecret,expression:"ProductSecret"}]},[e._v(e._s(e.ProductSecret))]),r("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!1}}},[e._v(" "+e._s(e.$translateTitle("product.hidden"))+" ")])],1)]),r("li",[r("span",[e._v(e._s(e.$translateTitle("product.numberofequipment"))+":")]),r("span",[e._v(" "+e._s(e.form.ProductAll)+" "),r("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary",underline:!1},nativeOn:{click:function(t){return e.goToDevices.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.gotoequipment"))+" ")])],1)]),r("li")])])],1),r("div",[r("el-tabs",{ref:"_tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:e.$translateTitle("product.productinformation"),name:"first"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[r("vab-query-form",[r("vab-query-form-left-panel",{attrs:{disabled:!e.productName.length}},[r("div",{staticClass:"addtopic"},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.exportProduct(e.productName)}}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.setTemplate(e.productInfo)}}},[e._v(" "+e._s(e.$translateTitle("product.Set as template"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),r("div",[r("el-descriptions",{directives:[{name:"loading",rawName:"v-loading",value:""==e.productName,expression:"productName == ''"}],attrs:{border:"",column:3,"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.Waitingtoreturn"),size:"small"}},[r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.productname")}},[e._v(" "+e._s(e.productdetail.name)+" ")]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.nodetype")}},[1==e.productdetail.nodeType?r("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]):r("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")])]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.addingtime"),span:2}},[e._v(" "+e._s(e.productdetail.createdAt)+" ")]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.classification")}},[e._v(" "+e._s(e.productdetail.categoryname)+" ")]),r("el-descriptions-item",[r("template",{slot:"label"},[r("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:e.$translateTitle("product.text1"),effect:"light",placement:"top"}},[r("i",{staticClass:"el-icon-question"})]),e._v(" "+e._s(e.$translateTitle("product.dynamicregistration"))+" ")],1),0==e.dynamicReg?r("span",{staticStyle:{color:"#cccccc"}},[e._v(" "+e._s(e.$translateTitle("product.close"))+" ")]):r("span",[e._v(e._s(e.$translateTitle("product.open")))]),r("el-switch",{attrs:{"active-color":"#5eb058","active-value":!0,"inactive-color":"#cccccc","inactive-value":!1},on:{change:function(t){return e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],2),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.networking")}},["CELLULAR"==e.productdetail.netType?r("td",[e._v(" "+e._s(e.$translateTitle("product.honeycomb"))+"(2G/3G/4G) ")]):"WIFI"==e.productdetail.netType?r("td",[e._v(" WiFi ")]):"ETHERNET"==e.productdetail.netType?r("td",[e._v(" "+e._s(e.$translateTitle("product.ethernet"))+" ")]):"LORA"==e.productdetail.netType?r("td",[e._v(" LoRaWAN ")]):r("td",[e._v(" "+e._s(e.productdetail.netType)+" ")])]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("developer.describe")}},[e._v(" "+e._s(e.productdetail.desc||"")+" ")]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.physicalmodel")}},[r("el-button",{attrs:{disabled:0==e.productInfo.thing.properties.length,type:"text"},on:{click:function(t){e.activeName="third"}}},[e._v(" "+e._s(e.productInfo.thing.properties.length||0)+" ")])],1),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.parser")}},[r("template",{slot:"label"},[r("el-link",{attrs:{type:"success"},nativeOn:{click:function(t){return e.feateditorParser1(e.productInfo,"parser",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.parser"))+" ")])],1),r("el-link",{attrs:{type:e.productInfo.config.parser.length?"success":"default"},nativeOn:{click:function(t){return e.feateditorParser1(e.productInfo,"parser",!1)}}},[e._v(" "+e._s(e.productInfo.config.parser.length||0)+" ")])],2),r("el-descriptions-item",[r("template",{slot:"label"},[r("el-link",{attrs:{type:"success"},on:{click:function(t){return e.feateditorParser1(e.productInfo,"profile",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.profile"))+" ")])],1),r("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.feateditorParser1(e.productInfo,"profile",!1)}}},[e._v(" "+e._s(e.productInfo.config.profile.length||0)+" ")])],2)],1)],1)],1)]),r("el-tab-pane",{attrs:{label:"Topic"+e.$translateTitle("product.list"),name:"second"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("div",{staticClass:"addtopic"},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){e.topicdialogVisible=!0}}},[e._v(" "+e._s(e.$translateTitle("product.customtopicclass"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),r("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength),height:e.$baseTableHeight(2)},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"left",label:"Topic"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(t.row.topic.replace("${ProductId}",e.productId))+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.operationauthority")},scopedSlots:e._u([{key:"default",fn:function(t){return["pub"==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("product.pub"))+" ")]):e._e(),"sub"==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("product.sub"))+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe"),prop:"desc"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdef?e._e():r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.updatetopic(t.row,t.$index)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t.row.isdef?e._e():r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},nativeOn:{click:function(a){return e.deletetopic(t,t.$index)}},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.topiclength,"page-sizes":[10,20,30,50],total:e.topicData.length},on:{"current-change":e.topicCurrentChange,"size-change":e.topicSizeChange}})],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.definetopicclass"),visible:e.topicdialogVisible,width:"40%"},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[r("div",{staticClass:"topiccontent"},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"10px","font-size":"16px",background:"#e6f9fc"}},[r("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.$translateTitle("product.text2"))+" ")]),r("div",{staticClass:"topicform"},[r("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[r("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[r("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[r("template",{slot:"prepend"},[e._v(" "+e._s("thing/"+e.productId+"/${DevAddr}/")+" ")])],2)],1),r("el-form-item",{attrs:{label:e.$translateTitle("product.operationauthority"),prop:"type"}},[r("el-select",{attrs:{placeholder:e.$translateTitle("product.selectdeviceoperationpermission")},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[r("el-option",{attrs:{label:e.$translateTitle("product.sub"),value:"sub"}}),r("el-option",{attrs:{label:e.$translateTitle("product.pub"),value:"pub"}})],1)],1),r("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.topicdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.subTopic("topicform",e.topicform.isupdated)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),r("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalmodel"),name:"third"}},[r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addMachine"),visible:e.machine,width:"30%"},on:{"update:visible":function(t){e.machine=t}}},[r("div",[r("el-form",{ref:"sizeForm",attrs:{"label-position":"left","label-width":"80px",model:e.machineForm,size:"mini"}},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.devicetype"),prop:"devicetype"}},[r("el-input",{model:{value:e.machineForm.name,callback:function(t){e.$set(e.machineForm,"name",t)},expression:"machineForm.name"}})],1)],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){e.machine=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){return e.savemachine(e.machineForm)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),r("div",[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{lg:4,md:5,sm:6,xl:3,xs:24}},[r("vab-query-form",{staticClass:"query-form"},[r("vab-query-form-top-panel",[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addMachine.apply(null,arguments)}}},[e._v(" 添加类型 ")])],1)],1),r("el-table",{staticStyle:{width:"60vh",overflow:"auto"},attrs:{border:"",data:e.FromMachine,height:e.$baseTableHeight(2),"row-class-name":e.tableRowClassName},on:{"row-click":e.clickmachine},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:"序号",prop:"sort",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(t.$index+1)+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"设备类型",prop:"name"}})],1)],1),r("el-col",{attrs:{lg:20,md:19,sm:18,xl:21,xs:24}},[r("vab-query-form",{staticClass:"query-form"},[r("vab-query-form-right-panel",{staticStyle:{width:"100%"}},[r("div",{staticClass:"stripe-panel"},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.checkAddTest.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.collectionformulaofobjectmodel"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.checkschema.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.viewobjectmodel"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.createProperty.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.newcustomattribute"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.addcategory.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.newstandardattribute"))+" ")])],1)])],1),r("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize),"default-expand-all":!1,"default-sort":{prop:"date",order:"descending"},height:e.$baseTableHeight(2),"row-class-name":e.getRowClass,"row-key":"identifier"},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return"struct"==t.row.dataType.type?[r("el-table",{staticStyle:{"box-sizing":"border-box",width:"60%","text-align":"center"},attrs:{data:t.row.dataType.specs},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}],null,!0)},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.identifier))])]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes")}},[r("span",[e._v(" "+e._s(e.$translateTitle("product.attribute"))+" ")])]),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.dataType.type))])]}}],null,!0)})],1)]:void 0}}],null,!0)}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.order"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.order)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.devicetype"),prop:"devicetype",width:"80"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Rounds"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.round)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Strategy"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.strategy)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocol"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.protocol)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes"),width:"90"}},[r("span",[e._v(e._s(e.$translateTitle("product.attribute")))])]),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier"),prop:"identifier",width:"100"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datatype"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.dataType.type))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.dataType.specs||"double"!=t.row.dataType.type&&"float"!=t.row.dataType.type&&"int"!=t.row.dataType.type?"string"==t.row.dataType.type?r("span",[e._v(" "+e._s(e.$translateTitle("product.datalength")+":"+t.row.dataType.size+e.$translateTitle("product.byte"))+" ")]):"date"==t.row.dataType.type?r("span"):"struct"!=t.row.dataType.type?r("span",[e._v(" "+e._s(t.row.dataType.specs)+" ")]):r("span"):r("span",[e._v(" "+e._s(e.$translateTitle("product.rangeofvalues")+t.row.dataType.specs.min+"~"+t.row.dataType.specs.max)+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(a){return e.deletewmx(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.wmxDataFill(t.row,t.row.index)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")])]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.wmxPageSize,"page-sizes":[10,20,30,50],total:e.wmxData.length},on:{"current-change":e.wmxCurrentChange,"size-change":e.wmxSizeChange}})],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addfunction"),visible:e.originwmx,width:"50%"},on:{"update:visible":function(t){e.originwmx=t}}},[r("div",[r("div",{staticStyle:{margin:"20px 0"}},[r("label",{attrs:{for:""}},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),r("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.getPropData(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),r("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[r("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.data.SuperId))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.type))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.applicabletype")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.data.CategoryName))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.addProCategory(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])]}}])})],1)],1),r("div",[r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.productlength,"page-sizes":[10,20,30,50],small:"",total:e.producttotal},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[r("dgiot-wmx",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDomain:e.addDomain,removeDomain:e.removeDomain,submitForm:e.submitForm,wmxhandleClose:e.wmxhandleClose}})],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addparameter"),top:"15vh",visible:e.structdialog,width:"40%"},on:{"update:visible":function(t){e.structdialog=t}}},[r("div",{staticClass:"structheader"},[r("el-form",{ref:"structform",attrs:{model:e.structform,rules:e.structrule,size:"small"}},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[r("el-input",{model:{value:e.structform.name,callback:function(t){e.$set(e.structform,"name",t)},expression:"structform.name"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[r("el-input",{model:{value:e.structform.identifier,callback:function(t){e.$set(e.structform,"identifier",t)},expression:"structform.identifier"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[r("el-select",{model:{value:e.structform.type,callback:function(t){e.$set(e.structform,"type",t)},expression:"structform.type"}},[r("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),r("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),r("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),r("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),r("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),r("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),r("el-option",{attrs:{label:e.$translateTitle("product.date"),value:"date"}})],1)],1)],1)],1),r("div",[r("el-form-item",{attrs:{label:"数据标识",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"dis"}},[r("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.structform.dis,callback:function(t){e.$set(e.structform,"dis",t)},expression:"structform.dis"}})],1)],1),r("el-col",{attrs:{span:2}},[e._v(" - ")]),r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"数据长度(字节)"},model:{value:e.structform.dinumber,callback:function(t){e.$set(e.structform,"dinumber",e._n(t))},expression:"structform.dinumber"}})],1)],1)],1)],1),r("div",[r("el-form-item",{attrs:{label:"取值范围",required:""}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"startnumber"}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},on:{input:function(t){return e.changeStructValue("structform")}},model:{value:e.structform.startnumber,callback:function(t){e.$set(e.structform,"startnumber",e._n(t))},expression:"structform.startnumber"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"endnumber"}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},model:{value:e.structform.endnumber,callback:function(t){e.$set(e.structform,"endnumber",e._n(t))},expression:"structform.endnumber"}})],1)],1)],1),r("el-form-item",{attrs:{label:"步长",prop:"step"}},[r("el-input",{attrs:{"controls-position":"right",min:0,precision:2,step:.01},model:{value:e.structform.step,callback:function(t){e.$set(e.structform,"step",t)},expression:"structform.step"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[r("el-select",{attrs:{filterable:"",placeholder:e.$translateTitle("product.unit")},model:{value:e.structform.unit,callback:function(t){e.$set(e.structform,"unit",t)},expression:"structform.unit"}},e._l(e.allunit,(function(e,t){return r("el-option",{key:t,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1),"bool"==e.structform.type?r("div",[r("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),required:""}},[r("div",{staticStyle:{height:"40px"}},[r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),readonly:"",type:"number"},model:{value:e.structform.truevalue,callback:function(t){e.$set(e.structform,"truevalue",t)},expression:"structform.truevalue"}})],1)],1),r("el-col",{attrs:{span:2}},[e._v(" - ")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"true"}},[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.structform.true,callback:function(t){e.$set(e.structform,"true",t)},expression:"structform.true"}})],1)],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),readonly:"",type:"number"},model:{value:e.structform.falsevalue,callback:function(t){e.$set(e.structform,"falsevalue",t)},expression:"structform.falsevalue"}})],1)],1),r("el-col",{attrs:{span:2}},[e._v(" - ")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"true"}},[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egclost")},model:{value:e.structform.false,callback:function(t){e.$set(e.structform,"false",t)},expression:"structform.false"}})],1)],1)],1)])],1):e._e(),"enum"==e.structform.type?r("div",[e._l(e.structform.specs,(function(t,a){return r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.structform.specs.length,expression:"structform.specs.length"}],key:a,attrs:{required:""}},[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+a,prop:"specs."+a+".attribute",rules:[{required:!0,message:"输入属性"}]}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v(" - ")]),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+a,prop:"specs."+a+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[r("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}}),r("el-col",{staticClass:"line",attrs:{span:4}},[r("el-link",{staticStyle:{"margin-top":"30px","margin-left":"5px"},attrs:{icon:"el-icon-minus",type:"primary",underline:!1},on:{click:function(a){return a.preventDefault(),e.removeDomain1(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)],1)})),r("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},nativeOn:{click:function(t){return e.addDomain1.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])],2):e._e(),"string"==e.structform.type?r("div",[r("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[r("el-input",{attrs:{type:"number"},model:{value:e.structform.string,callback:function(t){e.$set(e.structform,"string",e._n(t))},expression:"structform.string"}},[r("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.structform.type?r("div",[r("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[r("el-input",{attrs:{readonly:""},model:{value:e.structform.date,callback:function(t){e.$set(e.structform,"date",t)},expression:"structform.date"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[r("el-radio-group",{attrs:{size:"medium"},model:{value:e.structform.isread,callback:function(t){e.$set(e.structform,"isread",t)},expression:"structform.isread"}},[r("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.readandwrite"))+" ")]),r("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.onlyread"))+" ")])],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.structdialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),r("el-tab-pane",{staticStyle:{diaplay:"none"},attrs:{disabled:!0,label:e.$translateTitle("product.matteranalysis"),name:"fourth"}},[r("div",{staticClass:"protolheader"},[r("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[r("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[r("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.subAce("formInline",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.subAce1("formInline")}}},[e._v(" "+e._s(e.$translateTitle("product.setaspublic"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.chaxun.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")])],1),r("el-form-item",{staticStyle:{display:"block"}},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.protol.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),r("el-button",{attrs:{size:"small",type:"success"},nativeOn:{click:function(t){return e.updatesubdialog.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.thermalloading"))+" ")])],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.tdthermalloading"),visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):r("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cType))])]}}])})],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[r("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.data.name))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.data.version))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.data.desc))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.createdAt")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.editordata(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(a){return e.deletedata(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),r("div",[r("div",{staticStyle:{background:"#ffffff"}},[r("label",{attrs:{id:"plug-name1"}})]),r("pre",{staticClass:"ace_editor ace-monokai ace_dark",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[r("textarea",{staticClass:"ace_text-input"})]),r("div",{staticStyle:{background:"#ffffff"}},[r("label",{attrs:{id:"plug-name2"}})]),r("div",{staticStyle:{padding:"5px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[r("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[r("textarea",{staticClass:"ace_text-input"})])])],1),r("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalaccess"),name:"fiveth"}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.showAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,height:e.$baseTableHeight(2),"row-class-name":e.getChannelEnable},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):3==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cType))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.updatesub(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.overloadconfiguration"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.channellength,"page-sizes":[10,20,30,50],total:e.channeltotal},on:{"current-change":e.channelCurrentChange,"size-change":e.channelSizeChange}})],1)],1)],1),r("el-tab-pane",{attrs:{label:e.$translateTitle("product.materialstorage"),name:"seven"}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[r("el-popover",{attrs:{placement:"right",title:e.$translateTitle("developer.tipsforcustomdatamodel"),trigger:"hover",width:"600"},on:{show:e.questionModel}},[r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editorinsert"}},[r("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1),r("el-button",{attrs:{slot:"reference",icon:"el-icon-question",size:"mini",type:"primary"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.customizedatamodelhelp"))+" ")])],1),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.resourceShowAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"manual"}})],1)],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourcechannelData,height:e.$baseTableHeight(2),"row-class-name":e.getChannelEnable},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):r("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cType))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.customize(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.custommodel"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.resourcelength,"page-sizes":[10,20,30,50],total:e.resourcetotal},on:{"current-change":e.resourcechannelCurrentChange,"size-change":e.resourcechannelSizeChange}})],1)],1)],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[r("div",[r("div",{staticStyle:{background:"#ffffff"}},[r("label",{attrs:{id:"plug-name"}})]),r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[r("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),r("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.preserve.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("equipment.update"))+" ")])],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("equipment.addchannel"),visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[r("div",{staticClass:"addchannel"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):2==t.row.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")]):r("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cType))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return e.addProductChannel(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.add"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.allChannellength,"page-sizes":[10,20,30,50],total:e.allChanneltotal},on:{"current-change":e.allChannelCurrentChange,"size-change":e.allChannelSizeChange}})],1)],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseSubdialog,"close-on-click-modal":!1,title:e.channelname+"日志",visible:e.subdialog,width:"85%"},on:{"update:visible":function(t){e.subdialog=t}}},[r("div",{staticStyle:{"margin-top":"20px"}},[r("pre",{staticClass:"ace_editor",staticStyle:{width:"100%","min-height":"300px"},attrs:{id:"subdialog"}},[e._v("                      "),r("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}}),e._v("        ")])]),r("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[r("el-switch",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"自动刷新"},on:{change:e.stopsub},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.closeWuDialog,"close-on-click-modal":!1,"show-close":!1,top:"1vh",visible:e.resourcedialogFormVisible,width:"90%"},on:{"update:visible":function(t){e.resourcedialogFormVisible=t}}},[r("el-form",{ref:"resourceform",attrs:{model:e.resourceform}},[r("div",{staticClass:"wumoxing"},[r("el-row",[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-form-item",{attrs:{label:e.$translateTitle("product.physicalmodel")}},[r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editormodel"}},[r("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)]),r("el-col",{attrs:{span:16}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-form-item",{attrs:{label:e.$translateTitle("product.customizedatamodel")}},[r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editorcreate"}},[r("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)])],1)],1)]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){return e.closeWuDialog.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.quit"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addData.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,title:e.$translateTitle("product.export"),visible:e.exportDialogShow,width:"25%"},on:{"update:visible":function(t){e.exportDialogShow=t}}},[r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"btn-right",attrs:{size:"small"},nativeOn:{click:function(t){e.exportDialogShow=!1}}},[e._v(" "+e._s(e.$translateTitle("tagsView.close"))+" ")])],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseCollecttion,"close-on-click-modal":!1,fullscreen:!0,title:e.$translateTitle("product.viewcollectionformula"),visible:e.collectionDialogVisible,width:"100%"},on:{"update:visible":function(t){e.collectionDialogVisible=t}}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"diaCollLeftCls"},[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex}},[e._l(e.wmxData,(function(t,a){return[r("el-menu-item",{key:a+"",attrs:{index:t.identifier},nativeOn:{click:function(r){return e.menuTabClick(t,a)}}},[t.dataType.specs?r("ol",[e._v(" "+e._s(t.identifier+"        "+t.name+"        取值范围"+t.dataType.specs.min+"~"+t.dataType.specs.max)+" ")]):r("ol",[e._v(" "+e._s(t.identifier+"        "+t.name)+" ")])])]}))],2)],1)]),r("el-col",{attrs:{span:18}},[r("el-tabs",{attrs:{closable:"",type:"card"},on:{"tab-click":e.handleRightTopTabClick,"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,a){return r("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[r("div",{staticClass:"diaCollRightCls"},[r("el-row",{staticStyle:{margin:"10px"}},[r("el-button",{attrs:{type:"success"}},[e._v(" "+e._s(e.$translateTitle("rule.Test"))+" ")]),r("el-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.onReductionTap(a)}}},[e._v(" "+e._s(e.$translateTitle("product.reduction"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSaveTap(a)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1),r("pre",{staticClass:"ace_editor3",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:t.name}},[r("textarea",{staticClass:"ace_text-input"})])],1)])})),1)],1)],1)],1)],1)},i=[],o=a("dd87"),n=(a("1b62f"),a("2877")),s=Object(n["a"])(o["a"],r,i,!1,null,"12f0c0a0",null);t["default"]=s.exports}}]);