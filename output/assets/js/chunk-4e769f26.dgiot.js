/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Mon Nov 15 2021 12:23:23 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e769f26"],{"071a":function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n,e){n.fire("VisualBlocks",{state:e})},r=function(n,e,r){var o=n.dom;o.toggleClass(n.getBody(),"mce-visualblocks"),r.set(!r.get()),t(n,r.get())},o=function(n,e,t){n.addCommand("mceVisualBlocks",(function(){r(n,e,t)}))},u=function(n){return n.getParam("visualblocks_default_state",!1,"boolean")},i=function(n,e,t){n.on("PreviewFormats AfterPreviewFormats",(function(e){t.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)})),n.on("init",(function(){u(n)&&r(n,e,t)}))},c=function(n,e){return function(t){t.setActive(e.get());var r=function(n){return t.setActive(n.state)};return n.on("VisualBlocks",r),function(){return n.off("VisualBlocks",r)}}},a=function(n,e){var t=function(){return n.execCommand("mceVisualBlocks")};n.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:t,onSetup:c(n,e)}),n.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:t,onSetup:c(n,e)})};function l(){e.add("visualblocks",(function(e,t){var r=n(!1);o(e,t,r),a(e,r),i(e,t,r)}))}l()})()},"163b":function(n,e,t){t("2412")},2412:function(n,e){(function(){"use strict";var n=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},e=function(e){return function(t){return n(t)===e}},t=function(n){return function(e){return typeof e===n}},r=function(n){return function(e){return n===e}},o=e("string"),u=e("object"),i=e("array"),c=r(null),a=t("boolean"),l=r(void 0),f=function(n){return null===n||void 0===n},s=function(n){return!f(n)},d=t("function"),m=t("number"),g=function(){},p=function(n,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n(e.apply(null,t))}},v=function(n,e){return function(t){return n(e(t))}},h=function(n){return function(){return n}},b=function(n){return n},w=function(n,e){return n===e};function y(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.concat(t);return n.apply(null,o)}}var C=function(n){return function(e){return!n(e)}},T=function(n){return function(){throw new Error(n)}},S=h(!1),x=h(!0),R=function(){return A},A=function(){var n=function(n){return n()},e=b,t={fold:function(n,e){return n()},isSome:S,isNone:x,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:e,orThunk:n,map:R,each:g,bind:R,exists:S,forall:x,filter:function(){return R()},toArray:function(){return[]},toString:h("none()")};return t}(),O=function(n){var e=h(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:x,isNone:S,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return O(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:A},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},D=function(n){return null===n||void 0===n?A:O(n)},E={some:O,none:R,from:D},k=Array.prototype.slice,M=Array.prototype.indexOf,N=Array.prototype.push,I=function(n,e){return M.call(n,e)},B=function(n,e){return I(n,e)>-1},P=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return!0}return!1},L=function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},_=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},F=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},W=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n[t];e(r,t)}},j=function(n,e){for(var t=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o],c=e(i,o)?t:r;c.push(i)}return{pass:t,fail:r}},z=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},H=function(n,e,t){return W(n,(function(n,r){t=e(t,n,r)})),t},U=function(n,e,t){return F(n,(function(n,r){t=e(t,n,r)})),t},V=function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return E.some(u);if(t(u,r))break}return E.none()},K=function(n,e){return V(n,e,S)},q=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return E.some(t)}return E.none()},$=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!i(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);N.apply(e,n[t])}return e},X=function(n,e){return $(_(n,e))},G=function(n,e){for(var t=0,r=n.length;t<r;++t){var o=n[t];if(!0!==e(o,t))return!1}return!0},Y=function(n){var e=k.call(n,0);return e.reverse(),e},J=function(n,e){for(var t={},r=0,o=n.length;r<o;r++){var u=n[r];t[String(u)]=e(u,r)}return t},Q=function(n){return[n]},Z=function(n,e){var t=k.call(n,0);return t.sort(e),t},nn=function(n,e){return e>=0&&e<n.length?E.some(n[e]):E.none()},en=function(n){return nn(n,0)},tn=function(n){return nn(n,n.length-1)},rn=function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return E.none()},on=function(){return on=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},on.apply(this,arguments)};function un(n,e,t){if(t||2===arguments.length)for(var r,o=0,u=e.length;o<u;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}var cn=function(n){var e,t=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t||(t=!0,e=n.apply(null,r)),e}},an=function(n,e,t,r){var o=n.isiOS()&&!0===/ipad/i.test(t),u=n.isiOS()&&!o,i=n.isiOS()||n.isAndroid(),c=i||r("(pointer:coarse)"),a=o||!u&&i&&r("(min-device-width:768px)"),l=u||i&&!a,f=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(t),s=!l&&!a&&!f;return{isiPad:h(o),isiPhone:h(u),isTablet:h(a),isPhone:h(l),isTouch:h(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:h(f),isDesktop:h(s)}},ln=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}},fn=function(n,e){var t=ln(n,e);if(!t)return{major:0,minor:0};var r=function(n){return Number(e.replace(t,"$"+n))};return mn(r(1),r(2))},sn=function(n,e){var t=String(e).toLowerCase();return 0===n.length?dn():fn(n,t)},dn=function(){return mn(0,0)},mn=function(n,e){return{major:n,minor:e}},gn={nu:mn,detect:sn,unknown:dn},pn=function(n,e){return rn(e.brands,(function(e){var t=e.brand.toLowerCase();return K(n,(function(n){var e;return t===(null===(e=n.brand)||void 0===e?void 0:e.toLowerCase())})).map((function(n){return{current:n.name,version:gn.nu(parseInt(e.version,10),0)}}))}))},vn=function(n,e){var t=String(e).toLowerCase();return K(n,(function(n){return n.search(t)}))},hn=function(n,e){return vn(n,e).map((function(n){var t=gn.detect(n.versionRegexes,e);return{current:n.name,version:t}}))},bn=function(n,e){return vn(n,e).map((function(n){var t=gn.detect(n.versionRegexes,e);return{current:n.name,version:t}}))},wn=function(n,e){return n.substring(e)},yn=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},Cn=function(n,e){return Sn(n,e)?wn(n,e.length):n},Tn=function(n,e){return-1!==n.indexOf(e)},Sn=function(n,e){return yn(n,e,0)},xn=function(n,e){return yn(n,e,n.length-e.length)},Rn=function(n){return function(e){return e.replace(n,"")}},An=Rn(/^\s+|\s+$/g),On=function(n){return n.length>0},Dn=function(n){return!On(n)},En=function(n){var e=parseFloat(n);return isNaN(e)?E.none():E.some(e)},kn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mn=function(n){return function(e){return Tn(e,n)}},Nn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Tn(n,"edge/")&&Tn(n,"chrome")&&Tn(n,"safari")&&Tn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kn],search:function(n){return Tn(n,"chrome")&&!Tn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Tn(n,"msie")||Tn(n,"trident")}},{name:"Opera",versionRegexes:[kn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mn("firefox")},{name:"Safari",versionRegexes:[kn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Tn(n,"safari")||Tn(n,"mobile/"))&&Tn(n,"applewebkit")}}],In=[{name:"Windows",search:Mn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Tn(n,"iphone")||Tn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Mn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mn("linux"),versionRegexes:[]},{name:"Solaris",search:Mn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Mn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Bn={browsers:h(Nn),oses:h(In)},Pn="Edge",Ln="Chrome",_n="IE",Fn="Opera",Wn="Firefox",jn="Safari",zn=function(){return Hn({current:void 0,version:gn.unknown()})},Hn=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isEdge:r(Pn),isChrome:r(Ln),isIE:r(_n),isOpera:r(Fn),isFirefox:r(Wn),isSafari:r(jn)}},Un={unknown:zn,nu:Hn,edge:h(Pn),chrome:h(Ln),ie:h(_n),opera:h(Fn),firefox:h(Wn),safari:h(jn)},Vn="Windows",Kn="iOS",qn="Android",$n="Linux",Xn="OSX",Gn="Solaris",Yn="FreeBSD",Jn="ChromeOS",Qn=function(){return Zn({current:void 0,version:gn.unknown()})},Zn=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isWindows:r(Vn),isiOS:r(Kn),isAndroid:r(qn),isOSX:r(Xn),isLinux:r($n),isSolaris:r(Gn),isFreeBSD:r(Yn),isChromeOS:r(Jn)}},ne={unknown:Qn,nu:Zn,windows:h(Vn),ios:h(Kn),android:h(qn),linux:h($n),osx:h(Xn),solaris:h(Gn),freebsd:h(Yn),chromeos:h(Jn)},ee=function(n,e,t){var r=Bn.browsers(),o=Bn.oses(),u=e.bind((function(n){return pn(r,n)})).orThunk((function(){return hn(r,n)})).fold(Un.unknown,Un.nu),i=bn(o,n).fold(ne.unknown,ne.nu),c=an(i,u,n,t);return{browser:u,os:i,deviceType:c}},te={detect:ee},re=function(n){return window.matchMedia(n).matches},oe=cn((function(){return te.detect(navigator.userAgent,E.from(navigator.userAgentData),re)})),ue=function(){return oe()},ie=function(n,e,t){return 0!==(n.compareDocumentPosition(e)&t)},ce=function(n,e){return ie(n,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},ae=8,le=9,fe=11,se=1,de=3,me=function(n,e){var t=e||document,r=t.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return ve(r.childNodes[0])},ge=function(n,e){var t=e||document,r=t.createElement(n);return ve(r)},pe=function(n,e){var t=e||document,r=t.createTextNode(n);return ve(r)},ve=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},he=function(n,e,t){return E.from(n.dom.elementFromPoint(e,t)).map(ve)},be={fromHtml:me,fromTag:ge,fromText:pe,fromDom:ve,fromPoint:he},we=function(n,e){var t=n.dom;if(t.nodeType!==se)return!1;var r=t;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ye=function(n){return n.nodeType!==se&&n.nodeType!==le&&n.nodeType!==fe||0===n.childElementCount},Ce=function(n,e){var t=void 0===e?document:e.dom;return ye(t)?[]:_(t.querySelectorAll(n),be.fromDom)},Te=function(n,e){var t=void 0===e?document:e.dom;return ye(t)?E.none():E.from(t.querySelector(n)).map(be.fromDom)},Se=function(n,e){return n.dom===e.dom},xe=function(n,e){var t=n.dom,r=e.dom;return t!==r&&t.contains(r)},Re=function(n,e){return ce(n.dom,e.dom)},Ae=function(n,e){return ue().browser.isIE()?Re(n,e):xe(n,e)},Oe=we,De=Object.keys,Ee=Object.hasOwnProperty,ke=function(n,e){for(var t=De(n),r=0,o=t.length;r<o;r++){var u=t[r],i=n[u];e(i,u)}},Me=function(n,e){return Ne(n,(function(n,t){return{k:t,v:e(n,t)}}))},Ne=function(n,e){var t={};return ke(n,(function(n,r){var o=e(n,r);t[o.k]=o.v})),t},Ie=function(n){return function(e,t){n[t]=e}},Be=function(n,e,t,r){var o={};return ke(n,(function(n,o){(e(n,o)?t:r)(n,o)})),o},Pe=function(n,e){var t={};return Be(n,e,Ie(t),g),t},Le=function(n,e){var t=[];return ke(n,(function(n,r){t.push(e(n,r))})),t},_e=function(n){return Le(n,b)},Fe=function(n){return De(n).length},We=function(n,e){return je(n,e)?E.from(n[e]):E.none()},je=function(n,e){return Ee.call(n,e)},ze=function(n,e){return je(n,e)&&void 0!==n[e]&&null!==n[e]},He=function(n){for(var e in n)if(Ee.call(n,e))return!1;return!0},Ue=["tfoot","thead","tbody","colgroup"],Ve=function(n){return B(Ue,n)},Ke=function(n,e){return{rows:n,columns:e}},qe=function(n,e){return{row:n,column:e}},$e=function(n,e,t){return{element:n,rowspan:e,colspan:t}},Xe=function(n,e,t,r){return{element:n,rowspan:e,colspan:t,isNew:r}},Ge=function(n,e,t,r,o,u){return{element:n,rowspan:e,colspan:t,row:r,column:o,isLocked:u}},Ye=function(n,e,t){return{element:n,cells:e,section:t}},Je=function(n,e,t,r){return{element:n,cells:e,section:t,isNew:r}},Qe=function(n,e,t){return{element:n,isNew:e,isLocked:t}},Ze=function(n,e,t,r){return{element:n,cells:e,section:t,isNew:r}},nt=function(n,e,t,r){return{startRow:n,startCol:e,finishRow:t,finishCol:r}},et=function(n,e,t){return{element:n,colspan:e,column:t}},tt=function(n,e){return{element:n,columns:e}};"undefined"!==typeof window?window:Function("return this;")();var rt=function(n){var e=n.dom.nodeName;return e.toLowerCase()},ot=function(n){return n.dom.nodeType},ut=function(n){return function(e){return ot(e)===n}},it=function(n){return ot(n)===ae||"#comment"===rt(n)},ct=ut(se),at=ut(de),lt=ut(le),ft=ut(fe),st=function(n){return function(e){return ct(e)&&rt(e)===n}},dt=function(n){return be.fromDom(n.dom.ownerDocument)},mt=function(n){return lt(n)?n:dt(n)},gt=function(n){return be.fromDom(mt(n).dom.defaultView)},pt=function(n){return E.from(n.dom.parentNode).map(be.fromDom)},vt=function(n){return E.from(n.dom.parentElement).map(be.fromDom)},ht=function(n,e){var t=d(e)?e:S,r=n.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var u=r.parentNode,i=be.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o},bt=function(n){return E.from(n.dom.previousSibling).map(be.fromDom)},wt=function(n){return E.from(n.dom.nextSibling).map(be.fromDom)},yt=function(n){return _(n.dom.childNodes,be.fromDom)},Ct=function(n,e){var t=n.dom.childNodes;return E.from(t[e]).map(be.fromDom)},Tt=function(n){return Ct(n,0)},St=function(n){return ft(n)&&s(n.dom.host)},xt=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),Rt=h(xt),At=xt?function(n){return be.fromDom(n.dom.getRootNode())}:mt,Ot=function(n){var e=At(n);return St(e)?E.some(e):E.none()},Dt=function(n){return be.fromDom(n.dom.host)},Et=function(n){if(Rt()&&s(n.target)){var e=be.fromDom(n.target);if(ct(e)&&kt(e)&&n.composed&&n.composedPath){var t=n.composedPath();if(t)return en(t)}}return E.from(n.target)},kt=function(n){return s(n.dom.shadowRoot)},Mt=function(n){var e=at(n)?n.dom.parentNode:n.dom;if(void 0===e||null===e||null===e.ownerDocument)return!1;var t=e.ownerDocument;return Ot(be.fromDom(e)).fold((function(){return t.body.contains(e)}),v(Mt,Dt))},Nt=function(){return It(be.fromDom(document))},It=function(n){var e=n.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return be.fromDom(e)},Bt=function(n,e,t){return z(ht(n,t),e)},Pt=function(n,e){return z(yt(n),e)},Lt=function(n,e){var t=[];return F(yt(n),(function(n){e(n)&&(t=t.concat([n])),t=t.concat(Lt(n,e))})),t},_t=function(n,e,t){return Bt(n,(function(n){return we(n,e)}),t)},Ft=function(n,e){return Pt(n,(function(n){return we(n,e)}))},Wt=function(n,e){return Ce(e,n)};function jt(n,e,t,r,o){return n(t,r)?E.some(t):d(o)&&o(t)?E.none():e(t,r,o)}var zt=function(n,e,t){var r=n.dom,o=d(t)?t:S;while(r.parentNode){r=r.parentNode;var u=be.fromDom(r);if(e(u))return E.some(u);if(o(u))break}return E.none()},Ht=function(n,e,t){var r=function(n,e){return e(n)};return jt(r,zt,n,e,t)},Ut=function(n,e){var t=function(n){return e(be.fromDom(n))},r=K(n.dom.childNodes,t);return r.map(be.fromDom)},Vt=function(n,e){var t=function(n){for(var r=0;r<n.childNodes.length;r++){var o=be.fromDom(n.childNodes[r]);if(e(o))return E.some(o);var u=t(n.childNodes[r]);if(u.isSome())return u}return E.none()};return t(n.dom)},Kt=function(n,e,t){return zt(n,(function(n){return we(n,e)}),t)},qt=function(n,e){return Ut(n,(function(n){return we(n,e)}))},$t=function(n,e){return Te(e,n)},Xt=function(n,e,t){var r=function(n,e){return we(n,e)};return jt(r,Kt,n,e,t)},Gt=function(n,e,t){if(!(o(t)||a(t)||m(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},Yt=function(n,e,t){Gt(n.dom,e,t)},Jt=function(n,e){var t=n.dom;ke(e,(function(n,e){Gt(t,e,n)}))},Qt=function(n,e){ke(e,(function(e,t){e.fold((function(){er(n,t)}),(function(e){Gt(n.dom,t,e)}))}))},Zt=function(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t},nr=function(n,e){return E.from(Zt(n,e))},er=function(n,e){n.dom.removeAttribute(e)},tr=function(n){return U(n.dom.attributes,(function(n,e){return n[e.name]=e.value,n}),{})},rr=function(n,e,t){return void 0===t&&(t=w),n.exists((function(n){return t(n,e)}))},or=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},ur=function(n,e,t){return n.isSome()&&e.isSome()?E.some(t(n.getOrDie(),e.getOrDie())):E.none()},ir=function(n,e){return void 0!==n&&null!==n?e(n):E.none()},cr=function(n){return n.bind(b)},ar=function(n,e){return n?E.some(e):E.none()},lr=function(n){return void 0!==n.style&&d(n.style.getPropertyValue)},fr=function(n,e,t){if(!o(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);lr(n)&&n.style.setProperty(e,t)},sr=function(n,e){lr(n)&&n.style.removeProperty(e)},dr=function(n,e,t){var r=n.dom;fr(r,e,t)},mr=function(n,e){var t=n.dom;ke(e,(function(n,e){fr(t,e,n)}))},gr=function(n,e){var t=n.dom,r=window.getComputedStyle(t),o=r.getPropertyValue(e);return""!==o||Mt(n)?o:pr(t,e)},pr=function(n,e){return lr(n)?n.style.getPropertyValue(e):""},vr=function(n,e){var t=n.dom,r=pr(t,e);return E.from(r).filter((function(n){return n.length>0}))},hr=function(n,e){var t=n.dom;sr(t,e),rr(nr(n,"style").map(An),"")&&er(n,"style")},br=function(n,e){var t=n.dom,r=e.dom;lr(t)&&lr(r)&&(r.style.cssText=t.style.cssText)},wr=function(n,e,t){return void 0===t&&(t=0),nr(n,e).map((function(n){return parseInt(n,10)})).getOr(t)},yr=function(n,e){return wr(n,e,1)},Cr=function(n){return st("col")(n)?wr(n,"span",1)>1:yr(n,"colspan")>1},Tr=function(n){return yr(n,"rowspan")>1},Sr=function(n,e){return parseInt(gr(n,e),10)},xr=h(10),Rr=h(10),Ar=function(n,e){return Or(n,e,x)},Or=function(n,e,t){return X(yt(n),(function(n){return we(n,e)?t(n)?[n]:[]:Or(n,e,t)}))},Dr=function(n,e,t){if(void 0===t&&(t=S),t(e))return E.none();if(B(n,rt(e)))return E.some(e);var r=function(n){return we(n,"table")||t(n)};return Kt(e,n.join(","),r)},Er=function(n,e){return Dr(["td","th"],n,e)},kr=function(n){return Ar(n,"th,td")},Mr=function(n){return we(n,"colgroup")?Ft(n,"col"):X(Br(n),(function(n){return Ft(n,"col")}))},Nr=function(n,e){return Xt(n,"table",e)},Ir=function(n){return Ar(n,"tr")},Br=function(n){return Nr(n).fold(h([]),(function(n){return Ft(n,"colgroup")}))},Pr=function(n,e){return _(n,(function(n){if("colgroup"===rt(n)){var t=_(Mr(n),(function(n){var e=wr(n,"span",1);return $e(n,1,e)}));return Ye(n,t,"colgroup")}t=_(kr(n),(function(n){var e=wr(n,"rowspan",1),t=wr(n,"colspan",1);return $e(n,e,t)}));return Ye(n,t,e(n))}))},Lr=function(n){return pt(n).map((function(n){var e=rt(n);return Ve(e)?e:"tbody"})).getOr("tbody")},_r=function(n){var e=Ir(n),t=Br(n),r=un(un([],t,!0),e,!0);return Pr(r,Lr)},Fr=function(n,e){return Pr(n,(function(){return e}))},Wr=function(n,e,t){var r=n.cells,o=r.slice(0,e),u=r.slice(e),i=o.concat(t).concat(u);return Hr(n,i)},jr=function(n,e,t){return Wr(n,e,[t])},zr=function(n,e,t){var r=n.cells;r[e]=t},Hr=function(n,e){return Ze(n.element,e,n.section,n.isNew)},Ur=function(n,e){var t=n.cells,r=_(t,e);return Ze(n.element,r,n.section,n.isNew)},Vr=function(n,e){return n.cells[e]},Kr=function(n,e){return Vr(n,e).element},qr=function(n){return n.cells.length},$r=function(n){var e=j(n,(function(n){return"colgroup"===n.section}));return{rows:e.fail,cols:e.pass}},Xr=function(n,e,t){var r=_(n.cells,t);return Ze(e(n.element),r,n.section,!0)},Gr="data-snooker-locked-cols",Yr=function(n){return nr(n,Gr).bind((function(n){return E.from(n.match(/\d+/g))})).map((function(n){return J(n,x)}))},Jr=function(n){var e=U($r(n).rows,(function(n,e){return F(e.cells,(function(e,t){e.isLocked&&(n[t]=!0)})),n}),{}),t=Le(e,(function(n,e){return parseInt(e,10)}));return Z(t)},Qr=function(n,e){return n+","+e},Zr=function(n,e,t){return E.from(n.access[Qr(e,t)])},no=function(n,e,t){var r=eo(n,(function(n){return t(e,n.element)}));return r.length>0?E.some(r[0]):E.none()},eo=function(n,e){var t=X(n.all,(function(n){return n.cells}));return z(t,e)},to=function(n){var e={},t=0;return F(n.cells,(function(n){var r=n.colspan;L(r,(function(o){var u=t+o;e[u]=et(n.element,r,u)})),t+=r})),e},ro=function(n){var e={},t=[],r=en(n).map((function(n){return n.element})).bind(Nr),o=r.bind(Yr).getOr({}),u=0,i=0,c=0,a=j(n,(function(n){return"colgroup"===n.section})),l=a.pass,f=a.fail;F(f,(function(n){var r=[];F(n.cells,(function(n){var t=0;while(void 0!==e[Qr(c,t)])t++;for(var u=ze(o,t.toString()),a=Ge(n.element,n.rowspan,n.colspan,c,t,u),l=0;l<n.colspan;l++)for(var f=0;f<n.rowspan;f++){var s=c+f,d=t+l,m=Qr(s,d);e[m]=a,i=Math.max(i,d+1)}r.push(a)})),u++,t.push(Ye(n.element,r,n.section)),c++}));var s=tn(l).map((function(n){var e=to(n),t=tt(n.element,_e(e));return{colgroups:[t],columns:e}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),d=s.columns,m=s.colgroups,g=Ke(u,i);return{grid:g,access:e,all:t,columns:d,colgroups:m}},oo=function(n){var e=_r(n);return ro(e)},uo=function(n){return X(n.all,(function(n){return n.cells}))},io=function(n){return _e(n.columns)},co=function(n){return De(n.columns).length>0},ao=function(n,e){return E.from(n.columns[e])},lo={fromTable:oo,generate:ro,getAt:Zr,findItem:no,filterItems:eo,justCells:uo,justColumns:io,hasColumns:co,getColumnAt:ao},fo=function(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,u=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},so=function(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow},mo=function(n,e){for(var t=!0,r=y(so,e),o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++)t=t&&lo.getAt(n,o,u).exists(r);return t?E.some(e):E.none()},go=function(n,e){return nt(Math.min(n.row,e.row),Math.min(n.column,e.column),Math.max(n.row+n.rowspan-1,e.row+e.rowspan-1),Math.max(n.column+n.colspan-1,e.column+e.colspan-1))},po=function(n,e,t){var r=lo.findItem(n,e,Se),o=lo.findItem(n,t,Se);return r.bind((function(n){return o.map((function(e){return go(n,e)}))}))},vo=function(n,e,t){return po(n,e,t).bind((function(e){return mo(n,e)}))},ho=function(n,e,t,r){return lo.findItem(n,e,Se).bind((function(e){var o=t>0?e.row+e.rowspan-1:e.row,u=r>0?e.column+e.colspan-1:e.column,i=lo.getAt(n,o+t,u+r);return i.map((function(n){return n.element}))}))},bo=function(n,e,t){return po(n,e,t).map((function(e){var t=lo.filterItems(n,y(fo,e));return _(t,(function(n){return n.element}))}))},wo=function(n,e){var t=function(n,e){return Ae(e,n)};return lo.findItem(n,e,t).map((function(n){return n.element}))},yo=function(n,e,t){return Nr(n).bind((function(r){var o=xo(r);return ho(o,n,e,t)}))},Co=function(n,e,t){var r=xo(n);return bo(r,e,t)},To=function(n,e,t,r,o){var u=xo(n),i=Se(n,t)?E.some(e):wo(u,e),c=Se(n,o)?E.some(r):wo(u,r);return i.bind((function(n){return c.bind((function(e){return bo(u,n,e)}))}))},So=function(n,e,t){var r=xo(n);return vo(r,e,t)},xo=lo.fromTable,Ro=function(n,e){var t=pt(n);t.each((function(t){t.dom.insertBefore(e.dom,n.dom)}))},Ao=function(n,e){var t=wt(n);t.fold((function(){var t=pt(n);t.each((function(n){Do(n,e)}))}),(function(n){Ro(n,e)}))},Oo=function(n,e){var t=Tt(n);t.fold((function(){Do(n,e)}),(function(t){n.dom.insertBefore(e.dom,t.dom)}))},Do=function(n,e){n.dom.appendChild(e.dom)},Eo=function(n,e,t){Ct(n,t).fold((function(){Do(n,e)}),(function(n){Ro(n,e)}))},ko=function(n,e){Ro(n,e),Do(e,n)},Mo=function(n,e){F(e,(function(e){Ro(n,e)}))},No=function(n,e){F(e,(function(t,r){var o=0===r?n:e[r-1];Ao(o,t)}))},Io=function(n,e){F(e,(function(e){Do(n,e)}))},Bo=function(n){n.dom.textContent="",F(yt(n),(function(n){Po(n)}))},Po=function(n){var e=n.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Lo=function(n){var e=yt(n);e.length>0&&Mo(n,e),Po(n)},_o=function(n,e){var t=function(t){if(!n(t))throw new Error("Can only get "+e+" value of a "+e+" node");return r(t).getOr("")},r=function(e){return n(e)?E.from(e.dom.nodeValue):E.none()},o=function(t,r){if(!n(t))throw new Error("Can only set raw "+e+" value of a "+e+" node");t.dom.nodeValue=r};return{get:t,getOption:r,set:o}},Fo=_o(at,"text"),Wo=function(n){return Fo.get(n)},jo=function(n){return Fo.getOption(n)},zo=function(n,e){return Fo.set(n,e)},Ho=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Uo(){var n=function(n){return be.fromDom(n.dom.cloneNode(!1))},e=function(n){return mt(n).dom},t=function(n){return!!ct(n)&&("body"===rt(n)||B(Ho,rt(n)))},r=function(n){return!!ct(n)&&B(["br","img","hr","input"],rt(n))},o=function(n){return ct(n)&&"false"===Zt(n,"contenteditable")},u=function(n,e){return n.dom.compareDocumentPosition(e.dom)},i=function(n,e){var t=tr(n);Jt(e,t)},c=function(n){var e=rt(n);return B(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},a=function(n){return ct(n)?nr(n,"lang"):E.none()};return{up:h({selector:Kt,closest:Xt,predicate:zt,all:ht}),down:h({selector:Wt,predicate:Lt}),styles:h({get:gr,getRaw:vr,set:dr,remove:hr}),attrs:h({get:Zt,set:Yt,remove:er,copyTo:i}),insert:h({before:Ro,after:Ao,afterAll:No,append:Do,appendAll:Io,prepend:Oo,wrap:ko}),remove:h({unwrap:Lo,remove:Po}),create:h({nu:be.fromTag,clone:n,text:be.fromText}),query:h({comparePosition:u,prevSibling:bt,nextSibling:wt}),property:h({children:yt,name:rt,parent:pt,document:e,isText:at,isComment:it,isElement:ct,isSpecial:c,getLanguage:a,getText:Wo,setText:zo,isBoundary:t,isEmptyTag:r,isNonEditable:o}),eq:Se,is:Oe}}var Vo=function(n,e,t,r){var o=t[0],u=t.slice(1);return r(n,e,o,u)},Ko=function(n,e,t){return t.length>0?Vo(n,e,t,qo):E.none()},qo=function(n,e,t,r){var o=e(n,t);return H(r,(function(t,r){var o=e(n,r);return $o(n,t,o)}),o)},$o=function(n,e,t){return e.bind((function(e){return t.filter(y(n.eq,e))}))},Xo=function(n,e){return y(n.eq,e)},Go=function(n,e,t,r){void 0===r&&(r=S);var o=[e].concat(n.up().all(e)),u=[t].concat(n.up().all(t)),i=function(n){var e=q(n,r);return e.fold((function(){return n}),(function(e){return n.slice(0,e+1)}))},c=i(o),a=i(u),l=K(c,(function(e){return P(a,Xo(n,e))}));return{firstpath:c,secondpath:a,shared:l}},Yo=Ko,Jo=Go,Qo=Uo(),Zo=function(n,e){return Yo(Qo,(function(e,t){return n(t)}),e)},nu=function(n,e,t){return Jo(Qo,n,e,t)},eu=function(n){return Kt(n,"table")},tu=function(n,e,t){var r=function(n){return function(e){return void 0!==t&&t(e)||Se(e,n)}};return Se(n,e)?E.some({boxes:E.some([n]),start:n,finish:e}):eu(n).bind((function(o){return eu(e).bind((function(u){if(Se(o,u))return E.some({boxes:Co(o,n,e),start:n,finish:e});if(Ae(o,u)){var i=_t(e,"td,th",r(o)),c=i.length>0?i[i.length-1]:e;return E.some({boxes:To(o,n,o,e,u),start:n,finish:c})}if(Ae(u,o)){i=_t(n,"td,th",r(u));var a=i.length>0?i[i.length-1]:n;return E.some({boxes:To(u,n,o,e,u),start:n,finish:a})}return nu(n,e).shared.bind((function(i){return Xt(i,"table",t).bind((function(t){var i=_t(e,"td,th",r(t)),c=i.length>0?i[i.length-1]:e,a=_t(n,"td,th",r(t)),l=a.length>0?a[a.length-1]:n;return E.some({boxes:To(t,n,o,e,u),start:l,finish:c})}))}))}))}))},ru=function(n,e){var t=Wt(n,e);return t.length>0?E.some(t):E.none()},ou=function(n,e){return K(n,(function(n){return we(n,e)}))},uu=function(n,e,t){return $t(n,e).bind((function(e){return $t(n,t).bind((function(n){return Zo(eu,[e,n]).map((function(t){return{first:e,last:n,table:t}}))}))}))},iu=function(n,e){return Kt(n,"table").bind((function(t){return $t(t,e).bind((function(e){return tu(e,n).bind((function(n){return n.boxes.map((function(e){return{boxes:e,start:n.start,finish:n.finish}}))}))}))}))},cu=function(n,e,t,r,o){return ou(n,o).bind((function(n){return yo(n,e,t).bind((function(n){return iu(n,r)}))}))},au=function(n,e){return ru(n,e)},lu=function(n,e,t){return uu(n,e,t).bind((function(e){var t=function(e){return Se(n,e)},r="thead,tfoot,tbody,table",o=Kt(e.first,r,t),u=Kt(e.last,r,t);return o.bind((function(n){return u.bind((function(t){return Se(n,t)?So(e.table,e.first,e.last):E.none()}))}))}))},fu=function(n){if(!i(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var e=[],t={};return F(n,(function(r,o){var u=De(r);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=r[c];if(void 0!==t[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!i(a))throw new Error("case arguments must be an array");e.push(c),t[c]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var u=t.length;if(u!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+u);var i=function(n){var r=De(n);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));var o=G(e,(function(n){return B(r,n)}));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return n[c].apply(null,t)};return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+e.length);var u=e[o];return u.apply(null,t)},match:i,log:function(n){console.log(n,{constructors:e,constructor:c,params:t})}}}})),t},su={generate:fu},du=su.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),mu=function(n,e,t,r){return n.fold(e,t,r)},gu=du.none,pu=du.multiple,vu=du.single,hu=function(n,e,t){var r=function(){return au(n(),t).fold((function(){return e().fold(gu,vu)}),(function(n){return pu(n)}))};return{get:r}},bu=tinymce.util.Tools.resolve("tinymce.PluginManager"),wu=function(n,e){return be.fromDom(n.dom.cloneNode(e))},yu=function(n){return wu(n,!1)},Cu=function(n){return wu(n,!0)},Tu=function(n,e){var t=be.fromTag(e),r=tr(n);return Jt(t,r),t},Su=function(n,e){var t=Tu(n,e),r=yt(Cu(n));return Io(t,r),t},xu=function(n,e){var t=Tu(n,e);Ro(n,t);var r=yt(n);return Io(t,r),Po(n),t},Ru=function(n,e){var t=function(e,t){if(!m(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);var r=e.dom;lr(r)&&(r.style[n]=t+"px")},r=function(t){var r=e(t);if(r<=0||null===r){var o=gr(t,n);return parseFloat(o)||0}return r},o=r,u=function(n,e){return U(e,(function(e,t){var r=gr(n,t),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o}),0)},i=function(n,e,t){var r=u(n,t),o=e>r?e-r:0;return o};return{set:t,get:r,getOuter:o,aggregate:u,max:i}},Au=function(){var n=ue().browser;return n.isIE()||n.isEdge()},Ou=function(n,e){return En(n).getOr(e)},Du=function(n,e,t){return Ou(gr(n,e),t)},Eu=function(n){return gr(n,"box-sizing")},ku=function(n,e,t,r){var o=Du(n,"padding-"+t,0),u=Du(n,"padding-"+r,0),i=Du(n,"border-"+t+"-width",0),c=Du(n,"border-"+r+"-width",0);return e-o-u-i-c},Mu=function(n,e){var t=n.dom,r=t.getBoundingClientRect().height||t.offsetHeight;return"border-box"===e?r:ku(n,r,"top","bottom")},Nu=function(n,e){var t=n.dom,r=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?r:ku(n,r,"left","right")},Iu=function(n){return Au()?Mu(n,Eu(n)):Du(n,"height",n.dom.offsetHeight)},Bu=function(n){return Au()?Nu(n,Eu(n)):Du(n,"width",n.dom.offsetWidth)},Pu=function(n){return Nu(n,"content-box")},Lu=Ru("width",(function(n){return n.dom.offsetWidth})),_u=function(n){return Lu.get(n)},Fu=function(n){return Lu.getOuter(n)},Wu=Pu,ju=Bu,zu=function(n,e){void 0===e&&(e=x);var t=n.grid,r=L(t.columns,b),o=L(t.rows,b);return _(r,(function(t){var r=function(){return X(o,(function(e){return lo.getAt(n,e,t).filter((function(n){return n.column===t})).toArray()}))},u=function(n){return 1===n.colspan&&e(n.element)},i=function(){return lo.getAt(n,0,t)};return Hu(r,u,i)}))},Hu=function(n,e,t){var r=n(),o=K(r,e),u=o.orThunk((function(){return E.from(r[0]).orThunk(t)}));return u.map((function(n){return n.element}))},Uu=function(n){var e=n.grid,t=L(e.rows,b),r=L(e.columns,b);return _(t,(function(e){var t=function(){return X(r,(function(t){return lo.getAt(n,e,t).filter((function(n){return n.row===e})).fold(h([]),(function(n){return[n]}))}))},o=function(n){return 1===n.rowspan},u=function(){return lo.getAt(n,e,0)};return Hu(t,o,u)}))},Vu=function(n,e){if(e<0||e>=n.length-1)return E.none();var t=n[e].fold((function(){var t=Y(n.slice(0,e));return rn(t,(function(n,e){return n.map((function(n){return{value:n,delta:e+1}}))}))}),(function(n){return E.some({value:n,delta:0})})),r=n[e+1].fold((function(){var t=n.slice(e+1);return rn(t,(function(n,e){return n.map((function(n){return{value:n,delta:e+1}}))}))}),(function(n){return E.some({value:n,delta:1})}));return t.bind((function(n){return r.map((function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t}))}))},Ku=function(n,e){return function(t){return"rtl"===qu(t)?e:n}},qu=function(n){return"rtl"===gr(n,"direction")?"rtl":"ltr"},$u=Ru("height",(function(n){var e=n.dom;return Mt(n)?e.getBoundingClientRect().height:e.offsetHeight})),Xu=function(n){return $u.get(n)},Gu=function(n){return $u.getOuter(n)},Yu=Iu,Ju=function(n,e){var t=function(t,r){return Ju(n+t,e+r)};return{left:n,top:e,translate:t}},Qu=Ju,Zu=function(n){var e=n.getBoundingClientRect();return Qu(e.left,e.top)},ni=function(n,e){return void 0!==n?n:void 0!==e?e:0},ei=function(n){var e=n.dom.ownerDocument,t=e.body,r=e.defaultView,o=e.documentElement;if(t===n.dom)return Qu(t.offsetLeft,t.offsetTop);var u=ni(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),i=ni(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),c=ni(o.clientTop,t.clientTop),a=ni(o.clientLeft,t.clientLeft);return ti(n).translate(i-a,u-c)},ti=function(n){var e=n.dom,t=e.ownerDocument,r=t.body;return r===e?Qu(r.offsetLeft,r.offsetTop):Mt(n)?Zu(e):Qu(0,0)},ri=function(n,e){return{row:n,y:e}},oi=function(n,e){return{col:n,x:e}},ui=function(n){var e=ei(n);return e.left+Fu(n)},ii=function(n){return ei(n).left},ci=function(n,e){return oi(n,ii(e))},ai=function(n,e){return oi(n,ui(e))},li=function(n){return ei(n).top},fi=function(n,e){return ri(n,li(e))},si=function(n,e){return ri(n,li(e)+Gu(e))},di=function(n,e,t){if(0===t.length)return[];var r=_(t.slice(1),(function(e,t){return e.map((function(e){return n(t,e)}))})),o=t[t.length-1].map((function(n){return e(t.length-1,n)}));return r.concat([o])},mi=function(n){return-n},gi={delta:b,positions:function(n){return di(fi,si,n)},edge:li},pi={delta:b,edge:ii,positions:function(n){return di(ci,ai,n)}},vi={delta:mi,edge:ui,positions:function(n){return di(ai,ci,n)}},hi=Ku(pi,vi),bi={delta:function(n,e){return hi(e).delta(n,e)},positions:function(n,e){return hi(e).positions(n,e)},edge:function(n){return hi(n).edge(n)}},wi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},yi=function(){var n="[0-9]+",e="[+-]?"+n,t="[eE]"+e,r="\\.",o=function(n){return"(?:"+n+")?"},u=["Infinity",n+r+o(n)+o(t),r+n+o(t),n+o(t)].join("|"),i="[+-]?(?:"+u+")";return new RegExp("^("+i+")(.*)$")}(),Ci=function(n,e){return P(e,(function(e){return P(wi[e],(function(e){return n===e}))}))},Ti=function(n,e){var t=E.from(yi.exec(n));return t.bind((function(n){var t=Number(n[1]),r=n[2];return Ci(r,e)?E.some({value:t,unit:r}):E.none()}))},Si=/(\d+(\.\d+)?)%/,xi=/(\d+(\.\d+)?)px|em/,Ri=st("col"),Ai=function(n,e,t){var r=vt(n).getOrThunk((function(){return It(dt(n))}));return e(n)/t(r)*100},Oi=function(n,e){dr(n,"width",e+"px")},Di=function(n,e){dr(n,"width",e+"%")},Ei=function(n,e){dr(n,"height",e+"px")},ki=function(n){return Yu(n)+"px"},Mi=function(n,e,t,r){var o=Nr(n).map((function(n){var r=t(n);return Math.floor(e/100*r)})).getOr(e);return r(n,o),o},Ni=function(n,e,t,r){var o=parseFloat(n);return xn(n,"%")&&"table"!==rt(e)?Mi(e,o,t,r):o},Ii=function(n){var e=ki(n);return e?Ni(e,n,Xu,Ei):Xu(n)},Bi=function(n,e,t){var r=t(n),o=yr(n,e);return r/o},Pi=function(n,e){return vr(n,e).orThunk((function(){return nr(n,e).map((function(n){return n+"px"}))}))},Li=function(n){return Pi(n,"width")},_i=function(n){return Pi(n,"height")},Fi=function(n){return Ai(n,_u,Wu)},Wi=function(n){return Ri(n)?_u(n):ju(n)},ji=function(n){return Bi(n,"rowspan",Ii)},zi=function(n){var e=Li(n);return e.bind((function(n){return Ti(n,["fixed","relative","empty"])}))},Hi=function(n,e,t){dr(n,"width",e+t)},Ui=function(n){return _u(n)+"px"},Vi=function(n){return Ai(n,_u,Wu)+"%"},Ki=function(n){return Li(n).exists((function(n){return Si.test(n)}))},qi=function(n){return Li(n).exists((function(n){return xi.test(n)}))},$i=function(n){return Li(n).isNone()},Xi=h(Si),Gi=st("col"),Yi=function(n){return Li(n).getOrThunk((function(){return Wi(n)+"px"}))},Ji=function(n){return _i(n).getOrThunk((function(){return ji(n)+"px"}))},Qi=function(n){return _(lo.justColumns(n),(function(n){return E.from(n.element)}))},Zi=function(n){var e=ue().browser,t=e.isChrome()||e.isFirefox();return!Gi(n)||t},nc=function(n,e,t,r,o,u){return n.filter(r).fold((function(){return u(Vu(t,e))}),(function(n){return o(n)}))},ec=function(n,e,t,r){var o=zu(n),u=lo.hasColumns(n)?Qi(n):o,i=[E.some(bi.edge(e))].concat(_(bi.positions(o,e),(function(n){return n.map((function(n){return n.x}))}))),c=C(Cr);return _(u,(function(n,e){return nc(n,e,i,c,(function(n){if(Zi(n))return t(n);var u=ir(o[e],b);return nc(u,e,i,c,(function(n){return r(E.some(_u(n)))}),r)}),r)}))},tc=function(n){return n.map((function(n){return n+"px"})).getOr("")},rc=function(n,e){return ec(n,e,Yi,tc)},oc=function(n,e,t){return ec(n,e,Fi,(function(n){return n.fold((function(){return t.minCellWidth()}),(function(n){return n/t.pixelWidth()*100}))}))},uc=function(n,e,t){return ec(n,e,Wi,(function(n){return n.getOrThunk(t.minCellWidth)}))},ic=function(n,e,t,r,o){var u=Uu(n),i=[E.some(t.edge(e))].concat(_(t.positions(u,e),(function(n){return n.map((function(n){return n.y}))})));return _(u,(function(n,e){return nc(n,e,i,C(Tr),r,o)}))},cc=function(n,e,t){return ic(n,e,t,ji,(function(n){return n.getOrThunk(Rr)}))},ac=function(n,e,t){return ic(n,e,t,Ji,tc)},lc=function(n,e){return function(){return Mt(n)?e(n):parseFloat(vr(n,"width").getOr("0"))}},fc=function(n){var e=lc(n,_u),t=h(0),r=function(e,t){return uc(e,n,t)};return{width:e,pixelWidth:e,getWidths:r,getCellDelta:t,singleColumnWidth:h([0]),minCellWidth:t,setElementWidth:g,adjustTableWidth:g,isRelative:!0,label:"none"}},sc=function(n){var e=lc(n,(function(n){return parseFloat(Vi(n))})),t=lc(n,_u),r=function(n){return n/t()*100},o=function(n,e){return[100-n]},u=function(){return xr()/t()*100},i=function(t){var r=e(),o=t/100*r,u=r+o;Di(n,u)},c=function(e,t){return oc(e,n,t)};return{width:e,pixelWidth:t,getWidths:c,getCellDelta:r,singleColumnWidth:o,minCellWidth:u,setElementWidth:Di,adjustTableWidth:i,isRelative:!0,label:"percent"}},dc=function(n){var e=lc(n,_u),t=b,r=function(n,e){var t=Math.max(xr(),n+e);return[t-n]},o=function(t){var r=e()+t;Oi(n,r)},u=function(e,t){return uc(e,n,t)};return{width:e,pixelWidth:e,getWidths:u,getCellDelta:t,singleColumnWidth:r,minCellWidth:xr,setElementWidth:Oi,adjustTableWidth:o,isRelative:!1,label:"pixel"}},mc=function(n,e){var t=Xi().exec(e);return null!==t?sc(n):dc(n)},gc=function(n){var e=Li(n);return e.fold((function(){return fc(n)}),(function(e){return mc(n,e)}))},pc={getTableSize:gc,pixelSize:dc,percentageSize:sc,noneSize:fc},vc=function(n,e,t,r,o,u){return{minRow:n,minCol:e,maxRow:t,maxCol:r,allCells:o,selectedCells:u}},hc=function(n,e){var t=n.grid.columns,r=n.grid.rows,o=r,u=t,i=0,c=0,a=[],l=[];return ke(n.access,(function(n){if(a.push(n),e(n)){l.push(n);var t=n.row,r=t+n.rowspan-1,f=n.column,s=f+n.colspan-1;t<o?o=t:r>i&&(i=r),f<u?u=f:s>c&&(c=s)}})),vc(o,u,i,c,a,l)},bc=function(n,e,t){var r=n[t].element,o=be.fromTag("td");Do(o,be.fromTag("br"));var u=e?Do:Oo;u(r,o)},wc=function(n,e,t,r){for(var o=e.grid.columns,u=e.grid.rows,i=0;i<u;i++)for(var c=!1,a=0;a<o;a++)if(!(i<t.minRow||i>t.maxRow||a<t.minCol||a>t.maxCol)){var l=lo.getAt(e,i,a).filter(r).isNone();l?bc(n,c,i):c=!0}},yc=function(n,e,t,r){ke(t.columns,(function(n){(n.column<e.minCol||n.column>e.maxCol)&&Po(n.element)}));var o=z(Ar(n,"tr"),(function(n){return 0===n.dom.childElementCount}));F(o,Po),e.minCol!==e.maxCol&&e.minRow!==e.maxRow||F(Ar(n,"th,td"),(function(n){er(n,"rowspan"),er(n,"colspan")})),er(n,Gr),er(n,"data-snooker-col-series");var u=pc.getTableSize(n);u.adjustTableWidth(r)},Cc=function(n,e,t,r){if(0===r.minCol&&e.grid.columns===r.maxCol+1)return 0;var o=uc(e,n,t),u=U(o,(function(n,e){return n+e}),0),i=U(o.slice(r.minCol,r.maxCol+1),(function(n,e){return n+e}),0),c=i/u*t.pixelWidth(),a=c-t.pixelWidth();return t.getCellDelta(a)},Tc=function(n,e){var t=function(n){return we(n.element,e)},r=Cu(n),o=_r(r),u=pc.getTableSize(n),i=lo.generate(o),c=hc(i,t),a="th:not("+e+"),td:not("+e+")",l=Or(r,"th,td",(function(n){return we(n,a)}));F(l,Po),wc(o,i,c,t);var f=lo.fromTable(n),s=Cc(n,f,u,c);return yc(r,c,i,s),r},Sc=" ",xc=function(n){return"img"===rt(n)?1:jo(n).fold((function(){return yt(n).length}),(function(n){return n.length}))},Rc=function(n){return jo(n).filter((function(n){return 0!==n.trim().length||n.indexOf(Sc)>-1})).isSome()},Ac=["img","br"],Oc=function(n){var e=Rc(n);return e||B(Ac,rt(n))},Dc=function(n){return Vt(n,Oc)},Ec=function(n){return kc(n,Oc)},kc=function(n,e){var t=function(n){for(var r=yt(n),o=r.length-1;o>=0;o--){var u=r[o];if(e(u))return E.some(u);var i=t(u);if(i.isSome())return i}return E.none()};return t(n)},Mc={scope:["row","col"]},Nc=function(n){return function(){var e=be.fromTag("td",n.dom);return Do(e,be.fromTag("br",n.dom)),e}},Ic=function(n){return function(){return be.fromTag("col",n.dom)}},Bc=function(n){return function(){return be.fromTag("colgroup",n.dom)}},Pc=function(n){return function(){return be.fromTag("tr",n.dom)}},Lc=function(n,e,t){var r=Su(n,e);return ke(t,(function(n,e){null===n?er(r,e):Yt(r,e,n)})),r},_c=function(n){return n},Fc=function(n,e,t){var r=Dc(n);return r.map((function(r){var o=t.join(","),u=_t(r,o,(function(e){return Se(e,n)}));return H(u,(function(n,e){var t=yu(e);return er(t,"contenteditable"),Do(n,t),t}),e)})).getOr(e)},Wc=function(n,e){ke(Mc,(function(t,r){return nr(n,r).filter((function(n){return B(t,n)})).each((function(n){return Yt(e,r,n)}))}))},jc=function(n,e,t){var r=function(n,e){br(n.element,e),hr(e,"height"),1!==n.colspan&&hr(e,"width")},o=function(o){var u=be.fromTag(rt(o.element),e.dom),i=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=i.length>0?Fc(o.element,u,i):u;return Do(c,be.fromTag("br")),r(o,u),Wc(o.element,u),n(o.element,u),u},u=function(t){var o=be.fromTag(rt(t.element),e.dom);return r(t,o),n(t.element,o),o};return{col:u,colgroup:Bc(e),row:Pc(e),cell:o,replace:Lc,colGap:Ic(e),gap:Nc(e)}},zc=function(n){return{col:Ic(n),colgroup:Bc(n),row:Pc(n),cell:Nc(n),replace:_c,colGap:Ic(n),gap:Nc(n)}},Hc=function(n,e){var t=e||document,r=t.createElement("div");return r.innerHTML=n,yt(be.fromDom(r))},Uc=function(n){return _(n,be.fromDom)},Vc=function(n){return n.nodeName.toLowerCase()},Kc=function(n){return be.fromDom(n.getBody())},qc=function(n){return n.getBoundingClientRect().width},$c=function(n){return n.getBoundingClientRect().height},Xc=function(n){return function(e){return Se(e,Kc(n))}},Gc=function(n){return n?n.replace(/px$/,""):""},Yc=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Jc=function(n){er(n,"data-mce-style");var e=function(n){return er(n,"data-mce-style")};F(kr(n),e),F(Mr(n),e),F(Ir(n),e)},Qc=function(n,e){var t=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return E.from(t).filter(On)},Zc=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},na=function(n){return/^(\d+(\.\d+)?)px$/.test(n)},ea=function(n){return be.fromDom(n.selection.getStart())},ta=function(n){return be.fromDom(n.selection.getEnd())},ra=function(n){return mu(n.get(),h([]),b,Q)},oa=function(n){var e=function(n,e){return nr(n,e).exists((function(n){return parseInt(n,10)>1}))},t=function(n){return e(n,"rowspan")||e(n,"colspan")},r=ra(n);return r.length>0&&G(r,t)?E.some(r):E.none()},ua=function(n,e,t){return mu(e.get(),E.none,(function(e){return e.length<=1?E.none():lu(n,t.firstSelectedSelector,t.lastSelectedSelector).map((function(n){return{bounds:n,cells:e}}))}),E.none)},ia="data-mce-selected",ca="td["+ia+"],th["+ia+"]",aa="["+ia+"]",la="data-mce-first-selected",fa="td["+la+"],th["+la+"]",sa="data-mce-last-selected",da="td["+sa+"],th["+sa+"]",ma=aa,ga={selected:ia,selectedSelector:ca,firstSelected:la,firstSelectedSelector:fa,lastSelected:sa,lastSelectedSelector:da},pa=function(n){return{element:n,mergable:E.none(),unmergable:E.none(),selection:[n]}},va=function(n,e,t){return{element:t,mergable:ua(e,n,ga),unmergable:oa(n),selection:ra(n)}},ha=function(n,e,t){return{element:n,clipboard:e,generators:t}},ba=function(n,e,t,r){return{selection:ra(n),clipboard:t,generators:r}},wa=function(n){return Nr(n).bind((function(n){return au(n,ga.firstSelectedSelector)})).fold(h(n),(function(n){return n[0]}))},ya=function(n){return function(e,t){var r=rt(e),o="col"===r||"colgroup"===r?wa(e):e;return Xt(o,n,t)}},Ca=ya("th,td,caption"),Ta=ya("th,td"),Sa=function(n){return ra(n)},xa=function(n,e){var t=Ta(n),r=t.bind((function(n){return Nr(n)})).map((function(n){return Ir(n)}));return ur(t,r,(function(n,t){return z(t,(function(t){return P(Uc(t.dom.cells),(function(t){return"1"===Zt(t,e)||Se(t,n)}))}))})).getOr([])},Ra=function(n){return Nr(n[0]).map((function(n){var e=Tc(n,ma);return Jc(e),[e]}))},Aa=function(n,e){return _(e,(function(e){return n.selection.serializer.serialize(e.dom,{})})).join("")},Oa=function(n){return _(n,(function(n){return n.dom.innerText})).join("")},Da=function(n,e,t){n.on("BeforeGetContent",(function(t){var r=function(e){t.preventDefault(),Ra(e).each((function(e){t.content="text"===t.format?Oa(e):Aa(n,e)}))};!0===t.selection&&mu(e.get(),g,r,g)})),n.on("BeforeSetContent",(function(r){if(!0===r.selection&&!0===r.paste){var o=Sa(e);en(o).each((function(e){Nr(e).each((function(o){var u=z(Hc(r.content),(function(n){return"meta"!==rt(n)})),i=st("table");if(1===u.length&&i(u[0])){r.preventDefault();var c=be.fromDom(n.getDoc()),a=zc(c),l=ha(e,u[0],a);t.pasteCells(o,l).each((function(){n.focus()}))}}))}))}}))},Ea=su.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),ka=on({},Ea),Ma=function(n,e){return 0===n.length?ka.none():1===n.length?ka.only(0):0===e?ka.left(0,1):e===n.length-1?ka.right(e-1,e):e>0&&e<n.length-1?ka.middle(e-1,e,e+1):ka.none()},Na=function(n,e,t,r,o){var u=n.slice(0),i=Ma(n,e),c=h(_(u,h(0))),a=function(n){return r.singleColumnWidth(u[n],t)},l=function(n,e){return o.calcLeftEdgeDeltas(u,n,e,t,r.minCellWidth(),r.isRelative)},f=function(n,e,i){return o.calcMiddleDeltas(u,n,e,i,t,r.minCellWidth(),r.isRelative)},s=function(n,e){return o.calcRightEdgeDeltas(u,n,e,t,r.minCellWidth(),r.isRelative)};return i.fold(c,a,l,f,s)},Ia=function(n,e,t){for(var r=0,o=n;o<e;o++)r+=void 0!==t[o]?t[o]:0;return r},Ba=function(n,e){var t=lo.justCells(n);return _(t,(function(n){var t=Ia(n.column,n.column+n.colspan,e);return{element:n.element,width:t,colspan:n.colspan}}))},Pa=function(n,e){var t=lo.justColumns(n);return _(t,(function(n,t){return{element:n.element,width:e[t],colspan:n.colspan}}))},La=function(n,e){var t=lo.justCells(n);return _(t,(function(n){var t=Ia(n.row,n.row+n.rowspan,e);return{element:n.element,height:t,rowspan:n.rowspan}}))},_a=function(n,e){return _(n.all,(function(n,t){return{element:n.element,height:e[t]}}))},Fa=function(n){return H(n,(function(n,e){return n+e}),0)},Wa=function(n,e){return lo.hasColumns(n)?Pa(n,e):Ba(n,e)},ja=function(n,e,t){var r=Wa(n,e);F(r,(function(n){t.setElementWidth(n.element,n.width)}))},za=function(n,e,t,r,o){var u=lo.fromTable(n),i=o.getCellDelta(e),c=o.getWidths(u,o),a=t===u.grid.columns-1,l=r.clampTableDelta(c,t,i,o.minCellWidth(),a),f=Na(c,t,l,o,r),s=_(f,(function(n,e){return n+c[e]}));ja(u,s,o),r.resizeTable(o.adjustTableWidth,l,a)},Ha=function(n,e,t,r){var o=lo.fromTable(n),u=cc(o,n,r),i=_(u,(function(n,r){return t===r?Math.max(e+n,Rr()):n})),c=La(o,i),a=_a(o,i);F(a,(function(n){Ei(n.element,n.height)})),F(c,(function(n){Ei(n.element,n.height)}));var l=Fa(i);Ei(n,l)},Ua=function(n,e,t,r,o){var u=lo.generate(e),i=r.getWidths(u,r),c=r.pixelWidth(),a=o.calcRedestributedWidths(i,c,t.pixelDelta,r.isRelative),l=a.newSizes,f=a.delta;ja(u,l,r),r.adjustTableWidth(f)},Va=function(n,e,t,r){var o=lo.generate(e),u=r.getWidths(o,r);ja(o,u,r)},Ka=function(n){return _(n,h(0))},qa=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},$a=function(n){return function(e,t,r,o){if(n(r)){var u=Math.max(o,e[t]-Math.abs(r)),i=Math.abs(u-e[t]);return r>=0?i:-i}return r}},Xa=$a((function(n){return n<0})),Ga=$a(x),Ya=function(){var n=function(n,e,t,r,o){var u=Xa(n,e,r,o);return qa(n,e,t+1,[u,0],Ka)},e=function(n,e,t,r){var o=(100+t)/100,u=Math.max(r,(n[e]+t)/o);return _(n,(function(n,t){var r=t===e?u:n/o;return r-n}))},t=function(t,r,o,u,i,c){return c?e(t,r,u,i):n(t,r,o,u,i)},r=function(n,e,r,o,u,i,c){return t(n,r,o,u,i,c)},o=function(n,e){return n(e)},u=function(n,t,r,o,u,i){if(i)return e(n,r,o,u);var c=Xa(n,r,o,u);return Ka(n.slice(0,r)).concat([c])},i=function(n,e,t,r){if(r){var o=e+t,u=o/e,i=_(n,(function(n){return n/u}));return{delta:100*u-100,newSizes:i}}return{delta:t,newSizes:n}};return{resizeTable:o,clampTableDelta:Xa,calcLeftEdgeDeltas:t,calcMiddleDeltas:r,calcRightEdgeDeltas:u,calcRedestributedWidths:i}},Ja=function(){var n=function(n,e,t,r,o){var u=r>=0?t:e,i=Ga(n,u,r,o);return qa(n,e,t+1,[i,-i],Ka)},e=function(e,t,r,o,u,i){return n(e,r,o,u,i)},t=function(n,e,t){t&&n(e)},r=function(n,e,t,r,o,u){if(u)return Ka(n);var i=r/n.length;return _(n,h(i))},o=function(n,e,t,r,o){if(o){if(t>=0)return t;var u=U(n,(function(n,e){return n+e-r}),0);return Math.max(-u,t)}return Xa(n,e,t,r)},u=function(n,e,t,r){return{delta:0,newSizes:n}};return{resizeTable:t,clampTableDelta:o,calcLeftEdgeDeltas:n,calcMiddleDeltas:e,calcRightEdgeDeltas:r,calcRedestributedWidths:u}},Qa=function(n,e){var t=E.from(n.dom.documentElement).map(be.fromDom).getOr(n);return{parent:h(t),view:h(n),origin:h(Qu(0,0)),isResizable:e}},Za=function(n,e,t){var r=function(){return ei(e)};return{parent:h(e),view:h(n),origin:r,isResizable:t}},nl=function(n,e,t){return{parent:h(e),view:h(n),origin:h(Qu(0,0)),isResizable:t}},el={only:Qa,detached:Za,body:nl},tl=su.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rl=function(n,e,t){var r=t.substring(0,t.length-n.length),o=parseFloat(r);return r===o.toString()?e(o):tl.invalid(t)},ol=function(n){return xn(n,"%")?rl("%",tl.percent,n):xn(n,"px")?rl("px",tl.pixels,n):tl.invalid(n)},ul=on(on({},tl),{from:ol}),il=function(n,e){return _(n,(function(n){var t=ul.from(n);return t.fold((function(){return n}),(function(n){var t=n/e*100;return t+"%"}),(function(n){return n+"%"}))}))},cl=function(n,e,t){var r=t/e;return _(n,(function(n){var e=ul.from(n);return e.fold((function(){return n}),(function(n){return n*r+"px"}),(function(n){return n/100*t+"px"}))}))},al=function(n,e){var t=n.fold((function(){return h("")}),(function(n){var t=n/e;return h(t+"px")}),(function(){var n=100/e;return h(n+"%")}));return L(e,t)},ll=function(n,e,t){return n.fold((function(){return e}),(function(n){return cl(e,t,n)}),(function(n){return il(e,t)}))},fl=function(n,e,t){var r=ul.from(t),o=G(n,(function(n){return"0px"===n}))?al(r,n.length):ll(r,n,e);return gl(o)},sl=function(n,e){return 0===n.length?e:H(n,(function(n,e){return ul.from(e).fold(h(0),b,b)+n}),0)},dl=function(n,e){var t=Math.floor(n);return{value:t+e,remainder:n-t}},ml=function(n,e){return ul.from(n).fold(h(n),(function(n){return n+e+"px"}),(function(n){return n+e+"%"}))},gl=function(n){if(0===n.length)return n;var e=H(n,(function(n,e){var t=ul.from(e).fold((function(){return{value:e,remainder:0}}),(function(n){return dl(n,"px")}),(function(n){return{value:n+"%",remainder:0}}));return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}}),{output:[],remainder:0}),t=e.output;return t.slice(0,t.length-1).concat([ml(t[t.length-1],Math.round(e.remainder))])},pl=ul.from,vl=function(n,e,t){F(e,(function(e){var r=n.slice(e.column,e.colspan+e.column),o=sl(r,xr());dr(e.element,"width",o+t)}))},hl=function(n,e,t){F(e,(function(e,r){var o=sl([n[r]],xr());dr(e.element,"width",o+t)}))},bl=function(n,e,t,r){F(t,(function(e){var t=n.slice(e.row,e.rowspan+e.row),o=sl(t,Rr());dr(e.element,"height",o+r)})),F(e,(function(e,t){dr(e.element,"height",n[t])}))},wl=function(n){return pl(n).fold(h("px"),h("px"),h("%"))},yl=function(n,e,t){var r=lo.fromTable(n),o=r.all,u=lo.justCells(r),i=lo.justColumns(r);e.each((function(e){var t=wl(e),o=_u(n),c=rc(r,n),a=fl(c,o,e);lo.hasColumns(r)?hl(a,i,t):vl(a,u,t),dr(n,"width",e)})),t.each((function(e){var t=wl(e),i=Xu(n),c=ac(r,n,gi),a=fl(c,i,e);bl(a,o,u,t),dr(n,"height",e)}))},Cl=Ki,Tl=qi,Sl=$i,xl=function(n){var e=lo.fromTable(n);return e.grid},Rl=function(n){var e=[],t=function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");e.push(n)},r=function(n){e=z(e,(function(e){return e!==n}))},o=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={};F(n,(function(n,e){o[n]=t[e]})),F(e,(function(n){n(o)}))};return{bind:t,unbind:r,trigger:o}},Al=function(n){var e=Me(n,(function(n){return{bind:n.bind,unbind:n.unbind}})),t=Me(n,(function(n){return n.trigger}));return{registry:e,trigger:t}},Ol=function(n,e){var t=null,r=function(){c(t)||(clearTimeout(t),t=null)},o=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r(),t=setTimeout((function(){t=null,n.apply(null,o)}),e)};return{cancel:r,throttle:o}},Dl=function(n){return n.slice(0).sort()},El=function(n,e){throw new Error("All required keys ("+Dl(n).join(", ")+") were not specified. Specified keys were: "+Dl(e).join(", ")+".")},kl=function(n){throw new Error("Unsupported keys for object: "+Dl(n).join(", "))},Ml=function(n,e){if(!i(e))throw new Error("The "+n+" fields must be an array. Was: "+e+".");F(e,(function(e){if(!o(e))throw new Error("The value "+e+" in the "+n+" fields was not a string.")}))},Nl=function(n,e){throw new Error("All values need to be of type: "+e+". Keys ("+Dl(n).join(", ")+") were not.")},Il=function(n){var e=Dl(n),t=K(e,(function(n,t){return t<e.length-1&&n===e[t+1]}));t.each((function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))},Bl=function(n,e){return Pl(n,e,{validate:d,label:"function"})},Pl=function(n,e,t){if(0===e.length)throw new Error("You must specify at least one required field.");return Ml("required",e),Il(e),function(r){var o=De(r),u=G(e,(function(n){return B(o,n)}));u||El(e,o),n(e,o);var i=z(e,(function(n){return!t.validate(r[n],n)}));return i.length>0&&Nl(i,t.label),r}},Ll=function(n,e){var t=z(e,(function(e){return!B(n,e)}));t.length>0&&kl(t)},_l=function(n){return Bl(Ll,n)},Fl=_l(["compare","extract","mutate","sink"]),Wl=_l(["element","start","stop","destroy"]),jl=_l(["forceDrop","drop","move","delayDrop"]),zl=function(){var n=E.none(),e=function(){n=E.none()},t=function(e,t){var r=n.map((function(n){return e.compare(n,t)}));return n=E.some(t),r},r=function(n,e){var r=e.extract(n);r.each((function(n){var r=t(e,n);r.each((function(n){o.trigger.move(n)}))}))},o=Al({move:Rl(["info"])});return{onEvent:r,reset:e,events:o.registry}},Hl=function(){var n=Al({move:Rl(["info"])});return{onEvent:g,reset:g,events:n.registry}},Ul=function(){var n=Hl(),e=zl(),t=n,r=function(){t.reset(),t=e},o=function(){t.reset(),t=n},u=function(n,e){t.onEvent(n,e)},i=function(){return t===e};return{on:r,off:o,isOn:i,onEvent:u,events:e.events}},Vl=function(n,e,t){var r=!1,o=Al({start:Rl([]),stop:Rl([])}),u=Ul(),i=function(){m.stop(),u.isOn()&&(u.off(),o.trigger.stop())},c=Ol(i,200),a=function(n){m.start(n),u.on(),o.trigger.start()},l=function(n){c.cancel(),u.onEvent(n,e)};u.events.move.bind((function(t){e.mutate(n,t.info)}));var f=function(){r=!0},s=function(){r=!1},d=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r&&n.apply(null,e)}},m=e.sink(jl({forceDrop:i,drop:d(i),move:d(l),delayDrop:d(c.throttle)}),t),g=function(){m.destroy()};return{element:m.element,go:a,on:f,off:s,destroy:g,events:o.registry}},Kl=function(n,e,t,r,o,u,i){return{target:n,x:e,y:t,stop:r,prevent:o,kill:u,raw:i}},ql=function(n){var e=be.fromDom(Et(n).getOr(n.target)),t=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=p(r,t);return Kl(e,n.clientX,n.clientY,t,r,o,n)},$l=function(n,e){return function(t){n(t)&&e(ql(t))}},Xl=function(n,e,t,r,o){var u=$l(t,r);return n.dom.addEventListener(e,u,o),{unbind:y(Yl,n,e,u,o)}},Gl=function(n,e,t,r){return Xl(n,e,t,r,!1)},Yl=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},Jl=x,Ql=function(n,e,t){return Gl(n,e,Jl,t)},Zl=ql,nf=function(n,e){var t=Zt(n,e);return void 0===t||""===t?[]:t.split(" ")},ef=function(n,e,t){var r=nf(n,e),o=r.concat([t]);return Yt(n,e,o.join(" ")),!0},tf=function(n,e,t){var r=z(nf(n,e),(function(n){return n!==t}));return r.length>0?Yt(n,e,r.join(" ")):er(n,e),!1},rf=function(n){return void 0!==n.dom.classList},of=function(n){return nf(n,"class")},uf=function(n,e){return ef(n,"class",e)},cf=function(n,e){return tf(n,"class",e)},af=function(n,e){rf(n)?n.dom.classList.add(e):uf(n,e)},lf=function(n){var e=rf(n)?n.dom.classList:of(n);0===e.length&&er(n,"class")},ff=function(n,e){if(rf(n)){var t=n.dom.classList;t.remove(e)}else cf(n,e);lf(n)},sf=function(n,e){return rf(n)&&n.dom.classList.contains(e)},df=function(n){var e=n.replace(/\./g,"-"),t=function(n){return e+"-"+n};return{resolve:t}},mf=df("ephox-dragster"),gf=mf.resolve,pf=function(n){var e=on({layerClass:gf("blocker")},n),t=be.fromTag("div");Yt(t,"role","presentation"),mr(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),af(t,gf("blocker")),af(t,e.layerClass);var r=h(t),o=function(){Po(t)};return{element:r,destroy:o}},vf=function(n,e){return Qu(e.left-n.left,e.top-n.top)},hf=function(n){return E.some(Qu(n.x,n.y))},bf=function(n,e){n.mutate(e.left,e.top)},wf=function(n,e){var t=pf(e),r=Ql(t.element(),"mousedown",n.forceDrop),o=Ql(t.element(),"mouseup",n.drop),u=Ql(t.element(),"mousemove",n.move),i=Ql(t.element(),"mouseout",n.delayDrop),c=function(){t.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()},a=function(n){Do(n,t.element())},l=function(){Po(t.element())};return Wl({element:t.element,start:a,stop:l,destroy:c})},yf=Fl({compare:vf,extract:hf,sink:wf,mutate:bf}),Cf=function(n,e){void 0===e&&(e={});var t=void 0!==e.mode?e.mode:yf;return Vl(n,t,e)},Tf=function(n){return Xt(n,"[contenteditable]")},Sf=function(n,e){return void 0===e&&(e=!1),!ue().browser.isIE()&&Mt(n)?n.dom.isContentEditable:Tf(n).fold(h(e),(function(n){return"true"===xf(n)}))},xf=function(n){return n.dom.contentEditable},Rf=df("ephox-snooker"),Af=Rf.resolve,Of=function(){var n=Al({drag:Rl(["xDelta","yDelta"])}),e=function(e,t){n.trigger.drag(e,t)};return{mutate:e,events:n.registry}},Df=function(){var n=Al({drag:Rl(["xDelta","yDelta","target"])}),e=E.none(),t=Of();t.events.drag.bind((function(t){e.each((function(e){n.trigger.drag(t.xDelta,t.yDelta,e)}))}));var r=function(n){e=E.some(n)},o=function(){return e};return{assign:r,get:o,mutate:t.mutate,events:n.registry}},Ef=function(n,e,t,r,o){var u=be.fromTag("div");return mr(u,{position:"absolute",left:e-r/2+"px",top:t+"px",height:o+"px",width:r+"px"}),Jt(u,{"data-column":n,role:"presentation"}),u},kf=function(n,e,t,r,o){var u=be.fromTag("div");return mr(u,{position:"absolute",left:e+"px",top:t-o/2+"px",height:o+"px",width:r+"px"}),Jt(u,{"data-row":n,role:"presentation"}),u},Mf=Af("resizer-bar"),Nf=Af("resizer-rows"),If=Af("resizer-cols"),Bf=7,Pf=function(n,e){return X(n.all,(function(n,t){return e(n.element)?[t]:[]}))},Lf=function(n,e){var t=[];return L(n.grid.columns,(function(r){var o=lo.getColumnAt(n,r).map((function(n){return n.element}));o.forall(e)&&t.push(r)})),z(t,(function(t){var r=lo.filterItems(n,(function(n){return n.column===t}));return G(r,(function(n){return e(n.element)}))}))},_f=function(n){var e=Wt(n.parent(),"."+Mf);F(e,Po)},Ff=function(n,e,t){var r=n.origin();F(e,(function(e){e.each((function(e){var o=t(r,e);af(o,Mf),Do(n.parent(),o)}))}))},Wf=function(n,e,t,r){Ff(n,e,(function(n,e){var o=Ef(e.col,e.x-n.left,t.top-n.top,Bf,r);return af(o,If),o}))},jf=function(n,e,t,r){Ff(n,e,(function(n,e){var o=kf(e.row,t.left-n.left,e.y-n.top,r,Bf);return af(o,Nf),o}))},zf=function(n,e,t,r,o){var u=ei(t),i=e.isResizable,c=r.length>0?gi.positions(r,t):[],a=c.length>0?Pf(n,i):[],l=z(c,(function(n,e){return P(a,(function(n){return e===n}))}));jf(e,l,u,Fu(t));var f=o.length>0?bi.positions(o,t):[],s=f.length>0?Lf(n,i):[],d=z(f,(function(n,e){return P(s,(function(n){return e===n}))}));Wf(e,d,u,Gu(t))},Hf=function(n,e){if(_f(n),n.isResizable(e)){var t=lo.fromTable(e),r=Uu(t),o=zu(t);zf(t,n,e,r,o)}},Uf=function(n,e){var t=Wt(n.parent(),"."+Mf);F(t,e)},Vf=function(n){Uf(n,(function(n){dr(n,"display","none")}))},Kf=function(n){Uf(n,(function(n){dr(n,"display","block")}))},qf=function(n){return sf(n,Nf)},$f=function(n){return sf(n,If)},Xf=Af("resizer-bar-dragging"),Gf=function(n){var e=Df(),t=Cf(e,{}),r=E.none(),o=function(n,e){return E.from(Zt(n,e))};e.events.drag.bind((function(n){o(n.target,"data-row").each((function(e){var t=Sr(n.target,"top");dr(n.target,"top",t+n.yDelta+"px")})),o(n.target,"data-column").each((function(e){var t=Sr(n.target,"left");dr(n.target,"left",t+n.xDelta+"px")}))}));var u=function(n,e){var t=Sr(n,e),r=wr(n,"data-initial-"+e,0);return t-r};t.events.stop.bind((function(){e.get().each((function(e){r.each((function(t){o(e,"data-row").each((function(n){var r=u(e,"top");er(e,"data-initial-top"),m.trigger.adjustHeight(t,r,parseInt(n,10))})),o(e,"data-column").each((function(n){var r=u(e,"left");er(e,"data-initial-left"),m.trigger.adjustWidth(t,r,parseInt(n,10))})),Hf(n,t)}))}))}));var i=function(r,o){m.trigger.startAdjust(),e.assign(r),Yt(r,"data-initial-"+o,Sr(r,o)),af(r,Xf),dr(r,"opacity","0.2"),t.go(n.parent())},c=Ql(n.parent(),"mousedown",(function(n){qf(n.target)&&i(n.target,"top"),$f(n.target)&&i(n.target,"left")})),a=function(e){return Se(e,n.view())},l=function(n){return Xt(n,"table",a).filter(Sf)},f=Ql(n.view(),"mouseover",(function(e){l(e.target).fold((function(){Mt(e.target)&&_f(n)}),(function(e){r=E.some(e),Hf(n,e)}))})),s=function(){c.unbind(),f.unbind(),t.destroy(),_f(n)},d=function(e){Hf(n,e)},m=Al({adjustHeight:Rl(["table","delta","row"]),adjustWidth:Rl(["table","delta","column"]),startAdjust:Rl([])});return{destroy:s,refresh:d,on:t.on,off:t.off,hideBars:y(Vf,n),showBars:y(Kf,n),events:m.registry}},Yf=function(n,e,t){var r=gi,o=bi,u=Gf(n),i=Al({beforeResize:Rl(["table","type"]),afterResize:Rl(["table","type"]),startDrag:Rl([])});return u.events.adjustHeight.bind((function(n){var e=n.table;i.trigger.beforeResize(e,"row");var t=r.delta(n.delta,e);Ha(e,t,n.row,r),i.trigger.afterResize(e,"row")})),u.events.startAdjust.bind((function(n){i.trigger.startDrag()})),u.events.adjustWidth.bind((function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=t(r);za(r,u,n.column,e,c),i.trigger.afterResize(r,"col")})),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},Jf={create:Yf},Qf=function(n,e){return n.fire("newrow",{node:e})},Zf=function(n,e){return n.fire("newcell",{node:e})},ns=function(n,e,t,r,o){n.fire("ObjectResizeStart",{target:e,width:t,height:r,origin:o})},es=function(n,e,t,r,o){n.fire("ObjectResized",{target:e,width:t,height:r,origin:o})},ts=function(n,e,t,r,o){n.fire("TableSelectionChange",{cells:e,start:t,finish:r,otherCells:o})},rs=function(n){n.fire("TableSelectionClear")},os=function(n,e,t){n.fire("TableModified",on(on({},t),{table:e}))},us={structure:!1,style:!0},is={structure:!0,style:!1},cs={structure:!0,style:!0},as="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ls={"border-collapse":"collapse",width:"100%"},fs=L(5,(function(n){var e=n+1+"px";return{title:e,value:e}})),ss=_(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(function(n){return{title:n,value:n.toLowerCase()}})),ds=function(n){var e;if(Is(n)){var t=n.dom,r=null!==(e=t.getParent(n.selection.getStart(),t.isBlock))&&void 0!==e?e:n.getBody(),o=Wu(be.fromDom(r));return on(on({},ls),{width:o+"px"})}return Bs(n)?Pe(ls,(function(n,e){return"width"!==e})):ls},ms={border:"1"},gs="preservetable",ps=function(n){return n.getParam("table_sizing_mode","auto")},vs=function(n){return n.getParam("table_responsive_width")},hs=function(n){return n.getParam("table_border_widths",fs,"array")},bs=function(n){return n.getParam("table_border_styles",ss,"array")},ws=function(n){return n.getParam("table_default_attributes",ms,"object")},ys=function(n){return n.getParam("table_default_styles",ds(n),"object")},Cs=function(n){return n.getParam("table_resize_bars",!0,"boolean")},Ts=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ss=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},xs=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Rs=function(n){return n.getParam("table_advtab",!0,"boolean")},As=function(n){return n.getParam("table_appearance_options",!0,"boolean")},Os=function(n){return n.getParam("table_grid",!0,"boolean")},Ds=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Es=function(n){return n.getParam("table_cell_class_list",[],"array")},ks=function(n){return n.getParam("table_row_class_list",[],"array")},Ms=function(n){return n.getParam("table_class_list",[],"array")},Ns=function(n){return"relative"===ps(n)||!0===vs(n)},Is=function(n){return"fixed"===ps(n)||!1===vs(n)},Bs=function(n){return"responsive"===ps(n)},Ps=function(n){return n.getParam("table_toolbar",as)},Ls=function(n){return n.getParam("table_use_colgroups",!1,"boolean")},_s=function(n){var e="section",t=n.getParam("table_header_type",e,"string"),r=["section","cells","sectionCells","auto"];return B(r,t)?t:e},Fs=function(n){var e=["preservetable","resizetable"],t=n.getParam("table_column_resizing",gs,"string");return K(e,(function(n){return n===t})).getOr(gs)},Ws=function(n){return"preservetable"===Fs(n)},js=function(n){return"resizetable"===Fs(n)},zs=function(n){var e=n.getParam("table_clone_elements");return o(e)?E.some(e.split(/[ ,]/)):Array.isArray(e)?E.some(e):E.none()},Hs=function(n){var e=n.getParam("object_resizing",!0);return o(e)?"table"===e:e},Us=function(n){return n.getParam("table_background_color_map",[],"array")},Vs=function(n){return n.getParam("table_border_color_map",[],"array")},Ks=function(n,e){return Ns(n)?pc.percentageSize(e):Is(n)?pc.pixelSize(e):pc.getTableSize(e)},qs=function(n){er(n,"width")},$s=function(n){var e=Vi(n);yl(n,E.some(e),E.none()),qs(n)},Xs=function(n){var e=Ui(n);yl(n,E.some(e),E.none()),qs(n)},Gs=function(n){hr(n,"width");var e=Mr(n),t=e.length>0?e:kr(n);F(t,(function(n){hr(n,"width"),qs(n)})),qs(n)},Ys=$s,Js=Xs,Qs=Gs,Zs=function(n){var e=lo.fromTable(n);lo.hasColumns(e)||F(kr(n),(function(n){var e=gr(n,"width");dr(n,"width",e),er(n,"width")}))},nd=function(){var n=be.fromTag("div");return mr(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Do(Nt(),n),n},ed=function(n,e){return n.inline?el.body(Kc(n),nd(),e):el.only(be.fromDom(n.getDoc()),e)},td=function(n,e){n.inline&&Po(e.parent())},rd="bar-",od=function(n){return"false"!==Zt(n,"data-mce-resize")},ud=function(n){var e,t,r=E.none(),o=E.none(),u=E.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},a=function(){return u.getOr(el.only(be.fromDom(n.getBody()),od))},l=function(e){return Ks(n,e)},f=function(){return Ws(n)?Ja():Ya()},s=function(n){return xl(n).columns},d=function(r,o,u){var i=xn(o,"e");if(""===t&&Ys(r),u!==e&&""!==t){dr(r,"width",t);var c=f(),a=l(r),d=Ws(n)||i?s(r)-1:0;za(r,u-e,d,c,a)}else if(Zc(t)){var m=parseFloat(t.replace("%","")),g=u*m/e;dr(r,"width",g+"%")}na(t)&&Zs(r)},m=function(){o.each((function(n){n.destroy()})),u.each((function(e){td(n,e)}))};return n.on("init",(function(){var e=ed(n,od);if(u=E.some(e),Hs(n)&&Cs(n)){var t=f(),i=Jf.create(e,t,l);i.on(),i.events.startDrag.bind((function(e){r=E.some(n.selection.getRng())})),i.events.beforeResize.bind((function(e){var t=e.table.dom;ns(n,t,qc(t),$c(t),rd+e.type)})),i.events.afterResize.bind((function(e){var t=e.table,o=t.dom;Jc(t),r.each((function(e){n.selection.setRng(e),n.focus()})),es(n,o,qc(o),$c(o),rd+e.type),n.undoManager.add()})),o=E.some(i)}})),n.on("ObjectResizeStart",(function(r){var o=r.target;if(i(o)){var u=be.fromDom(o);F(n.dom.select(".mce-clonedresizable"),(function(e){n.dom.addClass(e,"mce-"+Fs(n)+"-columns")})),!Tl(u)&&Is(n)?Js(u):!Cl(u)&&Ns(n)&&Ys(u),Sl(u)&&Sn(r.origin,rd)&&Ys(u),e=r.width,t=Bs(n)?"":Qc(n,o).getOr("")}})),n.on("ObjectResized",(function(e){var t=e.target;if(i(t)){var r=be.fromDom(t),o=e.origin;Sn(o,"corner-")&&d(r,o,e.width),Jc(r),os(n,r.dom,us)}})),n.on("SwitchMode",(function(){c().each((function(e){n.mode.isReadOnly()?e.hideBars():e.showBars()}))})),{lazyResize:c,lazyWire:a,destroy:m}},id=function(n,e){return{element:n,offset:e}},cd=function(n,e,t){return n.property().isText(e)&&0===n.property().getText(e).trim().length||n.property().isComment(e)?t(e).bind((function(e){return cd(n,e,t).orThunk((function(){return E.some(e)}))})):E.none()},ad=function(n,e){if(n.property().isText(e))return n.property().getText(e).length;var t=n.property().children(e);return t.length},ld=function(n,e){var t=cd(n,e,n.query().prevSibling).getOr(e);if(n.property().isText(t))return id(t,ad(n,t));var r=n.property().children(t);return r.length>0?ld(n,r[r.length-1]):id(t,ad(n,t))},fd=ld,sd=Uo(),dd=function(n){return fd(sd,n)},md=function(n,e){var t=yr(n,"colspan");if(1===t){var r=zi(n);r.each((function(t){var r=t.value/2;Hi(n,r,t.unit),Hi(e,r,t.unit)}))}},gd=st("th"),pd=function(n){return G(n,(function(n){return gd(n.element)}))},vd=function(n,e){return n&&e?"sectionCells":n?"section":"cells"},hd=function(n){var e="thead"===n.section,t=rr(bd(n.cells),"th");return e||t?{type:"header",subType:vd(e,t)}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},bd=function(n){var e=z(n,(function(n){return gd(n.element)}));return 0===e.length?E.some("td"):e.length===n.length?E.some("th"):E.none()},wd=function(n){var e=_(n,(function(n){return hd(n).type})),t=B(e,"header"),r=B(e,"footer");if(t||r){var o=B(e,"body");return!t||o||r?t||o||!r?E.none():E.some("footer"):E.some("header")}return E.some("body")},yd=function(n){return rn(n.all,(function(n){var e=hd(n);return"header"===e.type?E.from(e.subType):E.none()}))},Cd=function(n,e,t){return Qe(t(n.element,e),!0,n.isLocked)},Td=function(n,e){return n.section!==e?Ze(n.element,n.cells,e,n.isNew):n},Sd=function(){return{transformRow:Td,transformCell:function(n,e,t){var r=t(n.element,e),o="td"!==rt(r)?xu(r,"td"):r;return Qe(o,n.isNew,n.isLocked)}}},xd=function(){return{transformRow:Td,transformCell:Cd}},Rd=function(){return{transformRow:function(n,e){var t="thead"===e?"tbody":e;return Td(n,t)},transformCell:Cd}},Ad=function(){return{transformRow:b,transformCell:Cd}},Od=function(n,e){var t=lo.fromTable(n),r=yd(t).getOr(e);switch(r){case"section":return Sd();case"sectionCells":return xd();case"cells":return Rd()}},Dd={getTableSectionType:Od,section:Sd,sectionCells:xd,cells:Rd,fallback:Ad},Ed=function(n,e,t,r){t===r?er(n,e):Yt(n,e,t)},kd=function(n,e,t){tn(Ft(n,e)).fold((function(){return Oo(n,t)}),(function(n){return Ao(n,t)}))},Md=function(n,e){var t=qt(n,e).getOrThunk((function(){var t=be.fromTag(e,dt(n).dom);return"thead"===e?kd(n,"caption,colgroup",t):"colgroup"===e?kd(n,"caption",t):Do(n,t),t}));return Bo(t),t},Nd=function(n,e){var t=[],r=[],o=function(n){return _(n,(function(n){n.isNew&&t.push(n.element);var e=n.element;return Bo(e),F(n.cells,(function(n){n.isNew&&r.push(n.element),Ed(n.element,"colspan",n.colspan,1),Ed(n.element,"rowspan",n.rowspan,1),Do(e,n.element)})),e}))},u=function(n){return X(n,(function(n){return _(n.cells,(function(n){return Ed(n.element,"span",n.colspan,1),n.element}))}))},i=function(e,t){var r=Md(n,t),i="colgroup"===t?u:o,c=i(e);Io(r,c)},c=function(e){qt(n,e).each(Po)},a=function(n,e){n.length>0?i(n,e):c(e)},l=[],f=[],s=[],d=[];return F(e,(function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":f.push(n);break;case"tfoot":s.push(n);break;case"colgroup":d.push(n);break}})),a(d,"colgroup"),a(l,"thead"),a(f,"tbody"),a(s,"tfoot"),{newRows:t,newCells:r}},Id=function(n){return _(n,(function(n){var e=yu(n.element);return F(n.cells,(function(n){var t=Cu(n.element);Ed(t,"colspan",n.colspan,1),Ed(t,"rowspan",n.rowspan,1),Do(e,t)})),e}))},Bd=function(n,e){return _(n,(function(n){return Vr(n,e)}))},Pd=function(n,e){return n[e]},Ld=function(n,e){if(0===n.length)return 0;var t=n[0],r=q(n,(function(n){return!e(t.element,n.element)}));return r.getOr(n.length)},_d=function(n,e,t,r){var o=Pd(n,e),u="colgroup"===o.section,i=Ld(o.cells.slice(t),r),c=u?1:Ld(Bd(n.slice(e),t),r);return{colspan:i,rowspan:c}},Fd=function(n,e){var t=_(n,(function(n){return _(n.cells,S)})),r=function(n,e,r,o){for(var u=n;u<n+r;u++)for(var i=e;i<e+o;i++)t[u][i]=!0};return _(n,(function(o,u){var i=X(o.cells,(function(o,i){if(!1===t[u][i]){var c=_d(n,u,i,e);return r(u,i,c.rowspan,c.colspan),[Xe(o.element,c.rowspan,c.colspan,o.isNew)]}return[]}));return Je(o.element,i,o.section,o.isNew)}))},Wd=function(n,e,t){var r=[];F(n.colgroups,(function(o){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getColumnAt(n,i).map((function(n){return Qe(n.element,t,!1)})).getOrThunk((function(){return Qe(e.colGap(),!0,!1)}));u.push(c)}r.push(Ze(o.element,u,"colgroup",t))}));for(var o=0;o<n.grid.rows;o++){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getAt(n,o,i).map((function(n){return Qe(n.element,t,n.isLocked)})).getOrThunk((function(){return Qe(e.gap(),!0,!1)}));u.push(c)}var a=n.all[o],l=Ze(a.element,u,a.section,t);r.push(l)}return r},jd=function(n,e){return Wd(n,e,!1)},zd=function(n){return Fd(n,Se)},Hd=function(n,e){return rn(n.all,(function(n){return K(n.cells,(function(n){return Se(e,n.element)}))}))},Ud=function(n,e,t){var r=_(e.selection,(function(e){return Er(e).bind((function(e){return Hd(n,e)})).filter(t)})),o=or(r);return ar(o.length>0,o)},Vd=function(n,e,t,r,o){return function(u,i,c,a,l){var f=lo.fromTable(i),s=E.from(null===l||void 0===l?void 0:l.section).getOrThunk(Dd.fallback),d=e(f,c).map((function(e){var t=jd(f,a),r=n(t,e,Se,o(a),s),u=Jr(r.grid),i=zd(r.grid);return{info:e,grid:i,cursor:r.cursor,lockedColumns:u}}));return d.bind((function(n){var e=Nd(i,n.grid),o=E.from(null===l||void 0===l?void 0:l.sizing).getOrThunk((function(){return pc.getTableSize(i)})),c=E.from(null===l||void 0===l?void 0:l.resize).getOrThunk(Ja);return t(i,n.grid,n.info,{sizing:o,resize:c,section:s}),r(i),Hf(u,i),er(i,Gr),n.lockedColumns.length>0&&Yt(i,Gr,n.lockedColumns.join(",")),E.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})}))}},Kd=function(n,e){return Er(e.element).bind((function(t){return Hd(n,t).map((function(n){var t=on(on({},n),{generators:e.generators,clipboard:e.clipboard});return t}))}))},qd=function(n,e){return Ud(n,e,x).map((function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}}))},$d=function(n,e){return e.mergable},Xd=function(n,e){return e.unmergable},Gd=function(n,e){return Ud(n,e,x)},Yd=function(n,e){return Ud(n,e,(function(n){return!n.isLocked}))},Jd=function(n,e){return Hd(n,e).exists((function(n){return!n.isLocked}))},Qd=function(n,e){return G(e,(function(e){return Jd(n,e)}))},Zd=function(n,e){return $d(n,e).filter((function(e){return Qd(n,e.cells)}))},nm=function(n,e){return Xd(n,e).filter((function(e){return Qd(n,e)}))},em=function(n,e,t,r){var o=$r(n).rows;if(0===o.length)return n;for(var u=e.startRow;u<=e.finishRow;u++)for(var i=e.startCol;i<=e.finishCol;i++){var c=o[u],a=Vr(c,i).isLocked;zr(c,i,Qe(r(),!1,a))}return n},tm=function(n,e,t,r){for(var o=$r(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<qr(o[0]);c++){var a=o[i],l=Vr(a,c),f=l.element,s=t(f,e);!0===s&&!1===u?zr(a,c,Qe(r(),!0,l.isLocked)):!0===s&&(u=!1)}return n},rm=function(n,e){return U(n,(function(n,t){return P(n,(function(n){return e(n.element,t.element)}))?n:n.concat([t])}),[])},om=function(n,e,t,r){return e>0&&e<n[0].cells.length&&F(n,(function(n){var o=n.cells[e-1],u=n.cells[e],i=t(u.element,o.element);i&&zr(n,e,Qe(r(),!0,u.isLocked))})),n},um=function(n,e,t,r){var o=$r(n).rows;if(e>0&&e<o.length){var u=o[e-1].cells,i=rm(u,t);F(i,(function(n){for(var u=E.none(),i=e;i<o.length;i++)for(var c=function(e){var c=o[i],a=Vr(c,e),l=t(a.element,n.element);l&&(u.isNone()&&(u=E.some(r())),u.each((function(n){zr(c,e,Qe(n,!0,a.isLocked))})))},a=0;a<qr(o[0]);a++)c(a)}))}return n},im=function(n){var e=function(e){return im(n)},t=function(e){return im(n)},r=function(e){return im(e(n))},o=function(e){return im(n)},u=function(e){e(n)},i=function(e){return e(n)},c=function(e,t){return t(n)},a=function(e){return e(n)},l=function(e){return e(n)},f=function(){return E.some(n)};return{isValue:x,isError:S,getOr:h(n),getOrThunk:h(n),getOrDie:h(n),or:e,orThunk:t,fold:c,map:r,mapError:o,each:u,bind:i,exists:a,forall:l,toOptional:f}},cm=function(n){var e=function(n){return n()},t=function(){return T(String(n))()},r=b,o=function(n){return n()},u=function(e){return cm(n)},i=function(e){return cm(e(n))},c=function(e){return cm(n)},a=function(e,t){return e(n)};return{isValue:S,isError:x,getOr:b,getOrThunk:e,getOrDie:t,or:r,orThunk:o,fold:a,map:u,mapError:i,each:g,bind:c,exists:S,forall:x,toOptional:E.none}},am=function(n,e){return n.fold((function(){return cm(e)}),im)},lm={value:im,error:cm,fromOption:am},fm=function(n,e,t){if(n.row>=e.length||n.column>qr(e[0]))return lm.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=e.slice(n.row),o=r[0].cells.slice(n.column),u=qr(t[0]),i=t.length;return lm.value({rowDelta:r.length-i,colDelta:o.length-u})},sm=function(n,e){var t=qr(n[0]),r=qr(e[0]);return{rowDelta:0,colDelta:t-r}},dm=function(n,e){var t=n.length,r=e.length;return{rowDelta:t-r,colDelta:0}},mm=function(n,e,t,r){var o="colgroup"===e.section?t.col:t.cell;return L(n,(function(n){return Qe(o(),!0,r(n))}))},gm=function(n,e,t,r){var o=n[n.length-1];return n.concat(L(e,(function(){var n="colgroup"===o.section?t.colgroup:t.row,e=Xr(o,n,b),u=mm(e.cells.length,e,t,(function(n){return je(r,n.toString())}));return Hr(e,u)})))},pm=function(n,e,t,r){return _(n,(function(n){var o=mm(e,n,t,S);return Wr(n,r,o)}))},vm=function(n,e,t){return _(n,(function(n){return U(t,(function(t,r){var o=mm(1,n,e,x)[0];return jr(t,r,o)}),n)}))},hm=function(n,e,t){var r=e.colDelta<0?pm:b,o=e.rowDelta<0?gm:b,u=Jr(n),i=qr(n[0]),c=P(u,(function(n){return n===i-1})),a=r(n,Math.abs(e.colDelta),t,c?i-1:i),l=Jr(a);return o(a,Math.abs(e.rowDelta),t,J(l,x))},bm=function(n,e,t,r){var o=Vr(n[e],t),u=y(r,o.element),i=n[e];return n.length>1&&qr(i)>1&&(t>0&&u(Kr(i,t-1))||t<i.cells.length-1&&u(Kr(i,t+1))||e>0&&u(Kr(n[e-1],t))||e<n.length-1&&u(Kr(n[e+1],t)))},wm=function(n,e,t,r,o,u){for(var i=n.row,c=n.column,a=t.length,l=qr(t[0]),f=i+a,s=c+l+u.length,d=J(u,x),m=i;m<f;m++)for(var g=0,p=c;p<s;p++)if(d[p])g++;else{bm(e,m,p,o)&&tm(e,Kr(e[m],p),o,r.cell);var v=p-c-g,h=Vr(t[m-i],v),b=h.element,w=r.replace(b);zr(e[m],p,Qe(w,!0,h.isLocked))}return e},ym=function(n,e,t){var r=qr(e[0]),o=$r(e).cols.length+n.row,u=L(r-n.column,(function(e){return e+n.column})),i=K(u,(function(n){return G(t,(function(e){return e!==n}))})).getOr(r-1);return{row:o,column:i}},Cm=function(n,e,t){return z(t,(function(t){return t>=n.column&&t<=qr(e[0])+n.column}))},Tm=function(n,e,t,r,o){var u=Jr(e),i=ym(n,e,u),c=$r(t).rows,a=Cm(i,c,u),l=fm(i,e,c);return l.map((function(n){var t=on(on({},n),{colDelta:n.colDelta-a.length}),u=hm(e,t,r),l=Jr(u),f=Cm(i,c,l);return wm(i,u,c,r,o,f)}))},Sm=function(n,e,t,r,o){om(e,n,o,r.cell);var u=dm(t,e),i=hm(t,u,r),c=dm(e,i),a=hm(e,c,r);return _(a,(function(e,t){return Wr(e,n,i[t].cells)}))},xm=function(n,e,t,r,o){um(e,n,o,r.cell);var u=Jr(e),i=sm(e,t),c=on(on({},i),{colDelta:i.colDelta-u.length}),a=hm(e,c,r),l=$r(a),f=l.cols,s=l.rows,d=Jr(a),m=sm(t,e),g=on(on({},m),{colDelta:m.colDelta+d.length}),p=vm(t,r,d),v=hm(p,g,r);return f.concat(s.slice(0,n)).concat(v).concat(s.slice(n,s.length))},Rm=function(n,e,t,r){return Xr(n,(function(n){return r(n,t)}),e)},Am=function(n,e,t,r,o){var u=$r(n),i=u.rows,c=u.cols,a=i.slice(0,e),l=i.slice(e),f=Rm(i[t],(function(n,t){var u=e>0&&e<i.length&&r(Kr(i[e-1],t),Kr(i[e],t)),c=u?Vr(i[e],t):Qe(o(n.element,r),!0,n.isLocked);return c}),r,o);return c.concat(a).concat([f]).concat(l)},Om=function(n,e,t,r,o,u,i){if("colgroup"!==t&&r)return Vr(n,e);var c=Vr(n,o);return Qe(i(c.element,u),!0,!1)},Dm=function(n,e,t,r,o){return _(n,(function(n){var u=e>0&&e<qr(n)&&r(Kr(n,e-1),Kr(n,e)),i=Om(n,e,n.section,u,t,r,o);return jr(n,e,i)}))},Em=function(n,e){return X(n,(function(n){var t=n.cells,r=H(e,(function(n,e){return e>=0&&e<n.length?n.slice(0,e).concat(n.slice(e+1)):n}),t);return r.length>0?[Ze(n.element,r,n.section,n.isNew)]:[]}))},km=function(n,e,t){var r=$r(n),o=r.rows,u=r.cols;return u.concat(o.slice(0,e)).concat(o.slice(t+1))},Mm=function(n,e,t,r){return void 0!==Kr(n[e],t)&&e>0&&r(Kr(n[e-1],t),Kr(n[e],t))},Nm=function(n,e,t){return e>0&&t(Kr(n,e-1),Kr(n,e))},Im=function(n,e,t,r){return Mm(n,e,t,r)||Nm(n[e],t,r)},Bm=function(n,e){var t=G(e,b)&&pd(n.cells);return t?x:function(n,t,r){var o=rt(n.element);return!("th"===o&&e[r])}},Pm=function(n,e){var t=G(e,b)&&pd(n);return t?x:function(n,t,r){var o=rt(n.element);return!("th"===o&&e[t])}},Lm=function(n,e,t,r){var o=function(n){return"row"===n?Tr(e):Cr(e)},u=function(n){return o(n)?n+"group":n};if(n)return gd(e)?u(t):null;if(r&&gd(e)){var i="row"===t?"col":"row";return u(i)}return null},_m=function(n,e){return function(t,r,o){return E.some(Lm(n,t.element,"col",e[o]))}},Fm=function(n,e){return function(t,r){return E.some(Lm(n,t.element,"row",e[r]))}},Wm=function(n,e,t){return Qe(t(n.element,e),!0,n.isLocked)},jm=function(n,e,t,r,o,u,i){var c=function(n){return P(e,(function(e){return t(n.element,e.element)}))};return _(n,(function(n,e){return Ur(n,(function(n,a){if(c(n)){var l=i(n,e,a)?o(n,t,r):n;return u(l,e,a).each((function(n){Qt(l.element,{scope:E.from(n)})})),l}return n}))}))},zm=function(n,e,t){return X(n,(function(r,o){return Im(n,o,e,t)?[]:[Vr(r,e)]}))},Hm=function(n,e,t){var r=n[e];return X(r.cells,(function(r,o){return Im(n,e,o,t)?[]:[r]}))},Um=function(n,e,t,r,o){var u=$r(n).rows,i=X(e,(function(n){return zm(u,n,r)})),c=_(n,(function(n){return pd(n.cells)})),a=Pm(i,c),l=Fm(t,c);return jm(n,i,r,o,Wm,l,a)},Vm=function(n,e,t,r,o,u,i){var c=$r(n),a=c.cols,l=c.rows,f=l[e[0]],s=X(e,(function(n){return Hm(l,n,o)})),d=_(f.cells,(function(n,e){return pd(zm(l,e,o))})),m=un([],l,!0);F(e,(function(n){m[n]=i.transformRow(l[n],t)}));var g=a.concat(m),p=Bm(f,d),v=_m(r,d);return jm(g,s,o,u,i.transformCell,v,p)},Km=function(n,e,t,r){var o=$r(n).rows,u=_(e,(function(n){return Vr(o[n.row],n.column)}));return jm(n,u,t,r,Wm,E.none,x)},qm=function(n){var e=function(n,e){var t=P(n,(function(n){return n.column===e.column}));return t?n:n.concat([e])};return U(n,e,[]).sort((function(n,e){return n.column-e.column}))},$m=st("col"),Xm=st("colgroup"),Gm=function(n){return"tr"===rt(n)||Xm(n)},Ym=function(n){var e=wr(n,"colspan",1),t=wr(n,"rowspan",1);return{element:n,colspan:e,rowspan:t}},Jm=function(n,e){void 0===e&&(e=Ym);var t=function(e){return $m(e.element)?n.col(e):n.cell(e)},r=function(e){return Xm(e.element)?n.colgroup(e):n.row(e)},o=function(n){if(Gm(n))return r({element:n});var o=t(e(n));return u=E.some({item:n,replacement:o}),o},u=E.none(),i=function(n,e){return u.fold((function(){return o(n)}),(function(t){return e(n,t.item)?t.replacement:o(n)}))};return{getOrInit:i}},Qm=function(n){return function(e){var t=[],r=function(n,e){return K(t,(function(t){return e(t.item,n)}))},o=function(r){var o="td"===n?{scope:null}:{},u=e.replace(r,n,o);return t.push({item:r,sub:u}),u},u=function(n,e){return Gm(n)||$m(n)?n:r(n,e).fold((function(){return o(n)}),(function(t){return e(n,t.item)?t.sub:o(n)}))};return{replaceOrInit:u}}},Zm=function(n){return nr(n,"scope").map((function(n){return n.substr(0,3)}))},ng=function(n){var e=function(e){var t=Zm(e);return t.each((function(n){return Yt(e,"scope",n)})),function(){var r=n.cell({element:e,colspan:1,rowspan:1});return hr(r,"width"),hr(e,"width"),t.each((function(n){return Yt(r,"scope",n)})),r}},t=function(n){var e=function(){var e=or(_(n,Zm));if(0===e.length)return E.none();var t=e[0],r=["row","col"],o=P(e,(function(n){return n!==t&&B(r,n)}));return o?E.none():E.from(t)};return hr(n[0],"width"),e().fold((function(){return er(n[0],"scope")}),(function(e){return Yt(n[0],"scope",e+"group")})),h(n[0])};return{unmerge:e,merge:t}},eg={modification:Jm,transform:Qm,merging:ng},tg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rg=function(n,e){var t=n.property().name(e);return B(["ol","ul"],t)},og=function(n,e){var t=n.property().name(e);return B(tg,t)},ug=function(n,e){return B(["br","img","hr","input"],n.property().name(e))},ig=Uo(),cg=function(n){return og(ig,n)},ag=function(n){return rg(ig,n)},lg=function(n){return ug(ig,n)},fg=function(n){var e=function(n){return"br"===rt(n)},t=function(n){return G(n,(function(n){return e(n)||at(n)&&0===Wo(n).trim().length}))},r=function(n){return"li"===rt(n)||zt(n,ag).isSome()},o=function(n){return wt(n).map((function(n){return!!cg(n)||!!lg(n)&&"img"!==rt(n)})).getOr(!1)},u=function(n){return Ec(n).bind((function(t){var u=o(t);return pt(t).map((function(o){return!0===u||r(o)||e(t)||cg(o)&&!Se(n,o)?[]:[be.fromTag("br")]}))})).getOr([])},i=function(){var e=X(n,(function(n){var e=yt(n);return t(e)?[]:e.concat(u(n))}));return 0===e.length?[be.fromTag("br")]:e},c=i();Bo(n[0]),Io(n[0],c)},sg=function(n){return Sf(n,!0)},dg=function(n){var e=kr(n);0===e.length&&Po(n)},mg=function(n,e){return{grid:n,cursor:e}},gg=function(n){return rn(n,(function(n){return rn(n.cells,(function(n){var e=n.element;return ar(sg(e),e)}))}))},pg=function(n,e,t){var r,o,u=$r(n).rows;return E.from(null===(o=null===(r=u[e])||void 0===r?void 0:r.cells[t])||void 0===o?void 0:o.element).filter(sg).orThunk((function(){return gg(u)}))},vg=function(n,e,t){var r=pg(n,e,t);return mg(n,r)},hg=function(n){var e=function(n,e){var t=P(n,(function(n){return n.row===e.row}));return t?n:n.concat([e])};return U(n,e,[]).sort((function(n,e){return n.row-e.row}))},bg=function(n,e,t,r){var o=e[0].row,u=hg(e),i=H(u,(function(n,e){var u=Am(n.grid,o,e.row+n.delta,t,r.getOrInit);return{grid:u,delta:n.delta+1}}),{grid:n,delta:0}).grid;return vg(i,o,e[0].column)},wg=function(n,e,t,r){var o=hg(e),u=o[o.length-1],i=u.row+u.rowspan,c=H(o,(function(n,e){return Am(n,i,e.row,t,r.getOrInit)}),n);return vg(c,i,e[0].column)},yg=function(n,e,t,r){var o=e.details,u=qm(o),i=u[0].column,c=H(u,(function(n,e){var o=Dm(n.grid,i,e.column+n.delta,t,r.getOrInit);return{grid:o,delta:n.delta+1}}),{grid:n,delta:0}).grid;return vg(c,o[0].row,i)},Cg=function(n,e,t,r){var o=e.details,u=o[o.length-1],i=u.column+u.colspan,c=qm(o),a=H(c,(function(n,e){return Dm(n,i,e.column,t,r.getOrInit)}),n);return vg(a,o[0].row,i)},Tg=function(n,e,t,r){var o=qm(e),u=_(o,(function(n){return n.column})),i=Um(n,u,!0,t,r.replaceOrInit);return vg(i,e[0].row,e[0].column)},Sg=function(n,e,t,r){var o=Km(n,e,t,r.replaceOrInit);return vg(o,e[0].row,e[0].column)},xg=function(n,e,t,r){var o=qm(e),u=_(o,(function(n){return n.column})),i=Um(n,u,!1,t,r.replaceOrInit);return vg(i,e[0].row,e[0].column)},Rg=function(n,e,t,r){var o=Km(n,e,t,r.replaceOrInit);return vg(o,e[0].row,e[0].column)},Ag=function(n,e){return function(t,r,o,u,i){var c=hg(r),a=_(c,(function(n){return n.row})),l=Vm(t,a,n,e,o,u.replaceOrInit,i);return vg(l,r[0].row,r[0].column)}},Og=Ag("thead",!0),Dg=Ag("tbody",!1),Eg=Ag("tfoot",!1),kg=function(n,e,t,r){var o=qm(e.details),u=Em(n,_(o,(function(n){return n.column}))),i=u.length>0?u[0].cells.length-1:0;return vg(u,o[0].row,Math.min(o[0].column,i))},Mg=function(n,e,t,r){var o=hg(e),u=km(n,o[0].row,o[o.length-1].row),i=u.length>0?u.length-1:0;return vg(u,Math.min(e[0].row,i),e[0].column)},Ng=function(n,e,t,r){var o=e.cells;fg(o);var u=em(n,e.bounds,t,r.merge(o));return mg(u,E.from(o[0]))},Ig=function(n,e,t,r){var o=function(n,e){return tm(n,e,t,r.unmerge(e))},u=H(e,o,n);return mg(u,E.from(e[0]))},Bg=function(n,e,t,r){var o=function(n,e){var t=lo.fromTable(n);return Wd(t,e,!0)},u=o(e.clipboard,e.generators),i=qe(e.row,e.column),c=Tm(i,n,u,e.generators,t);return c.fold((function(){return mg(n,E.some(e.element))}),(function(n){return vg(n,e.row,e.column)}))},Pg=function(n,e,t){var r=Fr(n,t.section),o=lo.generate(r);return Wd(o,e,!0)},Lg=function(n,e,t,r){var o=$r(n).rows,u=e.cells[0].column,i=o[e.cells[0].row],c=Pg(e.clipboard,e.generators,i),a=Sm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},_g=function(n,e,t,r){var o=$r(n).rows,u=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,i=o[e.cells[0].row],c=Pg(e.clipboard,e.generators,i),a=Sm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},Fg=function(n,e,t,r){var o=$r(n).rows,u=e.cells[0].row,i=o[u],c=Pg(e.clipboard,e.generators,i),a=xm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},Wg=function(n,e,t,r){var o=$r(n).rows,u=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,i=o[e.cells[0].row],c=Pg(e.clipboard,e.generators,i),a=xm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},jg=function(n,e){var t=lo.fromTable(n),r=Gd(t,e);return r.bind((function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan,u=$(_(t.all,(function(n){return z(n.cells,(function(n){return n.column>=r&&n.column<o}))})));return bd(u)})).getOr("")},zg=function(n,e){var t=lo.fromTable(n),r=Gd(t,e);return r.bind(bd).getOr("")},Hg=function(n,e){var t=lo.fromTable(n),r=Gd(t,e);return r.bind((function(n){var e=n[n.length-1],r=n[0].row,o=e.row+e.rowspan,u=t.all.slice(r,o);return wd(u)})).getOr("")},Ug=function(n,e,t,r){return Va(n,e,t,r.sizing)},Vg=function(n,e,t,r){return Ua(n,e,t,r.sizing,r.resize)},Kg=function(n,e){return P(e,(function(n){return 0===n.column&&n.isLocked}))},qg=function(n,e){return P(e,(function(e){return e.column+e.colspan>=n.grid.columns&&e.isLocked}))},$g=function(n,e){var t=zu(n),r=qm(e);return U(r,(function(n,e){var r=t[e.column],o=r.map(Fu).getOr(0);return n+o}),0)},Xg=function(n){return function(e,t){return Gd(e,t).filter((function(t){var r=n?Kg:qg;return!r(e,t)})).map((function(n){return{details:n,pixelDelta:$g(e,n)}}))}},Gg=function(n,e){return Yd(n,e).map((function(e){return{details:e,pixelDelta:-$g(n,e)}}))},Yg=function(n){return function(e,t){return qd(e,t).filter((function(t){var r=n?Kg:qg;return!r(e,t.cells)}))}},Jg=eg.transform("th"),Qg=eg.transform("td"),Zg=Vd(bg,Gd,g,g,eg.modification),np=Vd(wg,Gd,g,g,eg.modification),ep=Vd(yg,Xg(!0),Vg,g,eg.modification),tp=Vd(Cg,Xg(!1),Vg,g,eg.modification),rp=Vd(kg,Gg,Vg,dg,eg.modification),op=Vd(Mg,Gd,g,dg,eg.modification),up=Vd(Tg,Yd,g,g,Jg),ip=Vd(xg,Yd,g,g,Qg),cp=Vd(Og,Yd,g,g,Jg),ap=Vd(Dg,Yd,g,g,Qg),lp=Vd(Eg,Yd,g,g,Qg),fp=Vd(Sg,Yd,g,g,Jg),sp=Vd(Rg,Yd,g,g,Qg),dp=Vd(Ng,Zd,Ug,g,eg.merging),mp=Vd(Ig,nm,Ug,g,eg.merging),gp=Vd(Bg,Kd,Ug,g,eg.modification),pp=Vd(Lg,Yg(!0),g,g,eg.modification),vp=Vd(_g,Yg(!1),g,g,eg.modification),hp=Vd(Fg,qd,g,g,eg.modification),bp=Vd(Wg,qd,g,g,eg.modification),wp=jg,yp=zg,Cp=Hg,Tp=function(n,e,t){var r=function(n){return"table"===rt(Kc(n))},o=function(e){return!1===r(n)||xl(e).rows>1},u=function(e){return!1===r(n)||xl(e).columns>1},i=zs(n),c=js(n)?g:md,a=function(e){switch(_s(n)){case"section":return Dd.section();case"sectionCells":return Dd.sectionCells();case"cells":return Dd.cells();default:return Dd.getTableSectionType(e,"section")}},l=function(t,r){return r.cursor.fold((function(){var r=kr(t);return en(r).filter(Mt).map((function(r){e.clear(t);var o=n.dom.createRng();return o.selectNode(r.dom),n.selection.setRng(o),Yt(r,"data-mce-selected","1"),o}))}),(function(r){var o=dd(r),u=n.dom.createRng();return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),n.selection.setRng(u),e.clear(t),E.some(u)}))},f=function(e,t,r,o,u){return function(c,f,s){void 0===s&&(s=!1),Jc(c);var d=o(),m=be.fromDom(n.getDoc()),g=jc(r,m,i),p={sizing:Ks(n,c),resize:js(n)?Ya():Ja(),section:a(c)};return t(c)?e(d,c,f,g,p).bind((function(e){F(e.newRows,(function(e){Qf(n,e.dom)})),F(e.newCells,(function(e){Zf(n,e.dom)}));var t=l(c,e);return Mt(c)&&(Jc(c),s||os(n,c.dom,u)),t.map((function(n){return{rng:n,effect:u}}))})):E.none()}},s=f(op,o,g,t,is),d=f(rp,u,g,t,is),m=f(Zg,x,g,t,is),p=f(np,x,g,t,is),v=f(ep,x,c,t,is),h=f(tp,x,c,t,is),b=f(dp,x,g,t,is),w=f(mp,x,g,t,is),y=f(pp,x,g,t,is),C=f(vp,x,g,t,is),T=f(hp,x,g,t,is),S=f(bp,x,g,t,is),R=f(gp,x,g,t,cs),A=f(fp,x,g,t,is),O=f(sp,x,g,t,is),D=f(up,x,g,t,is),k=f(ip,x,g,t,is),M=f(cp,x,g,t,is),N=f(ap,x,g,t,is),I=f(lp,x,g,t,is),B=yp,P=wp,L=Cp;return{deleteRow:s,deleteColumn:d,insertRowsBefore:m,insertRowsAfter:p,insertColumnsBefore:v,insertColumnsAfter:h,mergeCells:b,unmergeCells:w,pasteColsBefore:y,pasteColsAfter:C,pasteRowsBefore:T,pasteRowsAfter:S,pasteCells:R,makeCellsHeader:A,unmakeCellsHeader:O,makeColumnsHeader:D,unmakeColumnsHeader:k,makeRowsHeader:M,makeRowsBody:N,makeRowsFooter:I,getTableRowType:L,getTableCellType:B,getTableColType:P}},Sp={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},xp=function(){return be.fromTag("th")},Rp=function(){return be.fromTag("td")},Ap=function(){return be.fromTag("col")},Op=function(n,e,t,r){for(var o=be.fromTag("tr"),u=0;u<n;u++){var i=r<e||u<t?xp():Rp();u<t&&Yt(i,"scope","row"),r<e&&Yt(i,"scope","col"),Do(i,be.fromTag("br")),Do(o,i)}return o},Dp=function(n){var e=be.fromTag("colgroup");return L(n,(function(){return Do(e,Ap())})),e},Ep=function(n,e,t,r){return L(n,(function(n){return Op(e,t,r,n)}))},kp=function(n,e,t,r,o,u){void 0===u&&(u=Sp);var i=be.fromTag("table"),c="cells"!==o;mr(i,u.styles),Jt(i,u.attributes),u.colGroups&&Do(i,Dp(e));var a=Math.min(n,t);if(c&&t>0){var l=be.fromTag("thead");Do(i,l);var f="sectionCells"===o?a:0,s=Ep(t,e,f,r);Io(l,s)}var d=be.fromTag("tbody");Do(i,d);var m=c?n-a:n,g=c?0:t,p=Ep(m,e,g,r);return Io(d,p),i},Mp=function(n){return n.dom.innerHTML},Np=function(n){var e=be.fromTag("div"),t=be.fromDom(n.dom.cloneNode(!0));return Do(e,t),Mp(e)},Ip=function(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)},Bp=function(n,e){$t(e,"td,th").each(y(Ip,n))},Pp=function(n,e){F(Wt(e,"tr"),(function(e){Qf(n,e.dom),F(Wt(e,"th,td"),(function(e){Zf(n,e.dom)}))}))},Lp=function(n){return o(n)&&-1!==n.indexOf("%")},_p=function(n,e,t,r,o){var u=ys(n),i={styles:u,attributes:ws(n),colGroups:Ls(n)};return n.undoManager.ignore((function(){var u=kp(t,e,o,r,_s(n),i);Yt(u,"data-mce-id","__mce");var c=Np(u);n.insertContent(c),n.addVisual()})),$t(Kc(n),'table[data-mce-id="__mce"]').map((function(e){return Is(n)?Js(e):Bs(n)?Qs(e):(Ns(n)||Lp(u.width))&&Ys(e),Jc(e),er(e,"data-mce-id"),Pp(n,e),Bp(n,e),e.dom})).getOr(null)},Fp=function(n,e,t,r,o){void 0===r&&(r={});var u=function(n){return m(n)&&n>0};if(u(e)&&u(t)){var i=r.headerRows||0,c=r.headerColumns||0;return _p(n,t,e,c,i)}return console.error(o),null},Wp=function(n){return function(){return n().fold((function(){return[]}),(function(n){return _(n,(function(n){return n.dom}))}))}},jp=function(n){return function(e){var t=e.length>0?E.some(Uc(e)):E.none();n(t)}},zp=function(n){return function(e,t,r){void 0===r&&(r={});var o=Fp(n,t,e,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return n.undoManager.add(),o}},Hp=function(n,e,t,r){return{insertTable:zp(n),setClipboardRows:jp(e.setRows),getClipboardRows:Wp(e.getRows),setClipboardCols:jp(e.setColumns),getClipboardCols:Wp(e.getColumns),resizeHandler:t,selectionTargets:r}},Up=function(n,e,t){var r=wr(n,e,1);1===t||r<=1?er(n,e):Yt(n,e,Math.min(t,r))},Vp=function(n,e,t){if(lo.hasColumns(n)){var r=z(lo.justColumns(n),(function(n){return n.column>=e&&n.column<t})),o=_(r,(function(n){var r=Cu(n.element);return Up(r,"span",t-e),r})),u=be.fromTag("colgroup");return Io(u,o),[u]}return[]},Kp=function(n,e,t){return _(n.all,(function(n){var r=z(n.cells,(function(n){return n.column>=e&&n.column<t})),o=_(r,(function(n){var r=Cu(n.element);return Up(r,"colspan",t-e),r})),u=be.fromTag("tr");return Io(u,o),u}))},qp=function(n,e){var t=lo.fromTable(n),r=Yd(t,e);return r.map((function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan,u=Vp(t,r,o),i=Kp(t,r,o);return un(un([],u,!0),i,!0)}))},$p=function(n,e,t){var r=lo.fromTable(n),o=Gd(r,e);return o.bind((function(n){var e=Wd(r,t,!1),o=$r(e).rows,u=o.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),i=X(u,(function(n){var e=z(n.cells,(function(n){return!n.isLocked}));return e.length>0?[on(on({},n),{cells:e})]:[]})),c=zd(i);return ar(c.length>0,c)})).map((function(n){return Id(n)}))},Xp=tinymce.util.Tools.resolve("tinymce.util.Tools"),Gp=function(n,e,t){var r,o=n.select("td,th",e),u=function(e,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],t);if("undefined"===typeof e&&(e=u),e!==u)return""}return e};return u(r,o)},Yp=function(n,e,t){t&&n.formatter.apply("align"+t,{},e)},Jp=function(n,e,t){t&&n.formatter.apply("valign"+t,{},e)},Qp=function(n,e){Xp.each("left center right".split(" "),(function(t){n.formatter.remove("align"+t,{},e)}))},Zp=function(n,e){Xp.each("top middle bottom".split(" "),(function(t){n.formatter.remove("valign"+t,{},e)}))},nv=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],ev=function(n){return{value:n}},tv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ov=function(n){return tv.test(n)||rv.test(n)},uv=function(n){return Cn(n,"#").toUpperCase()},iv=function(n){return ov(n)?E.some({value:uv(n)}):E.none()},cv=function(n){var e=n.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},av=function(n){var e=cv(n.red)+cv(n.green)+cv(n.blue);return ev(e)},lv=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,sv=function(n,e,t,r){return{red:n,green:e,blue:t,alpha:r}},dv=function(n,e,t,r){var o=parseInt(n,10),u=parseInt(e,10),i=parseInt(t,10),c=parseFloat(r);return sv(o,u,i,c)},mv=function(n){if("transparent"===n)return E.some(sv(0,0,0,0));var e=lv.exec(n);if(null!==e)return E.some(dv(e[1],e[2],e[3],"1"));var t=fv.exec(n);return null!==t?E.some(dv(t[1],t[2],t[3],t[4])):E.none()},gv=function(n){return iv(n).orThunk((function(){return mv(n).map(av)})).getOrThunk((function(){var e=document.createElement("canvas");e.height=1,e.width=1;var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=n,t.fillRect(0,0,1,1);var r=t.getImageData(0,0,1,1).data,o=r[0],u=r[1],i=r[2],c=r[3];return av(sv(o,u,i,c))}))},pv=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},vv=function(n){var e=pv(E.none()),t=function(){return e.get().each(n)},r=function(){t(),e.set(E.none())},o=function(){return e.get().isSome()},u=function(){return e.get()},i=function(n){t(),e.set(E.some(n))};return{clear:r,isSet:o,get:u,set:i}},hv=function(){return vv((function(n){return n.unbind()}))},bv=function(){var n=vv(g),e=function(e){return n.get().each(e)};return on(on({},n),{on:e})},wv=function(n,e,t,r){return function(o){var u=hv(),i=Dn(r),c=function(){var c=Sa(e),a=function(e){return n.formatter.match(t,{value:r},e.dom,i)};i?(o.setActive(!P(c,a)),u.set(n.formatter.formatChanged(t,(function(n){return o.setActive(!n)}),!0))):(o.setActive(G(c,a)),u.set(n.formatter.formatChanged(t,o.setActive,!1,{value:r})))};return n.initialized?c():n.on("init",c),u.clear}},yv=function(n){return ze(n,"menu")},Cv=function(n){return _(n,(function(n){var e=n.text||n.title;return yv(n)?{text:e,items:Cv(n.menu)}:{text:e,value:n.value}}))},Tv=function(n,e,t,r,o){return _(t,(function(t){var u=t.text||t.title;return yv(t)?{type:"nestedmenuitem",text:u,getSubmenuItems:function(){return Tv(n,e,t.menu,r,o)}}:{text:u,type:"togglemenuitem",onAction:function(){return o(t.value)},onSetup:wv(n,e,r,t.value)}}))},Sv=function(n,e){return function(t){var r;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[e]=t,r))}},xv=function(n){return X(n,(function(n){return yv(n)?[on(on({},n),{menu:xv(n.menu)})]:On(n.value)?[n]:[]}))},Rv=function(n,e,t,r,o){return function(u){return u(Tv(n,e,t,r,o))}},Av=function(n,e,t){var r=_(e,(function(n){return{text:n.title,value:"#"+gv(n.value).value,type:"choiceitem"}}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(e){var r,o="remove"===e.value?"":e.value;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[t]=o,r))}}]},Ov=function(n){return function(){var e=n.queryCommandValue("mceTableRowType"),t="header"===e?"body":"header";n.execCommand("mceTableRowType",!1,{type:t})}},Dv=function(n){return function(){var e=n.queryCommandValue("mceTableColType"),t="th"===e?"td":"th";n.execCommand("mceTableColType",!1,{type:t})}},Ev=function(n){var e=Cv(Es(n));return e.length>0?E.some({name:"class",type:"listbox",label:"Class",items:e}):E.none()},kv=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:nv}],Mv=function(n){return kv.concat(Ev(n).toArray())},Nv=function(n,e){var t=[{text:"Select...",value:""}],r=[{name:"borderstyle",type:"listbox",label:"Border style",items:t.concat(Cv(bs(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],o={name:"borderwidth",type:"input",label:"Border width"},u="cell"===e?[o].concat(r):r;return{title:"Advanced",name:"advanced",items:u}},Iv=function(n){return function(e,t){var r=e.dom,o=function(e,o){n&&!o||r.setAttrib(t,e,o)},u=function(e,o){n&&!o||r.setStyle(t,e,o)},i=function(r,o){n&&!o||(""===o?e.formatter.remove(r,{value:null},t,!0):e.formatter.apply(r,{value:o},t))};return{setAttrib:o,setStyle:u,setFormat:i}}},Bv={normal:Iv(!1),ifTruthy:Iv(!0)},Pv=function(n){return function(e){return Sn(e,"rgb")?n.toHex(e):e}},Lv=function(n,e){var t=be.fromDom(e);return{borderwidth:vr(t,"border-width").getOr(""),borderstyle:vr(t,"border-style").getOr(""),bordercolor:vr(t,"border-color").map(Pv(n)).getOr(""),backgroundcolor:vr(t,"background-color").map(Pv(n)).getOr("")}},_v=function(n){var e=n[0],t=n.slice(1);return F(t,(function(n){F(De(e),(function(t){ke(n,(function(n,r){var o=e[t];""!==o&&t===r&&o!==n&&(e[t]="")}))}))})),e},Fv=function(n,e,t,r){return K(n,(function(n){return!l(t.formatter.matchNode(r,e+n))})).getOr("")},Wv=y(Fv,["left","center","right"],"align"),jv=y(Fv,["top","middle","bottom"],"valign"),zv=function(n,e){var t=ys(n),r=ws(n),o=function(n){return{borderstyle:We(t,"border-style").getOr(""),bordercolor:Pv(n)(We(t,"border-color").getOr("")),backgroundcolor:Pv(n)(We(t,"background-color").getOr(""))}},u={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i=function(){var e=t["border-width"];return Ds(n)&&e?{border:e}:We(r,"border").fold((function(){return{}}),(function(n){return{border:n}}))},c=e?o(n.dom):{},a=function(){var n=We(t,"border-spacing").or(We(r,"cellspacing")).fold((function(){return{}}),(function(n){return{cellspacing:n}})),e=We(t,"border-padding").or(We(r,"cellpadding")).fold((function(){return{}}),(function(n){return{cellpadding:n}}));return on(on({},n),e)},l=on(on(on(on(on(on({},u),t),r),c),i()),a());return l},Hv=function(n){return Nr(be.fromDom(n)).map((function(e){var t={selection:Uc(n.cells)};return Cp(e,t)})).getOr("")},Uv=function(n,e,t){var r=function(e,t){var r=vr(be.fromDom(t),"border-width");return Ds(n)&&r.isSome()?r.getOr(""):e.getAttrib(t,"border")||Gp(n.dom,t,"border-width")||Gp(n.dom,t,"border")},o=n.dom,u=Ds(n)?o.getStyle(e,"border-spacing")||o.getAttrib(e,"cellspacing"):o.getAttrib(e,"cellspacing")||o.getStyle(e,"border-spacing"),i=Ds(n)?Gp(o,e,"padding")||o.getAttrib(e,"cellpadding"):o.getAttrib(e,"cellpadding")||Gp(o,e,"padding");return on({width:o.getStyle(e,"width")||o.getAttrib(e,"width"),height:o.getStyle(e,"height")||o.getAttrib(e,"height"),cellspacing:u,cellpadding:i,border:r(o,e),caption:!!o.select("caption",e)[0],class:o.getAttrib(e,"class",""),align:Wv(n,e)},t?Lv(o,e):{})},Vv=function(n,e,t){var r=n.dom;return on({height:r.getStyle(e,"height")||r.getAttrib(e,"height"),class:r.getAttrib(e,"class",""),type:Hv(e),align:Wv(n,e)},t?Lv(r,e):{})},Kv=function(n,e,t,r){var o=n.dom,u=r.getOr(e),i=function(n,e){return o.getStyle(n,e)||o.getAttrib(n,e)};return on({width:i(u,"width"),height:i(e,"height"),scope:o.getAttrib(e,"scope"),celltype:Vc(e),class:o.getAttrib(e,"class",""),halign:Wv(n,e),valign:jv(n,e)},t?Lv(o,e):{})},qv=function(n,e){var t=lo.fromTable(n),r=lo.justCells(t),o=z(r,(function(n){return P(e,(function(e){return Se(n.element,e)}))}));return _(o,(function(n){return{element:n.element.dom,column:lo.getColumnAt(t,n.column).map((function(n){return n.element.dom}))}}))},$v=function(n,e,t){n.setAttrib("scope",t.scope),n.setAttrib("class",t.class),n.setStyle("height",Yc(t.height)),e.setStyle("width",Yc(t.width))},Xv=function(n,e){n.setFormat("tablecellbackgroundcolor",e.backgroundcolor),n.setFormat("tablecellbordercolor",e.bordercolor),n.setFormat("tablecellborderstyle",e.borderstyle),n.setFormat("tablecellborderwidth",Yc(e.borderwidth))},Gv=function(n,e,t){var r=1===e.length;F(e,(function(e){var o=e.element,u=r?Bv.normal(n,o):Bv.ifTruthy(n,o),i=e.column.map((function(e){return r?Bv.normal(n,e):Bv.ifTruthy(n,e)})).getOr(u);$v(u,i,t),Ss(n)&&Xv(u,t),r&&(Qp(n,o),Zp(n,o)),t.halign&&Yp(n,o,t.halign),t.valign&&Jp(n,o,t.valign)}))},Yv=function(n,e){n.execCommand("mceTableCellType",!1,{type:e.celltype,no_events:!0})},Jv=function(n,e,t,r){var o=Pe(r,(function(n,e){return t[e]!==n}));Fe(o)>0&&e.length>=1&&Nr(e[0]).each((function(t){var u=qv(t,e),i=Fe(Pe(o,(function(n,e){return"scope"!==e&&"celltype"!==e})))>0,c=je(o,"celltype");(i||je(o,"scope"))&&Gv(n,u,r),c&&Yv(n,r),os(n,t.dom,{structure:c,style:i})}))},Qv=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact((function(){Jv(n,e,t,o),n.focus()}))},Zv=function(n,e){var t=Nr(e[0]).map((function(t){return _(qv(t,e),(function(e){return Kv(n,e.element,Ss(n),e.column)}))}));return _v(t.getOrDie())},nh=function(n,e){var t=Sa(e);if(0!==t.length){var r=Zv(n,t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Mv(n)},Nv(n,"cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:Mv(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:Ss(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:y(Qv,n,t,r)})}},eh=function(n){var e=Cv(ks(n));return e.length>0?E.some({name:"class",type:"listbox",label:"Class",items:e}):E.none()},th=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],rh=function(n){return th.concat(eh(n).toArray())},oh=function(n,e){n.setAttrib("class",e.class),n.setStyle("height",Yc(e.height))},uh=function(n,e){n.setStyle("background-color",e.backgroundcolor),n.setStyle("border-color",e.bordercolor),n.setStyle("border-style",e.borderstyle)},ih=function(n,e,t,r){var o=1===e.length;F(e,(function(e){var u=o?Bv.normal(n,e):Bv.ifTruthy(n,e);oh(u,t),xs(n)&&uh(u,t),t.align!==r.align&&(Qp(n,e),Yp(n,e,t.align))}))},ch=function(n,e){n.execCommand("mceTableRowType",!1,{type:e.type,no_events:!0})},ah=function(n,e,t,r){var o=Pe(r,(function(n,e){return t[e]!==n}));if(Fe(o)>0){var u=je(o,"type"),i=!u||Fe(o)>1;i&&ih(n,e,r,t),u&&ch(n,r),Nr(be.fromDom(e[0])).each((function(e){return os(n,e.dom,{structure:u,style:i})}))}},lh=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact((function(){ah(n,e,t,o),n.focus()}))},fh=function(n){var e=xa(ea(n),ga.selected);if(0!==e.length){var t=_(e,(function(e){return Vv(n,e.dom,xs(n))})),r=_v(t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:rh(n)},Nv(n,"row")]},u={type:"panel",items:[{type:"grid",columns:2,items:rh(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:xs(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:y(lh,n,_(e,(function(n){return n.dom})),r)})}},sh=function(n,e,t){var r=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],u=As(n)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],c=e.length>0?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return r.concat(o).concat(u).concat(i).concat(c)},dh=function(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)o(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var u=0;u<e.children.length;u++)dh(n,e.children[u],t,r)},mh=function(n,e,t){var r=n.dom,o={},u={};if(o.class=t.class,u.height=Yc(t.height),r.getAttrib(e,"width")&&!Ds(n)?o.width=Gc(t.width):u.width=Yc(t.width),Ds(n)?(u["border-width"]=Yc(t.border),u["border-spacing"]=Yc(t.cellspacing)):(o.border=t.border,o.cellpadding=t.cellpadding,o.cellspacing=t.cellspacing),Ds(n)&&e.children)for(var i=0;i<e.children.length;i++)dh(r,e.children[i],{"border-width":Yc(t.border),padding:Yc(t.cellpadding)}),Rs(n)&&dh(r,e.children[i],{"border-color":t.bordercolor});Rs(n)&&(u["background-color"]=t.backgroundcolor,u["border-color"]=t.bordercolor,u["border-style"]=t.borderstyle),o.style=r.serializeStyle(on(on({},ys(n)),u)),r.setAttribs(e,on(on({},ws(n)),o))},gh=function(n,e,t,r){var o=n.dom,u=r.getData(),i=Pe(u,(function(n,e){return t[e]!==n}));r.close(),""===u.class&&delete u.class,n.undoManager.transact((function(){if(!e){var t=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1;e=_p(n,t,r,0,0)}if(Fe(i)>0){mh(n,e,u);var c=o.select("caption",e)[0];(c&&!u.caption||!c&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?Qp(n,e):Yp(n,e,u.align)}if(n.focus(),n.addVisual(),Fe(i)>0){var a=je(i,"caption"),l=!a||Fe(i)>1;os(n,e,{structure:a,style:l})}}))},ph=function(n,e){var t,r=n.dom,o=zv(n,Rs(n));!1===e?(t=r.getParent(n.selection.getStart(),"table",n.getBody()),t?o=Uv(n,t,Rs(n)):Rs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",Rs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var u=Cv(Ms(n));u.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var i={type:"grid",columns:2,items:sh(n,u,e)},c=function(){return{type:"panel",items:[i]}},a=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},Nv(n,"table")]}},l=Rs(n)?a():c();n.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:y(gh,n,t,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},vh=function(n){return Ca(ea(n),Xc(n))},hh=function(n){return Ta(ea(n),Xc(n))},bh=function(n,e,t,r,i){var c=Xc(n),a=function(){return vh(n).each((function(e){Nr(e,c).filter(C(c)).each((function(e){var t=be.fromText("");if(Ao(e,t),Po(e),n.dom.isEmpty(n.getBody()))n.setContent(""),n.selection.setCursorLocation();else{var r=n.dom.createRng();r.setStart(t.dom,0),r.setEnd(t.dom,0),n.selection.setRng(r),n.nodeChanged()}}))}))},l=function(e){return vh(n).each((function(t){var r=Bs(n)||Is(n)||Ns(n);r||Nr(t,c).each((function(t){"relative"!==e||Cl(t)?"fixed"!==e||Tl(t)?"responsive"!==e||Sl(t)||Qs(t):Js(t):Ys(t),Jc(t),os(n,t.dom,is)}))}))},f=function(n){return Nr(n,c)},s=function(e){return hh(n).bind((function(n){return f(n).map((function(t){return e(t,n)}))}))},d=function(e,t){s((function(e){n.formatter.toggle("tableclass",{value:t},e.dom),os(n,e.dom,us)}))},m=function(e,t){s((function(e){var o=Sa(r),u=G(o,(function(e){return n.formatter.match("tablecellclass",{value:t},e.dom)})),i=u?n.formatter.remove:n.formatter.apply;F(o,(function(n){return i("tablecellclass",{value:t},n.dom)})),os(n,e.dom,us)}))},p=function(){vh(n).each((function(e){Nr(e,c).each((function(t){qt(t,"caption").fold((function(){var e=be.fromTag("caption");Do(e,be.fromText("Caption")),Eo(t,e,0),n.selection.setCursorLocation(e.dom,0)}),(function(r){st("caption")(e)&&Te("td",t).each((function(e){return n.selection.setCursorLocation(e.dom,0)})),Po(r)})),os(n,t.dom,is)}))}))},v=function(e){n.focus()},h=function(n,e){return void 0===e&&(e=!1),s((function(t,o){var u=va(r,t,o);n(t,u,e).each(v)}))},b=function(){return s((function(e,t){var o=va(r,e,t),u=jc(g,be.fromDom(n.getDoc()),E.none());return $p(e,o,u)}))},w=function(){return s((function(n,e){var t=va(r,n,e);return qp(n,t)}))},T=function(e,t){return t().each((function(t){var o=_(t,(function(n){return Cu(n)}));s((function(t,u){var i=zc(be.fromDom(n.getDoc())),c=ba(r,u,o,i);e(t,c).each(v)}))}))},S=function(n){return function(e,t){return We(t,"type").each((function(e){h(n(e),t.no_events)}))}};ke({mceTableSplitCells:function(){return h(e.unmergeCells)},mceTableMergeCells:function(){return h(e.mergeCells)},mceTableInsertRowBefore:function(){return h(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return h(e.insertRowsAfter)},mceTableInsertColBefore:function(){return h(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return h(e.insertColumnsAfter)},mceTableDeleteCol:function(){return h(e.deleteColumn)},mceTableDeleteRow:function(){return h(e.deleteRow)},mceTableCutCol:function(){return w().each((function(n){i.setColumns(n),h(e.deleteColumn)}))},mceTableCutRow:function(){return b().each((function(n){i.setRows(n),h(e.deleteRow)}))},mceTableCopyCol:function(){return w().each((function(n){return i.setColumns(n)}))},mceTableCopyRow:function(){return b().each((function(n){return i.setRows(n)}))},mceTablePasteColBefore:function(){return T(e.pasteColsBefore,i.getColumns)},mceTablePasteColAfter:function(){return T(e.pasteColsAfter,i.getColumns)},mceTablePasteRowBefore:function(){return T(e.pasteRowsBefore,i.getRows)},mceTablePasteRowAfter:function(){return T(e.pasteRowsAfter,i.getRows)},mceTableDelete:a,mceTableCellToggleClass:m,mceTableToggleClass:d,mceTableToggleCaption:p,mceTableSizingMode:function(n,e){return l(e)},mceTableCellType:S((function(n){return"th"===n?e.makeCellsHeader:e.unmakeCellsHeader})),mceTableColType:S((function(n){return"th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader})),mceTableRowType:S((function(n){switch(n){case"header":return e.makeRowsHeader;case"footer":return e.makeRowsFooter;default:return e.makeRowsBody}}))},(function(e,t){return n.addCommand(t,e)})),ke({mceTableProps:y(ph,n,!1),mceTableRowProps:y(fh,n),mceTableCellProps:y(nh,n,r)},(function(e,t){return n.addCommand(t,(function(){return e()}))})),n.addCommand("mceInsertTable",(function(e,t){u(t)&&De(t).length>0?Fp(n,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):ph(n,!0)})),n.addCommand("mceTableApplyCellStyle",(function(e,t){var i=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(u(t)){var c=Sa(r);if(0!==c.length){var a=Pe(t,(function(e,t){return n.formatter.has(i(t))&&o(e)}));He(a)||(ke(a,(function(e,t){F(c,(function(r){Bv.normal(n,r.dom).setFormat(i(t),e)}))})),f(c[0]).each((function(e){return os(n,e.dom,us)})))}}}))},wh=function(n,e,t){var r=Xc(n),o=function(e){return Ta(ea(n)).bind((function(n){return Nr(n,r).map((function(r){var o=va(t,r,n);return e(r,o)}))})).getOr("")};ke({mceTableRowType:function(){return o(e.getTableRowType)},mceTableCellType:function(){return o(e.getTableCellType)},mceTableColType:function(){return o(e.getTableColType)}},(function(e,t){return n.addQueryValueHandler(t,e)}))},yh=function(){var n=bv(),e=bv();return{getRows:n.get,setRows:function(t){t.fold(n.clear,n.set),e.clear()},clearRows:n.clear,getColumns:e.get,setColumns:function(t){t.fold(e.clear,e.set),n.clear()},clearColumns:e.clear}},Ch={remove_similar:!0,inherit:!1},Th=on({selector:"td,th"},Ch),Sh={tablecellbackgroundcolor:on({styles:{backgroundColor:"%value"}},Th),tablecellverticalalign:on({styles:{"vertical-align":"%value"}},Th),tablecellbordercolor:on({styles:{borderColor:"%value"}},Th),tablecellclass:on({classes:["%value"]},Th),tableclass:on({selector:"table",classes:["%value"]},Ch),tablecellborderstyle:on({styles:{borderStyle:"%value"}},Th),tablecellborderwidth:on({styles:{borderWidth:"%value"}},Th)},xh=function(n){n.formatter.register(Sh)},Rh=su.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ah=function(n){return void 0===n&&(n=void 0),Rh.none(n)},Oh=on(on({},Rh),{none:Ah}),Dh=function(n,e,t,r,o){void 0===o&&(o=x);var u=1===r;if(!u&&t<=0)return Oh.first(n[0]);if(u&&t>=n.length-1)return Oh.last(n[n.length-1]);var i=t+r,c=n[i];return o(c)?Oh.middle(e,c):Dh(n,e,i,r,o)},Eh=function(n,e){return Nr(n,e).bind((function(e){var t=kr(e),r=q(t,(function(e){return Se(n,e)}));return r.map((function(n){return{index:n,all:t}}))}))},kh=function(n,e,t){var r=Eh(n,t);return r.fold((function(){return Oh.none(n)}),(function(t){return Dh(t.all,n,t.index,1,e)}))},Mh=function(n,e,t){var r=Eh(n,t);return r.fold((function(){return Oh.none()}),(function(t){return Dh(t.all,n,t.index,-1,e)}))},Nh=function(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}},Ih={create:Nh},Bh=su.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ph=function(n,e,t,r){return n.fold(e,t,r)},Lh=function(n){return n.fold(b,b,b)},_h=Bh.before,Fh=Bh.on,Wh=Bh.after,jh={before:_h,on:Fh,after:Wh,cata:Ph,getStart:Lh},zh=su.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Hh=function(n){return zh.exact(n.start,n.soffset,n.finish,n.foffset)},Uh=function(n){return n.match({domRange:function(n){return be.fromDom(n.startContainer)},relative:function(n,e){return jh.getStart(n)},exact:function(n,e,t,r){return n}})},Vh=zh.domRange,Kh=zh.relative,qh=zh.exact,$h=function(n){var e=Uh(n);return gt(e)},Xh=Ih.create,Gh={domRange:Vh,relative:Kh,exact:qh,exactFromRange:Hh,getWin:$h,range:Xh},Yh=function(n,e){var t=n.document.createRange();return t.selectNode(e.dom),t},Jh=function(n,e){var t=n.document.createRange();return Qh(t,e),t},Qh=function(n,e){return n.selectNodeContents(e.dom)},Zh=function(n,e){e.fold((function(e){n.setStartBefore(e.dom)}),(function(e,t){n.setStart(e.dom,t)}),(function(e){n.setStartAfter(e.dom)}))},nb=function(n,e){e.fold((function(e){n.setEndBefore(e.dom)}),(function(e,t){n.setEnd(e.dom,t)}),(function(e){n.setEndAfter(e.dom)}))},eb=function(n,e,t){var r=n.document.createRange();return Zh(r,e),nb(r,t),r},tb=function(n,e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},rb=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},ob=function(n){var e=n.getClientRects(),t=e.length>0?e[0]:n.getBoundingClientRect();return t.width>0||t.height>0?E.some(t).map(rb):E.none()},ub=su.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ib=function(n,e,t){return e(be.fromDom(t.startContainer),t.startOffset,be.fromDom(t.endContainer),t.endOffset)},cb=function(n,e){return e.match({domRange:function(n){return{ltr:h(n),rtl:E.none}},relative:function(e,t){return{ltr:cn((function(){return eb(n,e,t)})),rtl:cn((function(){return E.some(eb(n,t,e))}))}},exact:function(e,t,r,o){return{ltr:cn((function(){return tb(n,e,t,r,o)})),rtl:cn((function(){return E.some(tb(n,r,o,e,t))}))}}})},ab=function(n,e){var t=e.ltr();if(t.collapsed){var r=e.rtl().filter((function(n){return!1===n.collapsed}));return r.map((function(n){return ub.rtl(be.fromDom(n.endContainer),n.endOffset,be.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return ib(n,ub.ltr,t)}))}return ib(n,ub.ltr,t)},lb=function(n,e){var t=cb(n,e);return ab(n,t)},fb=function(n,e){var t=lb(n,e);return t.match({ltr:function(e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},rtl:function(e,t,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(e.dom,t),u}})};ub.ltr,ub.rtl;var sb=function(n,e,t,r,o){if(0===o)return 0;if(e===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||a>u)return i-1;u=a}}return 0},db=function(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},mb=function(n,e,t,r,o){var u=function(t){var r=n.dom.createRange();return r.setStart(e.dom,t),r.collapse(!0),r},i=function(n){var e=u(n);return e.getBoundingClientRect()},c=Wo(e).length,a=sb(i,t,r,o.right,c);return u(a)},gb=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getClientRects(),i=rn(u,(function(n){return db(n,t,r)?E.some(n):E.none()}));return i.map((function(o){return mb(n,e,t,r,o)}))},pb=function(n,e,t,r){var o=n.dom.createRange(),u=yt(e);return rn(u,(function(e){return o.selectNode(e.dom),db(o.getBoundingClientRect(),t,r)?vb(n,e,t,r):E.none()}))},vb=function(n,e,t,r){return at(e)?gb(n,e,t,r):pb(n,e,t,r)},hb=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return vb(n,e,i,c)},bb=!0,wb=!1,yb=function(n,e){return e-n.left<n.right-e?bb:wb},Cb=function(n,e,t){var r=n.dom.createRange();return r.selectNode(e.dom),r.collapse(t),r},Tb=function(n,e,t){var r=n.dom.createRange();r.selectNode(e.dom);var o=r.getBoundingClientRect(),u=yb(o,t),i=u===bb?Dc:Ec;return i(e).map((function(e){return Cb(n,e,u)}))},Sb=function(n,e,t){var r=e.dom.getBoundingClientRect(),o=yb(r,t);return E.some(Cb(n,e,o))},xb=function(n,e,t){var r=0===yt(e).length?Sb:Tb;return r(n,e,t)},Rb=function(n,e,t){var r,o;return E.from(null===(o=(r=n.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,t)).bind((function(e){if(null===e.offsetNode)return E.none();var t=n.dom.createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),E.some(t)}))},Ab=function(n,e,t){var r,o;return E.from(null===(o=(r=n.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,t))},Ob=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return hb(n,e,i,c)},Db=function(n,e,t){return be.fromPoint(n,e,t).bind((function(r){var o=function(){return xb(n,r,e)};return 0===yt(r).length?o():Ob(n,r,e,t).orThunk(o)}))},Eb=function(){return document.caretPositionFromPoint?Rb:document.caretRangeFromPoint?Ab:Db}(),kb=function(n,e,t){var r=be.fromDom(n.document);return Eb(r,e,t).map((function(n){return Ih.create(be.fromDom(n.startContainer),n.startOffset,be.fromDom(n.endContainer),n.endOffset)}))},Mb=function(n,e){var t=rt(n);return"input"===t?jh.after(n):B(["br","img"],t)?0===e?jh.before(n):jh.after(n):jh.on(n,e)},Nb=function(n,e){var t=n.fold(jh.before,Mb,jh.after),r=e.fold(jh.before,Mb,jh.after);return Gh.relative(t,r)},Ib=function(n,e,t,r){var o=Mb(n,e),u=Mb(t,r);return Gh.relative(o,u)},Bb=function(n){return n.match({domRange:function(n){var e=be.fromDom(n.startContainer),t=be.fromDom(n.endContainer);return Ib(e,n.startOffset,t,n.endOffset)},relative:Nb,exact:Ib})},Pb=function(n,e,t,r){var o=dt(n),u=o.dom.createRange();return u.setStart(n.dom,e),u.setEnd(t.dom,r),u},Lb=function(n,e,t,r){var o=Pb(n,e,t,r),u=Se(n,t)&&e===r;return o.collapsed&&!u},_b=function(n){return E.from(n.getSelection())},Fb=function(n,e){_b(n).each((function(n){n.removeAllRanges(),n.addRange(e)}))},Wb=function(n,e,t,r,o){var u=tb(n,e,t,r,o);Fb(n,u)},jb=function(n,e,t,r,o,u){e.collapse(t.dom,r),e.extend(o.dom,u)},zb=function(n,e){return lb(n,e).match({ltr:function(e,t,r,o){Wb(n,e,t,r,o)},rtl:function(e,t,r,o){_b(n).each((function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(e.dom,t,r.dom,o);else if(u.extend)try{jb(n,u,e,t,r,o)}catch(i){Wb(n,r,o,e,t)}else Wb(n,r,o,e,t)}))}})},Hb=function(n,e,t,r,o){var u=Ib(e,t,r,o);zb(n,u)},Ub=function(n,e,t){var r=Nb(e,t);zb(n,r)},Vb=function(n){var e=Gh.getWin(n).dom,t=function(n,t,r,o){return tb(e,n,t,r,o)},r=Bb(n);return lb(e,r).match({ltr:t,rtl:t})},Kb=function(n){if(n.rangeCount>0){var e=n.getRangeAt(0),t=n.getRangeAt(n.rangeCount-1);return E.some(Ih.create(be.fromDom(e.startContainer),e.startOffset,be.fromDom(t.endContainer),t.endOffset))}return E.none()},qb=function(n){if(null===n.anchorNode||null===n.focusNode)return Kb(n);var e=be.fromDom(n.anchorNode),t=be.fromDom(n.focusNode);return Lb(e,n.anchorOffset,t,n.focusOffset)?E.some(Ih.create(e,n.anchorOffset,t,n.focusOffset)):Kb(n)},$b=function(n,e,t){void 0===t&&(t=!0);var r=t?Jh:Yh,o=r(n,e);Fb(n,o)},Xb=function(n){return _b(n).filter((function(n){return n.rangeCount>0})).bind(qb)},Gb=function(n){return Xb(n).map((function(n){return Gh.exact(n.start,n.soffset,n.finish,n.foffset)}))},Yb=function(n,e){var t=fb(n,e);return ob(t)},Jb=function(n,e,t){return kb(n,e,t)},Qb=function(n){_b(n).each((function(n){return n.removeAllRanges()}))},Zb=tinymce.util.Tools.resolve("tinymce.util.VK"),nw=function(n,e,t){return rw(n,e,kh(t,Sf))},ew=function(n,e,t){return rw(n,e,Mh(t,Sf))},tw=function(n,e){var t=Gh.exact(e,0,e,0);return Vb(t)},rw=function(n,e,t){return t.fold(E.none,E.none,(function(e,t){return Dc(t).map((function(e){return tw(n,e)}))}),(function(t){return n.execCommand("mceTableInsertRowAfter"),nw(n,e,t)}))},ow=["table","li","dl"],uw=function(n,e,t){if(n.keyCode===Zb.TAB){var r=Kc(e),o=function(n){var e=rt(n);return Se(n,r)||B(ow,e)},u=e.selection.getRng(),i=be.fromDom(n.shiftKey?u.startContainer:u.endContainer);Er(i,o).each((function(r){n.preventDefault(),Nr(r,o).each(t.clear),e.selection.collapse(n.shiftKey);var u=n.shiftKey?ew:nw,i=u(e,o,r);i.each((function(n){e.selection.setRng(n)}))}))}},iw=function(n,e){return{selection:n,kill:e}},cw={create:iw},aw=function(n,e,t,r){return{start:jh.on(n,e),finish:jh.on(t,r)}},lw={create:aw},fw=function(n,e){var t=fb(n,e);return Ih.create(be.fromDom(t.startContainer),t.startOffset,be.fromDom(t.endContainer),t.endOffset)},sw=lw.create,dw=function(n,e,t,r,o,u,i){return Se(t,o)&&r===u?E.none():Xt(t,"td,th",e).bind((function(t){return Xt(o,"td,th",e).bind((function(r){return mw(n,e,t,r,i)}))}))},mw=function(n,e,t,r,o){return Se(t,r)?E.none():tu(t,r,e).bind((function(e){var r=e.boxes.getOr([]);return r.length>1?(o(n,r,e.start,e.finish),E.some(cw.create(E.some(sw(t,0,t,xc(t))),!0))):E.none()}))},gw=function(n,e,t,r,o){var u=function(n){return o.clearBeforeUpdate(t),o.selectRange(t,n.boxes,n.start,n.finish),n.boxes};return cu(r,n,e,o.firstSelectedSelector,o.lastSelectedSelector).map(u)},pw=function(n,e){return{item:n,mode:e}},vw=function(n,e,t,r){return void 0===r&&(r=hw),n.property().parent(e).map((function(n){return pw(n,r)}))},hw=function(n,e,t,r){return void 0===r&&(r=bw),t.sibling(n,e).map((function(n){return pw(n,r)}))},bw=function(n,e,t,r){void 0===r&&(r=bw);var o=n.property().children(e),u=t.first(o);return u.map((function(n){return pw(n,r)}))},ww=[{current:vw,next:hw,fallback:E.none()},{current:hw,next:bw,fallback:E.some(vw)},{current:bw,next:bw,fallback:E.some(hw)}],yw=function(n,e,t,r,o){void 0===o&&(o=ww);var u=K(o,(function(n){return n.current===t}));return u.bind((function(t){return t.current(n,e,r,t.next).orThunk((function(){return t.fallback.bind((function(t){return yw(n,e,t,r)}))}))}))},Cw=function(){var n=function(n,e){return n.query().prevSibling(e)},e=function(n){return n.length>0?E.some(n[n.length-1]):E.none()};return{sibling:n,first:e}},Tw=function(){var n=function(n,e){return n.query().nextSibling(e)},e=function(n){return n.length>0?E.some(n[0]):E.none()};return{sibling:n,first:e}},Sw={left:Cw,right:Tw},xw=function(n,e,t,r,o,u){var i=yw(n,e,r,o);return i.bind((function(e){return u(e.item)?E.none():t(e.item)?E.some(e.item):xw(n,e.item,t,e.mode,o,u)}))},Rw=function(n,e,t,r){return xw(n,e,t,hw,Sw.left(),r)},Aw=function(n,e,t,r){return xw(n,e,t,hw,Sw.right(),r)},Ow=function(n){return function(e){return 0===n.property().children(e).length}},Dw=function(n,e,t){return kw(n,e,Ow(n),t)},Ew=function(n,e,t){return Mw(n,e,Ow(n),t)},kw=Rw,Mw=Aw,Nw=Uo(),Iw=function(n,e){return Dw(Nw,n,e)},Bw=function(n,e){return Ew(Nw,n,e)},Pw=function(n,e,t){return kw(Nw,n,e,t)},Lw=function(n,e,t){return Mw(Nw,n,e,t)},_w=function(n,e,t){return zt(n,e,t).isSome()},Fw=su.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ww=function(n,e,t){var r=n.getRect(e),o=n.getRect(t);return o.right>r.left&&o.left<r.right},jw=function(n){return Xt(n,"tr")},zw=function(n,e,t,r,o,u,i){return Xt(r,"td,th",i).bind((function(t){return Xt(e,"td,th",i).map((function(e){return Se(t,e)?Se(r,t)&&xc(t)===o?u(e):Fw.none("in same cell"):Zo(jw,[t,e]).fold((function(){return Ww(n,e,t)?Fw.success():u(e)}),(function(n){return u(e)}))}))})).getOr(Fw.none("default"))},Hw=function(n,e,t,r,o){return n.fold(e,t,r,o)},Uw=on(on({},Fw),{verify:zw,cata:Hw}),Vw=function(n,e,t,r){return{parent:n,children:e,element:t,index:r}},Kw=function(n){return pt(n).bind((function(e){var t=yt(e);return qw(t,n).map((function(r){return Vw(e,t,n,r)}))}))},qw=function(n,e){return q(n,y(Se,e))},$w=function(n){return"br"===rt(n)},Xw=function(n,e,t){return e(n,t).bind((function(n){return at(n)&&0===Wo(n).trim().length?Xw(n,e,t):E.some(n)}))},Gw=function(n,e,t){return t.traverse(e).orThunk((function(){return Xw(e,t.gather,n)})).map(t.relative)},Yw=function(n,e){return Ct(n,e).filter($w).orThunk((function(){return Ct(n,e-1).filter($w)}))},Jw=function(n,e,t,r){return Yw(e,t).bind((function(e){return r.traverse(e).fold((function(){return Xw(e,r.gather,n).map(r.relative)}),(function(n){return Kw(n).map((function(n){return jh.on(n.parent,n.index)}))}))}))},Qw=function(n,e,t,r){var o=$w(e)?Gw(n,e,r):Jw(n,e,t,r);return o.map((function(n){return{start:n,finish:n}}))},Zw=function(n){return Uw.cata(n,(function(n){return E.none()}),(function(){return E.none()}),(function(n){return E.some(id(n,0))}),(function(n){return E.some(id(n,xc(n)))}))},ny=function(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}},ey=function(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}},ty=function(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}},ry=function(n){return n.top},oy=function(n){return n.bottom},uy=function(n,e,t){return t>=0&&t<xc(e)?n.getRangedRect(e,t,e,t+1):t>0?n.getRangedRect(e,t-1,e,t):E.none()},iy=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},cy=function(n,e){return E.some(n.getRect(e))},ay=function(n,e,t){return ct(e)?cy(n,e).map(iy):at(e)?uy(n,e,t).map(iy):E.none()},ly=function(n,e){return ct(e)?cy(n,e).map(iy):at(e)?n.getRangedRect(e,0,e,xc(e)).map(iy):E.none()},fy=5,sy=100,dy=su.generate([{none:[]},{retry:["caret"]}]),my=function(n,e){return n.left<e.left||Math.abs(e.right-n.left)<1||n.left>e.right},gy=function(n,e,t){return Ht(e,cg).fold(S,(function(e){return ly(n,e).exists((function(n){return my(t,n)}))}))},py=function(n,e,t,r,o){var u=ny(o,fy);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?dy.retry(u):t.top===o.bottom?dy.retry(ny(o,1)):gy(n,e,o)?dy.retry(ty(u,fy,0)):dy.none()},vy=function(n,e,t,r,o){var u=ey(o,fy);return Math.abs(t.top-r.top)<1||t.bottom<o.top?dy.retry(u):t.bottom===o.top?dy.retry(ey(o,1)):gy(n,e,o)?dy.retry(ty(u,fy,0)):dy.none()},hy={point:ry,adjuster:vy,move:ey,gather:Iw},by={point:oy,adjuster:py,move:ny,gather:Bw},wy=function(n,e,t){return n.elementFromPoint(e,t).filter((function(n){return"table"===rt(n)})).isSome()},yy=function(n,e,t,r,o){return Cy(n,e,t,e.move(r,fy),o)},Cy=function(n,e,t,r,o){return 0===o?E.some(r):wy(n,r.left,e.point(r))?yy(n,e,t,r,o-1):n.situsFromPoint(r.left,e.point(r)).bind((function(u){return u.start.fold(E.none,(function(u){return ly(n,u).bind((function(i){return e.adjuster(n,u,i,t,r).fold(E.none,(function(r){return Cy(n,e,t,r,o-1)}))})).orThunk((function(){return E.some(r)}))}),E.none)}))},Ty=function(n,e){return n.situsFromPoint(e.left,e.bottom+fy)},Sy=function(n,e){return n.situsFromPoint(e.left,e.top-fy)},xy=function(n,e,t){return n.point(e)>t.getInnerHeight()?E.some(n.point(e)-t.getInnerHeight()):n.point(e)<0?E.some(-n.point(e)):E.none()},Ry=function(n,e,t){var r=n.move(t,fy),o=Cy(e,n,t,r,sy).getOr(r);return xy(n,o,e).fold((function(){return e.situsFromPoint(o.left,n.point(o))}),(function(t){return e.scrollBy(0,t),e.situsFromPoint(o.left,n.point(o)-t)}))},Ay={tryUp:y(Ry,hy),tryDown:y(Ry,by),ieTryUp:Sy,ieTryDown:Ty,getJumpSize:h(fy)},Oy=20,Dy=function(n,e,t){return n.getSelection().bind((function(r){return Qw(e,r.finish,r.foffset,t).fold((function(){return E.some(id(r.finish,r.foffset))}),(function(o){var u=n.fromSitus(o),i=Uw.verify(n,r.finish,r.foffset,u.finish,u.foffset,t.failure,e);return Zw(i)}))}))},Ey=function(n,e,t,r,o,u){return 0===u?E.none():Ny(n,e,t,r,o).bind((function(i){var c=n.fromSitus(i),a=Uw.verify(n,t,r,c.finish,c.foffset,o.failure,e);return Uw.cata(a,(function(){return E.none()}),(function(){return E.some(i)}),(function(i){return Se(t,i)&&0===r?ky(n,t,r,ey,o):Ey(n,e,i,0,o,u-1)}),(function(i){return Se(t,i)&&r===xc(i)?ky(n,t,r,ny,o):Ey(n,e,i,xc(i),o,u-1)}))}))},ky=function(n,e,t,r,o){return ay(n,e,t).bind((function(e){return My(n,o,r(e,Ay.getJumpSize()))}))},My=function(n,e,t){var r=ue().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):E.none()},Ny=function(n,e,t,r,o){return ay(n,t,r).bind((function(e){return My(n,o,e)}))},Iy=function(n,e,t){return Dy(n,e,t).bind((function(r){return Ey(n,e,r.element,r.offset,t,Oy).map(n.fromSitus)}))},By=function(n,e){return _w(n,(function(n){return pt(n).exists((function(n){return Se(n,e)}))}))},Py=function(n,e,t,r,o){return Xt(r,"td,th",e).bind((function(r){return Xt(r,"table",e).bind((function(u){return By(o,u)?Iy(n,e,t).bind((function(n){return Xt(n.finish,"td,th",e).map((function(e){return{start:r,finish:e,range:n}}))})):E.none()}))}))},Ly=function(n,e,t,r,o,u){return ue().browser.isIE()?E.none():u(r,e).orThunk((function(){return Py(n,e,t,r,o).map((function(n){var e=n.range;return cw.create(E.some(sw(e.start,e.soffset,e.finish,e.foffset)),!0)}))}))},_y=function(n,e){return Xt(n,"tr",e).bind((function(n){return Xt(n,"table",e).bind((function(t){var r=Wt(t,"tr");return Se(n,r[0])?Pw(t,(function(n){return Ec(n).isSome()}),e).map((function(n){var e=xc(n);return cw.create(E.some(sw(n,e,n,e)),!0)})):E.none()}))}))},Fy=function(n,e){return Xt(n,"tr",e).bind((function(n){return Xt(n,"table",e).bind((function(t){var r=Wt(t,"tr");return Se(n,r[r.length-1])?Lw(t,(function(n){return Dc(n).isSome()}),e).map((function(n){return cw.create(E.some(sw(n,0,n,0)),!0)})):E.none()}))}))},Wy=function(n,e,t,r,o,u,i){return Py(n,t,r,o,u).bind((function(n){return mw(e,t,n.start,n.finish,i)}))},jy=function(n,e){return Xt(n,"td,th",e)},zy=function(n,e,t,r){var o=bv(),u=o.clear,i=function(u){o.on((function(o){r.clearBeforeUpdate(e),jy(u.target,t).each((function(i){tu(o,i,t).each((function(t){var o=t.boxes.getOr([]);if(1===o.length){var c=o[0],a="false"===xf(c),l=rr(Tf(u.target),c,Se);a&&l&&(r.selectRange(e,o,c,c),n.selectContents(c))}else o.length>1&&(r.selectRange(e,o,t.start,t.finish),n.selectContents(i))}))}))}))},c=function(n){r.clear(e),jy(n.target,t).each(o.set)},a=function(n){i(n)},l=function(n){i(n),u()};return{clearstate:u,mousedown:c,mouseover:a,mouseup:l}},Hy={traverse:wt,gather:Bw,relative:jh.before,otherRetry:Ay.tryDown,ieRetry:Ay.ieTryDown,failure:Uw.failedDown},Uy={traverse:bt,gather:Iw,relative:jh.before,otherRetry:Ay.tryUp,ieRetry:Ay.ieTryUp,failure:Uw.failedUp},Vy=function(n){return function(e){return e===n}},Ky=Vy(38),qy=Vy(40),$y=function(n){return n>=37&&n<=40},Xy={isBackward:Vy(37),isForward:Vy(39)},Gy={isBackward:Vy(39),isForward:Vy(37)},Yy=function(n){var e=void 0!==n?n.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return Qu(t,r)},Jy=function(n,e,t){var r=void 0!==t?t.dom:document,o=r.defaultView;o&&o.scrollBy(n,e)},Qy=function(n){var e=function(e,t){return be.fromPoint(be.fromDom(n.document),e,t)},t=function(n){return n.dom.getBoundingClientRect()},r=function(e,t,r,o){var u=Gh.exact(e,t,r,o);return Yb(n,u)},o=function(){return Gb(n).map((function(e){return fw(n,e)}))},u=function(e){var t=Gh.relative(e.start,e.finish);return fw(n,t)},i=function(e,t){return Jb(n,e,t).map((function(n){return lw.create(n.start,n.soffset,n.finish,n.foffset)}))},c=function(){Qb(n)},a=function(e){void 0===e&&(e=!1),Gb(n).each((function(t){return t.fold((function(n){return n.collapse(e)}),(function(t,r){var o=e?t:r;Ub(n,o,o)}),(function(t,r,o,u){var i=e?t:o,c=e?r:u;Hb(n,i,c,i,c)}))}))},l=function(e){$b(n,e,!1)},f=function(e){$b(n,e)},s=function(e){Hb(n,e.start,e.soffset,e.finish,e.foffset)},d=function(e,t){Ub(n,e,t)},m=function(){return n.innerHeight},g=function(){var e=Yy(be.fromDom(n.document));return e.top},p=function(e,t){Jy(e,t,be.fromDom(n.document))};return{elementFromPoint:e,getRect:t,getRangedRect:r,getSelection:o,fromSitus:u,situsFromPoint:i,clearSelection:c,collapseSelection:a,setSelection:s,setRelativeSelection:d,selectNode:l,selectContents:f,getInnerHeight:m,getScrollY:g,scrollBy:p}},Zy=function(n,e){return{rows:n,cols:e}},nC=function(n,e,t,r){var o=Qy(n),u=zy(o,e,t,r);return{clearstate:u.clearstate,mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},eC=function(n,e,t,r){var o=Qy(n),u=function(){return r.clear(e),E.none()},i=function(n,i,c,a,l,f){var s=n.raw,d=s.which,m=!0===s.shiftKey,g=ru(e,r.selectedSelector).fold((function(){return $y(d)&&!m&&r.clearBeforeUpdate(e),qy(d)&&m?y(Wy,o,e,t,Hy,a,i,r.selectRange):Ky(d)&&m?y(Wy,o,e,t,Uy,a,i,r.selectRange):qy(d)?y(Ly,o,t,Hy,a,i,Fy):Ky(d)?y(Ly,o,t,Uy,a,i,_y):E.none}),(function(n){var t=function(t){return function(){var u=rn(t,(function(t){return gw(t.rows,t.cols,e,n,r)}));return u.fold((function(){return uu(e,r.firstSelectedSelector,r.lastSelectedSelector).map((function(n){var t=qy(d)||f.isForward(d)?jh.after:jh.before;return o.setRelativeSelection(jh.on(n.first,0),t(n.table)),r.clear(e),cw.create(E.none(),!0)}))}),(function(n){return E.some(cw.create(E.none(),!0))}))}};return qy(d)&&m?t([Zy(1,0)]):Ky(d)&&m?t([Zy(-1,0)]):f.isBackward(d)&&m?t([Zy(0,-1),Zy(-1,0)]):f.isForward(d)&&m?t([Zy(0,1),Zy(1,0)]):$y(d)&&!m?u:E.none}));return g()},c=function(n,o,u,i,c){return ru(e,r.selectedSelector).fold((function(){var a=n.raw,l=a.which,f=!0===a.shiftKey;return f&&$y(l)?dw(e,t,o,u,i,c,r.selectRange):E.none()}),E.none)};return{keydown:i,keyup:c}},tC=function(n,e,t,r){var o=Qy(n);return function(n,u){r.clearBeforeUpdate(e),tu(n,u,t).each((function(n){var t=n.boxes.getOr([]);r.selectRange(e,t,n.start,n.finish),o.selectContents(u),o.collapseSelection()}))}},rC=function(n,e){F(e,(function(e){ff(n,e)}))},oC=function(n){return function(e){af(e,n)}},uC=function(n){return function(e){rC(e,n)}},iC=function(n){var e=oC(n.selected),t=uC([n.selected,n.lastSelected,n.firstSelected]),r=function(e){var r=Wt(e,n.selectedSelector);F(r,t)},o=function(t,o,u,i){r(t),F(o,e),af(u,n.firstSelected),af(i,n.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},cC=function(n,e,t){var r=function(e){er(e,n.selected),er(e,n.firstSelected),er(e,n.lastSelected)},o=function(e){Yt(e,n.selected,"1")},u=function(n){i(n),t()},i=function(e){var t=Wt(e,n.selectedSelector+","+n.firstSelectedSelector+","+n.lastSelectedSelector);F(t,r)},c=function(t,r,i,c){u(t),F(r,o),Yt(i,n.firstSelected,"1"),Yt(c,n.lastSelected,"1"),e(r,i,c)};return{clearBeforeUpdate:i,clear:u,selectRange:c,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},aC={byClass:iC,byAttr:cC},lC=function(n,e){var t=n.slice(0,e[e.length-1].row+1),r=zd(t);return X(r,(function(n){var t=n.cells.slice(0,e[e.length-1].column+1);return _(t,(function(n){return n.element}))}))},fC=function(n,e){var t=n.slice(e[0].row+e[0].rowspan-1,n.length),r=zd(t);return X(r,(function(n){var t=n.cells.slice(e[0].column+e[0].colspan-1,n.cells.length);return _(t,(function(n){return n.element}))}))},sC=function(n,e,t){var r=lo.fromTable(n),o=Gd(r,e);return o.map((function(n){var e=Wd(r,t,!1),o=lC(e,n),u=fC(e,n);return{upOrLeftCells:o,downOrRightCells:u}}))},dC=tinymce.util.Tools.resolve("tinymce.Env"),mC=function(n){return!1===sf(be.fromDom(n.target),"ephox-snooker-resizer-bar")};function gC(n,e,t){var r=function(e,r,o){t.targets().each((function(t){var u=Nr(r);u.each((function(u){var i=zs(n),c=jc(g,be.fromDom(n.getDoc()),i),a=sC(u,t,c);ts(n,e,r,o,a)}))}))},o=function(){return rs(n)},u=aC.byAttr(ga,r,o);return n.on("init",(function(t){var r=n.getWin(),o=Kc(n),i=Xc(n),c=function(){var e=n.selection,t=be.fromDom(e.getStart()),r=be.fromDom(e.getEnd()),i=Zo(Nr,[t,r]);i.fold((function(){return u.clear(o)}),g)},a=nC(r,o,i,u),l=eC(r,o,i,u),f=tC(r,o,i,u),s=function(n){return!0===n.raw.shiftKey};n.on("TableSelectorChange",(function(n){return f(n.start,n.finish)}));var d=function(e,t){s(e)&&(t.kill&&e.kill(),t.selection.each((function(e){var t=Gh.relative(e.start,e.finish),o=fb(r,t);n.selection.setRng(o)})))},m=function(e){var t=Zl(e);if(t.raw.shiftKey&&$y(t.raw.which)){var r=n.selection.getRng(),o=be.fromDom(r.startContainer),u=be.fromDom(r.endContainer);l.keyup(t,o,r.startOffset,u,r.endOffset).each((function(n){d(t,n)}))}},p=function(t){var r=Zl(t);e().each((function(n){return n.hideBars()}));var o=n.selection.getRng(),u=be.fromDom(o.startContainer),i=be.fromDom(o.endContainer),c=Ku(Xy,Gy)(be.fromDom(n.selection.getStart()));l.keydown(r,u,o.startOffset,i,o.endOffset,c).each((function(n){d(r,n)})),e().each((function(n){return n.showBars()}))},v=function(n){return 0===n.button},h=function(n){return void 0===n.buttons||(!(!dC.browser.isEdge()||0!==n.buttons)||0!==(1&n.buttons))},b=function(n){a.clearstate()},w=function(n){v(n)&&mC(n)&&a.mousedown(Zl(n))},y=function(n){h(n)&&mC(n)&&a.mouseover(Zl(n))},C=function(n){v(n)&&mC(n)&&a.mouseup(Zl(n))},T=function(){var n=pv(be.fromDom(o)),e=pv(0),t=function(t){var r=be.fromDom(t.target);if("td"===rt(r)||"th"===rt(r)){var o=n.get(),u=e.get();Se(o,r)&&t.timeStamp-u<300&&(t.preventDefault(),f(r,r))}n.set(r),e.set(t.timeStamp)};return{touchEnd:t}},S=T();n.on("dragstart",b),n.on("mousedown",w),n.on("mouseover",y),n.on("mouseup",C),n.on("touchend",S.touchEnd),n.on("keyup",m),n.on("keydown",p),n.on("NodeChange",c)})),{clear:u.clear}}var pC=function(n,e){return qt(n,e).isSome()},vC=function(n,e){var t=pv(E.none()),r=pv([]),o=E.none(),u=st("caption"),i=function(n){return o.forall((function(e){return!e[n]}))},c=function(){return Ca(ea(n),Xc(n))},a=function(){return Ca(ta(n),Xc(n))},l=function(){return c().bind((function(n){return cr(ur(Nr(n),a().bind(Nr),(function(t,r){return Se(t,r)?u(n)?E.some(pa(n)):E.some(va(e,t,n)):E.none()})))}))},f=function(n){var e=Nr(n.element);return e.map((function(e){var t=lo.fromTable(e),r=Gd(t,n).getOr([]),o=U(r,(function(n,e){return e.isLocked&&(n.onAny=!0,0===e.column?n.onFirst=!0:e.column+e.colspan>=t.grid.columns&&(n.onLast=!0)),n}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Zd(t,n).isSome(),unmergeable:nm(t,n).isSome(),locked:o}}))},s=function(){t.set(cn(l)()),o=t.get().bind(f),F(r.get(),(function(n){return n()}))},d=function(n){return n(),r.set(r.get().concat([n])),function(){r.set(z(r.get(),(function(e){return e!==n})))}},m=function(n,e){return d((function(){return t.get().fold((function(){n.setDisabled(!0)}),(function(t){n.setDisabled(e(t))}))}))},g=function(n,e,r){return d((function(){return t.get().fold((function(){n.setDisabled(!0),n.setActive(!1)}),(function(t){n.setDisabled(e(t)),n.setActive(r(t))}))}))},p=function(n){return o.exists((function(e){return e.locked[n]}))},v=function(n){return m(n,(function(n){return!1}))},h=function(n){return m(n,(function(n){return u(n.element)}))},b=function(n){return function(e){return m(e,(function(e){return u(e.element)||p(n)}))}},w=function(n){return function(e){return m(e,(function(e){return u(e.element)||n().isNone()}))}},y=function(n,e){return function(t){return m(t,(function(t){return u(t.element)||n().isNone()||p(e)}))}},C=function(n){return m(n,(function(n){return i("mergeable")}))},T=function(n){return m(n,(function(n){return i("unmergeable")}))},x=function(e){return g(e,S,(function(e){var t=Nr(e.element,Xc(n));return t.exists((function(n){return pC(n,"caption")}))}))},R=function(e,t){return function(r){return g(r,(function(n){return u(n.element)}),(function(){return n.queryCommandValue(e)===t}))}},A=R("mceTableRowType","header"),O=R("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:v,onSetupCellOrRow:h,onSetupColumn:b,onSetupPasteable:w,onSetupPasteableColumn:y,onSetupMergeable:C,onSetupUnmergeable:T,resetTargets:s,onSetupTableWithCaption:x,onSetupTableRowHeaders:A,onSetupTableColumnHeaders:O,targets:t.get}},hC=function(n,e,t,r){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(e){return function(){return n.execCommand(e)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=xv(Ms(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Rv(n,e,u,"tableclass",(function(e){return n.execCommand("mceTableToggleClass",!1,e)})),onSetup:t.onSetupTable});var i=xv(Es(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Rv(n,e,i,"tablecellclass",(function(e){return n.execCommand("mceTableCellToggleClass",!1,e)})),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Rv(n,e,nv,"tablecellverticalalign",Sv(n,"vertical-align")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Rv(n,e,hs(n),"tablecellborderwidth",Sv(n,"border-width")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Rv(n,e,bs(n),"tablecellborderstyle",Sv(n,"border-style")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(e){return e(Av(n,Us(n),"background-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(e){return e(Av(n,Vs(n),"border-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Ov(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Dv(n),onSetup:t.onSetupTableColumnHeaders})},bC=function(n){var e=function(e){return n.dom.is(e,"table")&&n.getBody().contains(e)},t=Ps(n);t.length>0&&n.ui.registry.addContextToolbar("table",{predicate:e,items:t,scope:"node",position:"node"})},wC=function(n,e,t,r){var o=function(e){return function(){return n.execCommand(e)}},u=function(e){n.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})},i={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:h("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:h("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:h("tablecellprops tablemergecells tablesplitcells")};!1===Os(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",a),n.ui.registry.addNestedMenuItem("column",l),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(h(""),(function(n){return"caption"===rt(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}});var s=xv(Ms(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Tv(n,e,s,"tableclass",(function(e){return n.execCommand("mceTableToggleClass",!1,e)}))},onSetup:t.onSetupTable});var d=xv(Es(n));0!==d.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Tv(n,e,d,"tablecellclass",(function(e){return n.execCommand("mceTableCellToggleClass",!1,e)}))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Tv(n,e,nv,"tablecellverticalalign",Sv(n,"vertical-align"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Tv(n,e,hs(n),"tablecellborderwidth",Sv(n,"border-width"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Tv(n,e,bs(n),"tablecellborderstyle",Sv(n,"border-style"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Av(n,Us(n),"background-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Av(n,Vs(n),"border-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Ov(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Dv(n),onSetup:t.onSetupTableColumnHeaders})},yC=function(n){var e=hu((function(){return Kc(n)}),(function(){return Ta(ea(n),Xc(n))}),ga.selectedSelector),t=vC(n,e),r=ud(n),o=gC(n,r.lazyResize,t),u=Tp(n,o,r.lazyWire),i=yh();return bh(n,u,o,e,i),wh(n,u,e),Da(n,e,u),wC(n,e,t,i),hC(n,e,t,i),bC(n),n.on("PreInit",(function(){n.serializer.addTempAttr(ga.firstSelected),n.serializer.addTempAttr(ga.lastSelected),xh(n)})),Ts(n)&&n.on("keydown",(function(e){uw(e,n,o)})),n.on("remove",(function(){r.destroy()})),Hp(n,i,r,t)};function CC(){bu.add("table",yC)}CC()})()},34061:function(n,e,t){t("fcbd")},4295:function(n,e,t){t("071a")},"6dd8":function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){return n},t=function(){return t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.apply(this,arguments)},r="\ufeff",o=function(n){return n.replace(/\uFEFF/g,"")},u=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},i="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",c={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:i},a={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},l=[new RegExp(c.aletter),new RegExp(c.midnumlet),new RegExp(c.midletter),new RegExp(c.midnum),new RegExp(c.numeric),new RegExp(c.cr),new RegExp(c.lf),new RegExp(c.newline),new RegExp(c.extend),new RegExp(c.format),new RegExp(c.katakana),new RegExp(c.extendnumlet),new RegExp("@")],f="",s=new RegExp("^"+c.punctuation+"$"),d=/^\s+$/,m=l,g=a.OTHER,p=function(n){for(var e=g,t=m.length,r=0;r<t;++r){var o=m[r];if(o&&o.test(n)){e=r;break}}return e},v=function(n){var e={};return function(t){if(e[t])return e[t];var r=n(t);return e[t]=r,r}},h=function(n){var e=v(p);return u(n,e)},b=function(n,e){var t=n[e],r=n[e+1];if(e<0||e>n.length-1&&0!==e)return!1;if(t===a.ALETTER&&r===a.ALETTER)return!1;var o=n[e+2];if(t===a.ALETTER&&(r===a.MIDLETTER||r===a.MIDNUMLET||r===a.AT)&&o===a.ALETTER)return!1;var u=n[e-1];return(t!==a.MIDLETTER&&t!==a.MIDNUMLET&&r!==a.AT||r!==a.ALETTER||u!==a.ALETTER)&&((t!==a.NUMERIC&&t!==a.ALETTER||r!==a.NUMERIC&&r!==a.ALETTER)&&((t!==a.MIDNUM&&t!==a.MIDNUMLET||r!==a.NUMERIC||u!==a.NUMERIC)&&((t!==a.NUMERIC||r!==a.MIDNUM&&r!==a.MIDNUMLET||o!==a.NUMERIC)&&(t!==a.EXTEND&&t!==a.FORMAT&&u!==a.EXTEND&&u!==a.FORMAT&&r!==a.EXTEND&&r!==a.FORMAT&&((t!==a.CR||r!==a.LF)&&(t===a.NEWLINE||t===a.CR||t===a.LF||(r===a.NEWLINE||r===a.CR||r===a.LF||(t!==a.KATAKANA||r!==a.KATAKANA)&&((r!==a.EXTENDNUMLET||t!==a.ALETTER&&t!==a.NUMERIC&&t!==a.KATAKANA&&t!==a.EXTENDNUMLET)&&((t!==a.EXTENDNUMLET||r!==a.ALETTER&&r!==a.NUMERIC&&r!==a.KATAKANA)&&t!==a.AT)))))))))},w=f,y=d,C=s,T=function(n){return"http"===n||"https"===n},S=function(n,e){var t;for(t=e;t<n.length;t++)if(y.test(n[t]))break;return t},x=function(n,e){var t=S(n,e+1),r=n.slice(e+1,t).join(w);return"://"===r.substr(0,3)?t:e},R=function(n,e,t,r){for(var o=[],u=[],i=0;i<t.length;++i)if(u.push(n[i]),b(t,i)){var c=e[i];if((r.includeWhitespace||!y.test(c))&&(r.includePunctuation||!C.test(c))){var a=i-u.length+1,l=i+1,f=e.slice(a,l).join(w);if(T(f)){var s=x(e,i),d=n.slice(l,s);Array.prototype.push.apply(u,d),i=s}o.push(u)}u=[]}return o},A=function(){return{includeWhitespace:!1,includePunctuation:!1}},O=function(n,e,o){o=t(t({},A()),o);for(var u=[],i=[],c=0;c<n.length;c++){var a=e(n[c]);a!==r&&(u.push(n[c]),i.push(a))}var l=h(i);return R(u,i,l,o)},D=O,E=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),k=function(n,e){var t=e.getBlockElements(),r=e.getShortEndedElements(),u=function(n){return t[n.nodeName]||r[n.nodeName]},i=[],c="",a=new E(n,n);while(n=a.next())3===n.nodeType?c+=o(n.data):u(n)&&c.length&&(i.push(c),c="");return c.length&&i.push(c),i},M=function(n){return n.replace(/\u200B/g,"")},N=function(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},I=function(n,t){var r=M(k(n,t).join("\n"));return D(r.split(""),e).length},B=function(n,e){var t=k(n,e).join("");return N(t)},P=function(n,e){var t=k(n,e).join("").replace(/\s/g,"");return N(t)},L=function(n,e){return function(){return e(n.getBody(),n.schema)}},_=function(n,e){return function(){return e(n.selection.getRng().cloneContents(),n.schema)}},F=function(n){return L(n,I)},W=function(n){return{body:{getWordCount:F(n),getCharacterCount:L(n,B),getCharacterCountWithoutSpaces:L(n,P)},selection:{getWordCount:_(n,I),getCharacterCount:_(n,B),getCharacterCountWithoutSpaces:_(n,P)},getCount:F(n)}},j=function(n,e){n.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(e.body.getWordCount()),String(e.selection.getWordCount())],["Characters (no spaces)",String(e.body.getCharacterCountWithoutSpaces()),String(e.selection.getCharacterCountWithoutSpaces())],["Characters",String(e.body.getCharacterCount()),String(e.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},z=function(n,e){n.addCommand("mceWordCount",(function(){return j(n,e)}))},H=tinymce.util.Tools.resolve("tinymce.util.Delay"),U=function(n,e){n.fire("wordCountUpdate",{wordCount:{words:e.body.getWordCount(),characters:e.body.getCharacterCount(),charactersWithoutSpaces:e.body.getCharacterCountWithoutSpaces()}})},V=function(n,e){U(n,e)},K=function(n,e,t){var r=H.debounce((function(){return V(n,e)}),t);n.on("init",(function(){V(n,e),H.setEditorTimeout(n,(function(){n.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r)}),0)}))},q=function(n){var e=function(){return n.execCommand("mceWordCount")};n.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:e}),n.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:e})};function $(e){void 0===e&&(e=300),n.add("wordcount",(function(n){var t=W(n);return z(n,t),q(n),K(n,t,e),t}))}$()})()},"91b6":function(n,e,t){t("6dd8")},a8db:function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){return t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.apply(this,arguments)},r=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},o=function(n){return function(e){return r(e)===n}},u=function(n){return function(e){return typeof e===n}},i=o("string"),c=o("array"),a=u("boolean"),l=u("number"),f=function(){},s=function(n){return function(){return n}},d=function(n){return n},m=s(!1),g=s(!0),p="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",v=s(p),h=function(){return b},b=function(){var n=function(n){return n()},e=d,t={fold:function(n,e){return n()},isSome:m,isNone:g,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:e,orThunk:n,map:h,each:f,bind:h,exists:m,forall:g,filter:function(){return h()},toArray:function(){return[]},toString:s("none()")};return t}(),w=function(n){var e=s(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:g,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return w(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:b},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},y=function(n){return null===n||void 0===n?b:w(n)},C={some:w,none:h,from:y},T=v,S=tinymce.util.Tools.resolve("tinymce.Env"),x=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=Array.prototype.slice,A=Array.prototype.push,O=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},D=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},E=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n[t];e(r,t)}},k=function(n,e){if(0===n.length)return[];for(var t=e(n[0]),r=[],o=[],u=0,i=n.length;u<i;u++){var c=n[u],a=e(c);a!==t&&(r.push(o),o=[]),t=a,o.push(c)}return 0!==o.length&&r.push(o),r},M=function(n,e,t){return D(n,(function(n,r){t=e(t,n,r)})),t},N=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!c(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);A.apply(e,n[t])}return e},I=function(n,e){return N(O(n,e))},B=function(n,e){var t=R.call(n,0);return t.sort(e),t},P=Object.hasOwnProperty,L=function(n,e){return P.call(n,e)};"undefined"!==typeof window?window:Function("return this;")();var _=9,F=11,W=1,j=3,z=function(n){return n.dom.nodeType},H=function(n){return function(e){return z(e)===n}},U=H(j),V=function(n,e,t){if(!(i(t)||a(t)||l(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},K=function(n,e,t){V(n.dom,e,t)},q=function(n,e,t){return 0!==(n.compareDocumentPosition(e)&t)},$=function(n,e){return q(n,e,Node.DOCUMENT_POSITION_PRECEDING)},X=function(n,e){var t=e||document,r=t.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return J(r.childNodes[0])},G=function(n,e){var t=e||document,r=t.createElement(n);return J(r)},Y=function(n,e){var t=e||document,r=t.createTextNode(n);return J(r)},J=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},Q=function(n,e,t){return C.from(n.dom.elementFromPoint(e,t)).map(J)},Z={fromHtml:X,fromTag:G,fromText:Y,fromDom:J,fromPoint:Q},nn=function(n){return n.nodeType!==W&&n.nodeType!==_&&n.nodeType!==F||0===n.childElementCount},en=function(n,e){var t=void 0===e?document:e.dom;return nn(t)?[]:O(t.querySelectorAll(n),Z.fromDom)},tn=function(n){return C.from(n.dom.parentNode).map(Z.fromDom)},rn=function(n){return O(n.dom.childNodes,Z.fromDom)},on=function(n,e){return{element:n,offset:e}},un=function(n,e){var t=rn(n);return t.length>0&&e<t.length?on(t[e],0):on(n,e)},cn=function(n,e){var t=tn(n);t.each((function(t){t.dom.insertBefore(e.dom,n.dom)}))},an=function(n,e){n.dom.appendChild(e.dom)},ln=function(n,e){cn(n,e),an(e,n)},fn=function(n,e){var t=function(t){if(!n(t))throw new Error("Can only get "+e+" value of a "+e+" node");return r(t).getOr("")},r=function(e){return n(e)?C.from(e.dom.nodeValue):C.none()},o=function(t,r){if(!n(t))throw new Error("Can only set raw "+e+" value of a "+e+" node");t.dom.nodeValue=r};return{get:t,getOption:r,set:o}},sn=fn(U,"text"),dn=function(n){return sn.get(n)},mn=function(n,e){return en(e,n)},gn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),pn=function(n,e){return n.isBlock(e)||L(n.schema.getShortEndedElements(),e.nodeName)},vn=function(n,e){return"false"===n.getContentEditable(e)},hn=function(n,e){return"true"===n.getContentEditable(e)&&"false"===n.getContentEditableParent(e.parentNode)},bn=function(n,e){return!n.isBlock(e)&&L(n.schema.getWhiteSpaceElements(),e.nodeName)},wn=function(n,e){return pn(n,e)||vn(n,e)||bn(n,e)||hn(n,e)},yn=function(n){return 3===n.nodeType},Cn=function(){return{sOffset:0,fOffset:0,elements:[]}},Tn=function(n,e){return un(Z.fromDom(n),e)},Sn=function(n,e,t,r,o,u){void 0===u&&(u=!0);var i=u?e(!1):t;while(i){var c=vn(n,i);if(c||bn(n,i)){var a=c?r.cef(i):r.boundary(i);if(a)break;i=e(!0)}else{if(pn(n,i)){if(r.boundary(i))break}else yn(i)&&r.text(i);if(i===o)break;i=e(!1)}}},xn=function(n,e,t,r,o){if(!wn(n,t)){var u=n.getParent(r,n.isBlock),i=new gn(t,u),c=o?i.next.bind(i):i.prev.bind(i);Sn(n,c,t,{boundary:g,cef:g,text:function(n){o?e.fOffset+=n.length:e.sOffset+=n.length,e.elements.push(Z.fromDom(n))}})}},Rn=function(n,e,t,r,o,u){void 0===u&&(u=!0);var i=new gn(t,e),c=[],a=Cn();xn(n,a,t,e,!1);var l=function(){return a.elements.length>0&&(c.push(a),a=Cn()),!1};return Sn(n,i.next.bind(i),t,{boundary:l,cef:function(n){return l(),o&&c.push.apply(c,o.cef(n)),!1},text:function(n){a.elements.push(Z.fromDom(n)),o&&o.text(n,a)}},r,u),r&&xn(n,a,r,e,!0),l(),c},An=function(n,e){var t=Tn(e.startContainer,e.startOffset),r=t.element.dom,o=Tn(e.endContainer,e.endOffset),u=o.element.dom;return Rn(n,e.commonAncestorContainer,r,u,{text:function(n,e){n===u?e.fOffset+=n.length-o.offset:n===r&&(e.sOffset+=t.offset)},cef:function(e){var t=I(mn(Z.fromDom(e),"*[contenteditable=true]"),(function(e){var t=e.dom;return Rn(n,t,t)}));return B(t,(function(n,e){return $(n.elements[0].dom,e.elements[0].dom)?1:-1}))}},!1)},On=function(n,e){return e.collapsed?[]:An(n,e)},Dn=function(n,e){var t=n.createRng();return t.selectNode(e),On(n,t)},En=function(n,e){return I(e,(function(e){return Dn(n,e)}))},kn=function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=n.length);var o=e.regex;o.lastIndex=t;var u,i=[];while(u=o.exec(n)){var c=u[e.matchIndex],a=u.index+u[0].indexOf(c),l=a+c.length;if(l>r)break;i.push({start:a,finish:l}),o.lastIndex=l}return i},Mn=function(n,e){var t=M(n,(function(n,t){var r=dn(t),o=n.last,u=o+r.length,i=I(e,(function(n,e){return n.start<u&&n.finish>o?[{element:t,start:Math.max(o,n.start)-o,finish:Math.min(u,n.finish)-o,matchId:e}]:[]}));return{results:n.results.concat(i),last:u}}),{results:[],last:0}).results;return k(t,(function(n){return n.matchId}))},Nn=function(n,e){return I(e,(function(e){var t=e.elements,r=O(t,dn).join(""),o=kn(r,n,e.sOffset,r.length-e.fOffset);return Mn(t,o)}))},In=function(n,e){E(n,(function(n,t){E(n,(function(n){var r=Z.fromDom(e.cloneNode(!1));K(r,"data-mce-index",t);var o=n.element.dom;if(o.length===n.finish&&0===n.start)ln(n.element,r);else{o.length!==n.finish&&o.splitText(n.finish);var u=o.splitText(n.start);ln(Z.fromDom(u),r)}}))}))},Bn=function(n,e,t,r){var o=Dn(n,t),u=Nn(e,o);return In(u,r),u.length},Pn=function(n,e,t,r){var o=t.getBookmark(),u=n.select("td[data-mce-selected],th[data-mce-selected]"),i=u.length>0?En(n,u):On(n,t.getRng()),c=Nn(e,i);return In(c,r),t.moveToBookmark(o),c.length},Ln=function(n){var e=n.getAttribute("data-mce-index");return"number"===typeof e?""+e:e},_n=function(n,e,t,r){var o=n.dom.create("span",{"data-mce-bogus":1});o.className="mce-match-marker";var u=n.getBody();return Xn(n,e,!1),r?Pn(n.dom,t,n.selection,o):Bn(n.dom,t,u,o)},Fn=function(n){var e=n.parentNode;n.firstChild&&e.insertBefore(n.firstChild,n),n.parentNode.removeChild(n)},Wn=function(n,e){var t=[],r=x.toArray(n.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var u=Ln(r[o]);null!==u&&u.length&&(u===e.toString()&&t.push(r[o]))}return t},jn=function(n,e,t){var r=e.get(),o=r.index,u=n.dom;t=!1!==t,t?o+1===r.count?o=0:o++:o-1===-1?o=r.count-1:o--,u.removeClass(Wn(n,r.index),"mce-match-marker-selected");var i=Wn(n,o);return i.length?(u.addClass(Wn(n,o),"mce-match-marker-selected"),n.selection.scrollIntoView(i[0]),o):-1},zn=function(n,e){var t=e.parentNode;n.remove(e),n.isEmpty(t)&&n.remove(t)},Hn=function(n,e){var t=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]"),r="("+t+")";return e?"(?:^|\\s|"+T()+")"+r+"(?=$|\\s|"+T()+")":r},Un=function(n,e,t,r,o,u){var i=n.selection,c=Hn(t,o),a=i.isForward(),l={regex:new RegExp(c,r?"g":"gi"),matchIndex:1},f=_n(n,e,l,u);if(S.browser.isSafari()&&i.setRng(i.getRng(),a),f){var s=jn(n,e,!0);e.set({index:s,count:f,text:t,matchCase:r,wholeWord:o,inSelection:u})}return f},Vn=function(n,e){var r=jn(n,e,!0);e.set(t(t({},e.get()),{index:r}))},Kn=function(n,e){var r=jn(n,e,!1);e.set(t(t({},e.get()),{index:r}))},qn=function(n){var e=Ln(n);return null!==e&&e.length>0},$n=function(n,e,r,o,u){var i,c=e.get(),a=c.index,l=a;o=!1!==o;for(var f=n.getBody(),s=x.grep(x.toArray(f.getElementsByTagName("span")),qn),d=0;d<s.length;d++){var m=Ln(s[d]),g=i=parseInt(m,10);if(u||g===c.index){r.length?(s[d].firstChild.nodeValue=r,Fn(s[d])):zn(n.dom,s[d]);while(s[++d]){if(g=parseInt(Ln(s[d]),10),g!==i){d--;break}zn(n.dom,s[d])}o&&l--}else i>a&&s[d].setAttribute("data-mce-index",String(i-1))}return e.set(t(t({},c),{count:u?0:c.count-1,index:l})),o?Vn(n,e):Kn(n,e),!u&&e.get().count>0},Xn=function(n,e,r){for(var o,u,i=e.get(),c=x.toArray(n.getBody().getElementsByTagName("span")),a=0;a<c.length;a++){var l=Ln(c[a]);null!==l&&l.length&&(l===i.index.toString()&&(o||(o=c[a].firstChild),u=c[a].firstChild),Fn(c[a]))}if(e.set(t(t({},i),{index:-1,count:0,text:""})),o&&u){var f=n.dom.createRng();return f.setStart(o,0),f.setEnd(u,u.data.length),!1!==r&&n.selection.setRng(f),f}},Gn=function(n,e){return e.get().count>1},Yn=function(n,e){return e.get().count>1},Jn=function(n,e){var t=function(t){return Xn(n,e,t)},r=function(t,r,o,u){return void 0===u&&(u=!1),Un(n,e,t,r,o,u)},o=function(){return Vn(n,e)},u=function(){return Kn(n,e)},i=function(t,r,o){return $n(n,e,t,r,o)};return{done:t,find:r,next:o,prev:u,replace:i}},Qn=function(e){var t=n(C.none()),r=function(){return t.get().each(e)},o=function(){r(),t.set(C.none())},u=function(){return t.get().isSome()},i=function(){return t.get()},c=function(n){r(),t.set(C.some(n))};return{clear:o,isSet:u,get:i,set:c}},Zn=function(){var n=Qn(f),e=function(e){return n.get().each(e)};return t(t({},n),{on:e})},ne=function(n,e){var r=Zn();n.undoManager.add();var o=x.trim(n.selection.getContent({format:"text"})),u=function(t){var r=Gn(n,e)?t.enable:t.disable;r("next");var o=Yn(n,e)?t.enable:t.disable;o("prev")},i=function(n){var r=n.getData(),o=e.get();e.set(t(t({},o),{matchCase:r.matchcase,wholeWord:r.wholewords,inSelection:r.inselection}))},c=function(n,e){var t=["replace","replaceall","prev","next"],r=e?n.disable:n.enable;D(t,r)},a=function(e){n.windowManager.alert("Could not find the specified string.",(function(){e.focus("findtext")}))},l=function(n,e){S.browser.isSafari()&&S.deviceType.isTouch()&&("find"===e||"replace"===e||"replaceall"===e)&&n.focus(e)},f=function(t){Xn(n,e,!1),c(t,!0),u(t)},s=function(t){var r=t.getData(),o=e.get();if(r.findtext.length){if(o.text===r.findtext&&o.matchCase===r.matchcase&&o.wholeWord===r.wholewords)Vn(n,e);else{var i=Un(n,e,r.findtext,r.matchcase,r.wholewords,r.inselection);i<=0&&a(t),c(t,0===i)}u(t)}else f(t)},d=e.get(),m={findtext:o,replacetext:"",wholewords:d.wholeWord,matchcase:d.matchCase,inselection:d.inSelection},g={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:m,onChange:function(n,t){"findtext"===t.name&&e.get().count>0&&f(n)},onAction:function(t,r){var o=t.getData();switch(r.name){case"find":s(t);break;case"replace":$n(n,e,o.replacetext)?u(t):f(t);break;case"replaceall":$n(n,e,o.replacetext,!0,!0),f(t);break;case"prev":Kn(n,e),u(t);break;case"next":Vn(n,e),u(t);break;case"matchcase":case"wholewords":case"inselection":i(t),f(t);break}l(t,r.name)},onSubmit:function(n){s(n),l(n,"find")},onClose:function(){n.focus(),Xn(n,e),n.undoManager.add()}};r.set(n.windowManager.open(g,{inline:"toolbar"}))},ee=function(n,e){n.addCommand("SearchReplace",(function(){ne(n,e)}))},te=function(n,e){return function(){ne(n,e)}},re=function(n,e){n.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:te(n,e),icon:"search"}),n.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:te(n,e),icon:"search"}),n.shortcuts.add("Meta+F","",te(n,e))};function oe(){e.add("searchreplace",(function(e){var t=n({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return ee(e,t),re(e,t),Jn(e,t)}))}oe()})()},bb11:function(n,e,t){t("e2b4")},d442:function(n,e,t){t("a8db")},e2b4:function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){var e=function(){return n.get()};return{isEnabled:e}},r=function(n,e){return n.fire("VisualChars",{state:e})},o=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},u=function(n){return function(e){return o(e)===n}},i=function(n){return function(e){return typeof e===n}},c=u("string"),a=i("boolean"),l=i("number"),f=function(){},s=function(n){return function(){return n}},d=function(n){return n},m=s(!1),g=s(!0),p=function(){return v},v=function(){var n=function(n){return n()},e=d,t={fold:function(n,e){return n()},isSome:m,isNone:g,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:e,orThunk:n,map:p,each:f,bind:p,exists:m,forall:g,filter:function(){return p()},toArray:function(){return[]},toString:s("none()")};return t}(),h=function(n){var e=s(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:g,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return h(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:v},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},b=function(n){return null===n||void 0===n?v:h(n)},w={some:h,none:p,from:b},y=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},C=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},T=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},S=Object.keys,x=function(n,e){for(var t=S(n),r=0,o=t.length;r<o;r++){var u=t[r],i=n[u];e(i,u)}};"undefined"!==typeof window?window:Function("return this;")();var R=3,A=function(n){return n.dom.nodeType},O=function(n){return n.dom.nodeValue},D=function(n){return function(e){return A(e)===n}},E=D(R),k=function(n,e,t){if(!(c(t)||a(t)||l(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},M=function(n,e,t){k(n.dom,e,t)},N=function(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t},I=function(n,e){n.dom.removeAttribute(e)},B=function(n,e){var t=N(n,e);return void 0===t||""===t?[]:t.split(" ")},P=function(n,e,t){var r=B(n,e),o=r.concat([t]);return M(n,e,o.join(" ")),!0},L=function(n,e,t){var r=T(B(n,e),(function(n){return n!==t}));return r.length>0?M(n,e,r.join(" ")):I(n,e),!1},_=function(n){return void 0!==n.dom.classList},F=function(n){return B(n,"class")},W=function(n,e){return P(n,"class",e)},j=function(n,e){return L(n,"class",e)},z=function(n,e){_(n)?n.dom.classList.add(e):W(n,e)},H=function(n){var e=_(n)?n.dom.classList:F(n);0===e.length&&I(n,"class")},U=function(n,e){if(_(n)){var t=n.dom.classList;t.remove(e)}else j(n,e);H(n)},V=function(n,e){var t=e||document,r=t.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return $(r.childNodes[0])},K=function(n,e){var t=e||document,r=t.createElement(n);return $(r)},q=function(n,e){var t=e||document,r=t.createTextNode(n);return $(r)},$=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},X=function(n,e,t){return w.from(n.dom.elementFromPoint(e,t)).map($)},G={fromHtml:V,fromTag:K,fromText:q,fromDom:$,fromPoint:X},Y={" ":"nbsp","­":"shy"},J=function(n,e){var t="";return x(n,(function(n,e){t+=e})),new RegExp("["+t+"]",e?"g":"")},Q=function(n){var e="";return x(n,(function(n){e&&(e+=","),e+="span.mce-"+n})),e},Z=J(Y),nn=J(Y,!0),en=Q(Y),tn="mce-nbsp",rn=function(n){return'<span data-mce-bogus="1" class="mce-'+Y[n]+'">'+n+"</span>"},on=function(n){var e=O(n);return E(n)&&void 0!==e&&Z.test(e)},un=function(n,e){var t=[],r=n.dom,o=y(r.childNodes,G.fromDom);return C(o,(function(n){e(n)&&(t=t.concat([n])),t=t.concat(un(n,e))})),t},cn=function(n,e){while(n.parentNode){if(n.parentNode===e)return n;n=n.parentNode}},an=function(n){return n.replace(nn,rn)},ln=function(n){return"span"===n.nodeName.toLowerCase()&&n.classList.contains("mce-nbsp-wrap")},fn=function(n,e){var t=un(G.fromDom(e),on);C(t,(function(e){var t=e.dom.parentNode;if(ln(t))z(G.fromDom(t),tn);else{var r=an(n.dom.encode(O(e))),o=n.dom.create("div",null,r),u=void 0;while(u=o.lastChild)n.dom.insertAfter(u,e.dom);n.dom.remove(e.dom)}}))},sn=function(n,e){var t=n.dom.select(en,e);C(t,(function(e){ln(e)?U(G.fromDom(e),tn):n.dom.remove(e,!0)}))},dn=function(n){var e=n.getBody(),t=n.selection.getBookmark(),r=cn(n.selection.getNode(),e);r=void 0!==r?r:e,sn(n,r),fn(n,r),n.selection.moveToBookmark(t)},mn=function(n,e){r(n,e.get());var t=n.getBody();!0===e.get()?fn(n,t):sn(n,t)},gn=function(n,e){e.set(!e.get());var t=n.selection.getBookmark();mn(n,e),n.selection.moveToBookmark(t)},pn=function(n,e){n.addCommand("mceVisualChars",(function(){gn(n,e)}))},vn=function(n){return n.getParam("visualchars_default_state",!1)},hn=function(n){return!1!==n.getParam("forced_root_block")},bn=function(n,e){n.on("init",(function(){mn(n,e)}))},wn=tinymce.util.Tools.resolve("tinymce.util.Delay"),yn=function(n,e){var t=wn.debounce((function(){dn(n)}),300);hn(n)&&n.on("keydown",(function(r){!0===e.get()&&(13===r.keyCode?dn(n):t())})),n.on("remove",t.stop)},Cn=function(n,e){return function(t){t.setActive(e.get());var r=function(n){return t.setActive(n.state)};return n.on("VisualChars",r),function(){return n.off("VisualChars",r)}}},Tn=function(n,e){var t=function(){return n.execCommand("mceVisualChars")};n.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:t,onSetup:Cn(n,e)}),n.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:t,onSetup:Cn(n,e)})};function Sn(){e.add("visualchars",(function(e){var r=n(vn(e));return pn(e,r),Tn(e,r),yn(e,r),bn(e,r),t(r)}))}Sn()})()},fcbd:function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},t=function(n){return function(t){return e(t)===n}},r=function(n){return function(e){return typeof e===n}},o=t("string"),u=r("function"),i=function(){},c=function(n){return function(){return n}},a=function(n){return n};function l(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.concat(t);return n.apply(null,o)}}var f=c(!1),s=c(!0),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=tinymce.util.Tools.resolve("tinymce.util.XHR"),g=function(n){return n.getParam("template_cdate_classes","cdate")},p=function(n){return n.getParam("template_mdate_classes","mdate")},v=function(n){return n.getParam("template_selected_content_classes","selcontent")},h=function(n){return n.getParam("template_preview_replace_values")},b=function(n){return n.getParam("content_style","","string")},w=function(n){return n.getParam("content_css_cors",!1,"boolean")},y=function(n){return n.getParam("template_replace_values")},C=function(n){return n.getParam("templates")},T=function(n){return n.getParam("template_cdate_format",n.translate("%Y-%m-%d"))},S=function(n){return n.getParam("template_mdate_format",n.translate("%Y-%m-%d"))},x=function(n){var e=n.getParam("body_class","","hash");return e[n.id]||""},R=function(n){var e=n.getParam("body_class","","string");return-1===e.indexOf("=")?e:x(n)},A=function(n,e){if(n=""+n,n.length<e)for(var t=0;t<e-n.length;t++)n="0"+n;return n},O=function(n,e,t){void 0===t&&(t=new Date);var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" ");return e=e.replace("%D","%m/%d/%Y"),e=e.replace("%r","%I:%M:%S %p"),e=e.replace("%Y",""+t.getFullYear()),e=e.replace("%y",""+t.getYear()),e=e.replace("%m",A(t.getMonth()+1,2)),e=e.replace("%d",A(t.getDate(),2)),e=e.replace("%H",""+A(t.getHours(),2)),e=e.replace("%M",""+A(t.getMinutes(),2)),e=e.replace("%S",""+A(t.getSeconds(),2)),e=e.replace("%I",""+((t.getHours()+11)%12+1)),e=e.replace("%p",t.getHours()<12?"AM":"PM"),e=e.replace("%B",""+n.translate(i[t.getMonth()])),e=e.replace("%b",""+n.translate(u[t.getMonth()])),e=e.replace("%A",""+n.translate(o[t.getDay()])),e=e.replace("%a",""+n.translate(r[t.getDay()])),e=e.replace("%%","%"),e},D=function(n,e){return function(){var t=C(n);u(t)?t(e):o(t)?m.send({url:t,success:function(n){e(JSON.parse(n))}}):e(t)}},E=function(n,e){return d.each(e,(function(e,t){u(e)&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)})),n},k=function(n,e){var t=n.dom,r=y(n);d.each(t.select("*",e),(function(n){d.each(r,(function(e,r){t.hasClass(n,r)&&u(e)&&e(n)}))}))},M=function(n,e){return new RegExp("\\b"+e+"\\b","g").test(n.className)},N=function(n,e,t){var r=n.dom,o=n.selection.getContent();t=E(t,y(n));var u=r.create("div",null,t),i=r.select(".mceTmpl",u);i&&i.length>0&&(u=r.create("div",null),u.appendChild(i[0].cloneNode(!0))),d.each(r.select("*",u),(function(e){M(e,g(n).replace(/\s+/g,"|"))&&(e.innerHTML=O(n,T(n))),M(e,p(n).replace(/\s+/g,"|"))&&(e.innerHTML=O(n,S(n))),M(e,v(n).replace(/\s+/g,"|"))&&(e.innerHTML=o)})),k(n,u),n.execCommand("mceInsertContent",!1,u.innerHTML),n.addVisual()},I=function(){return B},B=function(){var n=function(n){return n()},e=a,t={fold:function(n,e){return n()},isSome:f,isNone:s,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:e,orThunk:n,map:I,each:i,bind:I,exists:f,forall:s,filter:function(){return I()},toArray:function(){return[]},toString:c("none()")};return t}(),P=function(n){var e=c(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:s,isNone:f,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return P(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:B},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},L=function(n){return null===n||void 0===n?B:P(n)},_={some:P,none:I,from:L},F=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},W=function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return _.some(u);if(t(u,r))break}return _.none()},j=function(n,e){return W(n,e,f)},z=tinymce.util.Tools.resolve("tinymce.Env"),H=tinymce.util.Tools.resolve("tinymce.util.Promise"),U=Object.hasOwnProperty,V=function(n,e){return K(n,e)?_.from(n[e]):_.none()},K=function(n,e){return U.call(n,e)},q={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},$=function(n){return n.replace(/["'<>&]/g,(function(n){return V(q,n).getOr(n)}))},X=function(n,e){if(-1===e.indexOf("<html>")){var t="",r=b(n),o=w(n)?' crossorigin="anonymous"':"";d.each(n.contentCSS,(function(e){t+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(e)+'"'+o+">"})),r&&(t+='<style type="text/css">'+r+"</style>");var u=R(n),i=n.dom.encode,c=z.mac?"e.metaKey":"e.ctrlKey && !e.altKey",a='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+c+")) {e.preventDefault();}}}, false);<\/script> ",l=n.getBody().dir,f=l?' dir="'+i(l)+'"':"";e='<!DOCTYPE html><html><head><base href="'+i(n.documentBaseURI.getURI())+'">'+t+a+'</head><body class="'+i(u)+'"'+f+">"+e+"</body></html>"}return E(e,h(n))},G=function(n,e){var t=function(){if(!e||0===e.length){var t=n.translate("No templates defined.");return n.notificationManager.open({text:t,type:"info"}),_.none()}return _.from(d.map(e,(function(n,e){var t=function(n){return void 0!==n.url};return{selected:0===e,text:n.title,value:{url:t(n)?_.from(n.url):_.none(),content:t(n)?_.none():_.from(n.content),description:n.description}}})))},r=function(n){return F(n,(function(n){return{text:n.text,value:n.text}}))},o=function(n,e){return j(n,(function(n){return n.text===e}))},u=function(e){n.windowManager.alert("Could not load the specified template.",(function(){return e.focus("template")}))},i=function(n){return new H((function(e,t){n.value.url.fold((function(){return e(n.value.content.getOr(""))}),(function(n){return m.send({url:n,success:function(n){e(n)},error:function(n){t(n)}})}))}))},c=function(n,e){return function(t,r){if("template"===r.name){var c=t.getData().template;o(n,c).each((function(n){t.block("Loading..."),i(n).then((function(r){e(t,n,r)})).catch((function(){e(t,n,""),t.disable("save"),u(t)}))}))}}},a=function(e){return function(t){var r=t.getData();o(e,r.template).each((function(e){i(e).then((function(e){n.execCommand("mceInsertTemplate",!1,e),t.close()})).catch((function(){t.disable("save"),u(t)}))}))}},l=function(e){var t=r(e),o=function(n,t){return{title:"Insert Template",size:"large",body:{type:"panel",items:n},initialData:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:a(e),onChange:c(e,l)}},l=function(e,r,u){var i=X(n,u),c=[{type:"selectbox",name:"template",label:"Templates",items:t},{type:"htmlpanel",html:'<p aria-live="polite">'+$(r.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],a={template:r.text,preview:i};e.unblock(),e.redial(o(c,a)),e.focus("template")},f=n.windowManager.open(o([],{template:"",preview:""}));f.block("Loading..."),i(e[0]).then((function(n){l(f,e[0],n)})).catch((function(){l(f,e[0],""),f.disable("save"),u(f)}))},f=t();f.each(l)},Y=function(n){return function(e){G(n,e)}},J=function(n){n.addCommand("mceInsertTemplate",l(N,n)),n.addCommand("mceTemplate",D(n,Y(n)))},Q=function(n){n.on("PreProcess",(function(e){var t=n.dom,r=S(n);d.each(t.select("div",e.node),(function(e){t.hasClass(e,"mceTmpl")&&(d.each(t.select("*",e),(function(e){t.hasClass(e,p(n).replace(/\s+/g,"|"))&&(e.innerHTML=O(n,r))})),k(n,e))}))}))},Z=function(n){var e=function(){return n.execCommand("mceTemplate")};n.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:e}),n.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:e})};function nn(){n.add("template",(function(n){Z(n),J(n),Q(n)}))}nn()})()}}]);