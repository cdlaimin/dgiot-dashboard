/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Wed Nov 17 2021 04:11:49 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73d69b6a"],{"3ea0":function(e,t,r){var a={"./docDialog.vue":"da40"};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id="3ea0"},"508c":function(e,t,r){},"60eb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dgiot-doc"},[r("div",{staticClass:"dialog"},[r("doc-dialog",{ref:"DocDialog"})],1),r("a-row",[r("a-col",{attrs:{span:4}},[r("div",{staticClass:"dgiot-doc-tree"},[r("a-tree",{attrs:{"auto-expand-parent":!0,"block-node":!0,"default-expand-all":!0,"default-expanded-keys":e.selectedKeys,"default-selected-keys":e.selectedKeys,"show-icon":!0,"show-line":!0,"tree-data":e.docDetails},on:{click:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){var a=t.objectId,o=t.name;return[r("a-dropdown",{attrs:{trigger:["contextmenu"]},scopedSlots:e._u([{key:"overlay",fn:function(){return[r("a-menu",{on:{click:function(t){var r=t.key;return e.onContextMenuClick(a,r)}}},[r("a-menu-item",{key:"child"},[e._v(" "+e._s(e.$translateTitle("article.New category"))+" ")]),r("a-menu-item",{key:"edit"},[e._v(" "+e._s(e.$translateTitle("article.edit category"))+" ")]),r("a-menu-item",{key:"delete"},[e._v(" "+e._s(e.$translateTitle("button.delete"))+" ")])],1)]},proxy:!0}],null,!0)},[r("span",[e._v(e._s(o))])])]}}])})],1)]),r("a-col",{attrs:{span:20}},[r("div",{staticClass:"text"},[r("vab-vditor",{ref:"vditor",attrs:{value:e.productDetail.data}})],1)])],1)],1)},o=[],n=r("1da1"),c=r("5530"),i=(r("ac1f"),r("5319"),r("b0c0"),r("96cf"),r("0e9a")),s=r("5880"),l=r("07e2"),u=r("ec86"),d=(r("ed08"),r("dcc6"),{name:"DgiotDoc",components:Object(c["a"])({},Object(i["requireModule"])(r("3ea0"))),data:function(){return{editId:"",collapsed:!1,productDetail:{},setKey:moment(new Date).valueOf()}},computed:{selectedKeys:{get:function(){return this.$store.state.global.selectedKeys},set:function(e){return this.setSelectedKeys(e)}},detailsId:function(){return this.$route.query.details},docDetails:{get:function(){return this.$store.state.global.docDetails||{}},set:function(e){return this.set_docDetails(e)}},articleId:function(){return this.$route.query.article}},mounted:function(){this.getTree(this.$route.query),this.articleId&&this.getArticle(this.$route.query)},created:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){this.set_docDetails([]),this.setSelectedKeys([])},activated:function(){},methods:Object(c["a"])(Object(c["a"])({},Object(s["mapMutations"])({delVisitedRoute:"tabs/delVisitedRoute",setSelectedKeys:"global/setSelectedKeys",set_docDetails:"global/set_docDetails"})),{},{onContextMenuClick:function(e,t){switch(t){case"child":this.newCategory(t,e);break;case"edit":this.editId=e,this.editCategory(e);break;case"delete":this.deletDoc(e);break}},editCategory:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["getArticle"])(e);case 2:a=r.sent,t.$refs.DocDialog.dialogFormVisible=!0,t.$refs.DocDialog.form=a,t.$refs.DocDialog.form.type="edit";case 6:case"end":return r.stop()}}),r)})))()},deletDoc:function(e){var t=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.$baseColorfullLoading(),r.next=3,Object(u["delArticle"])(e);case 3:r.sent,t.$baseMessage(t.$translateTitle("Maintenance.successfully deleted"),"success","vab-hey-message-success"),setTimeout((function(){a.close(),t.getTree(t.$route.query)}),800);case 6:case"end":return r.stop()}}),r)}))))},init:function(){this.$refs.DocDialog.$refs.form.resetFields(),this.$refs.DocDialog.dialogFormVisible=!1,this.getTree(this.$route.query)},getTree:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a,o,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r='{"keys":["parent","name","data","projectId","order","category","data","Icon","desc"],"where":{"projectId":"LYjcKG3ysu"}}'.replace("LYjcKG3ysu",t.$route.query.details),a={class:"Article",filter:r,parent:"parent"},e.next=4,Object(l["post_tree"])(a);case 4:o=e.sent,n=o.results,c=void 0===n?[]:n,t.docDetails=c;case 8:case"end":return e.stop()}}),e)})))()},getArticle:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$baseColorfullLoading(),e.next=4,Object(u["getArticle"])(t.articleId);case 4:a=e.sent,t.productDetail=a,t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),r.close(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(e.t0),"error","vab-hey-message-error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getSetting:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o,n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=t.$baseColorfullLoading(),r.next=4,Object(u["queryArticle"])({where:{parent:e.details}});case 4:o=r.sent,n=o.results,void 0===n?[]:n,c=_.merge(docDetails,t.docDetails),t.docDetails=c,t.setKey=moment(new Date).valueOf(),a.close(),t.init(),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(r.t0),"error","vab-hey-message-error");case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()},onSelect:function(e,t){var r=this;this.$nextTick((function(){r.$refs.DocDialog.form.category=t.category,r.$refs.DocDialog.form.type="add",r.$refs.DocDialog.form.projectId=r.detailsId,r.$refs.DocDialog.form.parent.objectId=t.dataRef.objectId}));var a=[];t.dataRef.children;a.push(t.eventKey),this.setSelectedKeys(a);var o=this.$route.path,n={details:this.detailsId,article:t.dataRef.objectId};this.delVisitedRoute(o),this.$router.push({path:"/doc/details",query:n})},newCategory:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.$refs.DocDialog.form={type:"",name:"",parent:{objectId:"article",__type:"Pointer",className:"Article"},data:"",order:0,category:"",Icon:"",desc:""},e.prev=1,a=r.$baseColorfullLoading(),e.next=5,Object(u["getArticle"])(t);case 5:o=e.sent,r.$refs.DocDialog.form.projectId=r.detailsId,r.$refs.DocDialog.key=moment(new Date).valueOf(),r.$refs.DocDialog.form.parent.objectId=o.objectId,r.$refs.DocDialog.form.category=o.category,r.$refs.DocDialog.form.type="add",r.$refs.DocDialog.dialogFormVisible=!0,a.close(),e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](1);case 17:case"end":return e.stop()}}),e,null,[[1,15]])})))()},createDoc:function(e,t){var r=this;"edit"==t.type&&this.putDoc(t),delete t.type,this.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var o,n,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return o=r.$baseColorfullLoading(),n=t,e.next=5,Object(u["createArticle"])(n);case 5:c=e.sent,i=c.createdAt,s=void 0===i?"":i,o.close(),s.length&&r.init(),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editDoc:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return o=r.$baseColorfullLoading(),n={category:t.category,ico:t.ico,name:t.name,order:t.order},e.next=5,Object(u["putArticle"])(t.objectId,n);case 5:e.sent,o.close(),setTimeout((function(){r.getTree(r.$route.query),r.init()}),800),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},putDoc:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return delete e.createdAt,delete e.updatedAt,delete e.parent,delete e.objectId,delete e.createdAt,r.prev=5,a=t.$baseColorfullLoading(),r.next=9,Object(u["putArticle"])(t.editId,e);case 9:r.sent,t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),a.close(),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](5),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(r.t0),"error","vab-hey-message-error");case 17:case"end":return r.stop()}}),r,null,[[5,14]])})))()}})}),f=d,m=(r("991a"),r("2877")),p=Object(m["a"])(f,a,o,!1,null,"23d34d04",null);t["default"]=p.exports},"74bd":function(e,t,r){"use strict";r("e304")},"991a":function(e,t,r){"use strict";r("508c")},da40:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"doc-dialog"},[r("el-dialog",{key:e.key,attrs:{"append-to-body":"",title:"add"==e.form.type?e.$translateTitle("article.New category"):e.$translateTitle("article.edit category"),visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.handleClose}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:e.$translateTitle("article.name"),"label-width":e.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.parent.objectId.includes("article"),expression:"form.parent.objectId.includes('article')"}],attrs:{label:e.$translateTitle("article.category"),"label-width":e.formLabelWidth,prop:"category"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.parent.objectId.includes("article"),expression:"form.parent.objectId.includes('article')"}],attrs:{label:e.$translateTitle("article.Icon"),"label-width":e.formLabelWidth,prop:"ico"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.ico,callback:function(t){e.$set(e.form,"ico",t)},expression:"form.ico"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("article.order"),"label-width":e.formLabelWidth,prop:"order"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{autocomplete:"off",min:0,step:1},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:e.$translateTitle("article.parent"),"label-width":e.formLabelWidth,prop:"parent.objectId"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.parent.objectId,callback:function(t){e.$set(e.form.parent,"objectId",t)},expression:"form.parent.objectId"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("button.cancel"))+" ")]),"add"==e.form.type?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$parent.createDoc("form",e.form,e.form.type)}}},[e._v(" "+e._s(e.$translateTitle("button.create"))+" ")]):r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$parent.editDoc("form",e.form,e.form.type)}}},[e._v(" "+e._s(e.$translateTitle("button.modify"))+" ")])],1)],1)],1)},o=[],n={name:"DocDialog",data:function(){return{key:moment(new Date).valueOf(),dialogFormVisible:!1,form:{type:"",name:"",parent:{objectId:"article",__type:"Pointer",className:"Article"},data:"",order:0,category:"",Icon:"",desc:""},rules:{name:[{required:!0,message:"请输入文档名",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],category:[{required:!0,message:"请输入类别",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],ico:[],order:[{required:!0,type:"number",message:"请选择排序",trigger:"blur"}],"parent.objectId":[{required:!0,type:"string",message:"请输入父及",trigger:"blur"}]},formLabelWidth:"60px"}},computed:{},mounted:function(){},created:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{handleClose:function(e){this.$refs.form.resetFields(),this.form={type:"",name:"",parent:{objectId:"article",__type:"Pointer",className:"Article"},data:"",order:0,category:"",Icon:"",desc:""}}}},c=n,i=r("2877"),s=Object(i["a"])(c,a,o,!1,null,null,null);t["default"]=s.exports},e304:function(e,t,r){},ed10:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dgiot-doc custom-table-container"},[r("div",{staticClass:"dialog"},[r("doc-dialog",{ref:"DocDialog"})],1),r("div",{staticClass:"dgiot-doc-header"},[r("vab-query-form",[r("vab-query-form-left-panel",[r("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-input",{attrs:{clearable:"",placeholder:e.$translateTitle("product.title")},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:e.queryDoc}},[e._v(" "+e._s(e.$translateTitle("concentrator.search"))+" ")]),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.newCategory("add")}}},[e._v(" "+e._s(e.$translateTitle("article.New category"))+" ")])],1)],1)],1)],1)],1),r("div",{staticClass:"dgiot-doc-center"},[r("a-row",{staticClass:"dgiot-doc-center-row",attrs:{gutter:24}},e._l(e.HomePageForDetails,(function(t){return r("a-col",{key:t.objectId,staticClass:"dgiot-doc-center-row-antdcol",attrs:{lg:8,md:8,sm:12,span:6,xl:6,xs:24,xxl:4.5}},[r("a-card",{staticClass:"dgiot-doc-center-row-antdcol-card ant-card-bordered",attrs:{bordered:!1,hoverable:"",title:t.name}},[r("el-image",{attrs:{slot:"cover",alt:t.ico,src:t.ico},slot:"cover"},[r("div",{staticClass:"block image-slot",attrs:{slot:"error"},slot:"error"},[r("vab-empty",{attrs:{height:"100px",width:"100"}})],1)]),r("template",{staticClass:"ant-card-actions",slot:"actions"},[r("a-icon",{key:"edit",attrs:{type:"edit"},on:{click:function(r){return e.newCategory("edit",t)}}}),r("a-icon",{key:"delete",attrs:{type:"delete"},on:{click:function(r){return e.deletDoc(t)}}})],1),r("el-button",{attrs:{type:"success"},nativeOn:{click:function(r){return e.goChild(t)}}},[e._v(" "+e._s(e.$translateTitle("article.view"))+" ")])],2)],1)})),1),r("el-empty",{directives:[{name:"show",rawName:"v-show",value:0==e.HomePageForDetails.length,expression:"HomePageForDetails.length == 0"}],attrs:{"image-size":200}})],1)])},o=[],n=r("1da1"),c=r("5530"),i=(r("b0c0"),r("caad"),r("2532"),r("96cf"),r("ed08")),s=r("0e9a"),l=r("ec86"),u=(r("dcc6"),{name:"DgiotDoc",components:Object(c["a"])({},Object(s["requireModule"])(r("3ea0"))),data:function(){return{iconStyle:{width:"22px",height:"22px"},queryForm:{name:""},HomePageForDetails:{},settingDetails:{}}},computed:{},mounted:function(){},created:function(){this.queryDoc()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{init:function(){this.$refs.DocDialog.$refs.form.resetFields(),this.$refs.DocDialog.dialogFormVisible=!1,this.queryDoc()},newCategory:function(e,t){this.$refs.DocDialog.dialogFormVisible=!0,t&&(this.$refs.DocDialog.form=t),this.$refs.DocDialog.form.type=e},deletDoc:function(e){var t=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.$baseColorfullLoading(),r.next=3,Object(l["delArticle"])(e.objectId);case 3:r.sent,a.close(),t.$baseMessage(t.$translateTitle("Maintenance.successfully deleted"),"success","vab-hey-message-success"),setTimeout((function(){t.queryDoc()}),1200);case 7:case"end":return r.stop()}}),r)}))))},queryDoc:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.HomePageForDetails=[],t.prev=1,r=e.$baseColorfullLoading(),t.next=5,Object(l["queryArticle"])({where:{parent:"article",name:e.queryForm.name.length?{$regex:e.queryForm.name}:{$ne:null}}});case 5:a=t.sent,o=a.results,n=void 0===o?[]:o,e.HomePageForDetails=n,r.close(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.$baseMessage(e.$translateTitle("alert.Data request error")+"".concat(t.t0),"error","vab-hey-message-error");case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},createDoc:function(e,t){var r=this;delete t.type,t.parent.objectId.includes("article")&&(t.projectId="pid_".concat(Object(i["uuid"])(6))),this.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var o,n,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return o=r.$baseColorfullLoading(),n=t,e.next=5,Object(l["createArticle"])(n);case 5:c=e.sent,i=c.createdAt,s=void 0===i?"":i,o.close(),s.length&&r.init(),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editDoc:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.DocDialog.$refs["".concat(e)].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return o=r.$baseColorfullLoading(),n={category:t.category,ico:t.ico,name:t.name,order:t.order},e.next=5,Object(l["putArticle"])(t.objectId,n);case 5:e.sent,o.close(),setTimeout((function(){r.init()}),800),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},goChild:function(e){this.$router.push({path:"/doc/details",query:{details:e.projectId}})}}}),d=u,f=(r("74bd"),r("2877")),m=Object(f["a"])(d,a,o,!1,null,"ac185526",null);t["default"]=m.exports}}]);