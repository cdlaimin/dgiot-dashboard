/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Wed Nov 17 2021 08:27:45 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84578cb8"],{"0946":function(e,t,i){},"138c":function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return _})),i.d(t,"c",(function(){return m}));var o=i("05b0"),n=i("5ee7"),s=i("1907"),r=i("71e2"),a=i("2dd7"),d=i("dcef"),l=i("537c"),h=i("e444"),c=i("c59a"),u=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class g{constructor(e,t,i,o){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=o,this.id=d["b"].nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?Object(o["a"])({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Object(s["b"])(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):Object(o["a"])("aria.oneReference","symbol in {0} on line {1} at column {2}",Object(s["b"])(this.uri),this.range.startLineNumber,this.range.startColumn)}}class p{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:o,startColumn:n,endLineNumber:s,endColumn:r}=e,a=i.getWordUntilPosition({lineNumber:o,column:n-t}),d=new l["a"](o,a.startColumn,o,n),h=new l["a"](s,r,s,1073741824),c=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e),g=i.getValueInRange(h).replace(/\s+$/,"");return{value:c+u+g,highlight:{start:c.length,end:c.length+u.length}}}}class _{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new h["b"]}dispose(){Object(r["f"])(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?Object(o["a"])("aria.fileReferences.1","1 symbol in {0}, full path {1}",Object(s["b"])(this.uri),this.uri.fsPath):Object(o["a"])("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Object(s["b"])(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let i of this.children)if(!this._previews.has(i.uri))try{const t=yield e.createModelReference(i.uri);this._previews.set(i.uri,new p(t))}catch(t){Object(c["f"])(t)}return this}))}}class m{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new n["b"],this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let o;e.sort(m._compareReferences);for(let n of e)if(o&&s["e"].isEqual(o.uri,n.uri,!0)||(o=new _(this,n.uri),this.groups.push(o)),0===o.children.length||0!==m._compareReferences(n,o.children[o.children.length-1])){const e=new g(i===n,o,n,e=>this._onDidChangeReferenceRange.fire(e));this.references.push(e),o.children.push(e)}}dispose(){Object(r["f"])(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new m(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?Object(o["a"])("aria.result.0","No results found"):1===this.references.length?Object(o["a"])("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?Object(o["a"])("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):Object(o["a"])("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,o=i.children.indexOf(e),n=i.children.length,s=i.parent.groups.length;return 1===s||t&&o+1<n||!t&&o>0?(o=t?(o+1)%n:(o+n-1)%n,i.children[o]):(o=i.parent.groups.indexOf(i),t?(o=(o+1)%s,i.parent.groups[o].children[0]):(o=(o+s-1)%s,i.parent.groups[o].children[i.parent.groups[o].children.length-1]))}nearestReference(e,t){const i=this.references.map((i,o)=>({idx:o,prefixLen:a["d"](i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)})).sort((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&l["a"].containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return s["e"].compare(e.uri,t.uri)||l["a"].compareRangesUsingStarts(e.range,t.range)}}},"1abb":function(e,t,i){"use strict";i.d(t,"a",(function(){return le}));var o=i("05b0"),n=i("c59a"),s=i("71e2"),r=i("38cf"),a=i("2279"),d=i("321b"),l=i("d9c9"),h=i("3074"),c=i("138c"),u=(i("7dc1"),i("9ffb")),g=i("85cf"),p=i("5ee7"),_=i("4f7d"),m=i("1907"),f=i("aa1d"),b=i("537c"),v=i("9afb"),C=i("e0b6"),w=i("778b"),S=i("6d29"),y=i("a25e"),R=i("662c"),x=i("7ebb"),M=i("e3b4"),O=i("312f"),k=i("b8ca"),D=i("3de4"),I=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},N=function(e,t){return function(i,o){t(i,o,e)}};let L=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof c["c"]||e instanceof c["a"]}getChildren(e){if(e instanceof c["c"])return e.groups;if(e instanceof c["a"])return e.resolve(this._resolverService).then(e=>e.children);throw new Error("bad tree")}};L=I([N(0,C["a"])],L);class P{getHeight(){return 23}getTemplateId(e){return e instanceof c["a"]?T.id:W.id}}let E=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof c["b"]){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return Object(m["b"])(e.uri)}};E=I([N(0,O["a"])],E);class F{getId(e){return e instanceof c["b"]?e.id:e.uri}}let A=class extends s["a"]{constructor(e,t,i){super(),this._uriLabel=t;const o=document.createElement("div");o.classList.add("reference-file"),this.file=this._register(new w["a"](o,{supportHighlights:!0})),this.badge=new S["a"](u["q"](o,u["a"](".count"))),this._register(Object(x["a"])(this.badge,i)),e.appendChild(o)}set(e,t){let i=Object(m["d"])(e.uri);this.file.setLabel(Object(M["a"])(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(Object(o["a"])("referencesCount","{0} references",n)):this.badge.setTitleFormat(Object(o["a"])("referenceCount","{0} reference",n))}};A=I([N(1,y["a"]),N(2,R["b"])],A);let T=class e{constructor(t){this._instantiationService=t,this.templateId=e.id}renderTemplate(e){return this._instantiationService.createInstance(A,e)}renderElement(e,t,i){i.set(e.element,Object(k["c"])(e.filterData))}disposeTemplate(e){e.dispose()}};T.id="FileReferencesRenderer",T=I([N(0,a["a"])],T);class j{constructor(e){this.label=new D["a"](e,!1)}set(e,t){var i;const o=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(o&&o.value){const{value:e,highlight:i}=o;t&&!k["a"].isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,Object(k["c"])(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${Object(m["b"])(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class W{constructor(){this.templateId=W.id}renderTemplate(e){return new j(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}W.id="OneReferenceRenderer";class V{getWidgetAriaLabel(){return Object(o["a"])("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var B=i("b5c1"),H=i("09ad"),U=i("c7be"),K=i("699c"),q=i("7cf7"),$=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},G=function(e,t){return function(i,o){t(i,o,e)}},z=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class Z{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new s["b"],this._callOnModelChange=new s["b"],this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let n=0,s=e.children.length;n<s;n++){let o=e.children[n];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:Z.DecorationOptions}),i.push(n))}const o=this._editor.deltaDecorations([],t);for(let n=0;n<o.length;n++)this._decorations.set(o[n],e.children[i[n]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[i,o]of this._decorations){const n=t.getDecorationRange(i);if(!n)continue;let s=!1;if(!b["a"].equalsRange(n,o.range)){if(b["a"].spansMultipleLines(n))s=!0;else{const e=o.range.endColumn-o.range.startColumn,t=n.endColumn-n.startColumn;e!==t&&(s=!0)}s?(this._decorationIgnoreSet.add(o.id),e.push(i)):o.range=n}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}Z.DecorationOptions=v["a"].register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class X{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const o=JSON.parse(e);t=o.ratio,i=o.heightInLines}catch(o){}return{ratio:t||.7,heightInLines:i||18}}}class J extends B["c"]{}let Q=class extends U["c"]{constructor(e,t,i,o,n,r,a,d,l,h){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=n,this._instantiationService=r,this._peekViewService=a,this._uriLabel=d,this._undoRedoService=l,this._keybindingService=h,this._disposeOnNewModel=new s["b"],this._callOnDispose=new s["b"],this._onDidSelectReference=new p["b"],this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new u["b"](0,0),this._applyTheme(o.getColorTheme()),this._callOnDispose.add(o.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Object(s["f"])(this._preview),Object(s["f"])(this._previewNotAvailableMessage),Object(s["f"])(this._tree),Object(s["f"])(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(U["e"])||g["a"].transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(U["p"])||g["a"].transparent,primaryHeadingColor:e.getColor(U["q"]),secondaryHeadingColor:e.getColor(U["r"])})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=u["q"](e,u["a"]("div.messages")),u["K"](this._messageContainer),this._splitView=new K["b"](e,{orientation:1}),this._previewContainer=u["q"](e,u["a"]("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(f["a"],this._previewContainer,t,this.editor),u["K"](this._previewContainer),this._previewNotAvailableMessage=new v["b"](o["a"]("missingPreviewMessage","no preview available"),v["b"].DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService),this._treeContainer=u["q"](e,u["a"]("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new V,keyboardNavigationLabelProvider:this._instantiationService.createInstance(E),identityProvider:new F,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:U["j"]}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(u["o"](this._treeContainer,"keydown",e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(J,"ReferencesWidget",this._treeContainer,new P,[this._instantiationService.createInstance(T),this._instantiationService.createInstance(W)],this._instantiationService.createInstance(L),i),this._splitView.addView({onDidChange:p["c"].None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},K["a"].Distribute),this._splitView.addView({onDidChange:p["c"].None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=this._dim.height+"px",this._treeContainer.style.width=e+"px",this._tree.layout(this._dim.height,e)}},K["a"].Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let n=(e,t)=>{e instanceof c["b"]&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen(e=>{e.sideBySide?n(e.element,"side"):e.editorOptions.pinned?n(e.element,"goto"):n(e.element,"show")}),u["K"](this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new u["b"](t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=o["a"]("noResults","No results"),u["W"](this._messageContainer),Promise.resolve(void 0)):(u["K"](this._messageContainer),this._decorationsManager=new Z(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const o=this._getFocusedReference();o&&this._onDidSelectReference.fire({element:{uri:o.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),u["W"](this._treeContainer),u["W"](this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof c["b"]?e:e instanceof c["a"]&&e.children.length>0?e.children[0]:void 0}revealReference(e){return z(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return z(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==_["c"].inMemory?this.setTitle(Object(m["c"])(e.uri),this._uriLabel.getUriLabel(Object(m["d"])(e.uri))):this.setTitle(o["a"]("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();Object(s["f"])(this._previewModelReference);const r=n.object;if(r){const t=this._preview.getModel()===r.textEditorModel?0:1,i=b["a"].lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(r.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}};Q=$([G(3,R["b"]),G(4,C["a"]),G(5,a["a"]),G(6,U["a"]),G(7,y["a"]),G(8,q["a"]),G(9,O["a"])],Q),Object(R["f"])((e,t)=>{const i=e.getColor(U["m"]);i&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${i}; }`);const o=e.getColor(U["h"]);o&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${o}; }`);const n=e.getColor(U["i"]);n&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${n}; box-sizing: border-box; }`);const s=e.getColor(H["b"]);s&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${s}; box-sizing: border-box; }`);const r=e.getColor(U["j"]);r&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${r}; }`);const a=e.getColor(U["l"]);a&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const d=e.getColor(U["k"]);d&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${d}; }`);const l=e.getColor(U["n"]);l&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${l}; }`);const h=e.getColor(U["o"]);h&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${h} !important; }`);const c=e.getColor(U["f"]);c&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${c};}`);const u=e.getColor(U["g"]);u&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${u};}`)});var Y=i("abda"),ee=i("6fea"),te=i("ae74"),ie=i("f49e"),oe=i("11b8"),ne=i("646b"),se=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},re=function(e,t){return function(i,o){t(i,o,e)}},ae=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const de=new d["c"]("referenceSearchVisible",!1,o["a"]("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let le=class e{constructor(e,t,i,o,n,r,a,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=o,this._notificationService=n,this._instantiationService=r,this._storageService=a,this._configurationService=d,this._disposables=new s["b"],this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=de.bindTo(i)}static get(t){return t.getContribution(e.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",r=X.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(Q,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(o["a"]("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(e=>{let{element:t,kind:o}=e;if(t)switch(o){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t):this.openReference(t,!1,!0);break}}));const a=++this._requestIdPool;t.then(t=>{var i;if(a===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(o["a"]("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new Y["a"](e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then(()=>{this._widget&&"editor"===this._editor.getOption(76)&&this._widget.focusOnPreviewEditor()})}});t.dispose()},e=>{this._notificationService.error(e)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return ae(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const o=this._model.nextOrPreviousReference(i,e),n=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(o),yield this._gotoReference(o),n?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return ae(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const i=b["a"].lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then(t=>{var o;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(i),this._widget.focusOnReferenceTree();else{const n=e.get(t),s=this._model.clone();this.closeWidget(),t.focus(),n.toggleWidget(i,Object(te["h"])(e=>Promise.resolve(s)),null!==(o=this._peekMode)&&void 0!==o&&o)}else this.closeWidget()},e=>{this._ignoreModelChangeEvent=!1,Object(n["f"])(e)})}openReference(e,t,i){t||this.closeWidget();const{uri:o,range:n}=e;this._editorService.openCodeEditor({resource:o,options:{selection:n,pinned:i}},this._editor,t)}};function he(e,t){const i=Object(U["d"])(e);if(!i)return;let o=le.get(i);o&&t(o)}le.ID="editor.contrib.referencesController",le=se([re(2,d["b"]),re(3,r["a"]),re(4,ee["a"]),re(5,a["a"]),re(6,h["a"]),re(7,l["a"])],le),ie["a"].registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Object(oe["a"])(2089,60),when:d["a"].or(de,U["b"].inPeekEditor),handler(e){he(e,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),ie["a"].registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:d["a"].or(de,U["b"].inPeekEditor),handler(e){he(e,e=>{e.goToNextOrPreviousReference(!0)})}}),ie["a"].registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:d["a"].or(de,U["b"].inPeekEditor),handler(e){he(e,e=>{e.goToNextOrPreviousReference(!1)})}}),ne["a"].registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),ne["a"].registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),ne["a"].registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),ne["a"].registerCommand("closeReferenceSearch",e=>he(e,e=>e.closeWidget())),ie["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:d["a"].and(U["b"].inPeekEditor,d["a"].not("config.editor.stablePeek"))}),ie["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:d["a"].and(de,d["a"].not("config.editor.stablePeek"))}),ie["a"].registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:d["a"].and(de,B["e"]),handler(e){var t;const i=e.get(B["a"]),o=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(o)&&o[0]instanceof c["b"]&&he(e,e=>e.revealReference(o[0]))}}),ie["a"].registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:d["a"].and(de,B["e"]),handler(e){var t;const i=e.get(B["a"]),o=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(o)&&o[0]instanceof c["b"]&&he(e,e=>e.openReference(o[0],!0,!0))}}),ne["a"].registerCommand("openReference",e=>{var t;const i=e.get(B["a"]),o=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(o)&&o[0]instanceof c["b"]&&he(e,e=>e.openReference(o[0],!1,!0))})},"1da3":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i("63e9"),n=i("537c");class s{static _handleEolEdits(e,t){let i=void 0,o=[];for(let n of t)"number"===typeof n.eol&&(i=n.eol),n.range&&"string"===typeof n.text&&o.push(n);return"number"===typeof i&&e.hasModel()&&e.getModel().pushEOL(i),o}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),o=i.validateRange(t.range),n=i.getFullModelRange();return n.equalsRange(o)}static execute(e,t,i){i&&e.pushUndoStop();const r=s._handleEolEdits(e,t);1===r.length&&s._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(e=>o["a"].replace(n["a"].lift(e.range),e.text))):e.executeEdits("formatEditsCommand",r.map(e=>o["a"].replaceMove(n["a"].lift(e.range),e.text))),i&&e.pushUndoStop()}}},2733:function(e,t,i){"use strict";i.d(t,"a",(function(){return te}));var o=i("9efa"),n=i("ae74"),s=i("11b8"),r=i("de9c"),a=i("0d65"),d=i("9550"),l=i("38cf"),h=i("abda"),c=i("537c"),u=i("a55e"),g=i("2b64"),p=i("9abf"),_=i("c7be"),m=i("1abb"),f=i("138c"),b=i("05b0"),v=i("709e"),C=i("321b"),w=i("6fea"),S=i("6115"),y=i("e19e"),R=i("646b"),x=i("c794"),M=i("2279"),O=i("af33"),k=i("f49e"),D=i("71e2"),I=i("5ee7"),N=i("312f"),L=i("1907"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},E=function(e,t){return function(i,o){t(i,o,e)}};const F=new C["c"]("hasSymbols",!1,Object(b["a"])("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),A=Object(M["c"])("ISymbolNavigationService");let T=class{constructor(e,t,i,o){this._editorService=t,this._notificationService=i,this._keybindingService=o,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=F.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new j(this._editorService),o=i.onDidChange(e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const o=i.getModel(),n=i.getPosition();if(!o||!n)return;let s=!1,r=!1;for(const a of t.references)if(Object(L["f"])(a.uri,o.uri))s=!0,r=r||c["a"].containsPosition(a.range,n);else if(s)break;s&&r||this.reset()});this._currentState=Object(D["e"])(i,o)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:c["a"].collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?Object(b["a"])("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):Object(b["a"])("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};T=P([E(0,C["b"]),E(1,l["a"]),E(2,w["a"]),E(3,N["a"])],T),Object(O["b"])(A,T,!0),Object(d["k"])(new class extends d["c"]{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:F,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(A).revealNext(t)}}),k["a"].registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:F,primary:9,handler(e){e.get(A).reset()}});let j=class{constructor(e){this._listener=new Map,this._disposables=new D["b"],this._onDidChange=new I["b"],this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Object(D["f"])(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Object(D["e"])(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};j=P([E(0,l["a"])],j);var W,V,B,H,U,K,q,$,G=i("c5d4"),z=i("aac4"),Z=i("a0e2"),X=i("aa1d"),J=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};v["d"].appendMenuItem(v["b"].EditorContext,{submenu:v["b"].EditorContextPeek,title:b["a"]("peek.submenu","Peek"),group:"navigation",order:100});const Q=new Set;function Y(e){const t=new e;return Object(d["m"])(t),Q.add(t.id),t}class ee extends d["b"]{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(w["a"]),s=e.get(l["a"]),r=e.get(S["a"]),a=e.get(A),d=t.getModel(),h=t.getPosition(),c=new x["b"](t,5),u=Object(n["l"])(this._getLocationModel(d,h,c.token),c.token).then(e=>J(this,void 0,void 0,(function*(){if(!e||c.token.isCancellationRequested)return;let i;if(Object(o["a"])(e.ariaMessage),e.referenceAt(d.uri,h)){const e=this._getAlternativeCommand(t);e!==this.id&&Q.has(e)&&(i=t.getAction(e))}const n=e.references.length;if(0===n){if(!this._configuration.muteMessage){const e=d.getWordAtPosition(h);p["a"].get(t).showMessage(this._getNoResultFoundMessage(e),h)}}else{if(1!==n||!i)return this._onResult(s,a,t,e);i.run()}})),e=>{i.error(e)}).finally(()=>{c.dispose()});return r.showWhile(u,250),u}_onResult(e,t,i,o){return J(this,void 0,void 0,(function*(){const n=this._getGoToPreference(i);if(i instanceof X["a"]||!(this._configuration.openInPeek||"peek"===n&&o.references.length>1)){const s=o.firstReference(),r=o.references.length>1&&"gotoAndPeek"===n,a=yield this._openReference(i,e,s,this._configuration.openToSide,!r);r&&a?this._openInPeek(a,o):o.dispose(),"goto"===n&&t.put(s)}else this._openInPeek(i,o)}))}_openReference(e,t,i,o,n){return J(this,void 0,void 0,(function*(){let s=void 0;if(Object(g["J"])(i)&&(s=i.targetSelectionRange),s||(s=i.range),!s)return;const r=yield t.openCodeEditor({resource:i.uri,options:{selection:c["a"].collapseToStart(s),selectionRevealType:3}},e,o);if(r){if(n){const e=r.getModel(),t=r.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{r.getModel()===e&&r.deltaDecorations(t,[])},350)}return r}}))}_openInPeek(e,t){let i=m["a"].get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),Object(n["h"])(e=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class te extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](yield Object(y["b"])(e,t,i),b["a"]("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?b["a"]("noResultWord","No definition found for '{0}'",e.word):b["a"]("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(49).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(49).multipleDefinitions}}const ie=r["h"]&&!G["i"]?2118:70;Y((W=class e extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:b["a"]("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:C["a"].and(u["a"].hasDefinitionProvider,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:ie,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),R["a"].registerCommandAlias("editor.action.goToDeclaration",e.id)}},W.id="editor.action.revealDefinition",W)),Y((V=class e extends te{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,label:b["a"]("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:C["a"].and(u["a"].hasDefinitionProvider,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:Object(s["a"])(2089,ie),weight:100}}),R["a"].registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}},V.id="editor.action.revealDefinitionAside",V)),Y((B=class e extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,label:b["a"]("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:C["a"].and(u["a"].hasDefinitionProvider,_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:v["b"].EditorContextPeek,group:"peek",order:2}}),R["a"].registerCommandAlias("editor.action.previewDeclaration",e.id)}},B.id="editor.action.peekDefinition",B));class oe extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](yield Object(y["a"])(e,t,i),b["a"]("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?b["a"]("decl.noResultWord","No declaration found for '{0}'",e.word):b["a"]("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(49).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(49).multipleDeclarations}}Y((H=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:b["a"]("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:C["a"].and(u["a"].hasDeclarationProvider,u["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?b["a"]("decl.noResultWord","No declaration found for '{0}'",e.word):b["a"]("decl.generic.noResults","No declaration found")}},H.id="editor.action.revealDeclaration",H)),Y(class extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:b["a"]("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:C["a"].and(u["a"].hasDeclarationProvider,_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:v["b"].EditorContextPeek,group:"peek",order:3}})}});class ne extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](yield Object(y["e"])(e,t,i),b["a"]("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?b["a"]("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):b["a"]("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(49).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(49).multipleTypeDefinitions}}Y((U=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:b["a"]("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:C["a"].and(u["a"].hasTypeDefinitionProvider,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},U.ID="editor.action.goToTypeDefinition",U)),Y((K=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:b["a"]("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:C["a"].and(u["a"].hasTypeDefinitionProvider,_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:v["b"].EditorContextPeek,group:"peek",order:4}})}},K.ID="editor.action.peekTypeDefinition",K));class se extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](yield Object(y["c"])(e,t,i),b["a"]("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?b["a"]("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):b["a"]("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(49).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(49).multipleImplementations}}Y((q=class e extends se{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:b["a"]("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:C["a"].and(u["a"].hasImplementationProvider,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},q.ID="editor.action.goToImplementation",q)),Y(($=class e extends se{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:b["a"]("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:C["a"].and(u["a"].hasImplementationProvider,_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:v["b"].EditorContextPeek,group:"peek",order:5}})}},$.ID="editor.action.peekImplementation",$));class re extends ee{_getNoResultFoundMessage(e){return e?b["a"]("references.no","No references found for '{0}'",e.word):b["a"]("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(49).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(49).multipleReferences}}Y(class extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:b["a"]("goToReferences.label","Go to References"),alias:"Go to References",precondition:C["a"].and(u["a"].hasReferenceProvider,_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](yield Object(y["d"])(e,t,!0,i),b["a"]("ref.title","References"))}))}}),Y(class extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:b["a"]("references.action.label","Peek References"),alias:"Peek References",precondition:C["a"].and(u["a"].hasReferenceProvider,_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:v["b"].EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](yield Object(y["d"])(e,t,!1,i),b["a"]("ref.title","References"))}))}});class ae extends ee{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:b["a"]("label.generic","Go To Any Symbol"),alias:"Go To Any Symbol",precondition:C["a"].and(_["b"].notInPeekEditor,u["a"].isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f["c"](this._references,b["a"]("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&b["a"]("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(49).multipleReferences}_getAlternativeCommand(){return""}}R["a"].registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:z["a"]},{name:"position",description:"The position at which to start",constraint:h["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,o,n,s,r)=>J(void 0,void 0,void 0,(function*(){Object(Z["c"])(z["a"].isUri(t)),Object(Z["c"])(h["a"].isIPosition(i)),Object(Z["c"])(Array.isArray(o)),Object(Z["c"])("undefined"===typeof n||"string"===typeof n),Object(Z["c"])("undefined"===typeof r||"boolean"===typeof r);const d=e.get(l["a"]),c=yield d.openCodeEditor({resource:t},d.getFocusedCodeEditor());if(Object(a["b"])(c))return c.setPosition(i),c.revealPositionInCenterIfOutsideViewport(i,0),c.invokeWithinContext(e=>{const t=new class extends ae{_getNoResultFoundMessage(e){return s||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(s),openInPeek:Boolean(r),openToSide:!1},o,n);e.get(M["a"]).invokeFunction(t.run.bind(t),c)})}))}),R["a"].registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:z["a"]},{name:"position",description:"The position at which to start",constraint:h["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,o,n)=>J(void 0,void 0,void 0,(function*(){e.get(R["b"]).executeCommand("editor.action.goToLocations",t,i,o,n,void 0,!0)}))}),R["a"].registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{Object(Z["c"])(z["a"].isUri(t)),Object(Z["c"])(h["a"].isIPosition(i));const o=e.get(l["a"]);return o.openCodeEditor({resource:t},o.getFocusedCodeEditor()).then(e=>{if(!Object(a["b"])(e)||!e.hasModel())return;const t=m["a"].get(e);if(!t)return;const o=Object(n["h"])(t=>Object(y["d"])(e.getModel(),h["a"].lift(i),!1,t).then(e=>new f["c"](e,b["a"]("ref.title","References")))),s=new c["a"](i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(s,o,!1))})}}),R["a"].registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),v["d"].appendMenuItems([{id:v["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:b["a"]({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:v["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:b["a"]({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:v["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:b["a"]({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:v["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:b["a"]({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:v["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:b["a"]({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},"33e2":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ge}));var o=i("05b0"),n=i("ae74"),s=i("71e2"),r=i("2dd7"),a=i("9550"),d=i("a55e"),l=i("94da"),h=i("abda"),c=i("537c"),u=i("a24f"),g=i("75de"),p=i("1e57"),_=i("9afb"),m=i("09ad"),f=i("662c");class b{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(e=>this._editor.getModel().getDecorationRange(e)).filter(e=>!!e);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const e=i.options;if(e===b._FIND_MATCH_DECORATION||e===b._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let o=0,n=this._decorations.length;o<n;o++){let n=this._editor.getModel().getDecorationRange(this._decorations[o]);if(e.equalsRange(n)){t=this._decorations[o],i=o+1;break}}return null===this._highlightedDecorationId&&null===t||this._editor.changeDecorations(e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,b._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,b._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){let e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new c["a"](i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,b._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let o=b._FIND_MATCH_DECORATION,n=[];if(e.length>1e3){o=b._FIND_MATCH_NO_OVERVIEW_DECORATION;const t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height,s=i/t,r=Math.max(2,Math.ceil(3/s));let a=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let o=1,l=e.length;o<l;o++){const t=e[o].range;d+r>=t.startLineNumber?t.endLineNumber>d&&(d=t.endLineNumber):(n.push({range:new c["a"](a,1,d,1),options:b._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),a=t.startLineNumber,d=t.endLineNumber)}n.push({range:new c["a"](a,1,d,1),options:b._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let t=0,r=e.length;t<r;t++)s[t]={range:e[t].range,options:o};this._decorations=i.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,n),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(e=>i.removeDecoration(e)),this._findScopeDecorationIds=[]),(null===t||void 0===t?void 0:t.length)&&(this._findScopeDecorationIds=t.map(e=>i.addDecoration(e,b._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.endLineNumber>e.lineNumber)){if(o.endLineNumber<e.lineNumber)return o;if(!(o.endColumn>e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}b._CURRENT_FIND_MATCH_DECORATION=_["a"].register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Object(f["g"])(m["ic"]),position:p["d"].Center},minimap:{color:Object(f["g"])(m["bc"]),position:p["c"].Inline}}),b._FIND_MATCH_DECORATION=_["a"].register({description:"find-match",stickiness:1,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Object(f["g"])(m["ic"]),position:p["d"].Center},minimap:{color:Object(f["g"])(m["bc"]),position:p["c"].Inline}}),b._FIND_MATCH_NO_OVERVIEW_DECORATION=_["a"].register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),b._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_["a"].register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Object(f["g"])(m["ic"]),position:p["d"].Center}}),b._RANGE_HIGHLIGHT_DECORATION=_["a"].register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),b._FIND_SCOPE_DECORATION=_["a"].register({description:"find-scope",className:"findScope",isWholeLine:!0});class v{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort((e,t)=>c["a"].compareRangesUsingStarts(e.range,t.range));let i=[],o=e[0];for(let t=1;t<e.length;t++)o.range.endLineNumber===e[t].range.startLineNumber&&o.range.endColumn===e[t].range.startColumn?(o.range=o.range.plusRange(e[t].range),o.text=o.text+e[t].text):(i.push(o),o=e[t]);i.push(o);for(const n of i)t.addEditOperation(n.range,n.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}var C=i("65e9");class w{constructor(e){this.staticValue=e,this.kind=0}}class S{constructor(e){this.pieces=e,this.kind=1}}class y{constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new w(e[0].staticValue):this._state=new S(e):this._state=new w("")}static fromStaticValue(e){return new y([R.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}buildReplaceString(e,t){if(0===this._state.kind)return t?Object(C["a"])(e,this._state.staticValue):this._state.staticValue;let i="";for(let o=0,n=this._state.pieces.length;o<n;o++){let t=this._state.pieces[o];if(null!==t.staticValue){i+=t.staticValue;continue}let n=y._substitute(t.matchIndex,e);if(null!==t.caseOps&&t.caseOps.length>0){let e=[],i=t.caseOps.length,o=0;for(let s=0,r=n.length;s<r;s++){if(o>=i){e.push(n.slice(s));break}switch(t.caseOps[o]){case"U":e.push(n[s].toUpperCase());break;case"u":e.push(n[s].toUpperCase()),o++;break;case"L":e.push(n[s].toLowerCase());break;case"l":e.push(n[s].toLowerCase()),o++;break;default:e.push(n[s])}}n=e.join("")}i+=n}return i}static _substitute(e,t){if(null===t)return"";if(0===e)return t[0];let i="";while(e>0){if(e<t.length){let o=t[e]||"";return o+i}i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class R{constructor(e,t,i){this.staticValue=e,this.matchIndex=t,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}static staticValue(e){return new R(e,-1,null)}static caseOps(e,t){return new R(null,e,t)}}class x{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=R.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=R.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=R.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new y(this._result)}}function M(e){if(!e||0===e.length)return new y(null);let t=[],i=new x(e);for(let o=0,n=e.length;o<n;o++){let s=e.charCodeAt(o);if(92!==s){if(36===s){if(o++,o>=n)break;let s=e.charCodeAt(o);if(36===s){i.emitUnchanged(o-1),i.emitStatic("$",o+1);continue}if(48===s||38===s){i.emitUnchanged(o-1),i.emitMatchIndex(0,o+1,t),t.length=0;continue}if(49<=s&&s<=57){let r=s-48;if(o+1<n){let n=e.charCodeAt(o+1);if(48<=n&&n<=57){o++,r=10*r+(n-48),i.emitUnchanged(o-2),i.emitMatchIndex(r,o+1,t),t.length=0;continue}}i.emitUnchanged(o-1),i.emitMatchIndex(r,o+1,t),t.length=0;continue}}}else{if(o++,o>=n)break;let s=e.charCodeAt(o);switch(s){case 92:i.emitUnchanged(o-1),i.emitStatic("\\",o+1);break;case 110:i.emitUnchanged(o-1),i.emitStatic("\n",o+1);break;case 116:i.emitUnchanged(o-1),i.emitStatic("\t",o+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(o-1),i.emitStatic("",o+1),t.push(String.fromCharCode(s));break}}}return i.finalize()}var O=i("321b"),k=i("1c57");const D=new O["c"]("findWidgetVisible",!1),I=new O["c"]("findInputFocussed",!1),N=new O["c"]("replaceInputFocussed",!1),L={primary:545,mac:{primary:2593}},P={primary:565,mac:{primary:2613}},E={primary:560,mac:{primary:2608}},F={primary:554,mac:{primary:2602}},A={primary:558,mac:{primary:2606}},T={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},j=19999,W=240;class V{constructor(e,t){this._toDispose=new s["b"],this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new n["g"],this._decorations=new b(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new n["e"](()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(e=>{3!==e.reason&&5!==e.reason&&6!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Object(s["f"])(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){let t=this._editor.getModel();t.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},W)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;"undefined"!==typeof t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map(e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new c["a"](e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e}));let o=this._findMatches(i,!1,j);this._decorations.set(o,i);const n=this._editor.getSelection();let s=this._decorations.getCurrentMatchesPosition(n);if(0===s&&o.length>0){const e=Object(k["i"])(o.map(e=>e.range),e=>c["a"].compareRangesUsingStarts(e,n)>=0);s=e>0?e-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(34).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:o}=e,n=this._editor.getModel();return t||1===o?(1===i?i=n.getLineCount():i--,o=n.getLineMaxColumn(i)):o--,new h["a"](i,o)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const t=this._decorations.matchAfterPosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<j){let t=this._decorations.matchBeforePosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),t=this._decorations.matchBeforePosition(e)),void(t&&this._setCurrentFindMatch(t))}if(this._cannotFind())return;let i=this._decorations.getFindScope(),o=V._getSearchRange(this._editor.getModel(),i);o.getEndPosition().isBefore(e)&&(e=o.getEndPosition()),e.isBefore(o.getStartPosition())&&(e=o.getEndPosition());let{lineNumber:n,column:s}=e,r=this._editor.getModel(),a=new h["a"](n,s),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);return d&&d.range.isEmpty()&&d.range.getStartPosition().equals(a)&&(a=this._prevSearchPosition(a),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),d?t||o.containsRange(d.range)?void this._setCurrentFindMatch(d.range):this._moveToPrevMatch(d.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:o}=e,n=this._editor.getModel();return t||o===n.getLineMaxColumn(i)?(i===n.getLineCount()?i=1:i++,o=1):o++,new h["a"](i,o)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const t=this._decorations.matchBeforePosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<j){let t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,o=!1){if(this._cannotFind())return null;let n=this._decorations.getFindScope(),s=V._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:r,column:a}=e,d=this._editor.getModel(),l=new h["a"](r,a),c=d.findNextMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return i&&c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._nextSearchPosition(l),c=d.findNextMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),c?o||s.containsRange(c.range)?c:this._getNextMatch(c.range.getEndPosition(),t,i,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?M(this._state.replaceString):y.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){let o=e.buildReplaceString(i.matches,this._state.preserveCase),n=new l["a"](t,o);this._executeEditorCommand("replace",n),this._decorations.setStartPosition(new h["a"](t.startLineNumber,t.startColumn+o.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const o=(e||[null]).map(e=>V._getSearchRange(this._editor.getModel(),e));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=j?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const e=new g["a"](this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null),t=e.parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let e="mu";i.ignoreCase&&(e+="i"),i.global&&(e+="g"),i=new RegExp(i.source,e)}const o=this._editor.getModel(),n=o.getValue(1),s=o.getFullModelRange(),r=this._getReplacePattern();let a;const d=this._state.preserveCase;a=r.hasReplacementPatterns||d?n.replace(i,(function(){return r.buildReplaceString(arguments,d)})):n.replace(i,r.buildReplaceString(null,d));let h=new l["b"](s,a,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),o=[];for(let s=0,r=i.length;s<r;s++)o[s]=t.buildReplaceString(i[s].matches,this._state.preserveCase);let n=new v(this._editor.getSelection(),i.map(e=>e.range),o);this._executeEditorCommand("replaceAll",n)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824),i=t.map(e=>new u["a"](e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)),o=this._editor.getSelection();for(let n=0,s=i.length;n<s;n++){let e=i[n];if(e.equalsRange(o)){i=[o].concat(i.slice(0,n)).concat(i.slice(n+1));break}}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var B=i("9ffb"),H=i("9fc7"),U=i("33a3");class K extends U["a"]{constructor(e,t,i,o){super(),this._hideSoon=this._register(new n["e"](()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=o.getColorTheme().getColor(m["hb"]),r=o.getColorTheme().getColor(m["ib"]),a=o.getColorTheme().getColor(m["gb"]);this.caseSensitive=this._register(new H["a"]({appendTitle:this._keybindingLabelFor(T.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new H["c"]({appendTitle:this._keybindingLabelFor(T.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new H["b"]({appendTitle:this._keybindingLabelFor(T.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()})),this._register(B["j"](this._domNode,e=>this._onMouseOut())),this._register(B["i"](this._domNode,"mouseover",e=>this._onMouseOver())),this._applyTheme(o.getColorTheme()),this._register(o.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return K.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(m["hb"]),inputActiveOptionForeground:e.getColor(m["ib"]),inputActiveOptionBackground:e.getColor(m["gb"])};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}K.ID="editor.contrib.findOptionsWidget",Object(f["f"])((e,t)=>{const i=e.getColor(m["Y"]);i&&t.addRule(`.monaco-editor .findOptionsWidget { background-color: ${i}; }`);const o=e.getColor(m["ab"]);o&&t.addRule(`.monaco-editor .findOptionsWidget { color: ${o}; }`);const n=e.getColor(m["Nc"]);n&&t.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${n}; }`);const s=e.getColor(m["h"]);s&&t.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});var q=i("5ee7");function $(e,t){return 1===e||2!==e&&t}class G extends s["a"]{constructor(){super(),this._onFindReplaceStateChange=this._register(new q["b"]),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return $(this._isRegexOverride,this._isRegex)}get wholeWord(){return $(this._wholeWordOverride,this._wholeWord)}get matchCase(){return $(this._matchCaseOverride,this._matchCase)}get preserveCase(){return $(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){let o={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},n=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,o.matchesPosition=!0,n=!0),this._matchesCount!==t&&(this._matchesCount=t,o.matchesCount=!0,n=!0),"undefined"!==typeof i&&(c["a"].equalsRange(this._currentMatch,i)||(this._currentMatch=i,o.currentMatch=!0,n=!0)),n&&this._onFindReplaceStateChange.fire(o)}change(e,t,i=!0){var o;let n={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;const r=this.isRegex,a=this.wholeWord,d=this.matchCase,l=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,n.searchString=!0,s=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,n.replaceString=!0,s=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,n.isRevealed=!0,s=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,n.isReplaceRevealed=!0,s=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(o=e.searchScope)||void 0===o?void 0:o.every(e=>{var t;return null===(t=this._searchScope)||void 0===t?void 0:t.some(t=>!c["a"].equalsRange(t,e))}))||(this._searchScope=e.searchScope,n.searchScope=!0,s=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,n.loop=!0,s=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,r!==this.isRegex&&(s=!0,n.isRegex=!0),a!==this.wholeWord&&(s=!0,n.wholeWord=!0),d!==this.matchCase&&(s=!0,n.matchCase=!0),l!==this.preserveCase&&(s=!0,n.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(n)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=j}}i("f30f");var z=i("9efa"),Z=i("5b30"),X=i("1bb1"),J=i("c59a"),Q=i("de9c"),Y=i("3f94"),ee=i("1dea"),te=i("99f1"),ie=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const oe=Object(te["b"])("find-selection",ee["b"].selection,o["a"]("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),ne=Object(te["b"])("find-collapsed",ee["b"].chevronRight,o["a"]("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),se=Object(te["b"])("find-expanded",ee["b"].chevronDown,o["a"]("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),re=Object(te["b"])("find-replace",ee["b"].replace,o["a"]("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),ae=Object(te["b"])("find-replace-all",ee["b"].replaceAll,o["a"]("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),de=Object(te["b"])("find-previous-match",ee["b"].arrowUp,o["a"]("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),le=Object(te["b"])("find-next-match",ee["b"].arrowDown,o["a"]("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),he=o["a"]("label.find","Find"),ce=o["a"]("placeholder.find","Find"),ue=o["a"]("label.previousMatchButton","Previous Match"),ge=o["a"]("label.nextMatchButton","Next Match"),pe=o["a"]("label.toggleSelectionFind","Find in Selection"),_e=o["a"]("label.closeButton","Close"),me=o["a"]("label.replace","Replace"),fe=o["a"]("placeholder.replace","Replace"),be=o["a"]("label.replaceButton","Replace"),ve=o["a"]("label.replaceAllButton","Replace All"),Ce=o["a"]("label.toggleReplaceButton","Toggle Replace"),we=o["a"]("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",j),Se=o["a"]("label.matchesLocation","{0} of {1}"),ye=o["a"]("label.noResults","No results"),Re=419,xe=275,Me=xe-54;let Oe=69;const ke=33,De="ctrlEnterReplaceAll.windows.donotask",Ie=Q["f"]?256:2048;class Ne{constructor(e){this.afterLineNumber=e,this.heightInPx=ke,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Le(e,t,i){const o=!!t.match(/\n/);i&&o&&i.selectionStart>0&&e.stopPropagation()}function Pe(e,t,i){const o=!!t.match(/\n/);i&&o&&i.selectionEnd<i.value.length&&e.stopPropagation()}class Ee extends U["a"]{constructor(e,t,i,o,r,a,d,l,h){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=o,this._keybindingService=r,this._contextKeyService=a,this._storageService=l,this._notificationService=h,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(De,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new n["a"](500),this._register(Object(s["i"])(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(e=>{if(e.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(130)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(34)){const e=this._codeEditor.getOption(34).addExtraSpaceOnTop;e&&!this._viewZone&&(this._viewZone=new Ne(0),this._showViewZone()),!e&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>ie(this,void 0,void 0,(function*(){if(this._isVisible){let e=yield this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}})))),this._findInputFocused=I.bindTo(a),this._findFocusTracker=this._register(B["Y"](this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=N.bindTo(a),this._replaceFocusTracker=this._register(B["Y"](this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(34).addExtraSpaceOnTop&&(this._viewZone=new Ne(0)),this._applyTheme(d.getColorTheme()),this._register(d.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(e=>{e.scrollTopChanged?this._layoutViewZone():setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return Ee.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(80)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=B["I"](this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,J["f"])}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=Oe+"px",this._state.matchesCount>=j?this._matchesCount.title=we:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=j&&(t+="+");let i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=r["v"](Se,i,t)}else e=ye;this._matchesCount.appendChild(document.createTextNode(e)),Object(z["a"])(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Oe=Math.max(Oe,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===ye)return""===i?o["a"]("ariaSearchNoResultEmpty","{0} found",e):o["a"]("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const n=o["a"]("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();if(s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1){const e=s.getLineContent(t.startLineNumber);return`${e}, ${n}`}return n}return o["a"]("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(34).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t;break;default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(34).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const o=B["D"](i),n=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=o.left+(n?n.left:0),r=n?n.top:0;if(this._viewZone&&r<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const i=B["G"](this._domNode).left;s>i&&(t=!1);const n=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition()),r=o.left+(n?n.left:0);r>i&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){const t=this._codeEditor.getOption(34).addExtraSpaceOnTop;if(!t)return void this._removeViewZone();if(!this._isVisible)return;const i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones(t=>{i.heightInPx=this._getHeight(),this._viewZoneId=t.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible)return;const t=this._codeEditor.getOption(34).addExtraSpaceOnTop;if(!t)return;void 0===this._viewZone&&(this._viewZone=new Ne(0));const i=this._viewZone;this._codeEditor.changeViewZones(t=>{if(void 0!==this._viewZoneId){const o=this._getHeight();if(o===i.heightInPx)return;let n=o-i.heightInPx;return i.heightInPx=o,t.layoutZone(this._viewZoneId),void(e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+n))}{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;i.heightInPx=o,this._viewZoneId=t.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(m["hb"]),inputActiveOptionBackground:e.getColor(m["gb"]),inputActiveOptionForeground:e.getColor(m["ib"]),inputBackground:e.getColor(m["jb"]),inputForeground:e.getColor(m["lb"]),inputBorder:e.getColor(m["kb"]),inputValidationInfoBackground:e.getColor(m["pb"]),inputValidationInfoForeground:e.getColor(m["rb"]),inputValidationInfoBorder:e.getColor(m["qb"]),inputValidationWarningBackground:e.getColor(m["sb"]),inputValidationWarningForeground:e.getColor(m["ub"]),inputValidationWarningBorder:e.getColor(m["tb"]),inputValidationErrorBackground:e.getColor(m["mb"]),inputValidationErrorForeground:e.getColor(m["ob"]),inputValidationErrorBorder:e.getColor(m["nb"])};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!B["N"](this._domNode))return;const e=this._codeEditor.getLayoutInfo(),t=e.contentWidth;if(t<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,o=e.minimap.minimapWidth;let n=!1,s=!1,r=!1;if(this._resized){let e=B["I"](this._domNode);if(e>Re)return this._domNode.style.maxWidth=i-28-o-15+"px",void(this._replaceInput.width=B["I"](this._findInput.domNode))}if(Re+28+o>=i&&(s=!0),Re+28+o-Oe>=i&&(r=!0),Re+28+o-Oe>=i+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",s),r||n||(this._domNode.style.maxWidth=i-28-o-15+"px"),this._resized){this._findInput.inputBox.layout();let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height=e+"px",!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));const t=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||c["a"].equalsRange(e,t)?null:e}).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3|Ie)?(this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?Le(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?Pe(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3|Ie)?(Q["i"]&&Q["g"]&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(o["a"]("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(De,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?Le(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?Pe(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){const e=!0,t=!0;this._findInput=this._register(new Y["a"](null,this._contextViewProvider,{width:Me,label:he,placeholder:ce,appendCaseSensitiveLabel:this._keybindingLabelFor(T.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(T.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(T.ToggleRegexCommand),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e,"gu"),null}catch(t){return{content:t.message}}},flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(e=>this._onFindInputKeyDown(e))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())})),this._register(this._findInput.onRegexKeyDown(e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(e=>{this._tryUpdateHeight()&&this._showViewZone()})),Q["d"]&&this._register(this._findInput.onMouseDown(e=>this._onFindInputMouseDown(e))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Fe({label:ue+this._keybindingLabelFor(T.PreviousMatchFindAction),icon:de,onTrigger:()=>{this._codeEditor.getAction(T.PreviousMatchFindAction).run().then(void 0,J["f"])}})),this._nextBtn=this._register(new Fe({label:ge+this._keybindingLabelFor(T.NextMatchFindAction),icon:le,onTrigger:()=>{this._codeEditor.getAction(T.NextMatchFindAction).run().then(void 0,J["f"])}}));let i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",i.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Z["a"]({icon:oe,title:pe+this._keybindingLabelFor(T.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Fe({label:_e+this._keybindingLabelFor(T.CloseFindWidgetCommand),icon:te["c"],onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),o.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new Y["b"](null,void 0,{label:me,placeholder:fe,appendPreserveCaseLabel:this._keybindingLabelFor(T.TogglePreserveCaseCommand),history:[],flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(e=>this._onReplaceInputKeyDown(e))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())})),this._replaceBtn=this._register(new Fe({label:be+this._keybindingLabelFor(T.ReplaceOneAction),icon:re,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new Fe({label:ve+this._keybindingLabelFor(T.ReplaceAllAction),icon:ae,onTrigger:()=>{this._controller.replaceAll()}}));let n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",n.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Fe({label:Ce,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=Re+"px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(n),this._resizeSash=new X["b"](this._domNode,this,{orientation:0,size:2}),this._resized=!1;let r=Re;this._register(this._resizeSash.onDidStart(()=>{r=B["I"](this._domNode)})),this._register(this._resizeSash.onDidChange(e=>{this._resized=!0;let t=r+e.startX-e.currentX;if(t<Re)return;const i=parseFloat(B["A"](this._domNode).maxWidth)||0;t>i||(this._domNode.style.width=t+"px",this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const e=B["I"](this._domNode);if(e<Re)return;let t=Re;if(!this._resized||e===Re){const e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=t+"px",this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}Ee.ID="editor.contrib.findWidget";class Fe extends U["a"]{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+f["d"].asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,e=>{this._opts.onTrigger(),e.preventDefault()}),this.onkeydown(this._domNode,e=>{if(e.equals(10)||e.equals(3))return this._opts.onTrigger(),void e.preventDefault();this._opts.onKeyDown&&this._opts.onKeyDown(e)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...f["d"].asClassNameArray(ne)),this._domNode.classList.add(...f["d"].asClassNameArray(se))):(this._domNode.classList.remove(...f["d"].asClassNameArray(se)),this._domNode.classList.add(...f["d"].asClassNameArray(ne)))}}Object(f["f"])((e,t)=>{const i=(e,i)=>{i&&t.addRule(`.monaco-editor ${e} { background-color: ${i}; }`)};i(".findMatch",e.getColor(m["x"])),i(".currentFindMatch",e.getColor(m["v"])),i(".findScope",e.getColor(m["z"]));const o=e.getColor(m["Y"]);i(".find-widget",o);const n=e.getColor(m["Nc"]);n&&t.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${n}; }`);const s=e.getColor(m["y"]);s&&t.addRule(`.monaco-editor .findMatch { border: 1px ${"hc"===e.type?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const r=e.getColor(m["w"]);r&&t.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const a=e.getColor(m["A"]);a&&t.addRule(`.monaco-editor .findScope { border: 1px ${"hc"===e.type?"dashed":"solid"} ${a}; }`);const d=e.getColor(m["h"]);d&&t.addRule(`.monaco-editor .find-widget { border: 1px solid ${d}; }`);const l=e.getColor(m["ab"]);l&&t.addRule(`.monaco-editor .find-widget { color: ${l}; }`);const h=e.getColor(m["cb"]);h&&t.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const c=e.getColor(m["bb"]);if(c)t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${c}; }`);else{const i=e.getColor(m["Z"]);i&&t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${i}; }`)}const u=e.getColor(m["Kc"]);u&&t.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${u} !important;\n\t\t}\n\t`);const g=e.getColor(m["db"]);g&&t.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${g}; }`)});var Ae=i("709e"),Te=i("5726"),je=i("48963"),We=i("312f"),Ve=i("3074"),Be=i("6fea"),He=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Ue=function(e,t){return function(i,o){t(i,o,e)}},Ke=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const qe=524288;function $e(e,t="single",i=!1){if(!e.hasModel())return null;const o=e.getSelection();if("single"===t&&o.startLineNumber===o.endLineNumber||"multiple"===t)if(o.isEmpty()){const t=e.getConfiguredWordAtPosition(o.getStartPosition());if(t&&!1===i)return t.word}else if(e.getModel().getValueLengthInRange(o)<qe)return e.getModel().getValueInRange(o);return null}let Ge=class e extends s["a"]{constructor(e,t,i,o){super(),this._editor=e,this._findWidgetVisible=D.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=o,this._updateHistoryDelayer=new n["a"](500),this._state=this._register(new G),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(34).loop})}))}get editor(){return this._editor}static get(t){return t.getContribution(e.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!I.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=r["t"](e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return Ke(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if("single"===e.seedSearchStringFromSelection){let i=$e(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?t.searchString=r["t"](i):t.searchString=i)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){let i=$e(this._editor,e.seedSearchStringFromSelection);i&&(t.searchString=i)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(t.searchString=e)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some(e=>!e.isEmpty())&&(t.searchScope=e)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new V(this._editor,this._state))}))}start(e){return this._start(e)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return Ke(this,void 0,void 0,(function*(){return this._editor.getOption(34).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(34).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Ge.ID="editor.contrib.findController",Ge=He([Ue(1,O["b"]),Ue(2,Ve["a"]),Ue(3,Te["a"])],Ge);let ze=class extends Ge{constructor(e,t,i,o,n,s,r,a){super(e,i,r,a),this._contextViewService=t,this._keybindingService=o,this._themeService=n,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return Ke(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let o=!1;switch(this._editor.getOption(34).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":const e=!!i&&i.startLineNumber!==i.endLineNumber;o=e;break;default:break}e.updateSearchScope=o,yield t._start.call(this,e),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new Ee(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new K(this._editor,this._state,this._keybindingService,this._themeService))}};ze=He([Ue(1,je["b"]),Ue(2,O["b"]),Ue(3,We["a"]),Ue(4,f["b"]),Ue(5,Be["a"]),Ue(6,Ve["a"]),Ue(7,Te["a"])],ze);const Ze=Object(a["p"])(new a["f"]({id:T.StartFindAction,label:o["a"]("startFindAction","Find"),alias:"Find",precondition:O["a"].or(d["a"].focus,O["a"].has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Ae["b"].MenubarEditMenu,group:"3_find",title:o["a"]({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Ze.addImplementation(0,(e,t,i)=>{const o=Ge.get(t);return!!o&&o.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(34).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop})});class Xe extends a["b"]{constructor(){super({id:T.StartFindWithSelection,label:o["a"]("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Ke(this,void 0,void 0,(function*(){let e=Ge.get(t);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}}class Je extends a["b"]{run(e,t){return Ke(this,void 0,void 0,(function*(){let e=Ge.get(t);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop}),this._run(e))}))}}class Qe extends Je{constructor(){super({id:T.NextMatchFindAction,label:o["a"]("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:d["a"].focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:O["a"].and(d["a"].focus,I),primary:3,weight:100}]})}_run(e){const t=e.moveToNextMatch();return!!t&&(e.editor.pushUndoStop(),!0)}}class Ye extends Je{constructor(){super({id:T.PreviousMatchFindAction,label:o["a"]("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:d["a"].focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:O["a"].and(d["a"].focus,I),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class et extends a["b"]{run(e,t){return Ke(this,void 0,void 0,(function*(){let e=Ge.get(t);if(!e)return;const i="selection"===t.getOption(34).seedSearchStringFromSelection;let o=null;"never"!==t.getOption(34).seedSearchStringFromSelection&&(o=$e(t,"single",i)),o&&e.setSearchString(o),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop}),this._run(e))}))}}class tt extends et{constructor(){super({id:T.NextSelectionMatchFindAction,label:o["a"]("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:d["a"].focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class it extends et{constructor(){super({id:T.PreviousSelectionMatchFindAction,label:o["a"]("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:d["a"].focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const ot=Object(a["p"])(new a["f"]({id:T.StartFindReplaceAction,label:o["a"]("startReplace","Replace"),alias:"Replace",precondition:O["a"].or(d["a"].focus,O["a"].has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Ae["b"].MenubarEditMenu,group:"3_find",title:o["a"]({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));ot.addImplementation(0,(e,t,i)=>{if(!t.hasModel()||t.getOption(80))return!1;const o=Ge.get(t);if(!o)return!1;const n=t.getSelection(),s=o.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&"never"!==t.getOption(34).seedSearchStringFromSelection&&!s,a=s||r?2:1;return o.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(34).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop})}),Object(a["l"])(Ge.ID,ze),Object(a["j"])(Xe),Object(a["j"])(Qe),Object(a["j"])(Ye),Object(a["j"])(tt),Object(a["j"])(it);const nt=a["c"].bindToContribution(Ge.get);Object(a["k"])(new nt({id:T.CloseFindWidgetCommand,precondition:D,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:O["a"].and(d["a"].focus,O["a"].not("isComposing")),primary:9,secondary:[1033]}})),Object(a["k"])(new nt({id:T.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:L.primary,mac:L.mac,win:L.win,linux:L.linux}})),Object(a["k"])(new nt({id:T.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:P.primary,mac:P.mac,win:P.win,linux:P.linux}})),Object(a["k"])(new nt({id:T.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:E.primary,mac:E.mac,win:E.win,linux:E.linux}})),Object(a["k"])(new nt({id:T.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:F.primary,mac:F.mac,win:F.win,linux:F.linux}})),Object(a["k"])(new nt({id:T.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:A.primary,mac:A.mac,win:A.win,linux:A.linux}})),Object(a["k"])(new nt({id:T.ReplaceOneAction,precondition:D,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:3094}})),Object(a["k"])(new nt({id:T.ReplaceOneAction,precondition:D,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:O["a"].and(d["a"].focus,N),primary:3}})),Object(a["k"])(new nt({id:T.ReplaceAllAction,precondition:D,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:2563}})),Object(a["k"])(new nt({id:T.ReplaceAllAction,precondition:D,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:O["a"].and(d["a"].focus,N),primary:void 0,mac:{primary:2051}}})),Object(a["k"])(new nt({id:T.SelectAllMatchesAction,precondition:D,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:d["a"].focus,primary:515}}))},"4ca8":function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));i("c90b");var o=i("05b0"),n=i("ae74"),s=i("c59a"),r=i("f319"),a=i("94fb"),d=i("537c"),l=i("2b64"),h=i("9550"),c=i("e19e"),u=i("71e2"),g=i("e0b6"),p=i("662c"),_=i("09ad"),m=i("c794"),f=i("2733"),b=i("7f63"),v=i("abda"),C=i("a0e2"),w=i("c7be"),S=i("321b"),y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e,t){return function(i,o){t(i,o,e)}};let x=class e{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new u["b"],this.toUnhookForKeyboard=new u["b"],this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let o=new b["a"](e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([e,t])=>{this.startFindDefinitionFromMouse(e,Object(C["o"])(t))})),this.toUnhook.add(o.onExecute(e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},e=>{this.removeLinkDecorations(),Object(s["f"])(e)})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let a=new m["a"](this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Object(n["h"])(t=>this.findDefinition(e,t)),this.previousPromise.then(t=>{if(t&&t.length&&a.validate(this.editor))if(t.length>1)this.addDecoration(new d["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new r["a"]).appendText(o["a"]("multipleResults","Click to show {0} definitions.",t.length)));else{let o=t[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:n}}=t,{startLineNumber:s}=o.range;if(s<1||s>n.getLineCount())return void t.dispose();const a=this.getPreviewValue(n,s,o);let l;l=o.originSelectionRange?d["a"].lift(o.originSelectionRange):new d["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const h=this.modeService.getModeIdByFilepathOrFirstLine(n.uri);this.addDecoration(l,(new r["a"]).appendCodeblock(h||"",a)),t.dispose()})}else this.removeLinkDecorations()}).then(void 0,s["f"])}getPreviewValue(t,i,o){let n=o.targetSelectionRange?o.range:this.getPreviewRangeBasedOnBrackets(t,i);const s=n.endLineNumber-n.startLineNumber;s>=e.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(t,i));const r=this.stripIndentationFromPreviewRange(t,i,n);return r}stripIndentationFromPreviewRange(e,t,i){const o=e.getLineFirstNonWhitespaceColumn(t);let n=o;for(let r=t+1;r<i.endLineNumber;r++){const t=e.getLineFirstNonWhitespaceColumn(r);n=Math.min(n,t)}const s=e.getValueInRange(i).replace(new RegExp(`^\\s{${n-1}}`,"gm"),"").trim();return s}getPreviewRangeBasedOnIndentation(t,i){const o=t.getLineFirstNonWhitespaceColumn(i),n=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let s=i+1;for(;s<n;s++){let e=t.getLineFirstNonWhitespaceColumn(s);if(o===e)break}return new d["a"](i,1,s+1,1)}getPreviewRangeBasedOnBrackets(t,i){const o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES),n=[];let s=!0,r=t.findNextBracket(new v["a"](i,1));while(null!==r){if(0===n.length)n.push(r);else{const e=n[n.length-1];if(e.open[0]===r.open[0]&&e.isOpen&&!r.isOpen?n.pop():n.push(r),0===n.length){if(!s)return new d["a"](i,1,r.range.endLineNumber+1,1);s=!1}}const e=t.getLineMaxColumn(i);let a=r.range.endLineNumber,l=r.range.endColumn;if(e===r.range.endColumn&&(a++,l=1),a>o)return new d["a"](i,1,o+1,1);r=t.findNextBracket(new v["a"](a,l))}return new d["a"](i,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&l["f"].has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?Object(c["b"])(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(e=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(e),o=new f["a"]({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return o.run(e,this.editor)})}isInPeekEditor(e){const t=e.get(S["b"]);return w["b"].inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};x.ID="editor.contrib.gotodefinitionatposition",x.MAX_SOURCE_PREVIEW_LINES=8,x=y([R(1,g["a"]),R(2,a["a"])],x),Object(h["l"])(x.ID,x),Object(p["f"])((e,t)=>{const i=e.getColor(_["q"]);i&&t.addRule(`.monaco-editor .goto-definition-link { color: ${i} !important; }`)})},"58cd":function(e,t,i){"use strict";var o=i("05b0"),n=i("9550"),s=i("e9b4");class r extends n["b"]{constructor(){super({id:"editor.action.fontZoomIn",label:o["a"]("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){s["a"].setZoomLevel(s["a"].getZoomLevel()+1)}}class a extends n["b"]{constructor(){super({id:"editor.action.fontZoomOut",label:o["a"]("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){s["a"].setZoomLevel(s["a"].getZoomLevel()-1)}}class d extends n["b"]{constructor(){super({id:"editor.action.fontZoomReset",label:o["a"]("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){s["a"].setZoomLevel(0)}}Object(n["j"])(r),Object(n["j"])(a),Object(n["j"])(d)},"7383a":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var o=i("1c57"),n=i("65cd"),s=i("c59a"),r=i("e444"),a=i("537c"),d=i("2b64"),l=i("8d7a"),h=i("d1b6");class c{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let i;"string"===typeof e?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,void 0!==t.children.get(i)&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let o=i;for(let n=0;void 0!==t.children.get(o);n++)o=`${i}_${n}`;return o}static empty(e){return 0===e.children.size}}class u extends c{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class g extends c{constructor(e,t,i,o){super(),this.id=e,this.parent=t,this.label=i,this.order=o,this.children=new Map}}class p extends c{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let i=this._keys.for(e,!0),o=p._requests.get(i);if(!o){let t=new n["b"];o={promiseCnt:0,source:t,promise:p._create(e,t.token),model:void 0},p._requests.set(i,o);const s=Date.now();o.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return o.model?Promise.resolve(o.model):(o.promiseCnt+=1,t.onCancellationRequested(()=>{0===--o.promiseCnt&&(o.source.cancel(),p._requests.delete(i))}),new Promise((e,t)=>{o.promise.then(t=>{o.model=t,e(t)},e=>{p._requests.delete(i),t(e)})}))}static _create(e,t){const i=new n["b"](t),r=new p(e.uri),a=d["m"].ordered(e),l=a.map((t,o)=>{var n;let a=c.findId("provider_"+o,r),d=new g(a,r,null!==(n=t.displayName)&&void 0!==n?n:"Unknown Outline Provider",o);return Promise.resolve(t.provideDocumentSymbols(e,i.token)).then(e=>{for(const t of e||[])p._makeOutlineElement(t,d);return d},e=>(Object(s["g"])(e),d)).then(e=>{c.empty(e)?e.remove():r._groups.set(a,e)})}),h=d["m"].onDidChange(()=>{const t=d["m"].ordered(e);Object(o["h"])(t,a)||i.cancel()});return Promise.all(l).then(()=>i.token.isCancellationRequested&&!t.isCancellationRequested?p._create(e,t):r._compact()).finally(()=>{h.dispose()})}static _makeOutlineElement(e,t){let i=c.findId(e,t),o=new u(i,t,e);if(e.children)for(const n of e.children)p._makeOutlineElement(n,o);t.children.set(o.id,o)}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{let e=l["a"].first(this._groups.values());for(let[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof u?e.push(t.symbol):e.push(...l["a"].map(t.children.values(),e=>e.symbol));return e.sort((e,t)=>a["a"].compareRangesUsingStarts(e.range,t.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return p._flattenDocumentSymbols(t,e,""),t.sort((e,t)=>a["a"].compareRangesUsingStarts(e.range,t.range))}static _flattenDocumentSymbols(e,t,i){for(const o of t)e.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||i,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&p._flattenDocumentSymbols(e,o.children,o.name)}}p._requestDurations=new h["b"](d["m"],350),p._requests=new r["a"](9,.75),p._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(e,t){return`${e.id}/${t?e.getVersionId():""}/${this._hash(d["m"].all(e))}`}_hash(e){let t="";for(const i of e){let e=this._data.get(i);"undefined"===typeof e&&(e=this._counter++,this._data.set(i,e)),t+=e}return t}}},"7dc1":function(e,t,i){},"7e1f":function(e,t,i){},"7f5b":function(e,t,i){"use strict";var o=i("aac4"),n=i("7cfc"),s=i("65cd"),r=i("e0b6"),a=i("7383a"),d=i("646b"),l=i("a0e2"),h=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function c(e,t,i){return h(this,void 0,void 0,(function*(){const o=yield a["a"].create(e,i);return t?o.asListOfDocumentSymbols():o.getTopLevelSymbols()}))}d["a"].registerCommand("_executeDocumentSymbolProvider",(function(e,...t){return h(this,void 0,void 0,(function*(){const[i]=t;Object(l["c"])(o["a"].isUri(i));const a=e.get(n["a"]).getModel(i);if(a)return c(a,!1,s["a"].None);const d=yield e.get(r["a"]).createModelReference(i);try{return yield c(d.object.textEditorModel,!1,s["a"].None)}finally{d.dispose()}}))}))},"7f63":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var o=i("71e2"),n=i("5ee7"),s=i("de9c");function r(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.hasTriggerModifier=r(e.event,t.triggerModifier),this.hasSideBySideModifier=r(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=r(e,t.triggerModifier)}}class l{constructor(e,t,i,o){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=o}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function h(e){return"altKey"===e?s["f"]?new l(57,"metaKey",6,"altKey"):new l(5,"ctrlKey",6,"altKey"):s["f"]?new l(6,"altKey",57,"metaKey"):new l(6,"altKey",5,"ctrlKey")}class c extends o["a"]{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new n["b"]),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new n["b"]),this.onExecute=this._onExecute.event,this._onCancel=this._register(new n["b"]),this.onCancel=this._onCancel.event,this._editor=e,this._opts=h(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(e=>{if(e.hasChanged(69)){const e=h(this._editor.getOption(69));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(e=>this._onEditorMouseMove(new a(e,this._opts)))),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(new a(e,this._opts)))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(new a(e,this._opts)))),this._register(this._editor.onKeyDown(e=>this._onEditorKeyDown(new d(e,this._opts)))),this._register(this._editor.onKeyUp(e=>this._onEditorKeyUp(new d(e,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(e=>this._onDidChangeCursorSelection(e))),this._register(this._editor.onDidChangeModel(e=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},"872b":function(e,t,i){"use strict";i.d(t,"a",(function(){return oe})),i.d(t,"b",(function(){return se}));var o=i("05b0"),n=i("71e2"),s=i("321b"),r=i("abda"),a=i("537c"),d=i("9550"),l=i("a55e"),h=(i("8eae"),i("9ffb")),c=i("d5e0"),u=i("09ad"),g=i("662c"),p=i("85cf"),_=i("92e8"),m=i("e3b4"),f=i("1c57"),b=i("5ee7"),v=i("c7be"),C=i("1907"),w=i("a0c4"),S=i("9cfa"),y=i("709e"),R=i("a39f"),x=i("2279"),M=i("2dd7"),O=i("a25e"),k=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},D=function(e,t){return function(i,o){t(i,o,e)}};class I{constructor(e,t,i,o,s){this._openerService=o,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new n["b"],this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(h["o"](this._relatedBlock,"click",e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)})),this._scrollable=new _["b"](r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(e=>{r.style.left=`-${e.scrollLeft}px`,r.style.top=`-${e.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Object(n["f"])(this._disposables)}update(e){const{source:t,message:i,relatedInformation:o,code:n}=e;let s=((null===t||void 0===t?void 0:t.length)||0)+"()".length;n&&(s+="string"===typeof n?n.length:n.value.length);const r=Object(M["Q"])(i);this._lines=r.length,this._longestLineLength=0;for(const h of r)this._longestLineLength=Math.max(h.length+s,this._longestLineLength);h["t"](this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const h of r)a=document.createElement("div"),a.innerText=h,""===h&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||n){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(n)if("string"===typeof n){const t=document.createElement("span");t.innerText=`(${n})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=h["a"]("a.code-link"),this._codeLink.setAttribute("href",""+n.target.toString()),this._codeLink.onclick=e=>{this._openerService.open(n.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};const t=h["q"](this._codeLink,h["a"]("span"));t.innerText=n.value,e.appendChild(this._codeLink)}}if(h["t"](this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Object(f["n"])(o)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=Math.floor(.66*this._editor.getOption(58))+"px",this._lines+=1;for(const t of o){let i=document.createElement("div"),o=document.createElement("a");o.classList.add("filename"),o.innerText=`${Object(m["a"])(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,o.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(o,t);let n=document.createElement("span");n.innerText=t.message,i.appendChild(o),i.appendChild(n),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(42),l=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),c=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:l,scrollHeight:c})}layout(e,t){this._scrollable.getDomNode().style.height=e+"px",this._scrollable.getDomNode().style.width=t+"px",this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case c["c"].Error:t=o["a"]("Error","Error");break;case c["c"].Warning:t=o["a"]("Warning","Warning");break;case c["c"].Info:t=o["a"]("Info","Info");break;case c["c"].Hint:t=o["a"]("Hint","Hint");break}let i=o["a"]("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){const t=n.getLineContent(e.startLineNumber);i=`${t}, ${i}`}return i}}let N=class e extends v["c"]{constructor(e,t,i,o,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=i,this._menuService=o,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new n["b"],this._onDidSelectRelatedInformation=new b["b"],this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=c["c"].Warning,this._backgroundColor=p["a"].white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(B);let t=F,i=A;this._severity===c["c"].Warning?(t=T,i=j):this._severity===c["c"].Info&&(t=W,i=V);const o=e.getColor(t),n=e.getColor(i);this.style({arrowColor:o,frameColor:o,headerBackgroundColor:n,primaryHeadingColor:e.getColor(v["q"]),secondaryHeadingColor:e.getColor(v["r"])})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e=>this.editor.focus()));const i=[],o=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);Object(R["c"])(o,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),o.dispose()}_fillTitleIcon(e){this._icon=h["q"](e,h["a"](""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new I(this._container,this.editor,e=>this._onDidSelectRelatedInformation.fire(e),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=a["a"].lift(e);const s=this.editor.getPosition();let r=s&&n.containsPosition(s)?s:n.getStartPosition();super.show(r,this.computeRequiredHeight());const d=this.editor.getModel();if(d){const e=i>1?o["a"]("problems","{0} of {1} problems",t,i):o["a"]("change","{0} of {1} problem",t,i);this.setTitle(Object(C["b"])(d.uri),e)}this._icon.className="codicon "+w["a"].className(c["c"].toSeverity(this._severity)),this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=e+"px"}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};N.TitleMenu=new y["b"]("gotoErrorTitleMenu"),N=k([D(1,g["b"]),D(2,S["a"]),D(3,y["a"]),D(4,x["a"]),D(5,s["b"]),D(6,O["a"])],N);let L=Object(u["hc"])(u["u"],u["t"]),P=Object(u["hc"])(u["X"],u["W"]),E=Object(u["hc"])(u["M"],u["L"]);const F=Object(u["wc"])("editorMarkerNavigationError.background",{dark:L,light:L,hc:u["h"]},o["a"]("editorMarkerNavigationError","Editor marker navigation widget error color.")),A=Object(u["wc"])("editorMarkerNavigationError.headerBackground",{dark:Object(u["Lc"])(F,.1),light:Object(u["Lc"])(F,.1),hc:null},o["a"]("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),T=Object(u["wc"])("editorMarkerNavigationWarning.background",{dark:P,light:P,hc:u["h"]},o["a"]("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),j=Object(u["wc"])("editorMarkerNavigationWarning.headerBackground",{dark:Object(u["Lc"])(T,.1),light:Object(u["Lc"])(T,.1),hc:"#0C141F"},o["a"]("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),W=Object(u["wc"])("editorMarkerNavigationInfo.background",{dark:E,light:E,hc:u["h"]},o["a"]("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),V=Object(u["wc"])("editorMarkerNavigationInfo.headerBackground",{dark:Object(u["Lc"])(W,.1),light:Object(u["Lc"])(W,.1),hc:null},o["a"]("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),B=Object(u["wc"])("editorMarkerNavigation.background",{dark:u["r"],light:u["r"],hc:u["r"]},o["a"]("editorMarkerNavigationBackground","Editor marker navigation widget background."));Object(g["f"])((e,t)=>{const i=e.getColor(u["Jc"]);i&&t.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${i}; }`);const o=e.getColor(u["Ic"]);o&&t.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${o}; }`)});var H=i("38cf"),U=i("1dea"),K=i("aac4"),q=i("af33"),$=i("bc86"),G=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},z=function(e,t){return function(i,o){t(i,o,e)}};class Z{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let X=class e{constructor(t,i){this._markerService=i,this._onDidChange=new b["b"],this.onDidChange=this._onDidChange.event,this._dispoables=new n["b"],this._markers=[],this._nextIdx=-1,K["a"].isUri(t)?this._resourceFilter=e=>e.toString()===t.toString():t&&(this._resourceFilter=t);const o=()=>{this._markers=this._markerService.read({resource:K["a"].isUri(t)?t:void 0,severities:c["c"].Error|c["c"].Warning|c["c"].Info}),"function"===typeof t&&(this._markers=this._markers.filter(e=>this._resourceFilter(e.resource))),this._markers.sort(e._compareMarker)};o(),this._dispoables.add(i.onMarkerChanged(e=>{this._resourceFilter&&!e.some(e=>this._resourceFilter(e))||(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new Z(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let o=!1,n=this._markers.findIndex(t=>t.resource.toString()===e.uri.toString());n<0&&(n=Object(f["d"])(this._markers,{resource:e.uri},(e,t)=>Object(M["f"])(e.resource.toString(),t.resource.toString())),n<0&&(n=~n));for(let s=n;s<this._markers.length;s++){let i=a["a"].lift(this._markers[s]);if(i.isEmpty()){const t=e.getWordAtPosition(i.getStartPosition());t&&(i=new a["a"](i.startLineNumber,t.startColumn,i.startLineNumber,t.endColumn))}if(t&&(i.containsPosition(t)||t.isBeforeOrEqual(i.getStartPosition()))){this._nextIdx=s,o=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}o||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let o=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),o!==this._nextIdx}find(e,t){let i=this._markers.findIndex(t=>t.resource.toString()===e.toString());if(!(i<0))for(;i<this._markers.length;i++)if(a["a"].containsPosition(this._markers[i],t))return new Z(this._markers[i],i+1,this._markers.length)}static _compareMarker(e,t){let i=Object(M["f"])(e.resource.toString(),t.resource.toString());return 0===i&&(i=c["c"].compare(e.severity,t.severity)),0===i&&(i=a["a"].compareRangesUsingStarts(e,t)),i}};X=G([z(1,c["b"])],X);const J=Object(x["c"])("IMarkerNavigationService");let Q=class{constructor(e){this._markerService=e,this._provider=new $["a"]}getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new X(e,this._markerService)}};Q=G([z(0,c["b"])],Q),Object(q["b"])(J,Q,!0);var Y=i("99f1"),ee=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},te=function(e,t){return function(i,o){t(i,o,e)}},ie=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let oe=class e{constructor(e,t,i,o,s){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=o,this._instantiationService=s,this._sessionDispoables=new n["b"],this._editor=e,this._widgetVisible=le.bindTo(this._contextKeyService)}static get(t){return t.getContribution(e.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(N,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e=>{var t,i,o;(null===(t=this._model)||void 0===t?void 0:t.selected)&&a["a"].containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(o=this._model)||void 0===o||o.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:a["a"].lift(e).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new r["a"](e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){return ie(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const o=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(o.move(t,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const n=yield this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);n&&(e.get(n).close(),e.get(n).nagivate(t,i))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}))}};oe.ID="editor.contrib.markerController",oe=ee([te(1,J),te(2,s["b"]),te(3,H["a"]),te(4,x["a"])],oe);class ne extends d["b"]{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){return ie(this,void 0,void 0,(function*(){t.hasModel()&&oe.get(t).nagivate(this._next,this._multiFile)}))}}class se extends ne{constructor(){super(!0,!1,{id:se.ID,label:se.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:578,weight:100},menuOpts:{menuId:N.TitleMenu,title:se.LABEL,icon:Object(Y["b"])("marker-navigation-next",U["b"].arrowDown,o["a"]("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}se.ID="editor.action.marker.next",se.LABEL=o["a"]("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class re extends ne{constructor(){super(!1,!1,{id:re.ID,label:re.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:1602,weight:100},menuOpts:{menuId:N.TitleMenu,title:se.LABEL,icon:Object(Y["b"])("marker-navigation-previous",U["b"].arrowUp,o["a"]("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}re.ID="editor.action.marker.prev",re.LABEL=o["a"]("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class ae extends ne{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:o["a"]("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:66,weight:100},menuOpts:{menuId:y["b"].MenubarGoMenu,title:o["a"]({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class de extends ne{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:o["a"]("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:1090,weight:100},menuOpts:{menuId:y["b"].MenubarGoMenu,title:o["a"]({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Object(d["l"])(oe.ID,oe),Object(d["j"])(se),Object(d["j"])(re),Object(d["j"])(ae),Object(d["j"])(de);const le=new s["c"]("markersNavigationVisible",!1),he=d["c"].bindToContribution(oe.get);Object(d["k"])(new he({id:"closeMarkersNavigation",precondition:le,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:l["a"].focus,primary:9,secondary:[1033]}}))},"8eae":function(e,t,i){},"98a4":function(e,t,i){"use strict";i.d(t,"b",(function(){return x})),i.d(t,"a",(function(){return O})),i.d(t,"c",(function(){return k})),i.d(t,"d",(function(){return I})),i.d(t,"e",(function(){return E}));var o=i("9efa"),n=i("1c57"),s=i("65cd"),r=i("c59a"),a=i("aac4"),d=i("c794"),l=i("0d65"),h=i("abda"),c=i("537c"),u=i("a24f"),g=i("2b64"),p=i("1f37"),_=i("7cfc"),m=i("1da3"),f=i("05b0"),b=i("7055"),v=i("2279"),C=i("bc86"),w=i("646b"),S=i("a0e2"),y=i("8d7a"),R=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function x(e){if(e=e.filter(e=>e.range),!e.length)return;let{range:t}=e[0];for(let o=1;o<e.length;o++)t=c["a"].plusRange(t,e[o].range);const{startLineNumber:i,endLineNumber:n}=t;i===n?1===e.length?Object(o["a"])(f["a"]("hint11","Made 1 formatting edit on line {0}",i)):Object(o["a"])(f["a"]("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?Object(o["a"])(f["a"]("hint1n","Made 1 formatting edit between lines {0} and {1}",i,n)):Object(o["a"])(f["a"]("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,n))}function M(e){const t=[],i=new Set,o=g["g"].ordered(e);for(const s of o)t.push(s),s.extensionId&&i.add(b["a"].toKey(s.extensionId));const n=g["j"].ordered(e);for(const s of n){if(s.extensionId){if(i.has(b["a"].toKey(s.extensionId)))continue;i.add(b["a"].toKey(s.extensionId))}t.push({displayName:s.displayName,extensionId:s.extensionId,provideDocumentFormattingEdits(e,t,i){return s.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)}})}return t}class O{static setFormatterSelector(e){const t=O._selectors.unshift(e);return{dispose:t}}static select(e,t,i){return R(this,void 0,void 0,(function*(){if(0===e.length)return;const o=y["a"].first(O._selectors);return o?yield o(e,t,i):void 0}))}}function k(e,t,i,o,n,s){return R(this,void 0,void 0,(function*(){const r=e.get(v["a"]),a=Object(l["b"])(t)?t.getModel():t,d=g["j"].ordered(a),h=yield O.select(d,a,o);h&&(n.report(h),yield r.invokeFunction(D,h,t,i,s))}))}function D(e,t,i,o,s){return R(this,void 0,void 0,(function*(){const r=e.get(p["a"]);let a,h;Object(l["b"])(i)?(a=i.getModel(),h=new d["b"](i,5,void 0,s)):(a=i,h=new d["d"](i,s));let g=[],_=0;for(let e of Object(n["c"])(o).sort(c["a"].compareRangesUsingStarts))_>0&&c["a"].areIntersectingOrTouching(g[_-1],e)?g[_-1]=c["a"].fromPositions(g[_-1].getStartPosition(),e.getEndPosition()):_=g.push(e);const f=e=>R(this,void 0,void 0,(function*(){return(yield t.provideDocumentRangeFormattingEdits(a,e,a.getFormattingOptions(),h.token))||[]})),b=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce((e,t)=>c["a"].plusRange(e,t.range),e[0].range);if(!t.some(e=>c["a"].intersectRanges(i,e.range)))return!1;for(let o of e)for(let e of t)if(c["a"].intersectRanges(o.range,e.range))return!0;return!1},v=[],C=[];try{for(let e of g){if(h.token.isCancellationRequested)return!0;C.push(yield f(e))}for(let e=0;e<g.length;++e)for(let t=e+1;t<g.length;++t){if(h.token.isCancellationRequested)return!0;if(b(C[e],C[t])){const i=c["a"].plusRange(g[e],g[t]),o=yield f(i);g.splice(t,1),g.splice(e,1),g.push(i),C.splice(t,1),C.splice(e,1),C.push(o),e=0,t=0}}for(let e of C){if(h.token.isCancellationRequested)return!0;const t=yield r.computeMoreMinimalEdits(a.uri,e);t&&v.push(...t)}}finally{h.dispose()}if(0===v.length)return!1;if(Object(l["b"])(i))m["a"].execute(i,v,!0),x(v),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=v,t=new u["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);a.pushEditOperations([t],v.map(e=>({text:e.text,range:c["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(c["a"].areIntersectingOrTouching(i,t))return[new u["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function I(e,t,i,o,n){return R(this,void 0,void 0,(function*(){const s=e.get(v["a"]),r=Object(l["b"])(t)?t.getModel():t,a=M(r),d=yield O.select(a,r,i);d&&(o.report(d),yield s.invokeFunction(N,d,t,i,n))}))}function N(e,t,i,o,n){return R(this,void 0,void 0,(function*(){const s=e.get(p["a"]);let r,a,h;Object(l["b"])(i)?(r=i.getModel(),a=new d["b"](i,5,void 0,n)):(r=i,a=new d["d"](i,n));try{const e=yield t.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(h=yield s.computeMoreMinimalEdits(r.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!h||0===h.length)return!1;if(Object(l["b"])(i))m["a"].execute(i,h,2!==o),2!==o&&(x(h),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=h,t=new u["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);r.pushEditOperations([t],h.map(e=>({text:e.text,range:c["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(c["a"].areIntersectingOrTouching(i,t))return[new u["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function L(e,t,i,o,s){return R(this,void 0,void 0,(function*(){const a=g["j"].ordered(t);for(const d of a){let a=yield Promise.resolve(d.provideDocumentRangeFormattingEdits(t,i,o,s)).catch(r["g"]);if(Object(n["n"])(a))return yield e.computeMoreMinimalEdits(t.uri,a)}}))}function P(e,t,i,o){return R(this,void 0,void 0,(function*(){const s=M(t);for(const a of s){let s=yield Promise.resolve(a.provideDocumentFormattingEdits(t,i,o)).catch(r["g"]);if(Object(n["n"])(s))return yield e.computeMoreMinimalEdits(t.uri,s)}}))}function E(e,t,i,o,n){const a=g["x"].ordered(t);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(o)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,o,n,s["a"].None)).catch(r["g"]).then(i=>e.computeMoreMinimalEdits(t.uri,i))}O._selectors=new C["a"],w["a"].registerCommand("_executeFormatRangeProvider",(function(e,...t){const[i,o,n]=t;Object(S["c"])(a["a"].isUri(i)),Object(S["c"])(c["a"].isIRange(o));const d=e.get(_["a"]).getModel(i);if(!d)throw Object(r["c"])("resource");return L(e.get(p["a"]),d,c["a"].lift(o),n,s["a"].None)})),w["a"].registerCommand("_executeFormatDocumentProvider",(function(e,...t){const[i,o]=t;Object(S["c"])(a["a"].isUri(i));const n=e.get(_["a"]).getModel(i);if(!n)throw Object(r["c"])("resource");return P(e.get(p["a"]),n,o,s["a"].None)})),w["a"].registerCommand("_executeFormatOnTypeProvider",(function(e,...t){const[i,o,n,s]=t;Object(S["c"])(a["a"].isUri(i)),Object(S["c"])(h["a"].isIPosition(o)),Object(S["c"])("string"===typeof n);const d=e.get(_["a"]).getModel(i);if(!d)throw Object(r["c"])("resource");return E(e.get(p["a"]),d,h["a"].lift(o),n,s)}))},"99fc":function(e,t,i){"use strict";i("0946");var o=i("71e2"),n=i("de9c"),s=i("9550"),r=i("abda"),a=i("537c"),d=i("a24f");class l{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){let i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new a["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new d["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new d["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}}var h=i("9afb");function c(e){return n["f"]?e.altKey:e.ctrlKey}class u extends o["a"]{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._register(this._editor.onMouseDrag(e=>this._onEditorMouseDrag(e))),this._register(this._editor.onMouseDrop(e=>this._onEditorMouseDrop(e))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(e=>this.onEditorKeyDown(e))),this._register(this._editor.onKeyUp(e=>this.onEditorKeyUp(e))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(30)&&!this._editor.getOption(17)&&(c(e)&&(this._modifierPressed=!0),this._mouseDown&&c(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(30)&&!this._editor.getOption(17)&&(c(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===u.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(null===this._dragSelection){const e=this._editor.getSelections()||[];let i=e.filter(e=>t.position&&e.containsPosition(t.position));if(1!==i.length)return;this._dragSelection=i[0]}c(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new r["a"](e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){let e=this._editor.getSelection();if(e){const{selectionStartLineNumber:o,selectionStartColumn:n}=e;i=[new d["a"](o,n,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(e=>e.containsPosition(t)?new d["a"](t.lineNumber,t.column,t.lineNumber,t.column):e);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(c(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(u.ID,new l(this._dragSelection,t,c(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new a["a"](e.lineNumber,e.column,e.lineNumber,e.column),options:u._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u.ID="editor.contrib.dragAndDrop",u.TRIGGER_KEY_VALUE=n["f"]?6:5,u._DECORATION_OPTIONS=h["a"].register({description:"dnd-target",className:"dnd-target"}),Object(s["l"])(u.ID,u)},a025:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return n}));class o{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class n{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}},c90b:function(e,t,i){},cf2d:function(e,t,i){"use strict";i.d(t,"a",(function(){return ye}));var o=i("05b0"),n=i("11b8"),s=i("71e2"),r=i("9550"),a=i("537c"),d=i("a55e"),l=i("94fb"),h=i("9ffb"),c=i("abda"),u=i("9afb"),g=i("2b64"),p=i("ae74"),_=i("c59a");class m{constructor(e,t,i,o,n){this._computer=e,this._state=0,this._hoverTime=n,this._firstWaitScheduler=new p["e"](()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new p["e"](()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new p["e"](()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=o}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Object(p["h"])(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Object(_["f"])(e)}_onProgress(e){this._progressCallback(e)}start(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}var f=i("1c57"),b=i("33a3"),v=i("96fc"),C=i("d5e0"),w=i("1907"),S=i("dd21"),y=i("9cfa"),R=i("872b"),x=i("6acd"),M=i("ff3b"),O=i("36ce"),k=i("6115"),D=i("662c"),I=i("09ad"),N=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},L=function(e,t){return function(i,o){t(i,o,e)}};const P=h["a"];class E{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const F={type:1,filter:{include:O["b"].QuickFix}};let A=class{constructor(e,t,i,o){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=o,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,n=i.getLineMaxColumn(o),s=[];for(const r of t){const t=r.range.startLineNumber===o?r.range.startColumn:1,d=r.range.endLineNumber===o?r.range.endColumn:n,l=this._markerDecorationsService.getMarker(i.uri,r);if(!l)continue;const h=new a["a"](e.range.startLineNumber,t,e.range.startLineNumber,d);s.push(new E(this,h,l))}return s}renderHoverParts(e,t,i){if(!e.length)return s["a"].None;const o=new s["b"];e.forEach(e=>t.appendChild(this.renderMarkerHover(e,o)));const n=1===e.length?e[0]:e.sort((e,t)=>C["c"].compare(e.marker.severity,t.marker.severity))[0];return this.renderMarkerStatusbar(n,i,o),o}renderMarkerHover(e,t){const i=P("div.hover-row"),o=h["q"](i,P("div.marker.hover-contents")),{source:n,message:s,code:r,relatedInformation:a}=e.marker;this._editor.applyFontInfo(o);const d=h["q"](o,P("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=s,n||r)if(r&&"string"!==typeof r){const e=P("span");if(n){const t=h["q"](e,P("span"));t.innerText=n}const i=h["q"](e,P("a.code-link"));i.setAttribute("href",r.target.toString()),t.add(h["i"](i,"click",e=>{this._openerService.open(r.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}));const s=h["q"](i,P("span"));s.innerText=r.value;const a=h["q"](o,e);a.style.opacity="0.6",a.style.paddingLeft="6px"}else{const e=h["q"](o,P("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=n&&r?`${n}(${r})`:n||`(${r})`}if(Object(f["n"])(a))for(const{message:l,resource:c,startLineNumber:u,startColumn:g}of a){const e=h["q"](o,P("div"));e.style.marginTop="8px";const i=h["q"](e,P("a"));i.innerText=`${Object(w["b"])(c)}(${u}, ${g}): `,i.style.cursor="pointer",t.add(h["i"](i,"click",e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(c,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:u,startColumn:g}}}).catch(_["f"])}));const n=h["q"](e,P("span"));n.innerText=l,this._editor.applyFontInfo(n)}return i}renderMarkerStatusbar(e,t,i){if(e.marker.severity!==C["c"].Error&&e.marker.severity!==C["c"].Warning&&e.marker.severity!==C["c"].Info||t.addAction({label:o["a"]("view problem","View Problem"),commandId:R["b"].ID,run:()=>{this._hover.hide(),R["a"].get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const n=t.append(P("div"));this.recentMarkerCodeActionsInfo&&(C["a"].makeKey(this.recentMarkerCodeActionsInfo.marker)===C["a"].makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=o["a"]("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?s["a"].None:i.add(Object(p["i"])(()=>n.textContent=o["a"]("checkingForQuickFixes","Checking for quick fixes..."),200));n.textContent||(n.textContent=String.fromCharCode(160));const a=this.getCodeActions(e.marker);i.add(Object(s["i"])(()=>a.cancel())),a.then(a=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return a.dispose(),void(n.textContent=o["a"]("noQuickFixes","No quick fixes available"));n.style.display="none";let d=!1;i.add(Object(s["i"])(()=>{d||a.dispose()})),t.addAction({label:o["a"]("quick fixes","Quick Fix..."),commandId:M["e"].Id,run:e=>{d=!0;const t=M["f"].get(this._editor),i=h["D"](e);this._hover.hide(),t.showCodeActions(F,a,{x:i.left+6,y:i.top+i.height+6})}})},_["f"])}}getCodeActions(e){return Object(p["h"])(t=>Object(x["d"])(this._editor.getModel(),new a["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),F,k["b"].None,t))}};A=N([L(2,S["a"]),L(3,y["a"])],A),Object(D["f"])((e,t)=>{const i=e.getColor(I["Jc"]);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${i}; }`);const o=e.getColor(I["Ic"]);o&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${o}; }`)});var T=i("2279"),j=i("f319"),W=i("d3cf"),V=i("65cd");function B(e,t,i){const o=g["p"].ordered(e),n=o.map(o=>Promise.resolve(o.provideHover(e,t,i)).then(e=>e&&H(e)?e:void 0,e=>{Object(_["g"])(e)}));return Promise.all(n).then(f["e"])}function H(e){const t="undefined"!==typeof e.range,i="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&i}Object(r["n"])("_executeHoverProvider",(e,t)=>B(e,t,V["a"].None));var U=i("d9c9"),K=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},q=function(e,t){return function(i,o){t(i,o,e)}},$=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const G=h["a"];class z{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Z=class{constructor(e,t,i,o,n){this._editor=e,this._hover=t,this._modeService=i,this._openerService=o,this._configurationService=n}createLoadingMessage(e){return new z(this,e.range,[(new j["a"]).appendText(o["a"]("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,s=i.getLineMaxColumn(n),r=[];for(const o of t){const t=o.range.startLineNumber===n?o.range.startColumn:1,i=o.range.endLineNumber===n?o.range.endColumn:s,d=o.options.hoverMessage;if(!d||Object(j["b"])(d))continue;const l=new a["a"](e.range.startLineNumber,t,e.range.startLineNumber,i);r.push(new z(this,l,Object(f["c"])(d)))}const d=this._editor.getModel().getLineLength(n),l=this._configurationService.getValue("editor.maxTokenizationLineLength");return"number"===typeof l&&d>=l&&r.push(new z(this,new a["a"](n,1,n,d+1),[{value:o["a"]("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),r}computeAsync(e,t,i){return $(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1!==e.type)return Promise.resolve([]);const t=this._editor.getModel();if(!g["p"].has(t))return Promise.resolve([]);const o=yield B(t,new c["a"](e.range.startLineNumber,e.range.startColumn),i),n=[];for(const i of o){if(Object(j["b"])(i.contents))continue;const t=i.range?a["a"].lift(i.range):e.range;n.push(new z(this,t,i.contents))}return n}))}renderHoverParts(e,t,i){const o=new s["b"];for(const n of e)for(const e of n.contents){if(Object(j["b"])(e))continue;const i=G("div.hover-row.markdown-hover"),n=h["q"](i,G("div.hover-contents")),s=o.add(new W["a"]({editor:this._editor},this._modeService,this._openerService));o.add(s.onDidRenderAsync(()=>{n.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const r=o.add(s.render(e));n.appendChild(r.element),t.appendChild(i)}return o}};Z=K([q(2,l["a"]),q(3,y["a"]),q(4,U["a"])],Z);var X=i("a125"),J=i("a4db"),Q=i("5cfc"),Y=i("85cf"),ee=i("b848"),te=i("f102"),ie=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},oe=function(e,t){return function(i,o){t(i,o,e)}},ne=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class se{constructor(e,t,i,o){this.owner=e,this.range=t,this.model=i,this.provider=o,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let re=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return ne(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=Q["a"].get(this._editor);for(const i of t){const t=e.getColorData(i.range.getStartPosition());if(t){const e=yield this._createColorHover(this._editor.getModel(),t.colorInfo,t.provider);return[e]}}return[]}))}_createColorHover(e,t,i){return ne(this,void 0,void 0,(function*(){const o=e.getValueInRange(t.range),{red:n,green:s,blue:r,alpha:d}=t.color,l=new Y["c"](Math.round(255*n),Math.round(255*s),Math.round(255*r),d),h=new Y["a"](l),c=yield Object(J["a"])(e,t,i,V["a"].None),u=new ee["a"](h,[],0);return u.colorPresentations=c||[],u.guessColorPresentation(h,o),new se(this,a["a"].lift(t.range),u,i)}))}renderHoverParts(e,t,i){if(0===e.length||!this._editor.hasModel())return s["a"].None;const o=new s["b"],n=e[0],r=this._editor.getModel(),d=n.model,l=o.add(new te["a"](t,d,this._editor.getOption(128),this._themeService));let h=new a["a"](n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn);const c=()=>{let e,t;if(d.presentation.textEdit){e=[d.presentation.textEdit],t=new a["a"](d.presentation.textEdit.range.startLineNumber,d.presentation.textEdit.range.startColumn,d.presentation.textEdit.range.endLineNumber,d.presentation.textEdit.range.endColumn);const i=this._editor.getModel()._setTrackedRange(null,t,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e),t=this._editor.getModel()._getTrackedRange(i)||t}else e=[{identifier:null,range:h,text:d.presentation.label,forceMoveMarkers:!1}],t=h.setEndPosition(h.endLineNumber,h.startColumn+d.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e);d.presentation.additionalTextEdits&&(e=[...d.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",e),this._hover.hide()),this._editor.pushUndoStop(),h=t},u=e=>Object(J["a"])(r,{range:h,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},n.provider,V["a"].None).then(e=>{d.colorPresentations=e||[]});return o.add(d.onColorFlushed(e=>{u(e).then(c)})),o.add(d.onDidChangeColor(u)),this._hover.setColorPicker(l),o}};re=ie([oe(2,D["b"])],re);var ae=i("312f"),de=i("a025"),le=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,o){t(i,o,e)}},ce=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const ue=h["a"];let ge=class extends s["a"]{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=ue("div.hover-row.status-bar"),this.actionsElement=h["q"](this.hoverElement,ue("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(v["a"].render(this.actionsElement,e,i))}append(e){const t=h["q"](this.actionsElement,e);return this._hasContent=!0,t}};ge=le([he(0,ae["a"])],ge);class pe{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(1!==t.type)return[];const i=e.getModel(),o=t.range.startLineNumber,n=i.getLineMaxColumn(o);return e.getLineDecorations(o).filter(e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===o?e.range.startColumn:1,s=e.range.endLineNumber===o?e.range.endColumn:n;return!(i>t.range.startColumn||t.range.endColumn>s)})}computeAsync(e){return ce(this,void 0,void 0,(function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=pe._getLineDecorations(this._editor,t),o=yield Promise.all(this._participants.map(o=>this._computeAsync(o,i,t,e)));return Object(f["k"])(o)}))}_computeAsync(e,t,i,o){return ce(this,void 0,void 0,(function*(){return e.computeAsync?e.computeAsync(i,t,o):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=pe._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Object(f["e"])(t)}onResult(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}return this._result.slice(0)}}let _e=class e extends b["a"]{constructor(t,i,o,n){super(),this._hoverVisibleKey=i,this._keybindingService=n,this.allowEditorOverflow=!0,this._participants=[o.createInstance(re,t,this),o.createInstance(Z,t,this),o.createInstance(X["a"],t,this),o.createInstance(A,t,this)],this._hover=this._register(new v["b"]),this._id=e.ID,this._editor=t,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this.onkeydown(this._hover.containerDomNode,e=>{e.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(42)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new pe(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._hoverOperation=new m(this._computer,e=>this._withResult(e,!0),null,e=>this._withResult(e,!1),this._editor.getOption(52).delay),this._register(h["o"](this.getDomNode(),h["d"].FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(h["o"](this.getDomNode(),h["d"].BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(t.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay)})),this._register(g["F"].onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return this._id}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(6===t)return!0;if(7===t){const t=this._editor.getOption(42).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"===typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<t)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const o of this._participants)if("function"===typeof o.suggestHoverAnchor){const t=o.suggestHoverAnchor(e);t&&i.push(t)}if(this._shouldShowAt(e)&&e.target.range){const o=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find(e=>e.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1,n=o?new a["a"](e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new de["b"](0,n))}return 0!==i.length&&(i.sort((e,t)=>t.priority-e.priority),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){return this._isVisible?{position:this._showAtPosition,range:this._showAtRange,preference:[1,2]}:null}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(42);this._hover.contentsDomNode.style.fontSize=t+"px",this._hover.contentsDomNode.style.lineHeight=i+"px",this._hover.contentsDomNode.style.maxHeight=e+"px",this._hover.contentsDomNode.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px"}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new de["b"](0,e),t,i)}_startShowingAt(e,t,i){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const t=this._messages.filter(t=>t.isValidForHoverAnchor(e));if(0===t.length)this.hide();else{if(t.length===this._messages.length)return;this._renderMessages(e,t)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(t,i){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let o=1073741824,n=i[0].range,r=null,d=document.createDocumentFragment();const l=new s["b"],h=new Map;for(const e of i){o=Math.min(o,e.range.startColumn),n=a["a"].plusRange(n,e.range),e.forceShowAtRange&&(r=e.range),h.has(e.owner)||h.set(e.owner,[]);const t=h.get(e.owner);t.push(e)}const u=l.add(new ge(this._keybindingService));for(const[e,s]of h)l.add(e.renderHoverParts(s,d,u));u.hasContent&&d.appendChild(u.hoverElement),this._renderDisposable=l,d.hasChildNodes()&&(r?this._showAt(r.getStartPosition(),r,this._shouldFocus):this._showAt(new c["a"](t.range.startLineNumber,o),n,this._shouldFocus),this._updateContents(d)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,n?[{range:n,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};_e.ID="editor.contrib.modesContentHoverWidget",_e._DECORATION_OPTIONS=u["a"].register({description:"content-hover-highlight",className:"hoverHighlight"}),_e=le([he(2,T["a"]),he(3,ae["a"])],_e);class me extends b["a"]{constructor(e,t){super(),this._id=e,this._editor=t,this._isVisible=!1,this._domNode=document.createElement("div"),this._domNode.className="monaco-hover hidden",this._domNode.setAttribute("aria-hidden","true"),this._domNode.setAttribute("role","tooltip"),this._showAtLineNumber=-1,this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(42)&&this.updateFont()})),this._editor.addOverlayWidget(this)}get isVisible(){return this._isVisible}set isVisible(e){this._isVisible=e,this._domNode.classList.toggle("hidden",!this._isVisible)}getId(){return this._id}getDomNode(){return this._domNode}showAt(e){this._showAtLineNumber=e,this.isVisible||(this.isVisible=!0);const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(this._showAtLineNumber),o=this._editor.getScrollTop(),n=this._editor.getOption(58),s=this._domNode.clientHeight,r=i-o-(s-n)/2;this._domNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._domNode.style.top=Math.max(Math.round(r),0)+"px"}hide(){this.isVisible&&(this.isVisible=!1)}getPosition(){return null}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}updateFont(){const e=Array.prototype.slice.call(this._domNode.getElementsByTagName("code")),t=Array.prototype.slice.call(this._domNode.getElementsByClassName("code"));[...e,...t].forEach(e=>this._editor.applyFontInfo(e))}updateContents(e){this._domNode.textContent="",this._domNode.appendChild(e),this.updateFont()}}class fe{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const o of t){if(!o.options.glyphMarginClassName)continue;const t=o.options.glyphMarginHoverMessage;t&&!Object(j["b"])(t)&&i.push(...Object(f["c"])(t).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class be extends me{constructor(e,t,i=y["b"]){super(be.ID,e),this._renderDisposeables=this._register(new s["b"]),this._messages=[],this._lastLineNumber=-1,this._markdownRenderer=this._register(new W["a"]({editor:this._editor},t,i)),this._computer=new fe(this._editor),this._hoverOperation=new m(this._computer,e=>this._withResult(e),void 0,e=>this._withResult(e),300)}dispose(){this._hoverOperation.cancel(),super.dispose()}onModelDecorationsChanged(){this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),super.hide()}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const o of t){const e=this._markdownRenderer.render(o.value);this._renderDisposeables.add(e),i.appendChild(Object(h["a"])("div.hover-row",void 0,e.element))}this.updateContents(i),this.showAt(e)}}be.ID="editor.contrib.modesGlyphHoverWidget";var ve=i("4ca8"),Ce=i("321b"),we=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Se=function(e,t){return function(i,o){t(i,o,e)}};let ye=class e{constructor(e,t,i,o,n){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=o,this._toUnhook=new s["b"],this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(e=>{e.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=d["a"].hoverVisible.bindTo(n)}static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._toUnhook.add(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;9!==t||e.target.detail!==_e.ID?12===t&&e.target.detail===be.ID||(12!==t&&e.target.detail!==be.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,o,n,s;let r=e.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===r&&e.target.detail===_e.ID)return;if(this._isHoverSticky&&!(null===(i=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===i?void 0:i.isCollapsed))return;if(!this._isHoverSticky&&9===r&&e.target.detail===_e.ID&&(null===(o=this._contentWidget)||void 0===o?void 0:o.isColorPickerVisible()))return;if(this._isHoverSticky&&12===r&&e.target.detail===be.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();const a=this._getOrCreateContentWidget();if(!a.maybeShowAt(e))return 2===r&&e.target.position?(null===(s=this._contentWidget)||void 0===s||s.hide(),this._glyphWidget||(this._glyphWidget=new be(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(n=this._glyphWidget)||void 0===n||n.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(_e,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};ye.ID="editor.contrib.hover",ye=we([Se(1,T["a"]),Se(2,y["a"]),Se(3,l["a"]),Se(4,Ce["b"])],ye);class Re extends r["b"]{constructor(){super({id:"editor.action.showHover",label:o["a"]({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:d["a"].editorTextFocus,primary:Object(n["a"])(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let i=ye.get(t);if(!i)return;const o=t.getPosition(),n=new a["a"](o.lineNumber,o.column,o.lineNumber,o.column),s=2===t.getOption(2);i.showContentHover(n,1,s)}}class xe extends r["b"]{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:o["a"]({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=ye.get(t);if(!i)return;const o=t.getPosition();if(!o)return;const n=new a["a"](o.lineNumber,o.column,o.lineNumber,o.column),s=ve["a"].get(t),r=s.startFindDefinitionFromCursor(o);r.then(()=>{i.showContentHover(n,1,!0)})}}Object(r["l"])(ye.ID,ye),Object(r["j"])(Re),Object(r["j"])(xe),Object(D["f"])((e,t)=>{const i=e.getColor(I["H"]);i&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${i}; }`);const o=e.getColor(I["E"]);o&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${o}; }`);const n=e.getColor(I["F"]);n&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${n}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${n.transparent(.5)}; }`));const s=e.getColor(I["Jc"]);s&&t.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const r=e.getColor(I["Ic"]);r&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${r}; }`);const a=e.getColor(I["G"]);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const d=e.getColor(I["I"]);d&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${d}; }`);const l=e.getColor(I["Hc"]);l&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${l}; }`)})},e19e:function(e,t,i){"use strict";i.d(t,"b",(function(){return h})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return g})),i.d(t,"d",(function(){return p}));var o=i("65cd"),n=i("c59a"),s=i("9550"),r=i("2b64"),a=i("138c"),d=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function l(e,t,i,o){const s=i.ordered(e),r=s.map(i=>Promise.resolve(o(i,e,t)).then(void 0,e=>{Object(n["g"])(e)}));return Promise.all(r).then(e=>{const t=[];for(let i of e)Array.isArray(i)?t.push(...i):i&&t.push(i);return t})}function h(e,t,i){return l(e,t,r["f"],(e,t,o)=>e.provideDefinition(t,o,i))}function c(e,t,i){return l(e,t,r["e"],(e,t,o)=>e.provideDeclaration(t,o,i))}function u(e,t,i){return l(e,t,r["q"],(e,t,o)=>e.provideImplementation(t,o,i))}function g(e,t,i){return l(e,t,r["G"],(e,t,o)=>e.provideTypeDefinition(t,o,i))}function p(e,t,i,o){return l(e,t,r["y"],(e,t,n)=>d(this,void 0,void 0,(function*(){const s=yield e.provideReferences(t,n,{includeDeclaration:!0},o);if(!i||!s||2!==s.length)return s;const r=yield e.provideReferences(t,n,{includeDeclaration:!1},o);return r&&1===r.length?r:s})))}function _(e){return d(this,void 0,void 0,(function*(){const t=yield e(),i=new a["c"](t,""),o=i.references.map(e=>e.link);return i.dispose(),o}))}Object(s["n"])("_executeDefinitionProvider",(e,t)=>_(()=>h(e,t,o["a"].None))),Object(s["n"])("_executeDeclarationProvider",(e,t)=>_(()=>c(e,t,o["a"].None))),Object(s["n"])("_executeImplementationProvider",(e,t)=>_(()=>u(e,t,o["a"].None))),Object(s["n"])("_executeTypeDefinitionProvider",(e,t)=>_(()=>g(e,t,o["a"].None))),Object(s["n"])("_executeReferenceProvider",(e,t)=>_(()=>p(e,t,!1,o["a"].None)))},e4f2:function(e,t,i){"use strict";var o=i("1c57"),n=i("65cd"),s=i("11b8"),r=i("71e2"),a=i("9550"),d=i("38cf"),l=i("06b3"),h=i("537c"),c=i("a55e"),u=i("2b64"),g=i("1f37"),p=i("98a4"),_=i("1da3"),m=i("05b0"),f=i("646b"),b=i("321b"),v=i("2279"),C=i("c59a"),w=i("6115"),S=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,o){t(i,o,e)}},R=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let x=class{constructor(e,t){this._workerService=t,this._callOnDispose=new r["b"],this._callOnModel=new r["b"],this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(u["x"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(47))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=u["x"].ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new l["b"];for(let o of t.autoFormatTriggerCharacters)i.add(o.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))}))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1)return;const t=this._editor.getModel(),i=this._editor.getPosition();let n=!1;const s=this._editor.onDidChangeModelContent(e=>{if(e.isFlush)return n=!0,void s.dispose();for(let t=0,o=e.changes.length;t<o;t++){const o=e.changes[t];if(o.range.endLineNumber<=i.lineNumber)return n=!0,void s.dispose()}});Object(p["e"])(this._workerService,t,i,e,t.getFormattingOptions()).then(e=>{s.dispose(),n||Object(o["n"])(e)&&(_["a"].execute(this._editor,e,!0),Object(p["b"])(e))},e=>{throw s.dispose(),e})}};x.ID="editor.contrib.autoFormat",x=S([y(1,g["a"])],x);let M=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new r["b"],this._callOnModel=new r["b"],this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(u["j"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(46)&&this.editor.hasModel()&&u["j"].has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(p["c"],this.editor,e,2,w["b"].None,n["a"].None).catch(C["f"]))}};M.ID="editor.contrib.formatOnPaste",M=S([y(1,v["a"])],M);class O extends a["b"]{constructor(){super({id:"editor.action.formatDocument",label:m["a"]("formatDocument.label","Format Document"),alias:"Format Document",precondition:b["a"].and(c["a"].notInCompositeEditor,c["a"].writable,c["a"].hasDocumentFormattingProvider),kbOpts:{kbExpr:c["a"].editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return R(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(v["a"]),o=e.get(w["a"]);yield o.showWhile(i.invokeFunction(p["d"],t,1,w["b"].None,n["a"].None),250)}}))}}class k extends a["b"]{constructor(){super({id:"editor.action.formatSelection",label:m["a"]("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:b["a"].and(c["a"].writable,c["a"].hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["a"])(2089,2084),weight:100},contextMenuOpts:{when:c["a"].hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return R(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(v["a"]),o=t.getModel(),s=t.getSelections().map(e=>e.isEmpty()?new h["a"](e.startLineNumber,1,e.startLineNumber,o.getLineMaxColumn(e.startLineNumber)):e),r=e.get(w["a"]);yield r.showWhile(i.invokeFunction(p["c"],t,s,1,w["b"].None,n["a"].None),250)}))}}Object(a["l"])(x.ID,x),Object(a["l"])(M.ID,M),Object(a["j"])(O),Object(a["j"])(k),f["a"].registerCommand("editor.action.format",e=>R(void 0,void 0,void 0,(function*(){const t=e.get(d["a"]).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(f["b"]);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")})))},e5f0:function(e,t,i){"use strict";i("7e1f");var o=i("05b0"),n=i("a0e2"),s=i("2dd7"),r=i("ae74"),a=i("11b8"),d=i("71e2"),l=i("9550"),h=i("5ee7");const c=65535,u=16777215,g=4278190080;class p{constructor(e,t,i){if(e.length!==t.length||e.length>c)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=t&&this.getEndLineNumber(o)>=i};for(let i=0,o=this._startIndexes.length;i<o;i++){let o=this._startIndexes[i],n=this._endIndexes[i];if(o>u||n>u)throw new Error("startLineNumber or endLineNumber must not exceed "+u);while(e.length>0&&!t(o,n))e.pop();let s=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((255&s)<<24),this._endIndexes[i]=n+((65280&s)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&u}getEndLineNumber(e){return this._endIndexes[e]&u}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return 0!==(this._collapseStates[t]&1<<i)}setCollapsed(e,t){let i=e/32|0,o=e%32,n=this._collapseStates[i];this._collapseStates[i]=t?n|1<<o:n&~(1<<o)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let o=0;o<this._types.length;o++)this._types[o]===e&&(this.setCollapsed(o,t),i=!0);return i}toRegion(e){return new _(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&g)>>>24)+((this._endIndexes[e]&g)>>>16);return t===c?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;while(t<i){let o=Math.floor((t+i)/2);e<this.getStartLineNumber(o)?i=o:t=o+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){let i=this.getEndLineNumber(t);if(i>=e)return t;t=this.getParentIndex(t);while(-1!==t){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class _{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class m{constructor(e,t){this._updateEventEmitter=new h["b"],this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new p(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let o=0,n=-1,s=-1;const r=e=>{while(o<e){const e=this._regions.getEndLineNumber(o),t=this._regions.isCollapsed(o);e<=n&&i.changeDecorationOptions(this._editorDecorationIds[o],this._decorationProvider.getDecorationOption(t,e<=s)),t&&e>s&&(s=e),o++}};for(let a of e){let e=a.regionIndex,i=this._editorDecorationIds[e];if(i&&!t[i]){t[i]=!0,r(e);let o=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,o),n=Math.max(n,this._regions.getEndLineNumber(e))}}r(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],o=(e,i)=>{for(let o of t)if(e<o&&o<=i)return!0;return!1},n=-1,s=(t,s)=>{const r=e.getStartLineNumber(t),a=e.getEndLineNumber(t);s||(s=e.isCollapsed(t)),s&&o(r,a)&&(s=!1),e.setCollapsed(t,s);const d=this._textModel.getLineMaxColumn(r),l={startLineNumber:r,startColumn:Math.max(d-1,1),endLineNumber:r,endColumn:d};i.push({range:l,options:this._decorationProvider.getDecorationOption(s,a<=n)}),s&&a>n&&(n=a)},r=0,a=()=>{while(r<this._regions.length){let e=this._regions.isCollapsed(r);if(r++,e)return r-1}return-1},d=0,l=a();while(-1!==l&&d<e.length){let t=this._textModel.getDecorationRange(this._editorDecorationIds[l]);if(t){let i=t.startLineNumber;if(t.startColumn===Math.max(t.endColumn-1,1)&&this._textModel.getLineMaxColumn(i)===t.endColumn)while(d<e.length){let t=e.getStartLineNumber(d);if(!(i>=t))break;s(d,i===t),d++}}l=a()}while(d<e.length)s(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let o=i.startLineNumber,n=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:o,endLineNumber:n})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let e=this.getRegionAtLine(i.startLineNumber);e&&!e.isCollapsed&&t.push(e)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let o=this._regions.findRange(e),n=1;while(o>=0){let e=this._regions.toRegion(o);t&&!t(e,n)||i.push(e),n++,o=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],o=e?e.regionIndex+1:0,n=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let s=o,r=this._regions.length;s<r;s++){let o=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;while(e.length>0&&!o.containedBy(e[e.length-1]))e.pop();e.push(o),t(o,e.length)&&i.push(o)}}else for(let s=o,r=this._regions.length;s<r;s++){let e=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;t&&!t(e)||i.push(e)}return i}}function f(e,t,i){let o=[];for(let n of i){let i=e.getRegionAtLine(n);if(i){const n=!i.isCollapsed;if(o.push(i),t>1){let s=e.getRegionsInside(i,(e,i)=>e.isCollapsed!==n&&i<t);o.push(...s)}}}e.toggleCollapseState(o)}function b(e,t,i=Number.MAX_VALUE,o){let n=[];if(o&&o.length>0)for(let s of o){let o=e.getRegionAtLine(s);if(o&&(o.isCollapsed!==t&&n.push(o),i>1)){let s=e.getRegionsInside(o,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...s)}}else{let o=e.getRegionsInside(null,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...o)}e.toggleCollapseState(n)}function v(e,t,i,o){let n=[];for(let s of o){let o=e.getAllRegionsAtLine(s,(e,o)=>e.isCollapsed!==t&&o<=i);n.push(...o)}e.toggleCollapseState(n)}function C(e,t,i){let o=[];for(let n of i){let i=e.getAllRegionsAtLine(n,e=>e.isCollapsed!==t);i.length>0&&o.push(i[0])}e.toggleCollapseState(o)}function w(e,t,i,o){let n=(e,n)=>n===t&&e.isCollapsed!==i&&!o.some(t=>e.containsLine(t)),s=e.getRegionsInside(null,n);e.toggleCollapseState(s)}function S(e,t,i){let o=[];for(let r of i)o.push(e.getAllRegionsAtLine(r,void 0)[0]);let n=e=>o.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t,s=e.getRegionsInside(null,n);e.toggleCollapseState(s)}function y(e,t,i){let o=e.textModel,n=e.regions,s=[];for(let r=n.length-1;r>=0;r--)if(i!==n.isCollapsed(r)){let e=n.getStartLineNumber(r);t.test(o.getLineContent(e))&&s.push(n.toRegion(r))}e.toggleCollapseState(s)}function R(e,t,i){let o=e.regions,n=[];for(let s=o.length-1;s>=0;s--)i!==o.isCollapsed(s)&&t===o.getType(s)&&n.push(o.toRegion(s));e.toggleCollapseState(n)}function x(e,t){let i=null,o=t.getRegionAtLine(e);if(null!==o&&(i=o.startLineNumber,e===i)){let e=o.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function M(e,t){let i=t.getRegionAtLine(e);if(null!==i){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,o=0;-1!==e&&(o=t.regions.getStartLineNumber(i.parentIndex));while(null!==i){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=o)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0){i=t.regions.toRegion(t.regions.length-1);while(null!==i){if(-1===i.parentIndex&&i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}}return null}function O(e,t){let i=t.getRegionAtLine(e);if(null!==i){let e=i.parentIndex,o=0;if(-1!==e)o=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;o=t.regions.getEndLineNumber(t.regions.length-1)}while(null!==i){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=o)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0){i=t.regions.toRegion(0);while(null!==i){if(-1===i.parentIndex&&i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}}return null}var k=i("9afb"),D=i("1dea"),I=i("99f1"),N=i("662c");const L=Object(I["b"])("folding-expanded",D["b"].chevronDown,Object(o["a"])("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),P=Object(I["b"])("folding-collapsed",D["b"].chevronRight,Object(o["a"])("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class E{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?E.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?E.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:E.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?E.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:E.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}E.COLLAPSED_VISUAL_DECORATION=k["a"].register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:N["d"].asClassName(P)}),E.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=k["a"].register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:N["d"].asClassName(P)}),E.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=k["a"].register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:N["d"].asClassName(L)}),E.EXPANDED_VISUAL_DECORATION=k["a"].register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+N["d"].asClassName(L)}),E.HIDDEN_RANGE_DECORATION=k["a"].register({description:"folding-hidden-range-decoration",stickiness:1});var F=i("a55e"),A=i("537c"),T=i("1c57");class j{constructor(e){this._updateEventEmitter=new h["b"],this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,o=0,n=Number.MAX_VALUE,s=-1,r=this._foldingModel.regions;for(;i<r.length;i++){if(!r.isCollapsed(i))continue;let a=r.getStartLineNumber(i)+1,d=r.getEndLineNumber(i);n<=a&&d<=s||(!e&&o<this._hiddenRanges.length&&this._hiddenRanges[o].startLineNumber===a&&this._hiddenRanges[o].endLineNumber===d?(t.push(this._hiddenRanges[o]),o++):(e=!0,t.push(new A["a"](a,1,d,1))),n=a,s=d)}(e||o<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new A["a"](i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==V(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,o=null,n=e=>(o&&W(e,o)||(o=V(this._hiddenRanges,e)),o?o.startLineNumber-1:null);for(let s=0,r=e.length;s<r;s++){let o=e[s],r=n(o.startLineNumber);r&&(o=o.setStartPosition(r,i.getLineMaxColumn(r)),t=!0);let a=n(o.endLineNumber);a&&(o=o.setEndPosition(a,i.getLineMaxColumn(a)),t=!0),e[s]=o}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function W(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}function V(e,t){let i=Object(T["i"])(e,e=>t<e.startLineNumber)-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}var B=i("31eb");const H=5e3,U="indent";class K{constructor(e){this.editorModel=e,this.id=U}dispose(){}compute(e){let t=B["a"].getFoldingRules(this.editorModel.getLanguageIdentifier().id),i=t&&!!t.offSide,o=t&&t.markers;return Promise.resolve($(this.editorModel,i,o))}}class q{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>u||t>u)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,o=0;i>=0;i--,o++)e[o]=this._startIndexes[i],t[o]=this._endIndexes[i];return new p(e,t)}{let t=0,i=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let o=this._indentOccurrences[e];if(o){if(o+t>this._foldingRangesLimit){i=e;break}t+=o}}const o=e.getOptions().tabSize;let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let r=this._length-1,a=0;r>=0;r--){let d=this._startIndexes[r],l=e.getLineContent(d),h=k["b"].computeIndentLevel(l,o);(h<i||h===i&&t++<this._foldingRangesLimit)&&(n[a]=d,s[a]=this._endIndexes[r],a++)}return new p(n,s)}}}function $(e,t,i,o=H){const n=e.getOptions().tabSize;let s=new q(o),r=void 0;i&&(r=new RegExp(`(${i.start.source})|(?:${i.end.source})`));let a=[],d=e.getLineCount()+1;a.push({indent:-1,endAbove:d,line:d});for(let l=e.getLineCount();l>0;l--){let i,o=e.getLineContent(l),d=k["b"].computeIndentLevel(o,n),h=a[a.length-1];if(-1!==d){if(r&&(i=o.match(r))){if(!i[1]){a.push({indent:-2,endAbove:l,line:l});continue}{let e=a.length-1;while(e>0&&-2!==a[e].indent)e--;if(e>0){a.length=e+1,h=a[e],s.insertFirst(l,h.line,d),h.line=l,h.indent=d,h.endAbove=l;continue}}}if(h.indent>d){do{a.pop(),h=a[a.length-1]}while(h.indent>d);let e=h.endAbove-1;e-l>=1&&s.insertFirst(l,e,d)}h.indent===d?h.endAbove=l:a.push({indent:d,endAbove:l,line:l})}else t&&(h.endAbove=l)}return s.toIndentRanges(e)}var G=i("2b64"),z=i("c59a");const Z=5e3,X={},J="syntax";class Q{constructor(e,t,i,o=Z){this.editorModel=e,this.providers=t,this.limit=o,this.id=J;for(const n of t)"function"===typeof n.onDidChange&&(this.disposables||(this.disposables=new d["b"]),this.disposables.add(n.onDidChange(i)))}compute(e){return Y(this.providers,this.editorModel,e).then(e=>{if(e){let t=te(e,this.limit);return t}return null})}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}function Y(e,t,i){let o=null,n=e.map((e,n)=>Promise.resolve(e.provideFoldingRanges(t,X,i)).then(e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(o)||(o=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&o.push({start:t.start,end:t.end,rank:n,kind:t.kind})}},z["g"]));return Promise.all(n).then(e=>o)}class ee{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,o){if(e>u||t>u)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._nestingLevels[n]=o,this._types[n]=i,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new p(e,t,this._types)}{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let i=this._nestingLevelCounts[s];if(i){if(i+e>this._foldingRangesLimit){t=s;break}e+=i}}let i=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit),n=[];for(let s=0,r=0;s<this._length;s++){let a=this._nestingLevels[s];(a<t||a===t&&e++<this._foldingRangesLimit)&&(i[r]=this._startIndexes[s],o[r]=this._endIndexes[s],n[r]=this._types[s],r++)}return new p(i,o,n)}}}function te(e,t){let i=e.sort((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i}),o=new ee(t),n=void 0,s=[];for(let r of i)if(n){if(r.start>n.start)if(r.end<=n.end)s.push(n),n=r,o.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>n.end){do{n=s.pop()}while(n&&r.start>n.end);n&&s.push(n),n=r}o.add(r.start,r.end,r.kind&&r.kind.value,s.length)}}else n=r,o.add(r.start,r.end,r.kind&&r.kind.value,s.length);return o.toIndentRanges()}const ie="init";class oe{constructor(e,t,i,o){if(this.editorModel=e,this.id=ie,t.length){let n=t=>({range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(n)),this.timeout=setTimeout(i,o)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let i of this.decorationIds){let e=this.editorModel.getDecorationRange(i);e&&t.push({start:e.startLineNumber,end:e.endLineNumber,rank:1})}return Promise.resolve(te(t,Number.MAX_VALUE))}}var ne=i("321b"),se=i("09ad"),re=i("c794"),ae=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},de=function(e,t){return function(i,o){t(i,o,e)}};const le=new ne["c"]("foldingEnabled",!1);let he=class e extends d["a"]{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new d["b"]),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(36),this._useFoldingProviders="indentation"!==i.get(37),this._unfoldOnClickAfterEndOfLine=i.get(40),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(39),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new E(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===i.get(99),this.foldingDecorationProvider.showFoldingHighlights=i.get(38),this.foldingEnabled=le.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(36)&&(this._isEnabled=this.editor.getOptions().get(36),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(99)||e.hasChanged(38)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(99),this.foldingDecorationProvider.showFoldingHighlights=e.get(38),this.onModelContentChanged()}e.hasChanged(37)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(37),this.onFoldingStrategyChanged()),e.hasChanged(40)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(40)),e.hasChanged(39)&&(this._foldingImportsByDefault=this.editor.getOptions().get(39))})),this.onModelChanged()}static get(t){return t.getContribution(e.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==t.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;e.provider!==J&&e.provider!==ie||(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const e=this.getFoldingModel();e&&e.then(e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,z["f"])}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new m(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new j(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new r["a"](200),this.cursorChangedScheduler=new r["e"](()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(G["o"].onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new K(e),this._useFoldingProviders&&this.foldingModel){let t=G["o"].ordered(this.foldingModel.textModel);if(0===t.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){const t=this.rangeProvider=new oe(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);return t}t.length>0&&(this.rangeProvider=new Q(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=Object(r["h"])(e=>t.compute(e));return i.then(t=>{if(t&&i===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=t.setCollapsedAllOfType(G["n"].Imports.value,!0);e&&(i=re["c"].capture(this.editor),this._currentModelHasFoldedImports=e)}let o=this.editor.getSelections(),n=o?o.map(e=>e.startLineNumber):[];e.update(t,n),i&&i.restore(this.editor)}return e})}).then(void 0,e=>(Object(z["f"])(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let o of t){let t=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}}).then(void 0,z["f"])}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const o=e.target.detail,n=e.target.element.offsetLeft,s=o.offsetX-n;if(s<5)return;i=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){const t=e.target.detail;if(!t.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,o=this.mouseDownInfo.iconClicked,n=e.target.range;if(n&&n.startLineNumber===i){if(o){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||n.startColumn!==e.getLineMaxColumn(i))return}t.then(t=>{if(t){let n=t.getRegionAtLine(i);if(n&&n.startLineNumber===i){let s=n.isCollapsed;if(o||s){let o=e.event.altKey,r=[];if(o){let e=e=>!e.containedBy(n)&&!n.containedBy(e),i=t.getRegionsInside(null,e);for(const t of i)t.isCollapsed&&r.push(t);0===r.length&&(r=i)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(n))e.isCollapsed===s&&r.push(e);!s&&i&&0!==r.length||r.push(n)}t.toggleCollapseState(r),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,z["f"])}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};he.ID="editor.contrib.folding",he=ae([de(1,ne["b"])],he);class ce extends l["b"]{runEditorCommand(e,t,i){let o=he.get(t);if(!o)return;let n=o.getFoldingModel();return n?(this.reportTelemetry(e,t),n.then(e=>{if(e){this.invoke(o,e,t,i);const n=t.getSelection();n&&o.reveal(n.getStartPosition())}})):void 0}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}}function ue(e){if(!n["l"](e)){if(!n["j"](e))return!1;const t=e;if(!n["l"](t.levels)&&!n["i"](t.levels))return!1;if(!n["l"](t.direction)&&!n["k"](t.direction))return!1;if(!n["l"](t.selectionLines)&&(!n["f"](t.selectionLines)||!t.selectionLines.every(n["i"])))return!1}return!0}class ge extends ce{constructor(){super({id:"editor.unfold",label:o["a"]("unfoldAction.label","Unfold"),alias:"Unfold",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=o&&o.levels||1,s=this.getLineNumbers(o,i);o&&"up"===o.direction?v(t,!1,n,s):b(t,!1,n,s)}}class pe extends ce{constructor(){super({id:"editor.unfoldRecursively",label:o["a"]("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2137),weight:100}})}invoke(e,t,i,o){b(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class _e extends ce{constructor(){super({id:"editor.fold",label:o["a"]("foldAction.label","Fold"),alias:"Fold",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=this.getLineNumbers(o,i);const s=o&&o.levels,r=o&&o.direction;"number"!==typeof s&&"string"!==typeof r?C(t,!0,n):"up"===r?v(t,!0,s||1,n):b(t,!0,s||1,n)}}class me extends ce{constructor(){super({id:"editor.toggleFold",label:o["a"]("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2090),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);f(t,1,o)}}class fe extends ce{constructor(){super({id:"editor.foldRecursively",label:o["a"]("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2135),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);b(t,!0,Number.MAX_VALUE,o)}}class be extends ce{constructor(){super({id:"editor.foldAllBlockComments",label:o["a"]("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2133),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())R(t,G["n"].Comment.value,!0);else{const e=i.getModel();if(!e)return;let o=B["a"].getComments(e.getLanguageIdentifier().id);if(o&&o.blockCommentStartToken){let e=new RegExp("^\\s*"+Object(s["t"])(o.blockCommentStartToken));y(t,e,!0)}}}}class ve extends ce{constructor(){super({id:"editor.foldAllMarkerRegions",label:o["a"]("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2077),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())R(t,G["n"].Region.value,!0);else{const e=i.getModel();if(!e)return;let o=B["a"].getFoldingRules(e.getLanguageIdentifier().id);if(o&&o.markers&&o.markers.start){let e=new RegExp(o.markers.start);y(t,e,!0)}}}}class Ce extends ce{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:o["a"]("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2078),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())R(t,G["n"].Region.value,!1);else{const e=i.getModel();if(!e)return;let o=B["a"].getFoldingRules(e.getLanguageIdentifier().id);if(o&&o.markers&&o.markers.start){let e=new RegExp(o.markers.start);y(t,e,!1)}}}}class we extends ce{constructor(){super({id:"editor.foldAllExcept",label:o["a"]("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2131),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);S(t,!0,o)}}class Se extends ce{constructor(){super({id:"editor.unfoldAllExcept",label:o["a"]("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2129),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);S(t,!1,o)}}class ye extends ce{constructor(){super({id:"editor.foldAll",label:o["a"]("foldAllAction.label","Fold All"),alias:"Fold All",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2069),weight:100}})}invoke(e,t,i){b(t,!0)}}class Re extends ce{constructor(){super({id:"editor.unfoldAll",label:o["a"]("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2088),weight:100}})}invoke(e,t,i){b(t,!1)}}class xe extends ce{getFoldingLevel(){return parseInt(this.id.substr(xe.ID_PREFIX.length))}invoke(e,t,i){w(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}xe.ID_PREFIX="editor.foldLevel",xe.ID=e=>xe.ID_PREFIX+e;class Me extends ce{constructor(){super({id:"editor.gotoParentFold",label:o["a"]("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=x(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class Oe extends ce{constructor(){super({id:"editor.gotoPreviousFold",label:o["a"]("gotoPreviousFold.label","Go to Previous Fold"),alias:"Go to Previous Fold",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=M(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class ke extends ce{constructor(){super({id:"editor.gotoNextFold",label:o["a"]("gotoNextFold.label","Go to Next Fold"),alias:"Go to Next Fold",precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=O(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}Object(l["l"])(he.ID,he),Object(l["j"])(ge),Object(l["j"])(pe),Object(l["j"])(_e),Object(l["j"])(fe),Object(l["j"])(ye),Object(l["j"])(Re),Object(l["j"])(be),Object(l["j"])(ve),Object(l["j"])(Ce),Object(l["j"])(we),Object(l["j"])(Se),Object(l["j"])(me),Object(l["j"])(Me),Object(l["j"])(Oe),Object(l["j"])(ke);for(let Ne=1;Ne<=7;Ne++)Object(l["m"])(new xe({id:xe.ID(Ne),label:o["a"]("foldLevelAction.label","Fold Level {0}",Ne),alias:"Fold Level "+Ne,precondition:le,kbOpts:{kbExpr:F["a"].editorTextFocus,primary:Object(a["a"])(2089,2048|21+Ne),weight:100}}));const De=Object(se["wc"])("editor.foldBackground",{light:Object(se["Lc"])(se["R"],.3),dark:Object(se["Lc"])(se["R"],.3),hc:null},o["a"]("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),Ie=Object(se["wc"])("editorGutter.foldingControlForeground",{dark:se["fb"],light:se["fb"],hc:se["fb"]},o["a"]("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Object(N["f"])((e,t)=>{const i=e.getColor(De);i&&t.addRule(`.monaco-editor .folded-background { background-color: ${i}; }`);const o=e.getColor(Ie);o&&t.addRule(`\n\t\t.monaco-editor .cldr${N["d"].asCSSSelector(L)},\n\t\t.monaco-editor .cldr${N["d"].asCSSSelector(P)} {\n\t\t\tcolor: ${o} !important;\n\t\t}\n\t\t`)})},f30f:function(e,t,i){}}]);