/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Wed Nov 17 2021 04:11:42 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-904e73b8"],{"013b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":!0,title:e.title,visible:e.dialogFormVisible,width:"300px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v(" "+e._s(e.$translateTitle("category.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.save(e.form.mark)}}},[e._v(" "+e._s(e.$translateTitle("category.submit"))+" ")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("category.name"),prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"child"==e.flagType,expression:"flagType == 'child'"}],attrs:{label:e.$translateTitle("category.sort"),prop:"order"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1)],1)],1)},l=[],n=a("1da1"),i=a("5530"),s=(a("96cf"),a("d81d"),a("b0c0"),a("a9e3"),a("03b1")),o=a("5880"),c={name:"TableEdit",data:function(){return{flagType:"father",form:{data:{},name:"",order:0,level:0},rules:{},title:"",dialogFormVisible:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(o["mapGetters"])({role:"acl/role",username:"user/username"})),{},{aclObj:function(){var e={};return this.role.map((function(t){e["".concat("role:"+t.name)]={read:!0,write:!0}})),e}}),created:function(){},mounted:function(){this.rules={name:[{required:!0,trigger:"blur",message:this.$translateTitle("category.Please enter the category name")}],order:[{required:!0,trigger:"blur",message:this.$translateTitle("category.Please enter the sort")}]}},methods:{showEdit:function(e,t){this.flagType=t,this.title="top"==this.flagType?this.$translateTitle("category.New top category"):"child"==t?this.$translateTitle("category.Add subcategory"):this.$translateTitle("category.Modify category"),this.form="child"!=this.flagType?_.merge({mark:t},e):"top"==this.flagType?_.merge(this.$options.data().form,{mark:t,objectId:e.objectId,level:e.level,order:Number(moment(new Date).valueOf())}):{objectId:e.objectId,mark:t,data:{},name:"",order:0,level:0},this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(e){var t=this,a={"*":{read:!0}},r={name:this.form.name,data:this.form.data,order:this.form.order},l="top"==e?_.merge(r,{ACL:_.merge(a,this.aclObj),parent:{objectId:"a60a85475a",__type:"Pointer",className:"Category"},level:1}):"child"==e?_.merge(r,{ACL:_.merge(a,this.aclObj),parent:{objectId:this.form.objectId,__type:"Pointer",className:"Category"},level:2}):r;this.$refs["form"].validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=15;break}if("edit"!=e){a.next=7;break}return a.next=4,Object(s["putCategory"])(t.form.objectId,l);case 4:a.t0=a.sent,a.next=10;break;case 7:return a.next=9,Object(s["postCategory"])(l);case 9:a.t0=a.sent;case 10:n=a.t0,i=n.msg,t.$baseMessage(i,"success","vab-hey-message-success"),t.$emit("fetch-data"),t.close();case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}},d=c,u=a("2877"),p=Object(u["a"])(d,r,l,!1,null,null,null);t["default"]=p.exports},"03ee":function(e,t,a){},"048f":function(e){e.exports=JSON.parse('{"status":0,"msg":"","data":{"pages":[{"label":"Home","url":"/","redirect":"/index/1"},{"label":"示例","children":[{"label":"页面A","url":"index","schema":{"type":"page","title":"页面A","body":"页面A"},"children":[{"label":"页面A-1","url":"1","schema":{"type":"page","title":"页面A-1","body":"页面A-1"}},{"label":"页面A-2","url":"2","schema":{"type":"page","title":"页面A-2","body":"页面A-2"}},{"label":"页面A-3","url":"3","schema":{"type":"page","title":"页面A-3","body":"页面A-3"}}]},{"label":"页面B","schema":{"type":"page","title":"页面B","body":"页面B"}},{"label":"页面C","schema":{"type":"page","title":"页面C","body":"页面C"}},{"label":"列表示例","url":"/crud","rewrite":"/crud/list","icon":"fa fa-cube","children":[{"label":"列表","url":"/crud/list","icon":"fa fa-list","schemaApi":"get:/pages/crud-list.json"},{"label":"新增","url":"/crud/new","icon":"fa fa-plus","schemaApi":"get:/pages/crud-new.json"},{"label":"查看","url":"/crud/:id","schemaApi":"get:/pages/crud-view.json"},{"label":"修改","url":"/crud/:id/edit","schemaApi":"get:/pages/crud-edit.json"}]}]},{"label":"分组2","children":[{"label":"用户管理","schema":{"type":"page","title":"用户管理","body":"页面C"}},{"label":"外部链接","link":"http://baidu.gitee.io/amis"},{"label":"部门管理","schemaApi":"/api/mock2/service/form?tpl=tpl3"}]}]}}')},"0838":function(e,t,a){"use strict";a("176f")},1536:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},l=[],n=(a("a15b"),a("fb6a"),a("d3b7"),a("25f0"),a("ed08")),i={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0}},data:function(){return{chart:null,sidebarElm:null}},mounted:function(){var e=this;this.initChart(),this.autoResize&&(this.__resizeHandler=Object(n["debounce"])((function(){e.chart&&e.chart.resize()}),100),window.addEventListener("resize",this.__resizeHandler)),this.sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.sidebarElm&&this.sidebarElm.addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler:function(e){"width"===e.propertyName&&this.__resizeHandler()},setOptions:function(){var e=[100,80,60,40],t=["拱墅区","余杭区","西湖区","江干区"],a=[683,523,240,234];this.chart.setOption({xAxis:{show:!1},yAxis:[{show:!0,data:t,inverse:!0,axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"black",formatter:function(e,t){return[e].join("\n")},show:!0,margin:-10,align:"left",verticalAlign:"bottom",padding:[0,0,15,0],fontSize:16,rich:{lg:{backgroundColor:"#339911",color:"green",borderRadius:10,align:"center",width:15,height:15}}}},{show:!0,inverse:!0,data:a,axisLabel:{textStyle:{fontSize:20,color:"#339911"}},axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1}}],series:[{name:"条",type:"bar",yAxisIndex:0,data:e,barWidth:30,itemStyle:{normal:{barBorderRadius:30,color:function(e){return"#"+("00000"+(16777215*Math.random()+.5>>0).toString(16)).slice(-6)}}},label:{normal:{show:!1,position:"inside",formatter:"{c}%"}}},{name:"框",type:"bar",yAxisIndex:1,barGap:"-100%",data:[100,100,100,100],barWidth:30,itemStyle:{normal:{color:"none",borderColor:"#cccccc",margin:[10,0],borderWidth:2,barBorderRadius:15}}}]})},initChart:function(){this.chart=echarts.init(this.$el,"macarons"),this.setOptions()}}},s=i,o=a("2877"),c=Object(o["a"])(s,r,l,!1,null,null,null);t["default"]=c.exports},1640:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"amis-wramiser amis-container",attrs:{id:"amis-wramiser"}},[a("AmisDemo"),a("Toast",{key:"toast",attrs:{position:"top-right",theme:"default"}}),a("Alert",{key:"alert",attrs:{theme:"default"}})],1)},l=[],n=a("3011"),i=a("b8ae"),s=a("cf40"),o={name:"App",components:{AmisDemo:n["default"],Toast:Object(i["ReactInVue"])(s["ToastComponent"]),Alert:Object(i["ReactInVue"])(s["AlertComponent"])}},c=o,d=a("2877"),u=Object(d["a"])(c,r,l,!1,null,null,null);t["default"]=u.exports},"176f":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"229d":function(e,t,a){"use strict";a("ee55")},"29f4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"log log-container"},[r("div",[r("a-tabs",{attrs:{"default-active-key":"editor"},on:{change:e.stopchannel}},[r("a-tab-pane",{key:"editor"},[r("span",{attrs:{slot:"tab"},slot:"tab"},[r("vab-icon",{attrs:{icon:"aspect-ratio-fill"}}),e._v(" "+e._s(e.$translateTitle("Logs.console"))+" ")],1),r("vab-editor",{key:e.refreshFlag,attrs:{height:(e.isFullscreen,Number(e.$baseTableHeight(0))),lang:"text","max-lines":(e.isFullscreen,Number(e.$baseTableHeight(0))/12),"min-lines":(e.isFullscreen,Number(e.$baseTableHeight(0))/12),theme:"gob",value:e.msg}})],1),r("a-tab-pane",{key:"table"},[r("span",{attrs:{slot:"tab"},slot:"tab"},[r("vab-icon",{attrs:{icon:"table-2"}}),e._v(" "+e._s(e.$translateTitle("Logs.table"))+" ")],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list.slice((e.queryForm.pageNo-1)*e.queryForm.pageSize,e.queryForm.pageNo*e.queryForm.pageSize),height:e.height},scopedSlots:e._u([{key:"empty",fn:function(){return[r("a-empty",{staticClass:"vab-data-empty",attrs:{description:!1}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("home.updatedAt"),prop:"timestamp","show-overflow-tooltip":"",sortable:"",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(" "+e._s(e.$moment(Number(a.timestamp)).format("YYYY-MM-DD HH:mm:ss.SSS"))+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.log"),prop:"msg","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-input",{model:{value:a.msg,callback:function(t){e.$set(a,"msg",t)},expression:"row.msg"}},[r("el-button",{directives:[{name:"copyText",rawName:"v-copyText",value:a.msg,expression:"row.msg"}],attrs:{slot:"prepend",icon:"el-icon-copy-document"},slot:"prepend"})],1)]}}])})],1),r("el-pagination",{attrs:{background:"","current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.list.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),r("a-tab-pane",{key:"device",attrs:{disabled:!e.product.length}},[r("span",{attrs:{slot:"tab"},slot:"tab"},[r("vab-icon",{attrs:{icon:"traffic-light-line"}}),e._v(" "+e._s(e.$translateTitle("system.Accurate log"))+" ")],1),r("el-row",{attrs:{gutter:24}},[r("vab-query-form",[r("vab-query-form-top-panel",[r("el-form",{attrs:{inline:!0,"label-width":"120px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$translateTitle("alert.productname"))+" "),r("el-badge",{staticClass:"item",attrs:{value:e.product.length}})],1),r("el-select",{on:{change:function(t){return e.queryDevice()}},model:{value:e.queryForm.product,callback:function(t){e.$set(e.queryForm,"product",t)},expression:"queryForm.product"}},e._l(e.product,(function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.objectId}})})),1)],1)],1)],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.Device,height:e.$baseTableHeight(0)-90},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.devicename"),prop:"name","show-overflow-tooltip":"",sortable:""}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.devicenumber"),prop:"devaddr","show-overflow-tooltip":"",sortable:""}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.log")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.subscriptionlog(a.devaddr)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")])]}}])})],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":"",top:"1vh",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("vab-editor",{key:e.editorKey,attrs:{height:(e.isFullscreen,Number(e.$baseTableHeight(0))),lang:"text","max-lines":(e.isFullscreen,Number(e.$baseTableHeight(0))/12),"min-lines":(e.isFullscreen,Number(e.$baseTableHeight(0))/12),theme:"gob",value:e.deviceLog}})],1)],1)])},l=[],n=a("1da1"),i=(a("96cf"),a("1285")),s={name:"MqttLog",components:{},props:{channelId:{type:String,default:"",required:!1},msg:{type:String,default:"",required:!1},list:{type:Array,default:function(){return[]},required:!1},product:{type:Array,default:function(){return[]},required:!1},refreshFlag:{type:String,default:"",required:!1}},data:function(){return{router:"",pubtopic:"",topicKey:"",dialogVisible:!1,editorKey:moment().format("x"),deviceLog:"",loading:!1,Device:[],height:this.$baseTableHeight(0)+60,clickItem:"",isFullscreen:!1,listLoading:!1,layout:"total, sizes, prev, pager, next, jumper",total:0,queryForm:{product:"",device:"",account:"",searchDate:"",pageNo:1,pageSize:20}}},watch:{product:function(e){null!==e&&void 0!==e&&e.length&&(this.queryForm.product=e[0].objectId,this.queryDevice())},topicKey:{handler:function(e,t){var a=this,r=this;e&&(this.$dgiotBus.$off(e),this.$dgiotBus.$on(e,(function(e){var t=e.payload;a.mqttMsg(t)}))),t&&(r.submessage="",r.msgList=[],r.logKey="99")},deep:!0,limit:!0}},mounted:function(){},methods:{stopchannel:function(e){"device"==e&&this.$dgiotBus.$emit("MqttUnbscribe",this.$dgiotBus.router(this.$route.fullPath),"log/channel/"+this.channelId+"/#")},mqttMsg:function(e){this.editorKey=moment().format("x"),this.deviceLog+=e+"\n"},subscriptionlog:function(e){this.editorKey=moment().format("x"),this.deviceLog="Log is true\n",this.pubtopic="channel/"+this.channelId+"/"+this.queryForm.product+"/"+e,this.subtopic="log/"+this.pubtopic,this.router=this.$dgiotBus.router(location.href),this.topicKey=this.$dgiotBus.topicKey(this.router,this.subtopic);var t={router:this.router,topic:this.subtopic,qos:2,ttl:108e5};this.$dgiotBus.$emit("MqttSubscribe",t),this.dialogVisible=!this.dialogVisible},queryDevice:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=e.$baseColorfullLoading(),r={order:"-createdAt",keys:"objectId,name,devaddr",where:{product:e.queryForm.product?e.queryForm.product:{$ne:null,$exists:!0}}},t.next=5,Object(i["queryDevice"])(r);case 5:l=t.sent,n=l.results,a.close(),e.Device=n,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$baseMessage(e.$translateTitle("alert.Data request error")+"".concat(t.t0),"error","vab-hey-message-error");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageNo=e,this.fetchData()},fetchData:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},o=s,c=a("2877"),d=Object(c["a"])(o,r,l,!1,null,null,null);t["default"]=d.exports},"2f31":function(e,t,a){},3011:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AMisRenderer",{attrs:{schema:e.schema}})},l=[],n=a("4b9b"),i={name:"AmisDemo",components:{AMisRenderer:n["default"]},data:function(){return{schema:{type:"app",brandName:"dgiot-amis",logo:"/assets/images/logo/logo.png",header:{type:"tpl",inline:!1,className:"w-full",tpl:'<div class="flex justify-between"><div>顶部区域左侧</div><div>顶部区域右侧</div></div>'},api:"/pages/site.json"}}}},s=i,o=a("2877"),c=Object(o["a"])(s,r,l,!1,null,null,null);t["default"]=c.exports},"36ef":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},l=[],n=(a("99af"),a("ed08")),i={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"370px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0,default:function(){return{expectedData:[],actualData:[],title:"1",max:0}}}},data:function(){return{chart:null,sidebarElm:null}},watch:{chartData:{deep:!0,handler:function(e){this.setOptions(e)}}},mounted:function(){var e=this,t=document.getElementsByClassName("chart")[0];t.style.width=.4*window.innerWidth-120+"px",this.initChart(),this.autoResize&&(this.__resizeHandler=Object(n["debounce"])((function(){e.chart&&(t.style.width=.4*window.innerWidth-120+"px",e.chart.resize())}),100),window.addEventListener("resize",this.__resizeHandler))},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler:function(e){"width"===e.propertyName&&this.__resizeHandler()},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expectedData,a=e.actualData,r=e.title,l=e.max;this.chart.setOption({xAxis:{data:a,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},title:{text:r,textStyle:{color:"black"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["数据"]},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{type:"slider",show:!0,start:0,end:50,handleSize:8},{type:"inside",start:0,end:50}],visualMap:{show:!1,dimension:1,pieces:[{gte:0,lte:l,color:"green"}],outOfRange:{color:"red"}},series:[{name:"数据",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#7CF5A2"},{offset:.6,color:"#7EF57C"},{offset:1,color:"#fff"}])}}}},markLine:{silent:!1,data:[{name:"告警线",yAxis:l,label:{show:"true",position:"middle",formatter:"".concat(r,"最大").concat(l)}}]},smooth:!0,type:"line",data:t,animationDuration:2800,animationEasing:"cubicInOut"}]})},initChart:function(){var e=this;setTimeout((function(){e.chart=echarts.init(e.$el,"macarons"),e.setOptions(e.chartData)}),1e3)}}},s=i,o=a("2877"),c=Object(o["a"])(s,r,l,!1,null,null,null);t["default"]=c.exports},"37e2":function(e){e.exports=JSON.parse('{"type":"page","title":"查看详情 ${params.id}","remark":null,"toolbar":[{"type":"button","actionType":"link","link":"/crud/list","label":"返回列表"}],"body":[{"type":"form","initApi":"/api/sample/${params.id}","controls":[{"type":"static","name":"engine","label":"Engine"},{"type":"divider"},{"type":"static","name":"browser","label":"Browser"},{"type":"divider"},{"type":"static","name":"platform","label":"Platform(s)"},{"type":"divider"},{"type":"static","name":"version","label":"Engine version"},{"type":"divider"},{"type":"static","name":"grade","label":"CSS grade"},{"type":"divider"},{"type":"html","html":"<p>添加其他 <span>Html 片段</span> 需要支持变量替换（todo）.</p>"}]}]}')},"3f2c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-editor-container"},[a("panel-group",{on:{handleSetLineChartData:e.handleSetLineChartData}}),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{lg:12,sm:24,xs:24}},[a("div",{staticClass:"chart-wrapper"},[a("line-chart",{attrs:{"chart-data":e.lineChartData}})],1)]),a("el-col",{attrs:{lg:12,sm:24,xs:24}},[a("div",{staticClass:"chart-wrapper"},[a("span",[e._v("台区用电量排名")]),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.daydata.apply(null,arguments)}}},[e._v(" 日 ")]),a("el-button",{attrs:{type:"primary"}},[e._v(" 月 ")]),a("el-button",{attrs:{type:"primary"}},[e._v(" 年 ")])],1),a("Circularchart")],1)])],1)],1)},l=[],n=a("36ef"),i=a("1536"),s={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},o=[[[28604,77,17096869,"Australia",1990],[31163,77.4,27662440,"Canada",1990],[1516,68,1154605773,"China",1990],[13670,74.7,10582082,"Cuba",1990],[28599,75,4986705,"Finland",1990],[29476,77.1,56943299,"France",1990],[31476,75.4,78958237,"Germany",1990],[28666,78.1,254830,"Iceland",1990],[1777,57.7,870601776,"India",1990],[29550,79.1,122249285,"Japan",1990],[2076,67.9,20194354,"North Korea",1990],[12087,72,42972254,"South Korea",1990],[24021,75.4,3397534,"New Zealand",1990],[43296,76.8,4240375,"Norway",1990],[10088,70.8,38195258,"Poland",1990],[19349,69.6,147568552,"Russia",1990],[10670,67.3,53994605,"Turkey",1990],[26424,75.7,57110117,"United Kingdom",1990],[37062,75.4,252847810,"United States",1990]],[[44056,81.8,23968973,"Australia",2015],[43294,81.7,35939927,"Canada",2015],[13334,76.9,1376048943,"China",2015],[21291,78.5,11389562,"Cuba",2015],[38923,80.8,5503457,"Finland",2015],[37599,81.9,64395345,"France",2015],[44053,81.1,80688545,"Germany",2015],[42182,82.8,329425,"Iceland",2015],[5903,66.8,1311050527,"India",2015],[36162,83.5,126573481,"Japan",2015],[1390,71.4,25155317,"North Korea",2015],[34644,80.7,50293439,"South Korea",2015],[34186,80.6,4528526,"New Zealand",2015],[64304,81.6,5210967,"Norway",2015],[24787,77.3,38611794,"Poland",2015],[23038,73.13,143456918,"Russia",2015],[19360,76.5,78665830,"Turkey",2015],[38225,81.4,64715810,"United Kingdom",2015],[53354,79.1,321773631,"United States",2015]]],c={name:"DashboardAdmin",components:{LineChart:n["default"],Circularchart:i["default"]},data:function(){return{lineChartData:s.newVisitis,scatterChartData:o}},methods:{handleSetLineChartData:function(e){this.lineChartData=s[e]},daydata:function(){}}},d=c,u=(a("ae63"),a("2877")),p=Object(u["a"])(d,r,l,!1,null,"2be56dfa",null);t["default"]=p.exports},"4b9b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"renderBox",staticClass:"box"})},l=[],n=(a("ac1f"),a("841c"),a("d3b7"),a("b64b"),a("c19f"),a("e9c4"),a("00b4"),a("1276"),a("a15b"),a("99af"),a("cf40")),i=a("f904"),s=a.n(i),o=a("8bc8"),c=a.n(o),d={props:{schema:{type:Object},updateLocation:{type:Function,required:!1,default:function(){}},onAction:{type:Function,required:!1,default:function(){}}},data:function(){return{theme:"default"}},mounted:function(){this.initEnv(),c.a.render(Object(n["render"])(this.schema,{onAction:this.onAction||this.handleAction,theme:this.theme},this.envnpm),this.$refs.renderBox)},methods:{initEnv:function(){var e=this;this.env={session:"global",updateLocation:this.updateLocation||this.updateRoute,isCurrentUrl:function(t){var a=e.normalizeLink(t),r=window.location,l=a,n="",i=a.indexOf("?");if(~i&&(l=a.substring(0,i),n=a.substring(i)),n){if(l!==r.pathname||!r.search)return!1;var s=qs.parse(n.substring(1)),o=qs.parse(r.search.substring(1));return Object.keys(s).every((function(e){return s[e]===o[e]}))}return l===r.pathname},fetcher:function(e){var t=e.url,a=e.method,r=e.data,l=e.config,n=e.headers;return l=l||{},l.headers=l.headers||{},l.withCredentials=!0,l.cancelExecutor&&(l.cancelToken=new axios.CancelToken(l.cancelExecutor)),l.headers=n||{},l.method=a,"get"===a&&r?l.params=r:r&&r instanceof FormData||!r||"string"===typeof r||r instanceof Blob||r instanceof ArrayBuffer||(r=JSON.stringify(r),l.headers["Content-Type"]="application/json"),r&&(l.data=r),axios(t,l)},isCancel:function(e){return axios.isCancel(e)},alert:n["alert"],notify:function(e,t){n["toast"][e]&&n["toast"][e](t,"error"===e?"系统错误":"系统消息")},confirm:n["confirm"],copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s()(e,t);return a&&(!t||!0!==t.shutup)&&n["toast"].info("内容已拷贝到剪切板"),a}}},updateRoute:function(e,t){if("goBack"===e)return this.$router.go(-1);this.$router[t?"replace":"push"](this.normalizeLink(e))},handleAction:function(e,t){this.env.alert("没有识别的动作：".concat(JSON.stringify(t)))},normalizeLink:function(e){if(/^\/api\//.test(e))return e;e=e||"";var t=window.location;e&&"#"===e[0]?e=t.pathname+t.search+e:e&&"?"===e[0]&&(e=t.pathname+e);var a=e.indexOf("?"),r=e.indexOf("#"),l=~a?e.substring(0,a):~r?e.substring(0,r):e,n=~a?e.substring(a,~r?r:void 0):"",i=~r?e.substring(r):"";if(l){if("/"!=l[0]&&!/^https?:\/\//.test(l)){var s,o=t.pathname,c=o.split("/");c.pop();while(s=/^\.\.?\//.exec(l))"../"===s[0]&&c.pop(),l=l.substring(s[0].length);l=c.concat(l).join("/")}}else l=t.pathname;return l+n+i}}},u=d,p=a("2877"),m=Object(p["a"])(u,r,l,!1,null,null,null);t["default"]=m.exports},"52e3":function(e){e.exports=JSON.parse('{"type":"page","title":"复杂表单","subTitle":"展示表格编辑、联动等等","body":[{"type":"form","mode":"horizontal","title":"","affixFooter":true,"api":"/api/form/save","actions":[{"label":"保存","type":"submit","level":"success"}],"controls":[{"type":"fieldSet","title":"基本配置","controls":[{"type":"text","label":"任务名称","name":"title","size":"md","required":true},{"type":"textarea","label":"任务描述","name":"description","size":"md"},{"label":"任务频率","type":"radios","name":"repeat","inline":true,"value":"none","required":true,"options":[{"label":"不重复","value":"none"},{"label":"每天","value":"day"},{"label":"每周","value":"week"},{"label":"每月","value":"month"}]},{"label":"每天几点","type":"select","name":"time","multiple":true,"required":true,"extractValue":true,"visibleOn":"this.repeat == \\"day\\"","inline":true,"options":[{"value":0,"label":"0:00"},{"value":1,"label":"1:00"},{"value":2,"label":"2:00"},{"value":3,"label":"3:00"},{"value":4,"label":"4:00"},{"value":5,"label":"5:00"},{"value":6,"label":"6:00"},{"value":7,"label":"7:00"},{"value":8,"label":"8:00"},{"value":9,"label":"9:00"},{"value":10,"label":"10:00"},{"value":11,"label":"11:00"},{"value":12,"label":"12:00"},{"value":13,"label":"13:00"},{"value":14,"label":"14:00"},{"value":15,"label":"15:00"},{"value":16,"label":"16:00"},{"value":17,"label":"17:00"},{"value":18,"label":"18:00"},{"value":19,"label":"19:00"},{"value":20,"label":"20:00"},{"value":21,"label":"21:00"},{"value":22,"label":"22:00"},{"value":23,"label":"23:00"}]},{"label":"每周几执行","type":"button-group","name":"weekdays","size":"md","visibleOn":"this.repeat == \\"week\\"","clearable":true,"multiple":true,"required":true,"extractValue":true,"maxLength":7,"options":[{"label":"周一","value":"0"},{"label":"周二","value":"1"},{"label":"周三","value":"2"},{"label":"周四","value":"3"},{"label":"周五","value":"4"},{"label":"周六","value":"5"},{"label":"周日","value":"6"}]},{"label":"每月几号执行","type":"list","name":"monthday","size":"md","visibleOn":"this.repeat == \\"month\\"","required":true,"maxLength":31,"clearable":true,"multiple":true,"extractValue":true,"options":[{"value":0,"label":"01"},{"value":1,"label":"02"},{"value":2,"label":"03"},{"value":3,"label":"04"},{"value":4,"label":"05"},{"value":5,"label":"06"},{"value":6,"label":"07"},{"value":7,"label":"08"},{"value":8,"label":"09"},{"value":9,"label":"10"},{"value":10,"label":"11"},{"value":11,"label":"12"},{"value":12,"label":"13"},{"value":13,"label":"14"},{"value":14,"label":"15"},{"value":15,"label":"16"},{"value":16,"label":"17"},{"value":17,"label":"18"},{"value":18,"label":"19"},{"value":19,"label":"20"},{"value":20,"label":"21"},{"value":21,"label":"22"},{"value":22,"label":"23"},{"value":23,"label":"24"},{"value":24,"label":"25"},{"value":25,"label":"26"},{"value":26,"label":"27"},{"value":27,"label":"28"},{"value":28,"label":"29"},{"value":29,"label":"30"},{"value":30,"label":"31"}]}]},{"type":"fieldSet","title":"其他信息","collapsable":true,"controls":[{"type":"combo","name":"admins","label":"用户列表","value":[""],"description":"请输入用户信息，不要重复。","multiple":true,"inline":true,"controls":[{"type":"text","name":"name","unique":true},{"type":"select","name":"perm","value":"read","options":[{"label":"可读","value":"read"},{"label":"可写","value":"write"}]}]},{"label":"新增一行","type":"button","actionType":"add","target":"thetable","level":"info"},{"name":"thetable","type":"table","label":"任务参数","editable":true,"addable":true,"removable":true,"columns":[{"label":"参数名","name":"key","quickEdit":true},{"label":"参数值","name":"value","quickEdit":true}]}]}]}]}')},6698:function(e,t,a){"use strict";a("9228")},"678e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"vab-fullscreen":e.isFullscreen}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-input",{attrs:{clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:e.handleQuery}},[e._v(" "+e._s(e.$translateTitle("button.search"))+" ")]),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},nativeOn:{click:function(t){return e.handleAdd.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("button.add"))+" ")])],1)],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.categoryList,"default-sort":{prop:"order",order:"ascending"},height:e.height,"row-key":"objectId",size:e.lineHeight,stripe:e.stripe,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.setSelectRows},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{type:"index",width:"50","show-overflow-tooltip":"",sortable:"",align:"center",prop:"name"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.name"),prop:"name","show-overflow-tooltip":"",sortable:""}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),"show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleAddChild(a)}}},[e._v(" "+e._s(e.$translateTitle("category.Add subcategory"))+" ")]),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("button.delete"))+" ")])]}}])})],1),r("categoryEdit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},l=[],n=a("1da1"),i=(a("b0c0"),a("96cf"),a("013b")),s=a("03b1"),o=a("07e2"),c={name:"Empty",components:{categoryEdit:i["default"]},data:function(){return{infoData:"Category",isFullscreen:!1,border:!0,height:this.$baseTableHeight(0)+40,stripe:!1,lineHeight:"medium",categoryList:[],listLoading:!0,total:0,selectRows:"",queryForm:{pageNo:1,pageSize:20,name:"",limt:10,skip:0,order:"createdAt",keys:"count(*)"}}},computed:{dragOptions:function(){return{animation:600,group:"description"}}},mounted:function(){},created:function(){this.fetchData()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{clickFullScreen:function(){this.isFullscreen=!this.isFullscreen,this.handleHeight()},handleHeight:function(){this.isFullscreen?this.height=this.$baseTableHeight(1)+210:this.height=this.$baseTableHeight(1)},setSelectRows:function(e){this.selectRows=e},handleAdd:function(){this.$refs["edit"].showEdit({order:0},"top")},handleAddChild:function(e){this.$refs["edit"].showEdit(e,"child")},handleEdit:function(e){this.$refs["edit"].showEdit(e,"edit")},handleDelete:function(e){var t=this;this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),this.$translateTitle("Maintenance.Delete reminder"),Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["delCategory"])(e);case 2:if(r=a.sent,!_.isEmpty(r)){a.next=9;break}return t.$baseMessage(t.$translateTitle("user.successfully deleted"),"success","vab-hey-message-success"),a.next=7,t.fetchData();case 7:a.next=10;break;case 9:t.$baseMessage(t.$translateTitle("user.error deleted")+r,"error","vab-hey-message-error");case 10:case"end":return a.stop()}}),a)}))))},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageNo=e,this.fetchData()},handleQuery:function(){this.queryForm.pageNo=1,this.fetchData()},fetchData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,l,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.queryForm.name.length?'{ "$regex": "'+e.queryForm.name+'"}':'{ "$ne": "null" }',e.listLoading=!0,r={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level","createdAt"],"where":{"level": {"$gte": 1}, "name":'+a+"}}",parent:"parent"},t.next=5,Object(o["post_tree"])(r);case 5:l=t.sent,n=l.results,i=void 0===n?[]:n,e.categoryList=i,e.listLoading=!1;case 10:case"end":return t.stop()}}),t)})))()}}},d=c,u=(a("a107"),a("2877")),p=Object(u["a"])(d,r,l,!1,null,"98576e5a",null);t["default"]=p.exports},"6af1f":function(e,t,a){"use strict";a("e6a7")},"6da0":function(e,t,a){},"789f":function(e,t,a){"use strict";a.r(t);var r=[{columns:["clientid","username","event","id","payload","peerhost","qos","timestamp","topic","node"],description:{en:"message publish",zh:"消息发布"},event:"message.publish",sql_example:"SELECT payload.msg as msg FROM \"message.publish\" WHERE topic =~ 't/#' and msg = 'hello'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic:"t/a",qos:1,payload:'{"msg": "hello"}'},title:{en:"message publish",zh:"消息发布"}},{columns:["clientid","username","event","auth_result","mountpoint","id","payload","peerhost","topic","qos","timestamp","node"],description:{en:"message delivered",zh:"消息投递"},event:"message.delivered",sql_example:"SELECT payload.msg as msg FROM \"message.delivered\" WHERE topic =~ 't/#' and msg = 'hello'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic:"t/a",qos:1,payload:'{"msg": "hello"}'},title:{en:"message delivered",zh:"消息投递"}},{columns:["clientid","username","event","id","payload","peerhost","topic","qos","timestamp","node"],description:{en:"message acked",zh:"消息应答"},event:"message.acked",sql_example:"SELECT payload.msg as msg FROM \"message.acked\" WHERE topic =~ 't/#' and msg = 'hello'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic:"t/a",qos:1,payload:'{"msg": "hello"}'},title:{en:"message acked",zh:"消息应答"}},{columns:["clientid","username","event","id","payload","peerhost","qos","timestamp","topic","node"],description:{en:"message dropped",zh:"消息丢弃"},event:"message.dropped",sql_example:"SELECT payload.msg as msg FROM \"message.dropped\" WHERE topic =~ 't/#' and msg = 'hello'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic:"t/a",qos:1,payload:'{"msg": "hello"}'},title:{en:"message dropped",zh:"消息丢弃"}},{columns:["clientid","username","event","auth_result","clean_start","connack","connected_at","is_bridge","keepalive","mountpoint","peerhost","proto_ver","timestamp","node"],description:{en:"client connected",zh:"连接建立"},event:"client.connected",sql_example:'SELECT * FROM "client.connected"',test_columns:{clientid:"c_emqx",username:"u_emqx",auth_result:"success",peerhost:"127.0.0.1"},title:{en:"client connected",zh:"连接建立"}},{columns:["clientid","username","event","auth_result","mountpoint","peerhost","reason_code","timestamp","node"],description:{en:"client disconnected",zh:"连接断开"},event:"client.disconnected",sql_example:'SELECT * FROM "client.disconnected"',test_columns:{clientid:"c_emqx",username:"u_emqx",reason_code:"normal"},title:{en:"client disconnected",zh:"连接断开"}},{columns:["clientid","username","event","auth_result","mountpoint","peerhost","topic_filters","topic","qos","timestamp","node"],description:{en:"client subscribe",zh:"终端订阅"},event:"client.subscribe",sql_example:"SELECT * FROM \"client.subscribe\" WHERE topic =~ 't/#'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic_filters:[{topic:"t/a",qos:0},{topic:"t/b",qos:1}]},title:{en:"client subscribe",zh:"终端订阅"}},{columns:["clientid","username","event","auth_result","mountpoint","peerhost","topic_filters","topic","qos","timestamp","node"],description:{en:"client unsubscribe",zh:"终端取消订阅"},event:"client.unsubscribe",sql_example:"SELECT * FROM \"client.unsubscribe\" WHERE topic =~ 't/#'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic_filters:["t/a","t/b"]},title:{en:"client unsubscribe",zh:"终端取消订阅"}},{columns:["clientid","username","event","topic","qos","nl","rap","rc","rh","timestamp","node"],description:{en:"session subscribed",zh:"会话订阅完成"},event:"session.subscribed",sql_example:"SELECT * FROM \"session.subscribed\" WHERE topic =~ 't/#'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic:"t/a",qos:1},title:{en:"session subscribed",zh:"会话订阅完成"}},{columns:["clientid","username","event","topic","qos","nl","rap","rc","rh","timestamp","node"],description:{en:"session unsubscribed",zh:"会话取消订阅完成"},event:"session.unsubscribed",sql_example:"SELECT * FROM \"session.unsubscribed\" WHERE topic =~ 't/#'",test_columns:{clientid:"c_emqx",username:"u_emqx",topic:"t/a",qos:1},title:{en:"session unsubscribed",zh:"会话取消订阅完成"}}];t["default"]=r},"78e1":function(e){e.exports=JSON.parse('{"type":"page","title":"修改 ${params.id}","remark":null,"toolbar":[{"type":"button","actionType":"link","link":"/crud/list","label":"返回列表"}],"body":[{"type":"form","initApi":"/api/sample/${params.id}","api":"/api/sample/$id","redirect":"/crud/list","controls":[{"type":"text","name":"engine","label":"Engine","required":true},{"type":"divider"},{"type":"text","name":"browser","label":"Browser","required":true},{"type":"divider"},{"type":"text","name":"platform","label":"Platform(s)","required":true},{"type":"divider"},{"type":"text","name":"version","label":"Engine version"},{"type":"divider"},{"type":"select","name":"grade","label":"CSS grade","options":["A","B","C","D","X"]}]}]}')},"81eb":function(e,t,a){"use strict";a("f56d")},"87ea":function(e){e.exports=JSON.parse('{"type":"page","title":"Dashboard","body":"body..."}')},9228:function(e,t,a){},9406:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"main"},[a("a-tabs",{staticClass:"tabs",attrs:{"default-active-key":"iframe"}},[a("a-tab-pane",{key:"iframe",attrs:{tab:e.$translateTitle("leftbar.monitor")}},[a("iframe",{directives:[{name:"show",rawName:"v-show",value:""!=e.dashboardrul&&e.dashboardrul,expression:"dashboardrul != '' && dashboardrul"}],staticClass:"iframe",attrs:{id:"iframe",frameborder:"0",height:"700",width:"100%"}})]),a("a-tab-pane",{key:"chart",attrs:{"force-render":"",tab:e.$translateTitle("equipment.chart")}},[a("empty")],1)],1)],1)])},l=[],n=(a("ac1f"),a("5319"),a("d170")),i={name:"Dashboard",components:{empty:n["default"]},data:function(){return{currentRole:"adminDashboard",isshow:0,childshow:0,form:{date1:"",date2:""},refresh:"",dashboardrul:"http://47.105.106.54:3000/",timerefesh:{val1:"15s",val2:"30s",val3:"60s"},categoryIndex:0}},computed:{},mounted:function(){this.getDashboard()},methods:{getDashboard:function(){this.dashboardrul=location.protocol+"//"+location.hostname+":3000";var e=document.getElementById("iframe");e.setAttribute("src",this.dashboardrul)},selectval:function(e,t){var a=/(refresh=[^&]+)/;this.dashboardrul=this.dashboardrul.replace(a,"refresh="+e),this.categoryIndex=t}}},s=i,o=(a("0838"),a("2877")),c=Object(o["a"])(s,r,l,!1,null,null,null);t["default"]=c.exports},"9c56":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"createResourcechannel"},[r("vab-input",{ref:"uploadFinish",on:{fileInfo:e.fileInfo}}),r("el-form",{ref:"addchannel",attrs:{"label-width":"auto",model:e.addchannel,rules:e.addrules,size:"mini"}},[r("div",{staticClass:"dialog-footer",staticStyle:{margin:"15px"}},[r("el-button",{on:{click:e.handleClose}},[e._v(" "+e._s(e.$translateTitle("developer.back"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addchannelForm("addchannel")}}},[e._v(" "+e._s(e.$translateTitle("developer.create"))+" ")])],1),r("el-row",[r("el-form-item",{attrs:{label:"通道类型",prop:"region"}},[r("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"通道类型"},on:{change:e.removeauto},model:{value:e.addchannel.region,callback:function(t){e.$set(e.addchannel,"region",t)},expression:"addchannel.region"}},e._l(e.channelregion,(function(e,t){return r("el-option",{key:t,staticStyle:{display:"block"},attrs:{label:e.title.zh,value:e.cType}})})),1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$translateTitle("developer.channelname"),prop:"name"}},[r("el-input",{staticStyle:{float:"left"},attrs:{autocomplete:"off",placeholder:e.$translateTitle("developer.channelname")},model:{value:e.addchannel.name,callback:function(t){e.$set(e.addchannel,"name",t)},expression:"addchannel.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属应用",prop:"applicationtText"}},[r("el-input",{attrs:{readonly:""},on:{focus:function(t){e.showTree=!e.showTree}},model:{value:e.addchannel.applicationtText,callback:function(t){e.$set(e.addchannel,"applicationtText",t)},expression:"addchannel.applicationtText"}}),e.showTree?r("div",{staticClass:"device-tree"},[r("el-tree",{attrs:{data:e.allApps,"default-expand-all":"",props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1)],1),e._l(e.arrlist,(function(t,a){return r("el-col",{key:a,attrs:{span:12}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ico"!=t.showname,expression:"item.showname != 'ico'"}],attrs:{label:t.title.zh,prop:t.showname,required:t.required}},[r("el-tooltip",{attrs:{effect:"dark",placement:"right-start"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t.description.zh)+" ")]),r("i",{staticClass:"el-icon-question",staticStyle:{float:"left"}})]),"string"==t.type?r("el-input",{staticStyle:{width:"98%"},model:{value:e.addchannel[t.showname],callback:function(a){e.$set(e.addchannel,t.showname,a)},expression:"addchannel[item.showname]"}}):"integer"==t.type?r("el-input",{staticStyle:{width:"98%"},model:{value:e.addchannel[t.showname],callback:function(a){e.$set(e.addchannel,t.showname,e._n(a))},expression:"addchannel[item.showname]"}}):"ico"==t.showname?r("el-image",{staticStyle:{display:"none",width:"98%"}}):"boolean"==t.type?r("el-select",{staticClass:"notauto",staticStyle:{width:"98%"},attrs:{readonly:""},model:{value:e.addchannel[t.showname],callback:function(a){e.$set(e.addchannel,t.showname,a)},expression:"addchannel[item.showname]"}},[r("el-option",{attrs:{label:"是",value:!0}}),r("el-option",{attrs:{label:"否",value:!1}})],1):"enum"==t.type?r("el-select",{staticStyle:{width:"98%"},model:{value:e.addchannel[t.showname],callback:function(a){e.$set(e.addchannel,t.showname,a)},expression:"addchannel[item.showname]"}},e._l(t.enum,(function(e,a){return r("el-option",{key:a,attrs:{label:t.enum[a],value:t.enum[a]}})})),1):e._e()],1)],1)})),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[r("el-input",{attrs:{autocomplete:"off",placeholder:e.$translateTitle("developer.describe"),rows:3,type:"textarea"},model:{value:e.addchannel.desc,callback:function(t){e.$set(e.addchannel,"desc",t)},expression:"addchannel.desc"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-row",{staticStyle:{width:"100%","max-height":"500px",margin:"0","overflow-x":"hidden","overflow-y":"scroll","line-height":"30px","text-align":"center"},attrs:{gutter:24}},e._l(e.channelregion,(function(t,l){return r("el-col",{key:l,staticStyle:{padding:"10px",margin:"0px",cursor:"pointer"},attrs:{span:4}},[r("el-card",{staticClass:"box-card",style:{color:e.addchannel.region==t.cType?"#00bad0":"#c0c4cc"},attrs:{shadow:e.addchannel.region==t.cType?"always":"hover",size:"mini"}},[r("div",{staticClass:"text item",on:{click:function(a){return e.setCard(t.cType)}}},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:6}},[r("img",{staticClass:"image",staticStyle:{width:"50px",height:"50px"},attrs:{src:t.params.ico.default?t.params.ico.default:a("67aa")}})]),r("el-col",{attrs:{span:18}},[r("span",[r("p",[r("el-tag",{staticStyle:{float:"left",color:"black","text-align":"left",background:"#fff"}},[e._v(" "+e._s(t.cType)+" ")])],1),r("p",{attrs:{title:t.title.zh}},[e._v(" "+e._s(t.title.zh)+" ")])])])],1)],1)])],1)})),1)],1)],2)],1)],1)},l=[],n=a("1da1"),i=a("5530"),s=(a("b0c0"),a("d3b7"),a("25f0"),a("4e82"),a("d81d"),a("159b"),a("96cf"),a("67aa")),o=a.n(s),c=a("1b07"),d=a("89e8"),u=a("5880"),p={name:"CreateResourcechannel",components:{},data:function(){return{channelregion:[],defaultProps:{children:"children",label:"label"},resourceid:"",showTree:!1,allApps:[],arrlist:[],addrules:{applicationtText:[{required:!0,message:"请选择所属应用",trigger:"change"}],name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],region:[{required:!0,message:"请选择通道类型",trigger:"change"}]},addchannel:{name:"",region:""}}},computed:Object(i["a"])({},Object(u["mapGetters"])({roleTree:"user/roleTree"})),mounted:function(){this.getResource()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(u["mapActions"])({addVisitedRoute:"tabs/addVisitedRoute",delVisitedRoute:"tabs/delVisitedRoute",delOthersVisitedRoutes:"tabs/delOthersVisitedRoutes",delLeftVisitedRoutes:"tabs/delLeftVisitedRoutes",delRightVisitedRoutes:"tabs/delRightVisitedRoutes",delAllVisitedRoutes:"tabs/delAllVisitedRoutes"})),{},{initFrom:function(){this.addchannel={},this.channelForm=!1,this.$refs["addchannel"].resetFields(),this.resourceid=""},uploadCkick:function(e,t){this.channeindex=t,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click"))},fileInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.channelregion[t.channeindex].params.ico.default=e.url,a.next=3,Object(c["putResourceTypes"])(t.channelregion);case 3:a.sent;case 4:case"end":return a.stop()}}),a)})))()},handleClose:function(){this.handleTabRemove()},addchannelForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={};for(var r in t.addchannel)a[r]=t.addchannel[r];delete a.region,delete a.desc,delete a.type,delete a.isEnable,delete a.name;var l="role:"+t.addchannel.applicationtText,n={};n[l]={read:!0,write:!0};var i={ACL:n,config:a,name:t.addchannel.name,cType:t.addchannel.region,desc:t.addchannel.desc,isEnable:!1,status:"OFFLINE",type:t.addchannel.type.toString()};t.addchannelaxios(i)}else t.$message("有必填项未填")}))},setCard:function(e){this.removeauto(e)},orderObject:function(e){var t=[];for(var a in e)e[a].showname=a,t.push(e[a]);return t.sort(this.arrSort)},removeauto:function(e){var t=this,a={},r={applicationtText:[{required:!0,message:"请选择所属应用",trigger:"change"}],name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],region:[{required:!0,message:"请选择通道类型",trigger:"change"}]};if(""==this.resourceid?this.channelregion.map((function(l){l.cType==e&&(t.$forceUpdate(),t.selectregion=l,t.arrlist=t.orderObject(t.selectregion.params),t.arrlist.map((function(e){e.default?a[e.showname]=e.default:a[e.showname]="",e.required&&("string"==e.type||"integer"==e.type?r[e.showname]=[{required:!0,trigger:"blur"}]:r[e.showname]=[{required:!0,trigger:"change"}])})),a.region=e,a.desc="",a.name="",a.type=t.selectregion.type,a.isEnable=!1)})):this.channelregion.map((function(l){l.cType==e&&(t.selectregion=l,t.$forceUpdate(),t.arrlist=t.orderObject(t.selectregion.params),t.arrlist.map((function(l){for(var n in t.channelrow.config)l.showname==n&&(a[l.showname]=t.channelrow.config[n]),l.required&&("string"==l.type||"integer"==l.type?r[l.showname]=[{required:!0,trigger:"blur"}]:r[l.showname]=[{required:!0,trigger:"change"}]),a.region=e,a.desc=t.channelrow.desc,a.name=t.channelrow.name,a.type=t.selectregion.type,a.isEnable=t.channelrow.isEnable})))})),this.channelrow)for(var l in this.channelrow.ACL)a.applicationtText=l?l.substr(5):"";this.addchannel=a,this.addchannel.region=e,this.addrules=r},addchannelaxios:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["postChannel"])(e).then((function(e){e&&(t.$message({type:"success",message:"编辑"==t.channelupdated?"编辑成功":"创建成功"}),t.addchannel={},t.channelForm=!1,t.resourceid="",t.handleTabRemove())}));case 2:case"end":return a.stop()}}),a)})))()},handleTabRemove:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.path,t.next=3,e.delVisitedRoute(a);case 3:e.$router.go(-1);case 4:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(e){this.$set(this.addchannel,"applicationtText",e.name),this.showTree=!this.showTree},clearValidate:function(e){this.$refs.addchannel.clearValidate("".concat(e))},getResource:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allApps=e.roleTree,t.next=3,Object(c["resourceTypes"])();case 3:a=t.sent,a.forEach((function(e){e.params.ico||(e.params.ico={title:{en:"channel ICO",zh:"通道ICO"},description:{en:"channel ICO",zh:"通道ICO"},default:o.a})})),e.channelregion=a,e.$nextTick((function(){e.initFrom()}));case 7:case"end":return t.stop()}}),t)})))()},onSubmit:function(){}})},m=p,b=(a("dfe1"),a("2877")),h=Object(b["a"])(m,r,l,!1,null,"44f62c2a",null);t["default"]=h.exports},"9c971":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dict dict-container"},[a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.title_dict_dialog,visible:e.add_dict_dialog,width:"40%"},on:{"update:visible":function(t){e.add_dict_dialog=t},open:function(t){return e.opendialog("dictForm")}}},[a("el-form",{ref:"dictForm",staticClass:"dict_type",attrs:{"label-width":"135px",model:e.addDictForm,rules:e.rules1,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.dictionarytype"),prop:"templateId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""!=e.editDictId,placeholder:e.$translateTitle("task.Select")},on:{change:e.selectChange},model:{value:e.addDictForm.templateId,callback:function(t){e.$set(e.addDictForm,"templateId",t)},expression:"addDictForm.templateId"}},e._l(e.dictRecord,(function(e){return a("el-option",{key:e.objectId,attrs:{disabled:"ALL"==e.data.name,label:e.data.name,value:e.objectId}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.dictionaryname"),prop:"key",title:e.$translateTitle("developer.dictionaryuniqueID")}},[a("el-input",{attrs:{disabled:""!=e.editDictId},model:{value:e.addDictForm.key,callback:function(t){e.$set(e.addDictForm,"key",t)},expression:"addDictForm.key"}})],1)],1),e._l(e.arrlist,(function(t,r){return a("el-col",{key:r,attrs:{span:12}},[a("el-form-item",{attrs:{label:t.title.zh,prop:t.name,required:t.required}},["Boolean"==t.type?a("el-select",{staticClass:"notauto",staticStyle:{width:"100%"},attrs:{readonly:""},model:{value:e.addDictForm[t.name],callback:function(a){e.$set(e.addDictForm,t.name,a)},expression:"addDictForm[item.name]"}},[a("el-option",{attrs:{label:e.$translateTitle("product.yes"),value:!0}}),a("el-option",{attrs:{label:e.$translateTitle("product.no"),value:!1}})],1):a("el-input",{model:{value:e.addDictForm[t.name],callback:function(a){e.$set(e.addDictForm,t.name,a)},expression:"addDictForm[item.name]"}})],1)],1)})),a("el-col",{staticStyle:{"z-index":"99999"},attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("application.applicationtype"),rules1:[{required:!0,message:e.$translateTitle("product.pleaseselectyourapp"),trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.pleaseselectyourapp"),readonly:""},model:{value:e.addDictForm.applicationtText,callback:function(t){e.$set(e.addDictForm,"applicationtText",t)},expression:"addDictForm.applicationtText"}},[a("template",{slot:"append"},[a("i",{class:[e.showTree?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{cursor:"pointer"},on:{click:function(t){e.showTree=!e.showTree}}})])],2),e.showTree?a("div",{staticClass:"device-tree"},[a("el-tree",{attrs:{data:e.allApps,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1)],1),a("el-col",{staticStyle:{height:"47px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.state"),prop:"enable"}},[a("el-radio",{attrs:{border:"",label:"1"},model:{value:e.addDictForm.enable,callback:function(t){e.$set(e.addDictForm,"enable",t)},expression:"addDictForm.enable"}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]),a("el-radio",{attrs:{border:"",label:"2"},model:{value:e.addDictForm.enable,callback:function(t){e.$set(e.addDictForm,"enable",t)},expression:"addDictForm.enable"}},[e._v(" "+e._s(e.$translateTitle("developer.scrap"))+" ")])],1)],1)],2),a("el-form-item",{attrs:{label:e.$translateTitle("user.Remarks")}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:e.$translateTitle("concentrator.input"),type:"textarea"},model:{value:e.addDictForm.description,callback:function(t){e.$set(e.addDictForm,"description",t)},expression:"addDictForm.description"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{"label-width":"0px",size:"mini"}},[e.editDictId?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("dictForm")}}},[e._v(" "+e._s(e.$translateTitle("product.modify"))+" ")]):a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSubmit("dictForm")}}},[e._v(" "+e._s(e.$translateTitle("product.createnow"))+" ")]),a("el-button",{on:{click:function(t){e.add_dict_dialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)],1)],1),a("a-drawer",{attrs:{"close-on-click-modal":!1,title:e.title_temp_dialog,visible:e.dict_temp_dialog,width:"60%"},on:{close:function(t){e.dict_temp_dialog=!e.dict_temp_dialog},open:function(t){return e.opendialog("dictTempForm")}}},[a("el-form",{ref:"dictTempForm",attrs:{model:e.dictTempForm,rules:e.rules,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.dictionarytemplatename"),"label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dictTempForm.name,callback:function(t){e.$set(e.dictTempForm,"name",t)},expression:"dictTempForm.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.dictionarytemplatetype"),"label-width":e.formLabelWidth,prop:"cType"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dictTempForm.cType,callback:function(t){e.$set(e.dictTempForm,"cType",t)},expression:"dictTempForm.cType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.dictionarytemplatestatus"),"label-width":e.formLabelWidth,prop:"enable"}},[a("el-radio",{attrs:{border:"",label:"1"},model:{value:e.dictTempForm.enable,callback:function(t){e.$set(e.dictTempForm,"enable",t)},expression:"dictTempForm.enable"}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]),a("el-radio",{attrs:{border:"",label:"0"},model:{value:e.dictTempForm.enable,callback:function(t){e.$set(e.dictTempForm,"enable",t)},expression:"dictTempForm.enable"}},[e._v(" "+e._s(e.$translateTitle("developer.disable"))+" ")])],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.dictionarytemplatedata"),"label-width":e.formLabelWidth}},[a("el-tabs",{model:{value:e.elactiveName,callback:function(t){e.elactiveName=t},expression:"elactiveName"}},[a("el-tab-pane",{attrs:{label:"Table",name:"Table"}},[a("el-button",{staticClass:"mt-3",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},nativeOn:{click:function(t){return e.addRow(e.dictTempForm.params)}}},[e._v(" "+e._s(e.$translateTitle("product.newlyadded"))+" ")]),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.dictTempForm.params,height:e.height}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.name"),prop:"name"}}),a("el-table-column",{attrs:{label:e.$translateTitle("rule.Type"),prop:"type"}}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.serialnumber"),prop:"order"}}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.defaultvalue"),prop:"default"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.default&&"Boolean"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.yes"))+" ")]):0==t.row.default&&"Boolean"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.no"))+" ")]):"Number"==t.row.type?a("span",[e._v(" "+e._s(t.row.default)+" ")]):a("span",[e._v(e._s(t.row.default))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.isitrequired"),prop:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.required?a("span",[e._v(" "+e._s(e.$translateTitle("product.yes"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("product.no"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.chinesetitle"),prop:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.title.zh)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.englishtitle"),prop:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.title.en)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.chinesedescription"),prop:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.description.zh)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.englishdescription"),prop:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.description.en)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("task.Operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"mini",title:e.$translateTitle("task.Delete"),type:"danger"},nativeOn:{click:function(a){return e.delRow(t.$index,e.dictTempForm.params)}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")]),a("el-button",{attrs:{plain:"",size:"mini",title:e.$translateTitle("task.Edit"),type:"info"},nativeOn:{click:function(a){return e.editRow(t.row,t.$index,e.dictTempForm.params)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"Json",name:"Json"}},[a("vab-json-editor",{attrs:{lang:"zh",mode:"code"},on:{"has-error":e.onError,"json-change":e.onJsonChange},model:{value:e.dictTempForm.params,callback:function(t){e.$set(e.dictTempForm,"params",t)},expression:"dictTempForm.params"}})],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:e.$translateTitle("developer.Pleaseenteradescription"),type:"textarea"},model:{value:e.dictTempForm.description,callback:function(t){e.$set(e.dictTempForm,"description",t)},expression:"dictTempForm.description"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onJsonSave("dictTempForm")}}},[e._v(" "+e._s(e.$translateTitle("application.submit"))+" ")]),a("el-button",{on:{click:function(t){e.dict_temp_dialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,size:"mini",title:e.title_dict_edit_dialog,visible:e.edit_dict_temp_dialog},on:{"update:visible":function(t){e.edit_dict_temp_dialog=t},open:function(t){return e.opendialog("tempparams")}}},[a("el-form",{ref:"tempparams",staticClass:"demo-ruleForm",attrs:{"label-width":"70px",model:e.tempparams,size:"mini","status-icon":""}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.name"),"label-width":"50px",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempparams.name,callback:function(t){e.$set(e.tempparams,"name",t)},expression:"tempparams.name"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:e.$translateTitle("rule.Type"),"label-width":"50px",prop:"type"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("task.Select")},on:{change:e.tempTypeChange},model:{value:e.tempparams.type,callback:function(t){e.$set(e.tempparams,"type",t)},expression:"tempparams.type"}},e._l(e.dictOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.serialnumber"),"label-width":"50px",prop:"order"}},[a("el-input",{model:{value:e.tempparams.order,callback:function(t){e.$set(e.tempparams,"order",e._n(t))},expression:"tempparams.order"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.mustfill"),"label-width":"50px"}},[a("el-radio",{attrs:{border:"",label:!0},model:{value:e.tempparams.required,callback:function(t){e.$set(e.tempparams,"required",t)},expression:"tempparams.required"}},[e._v(" "+e._s(e.$translateTitle("product.yes"))+" ")]),a("el-radio",{attrs:{border:"",label:!1},model:{value:e.tempparams.required,callback:function(t){e.$set(e.tempparams,"required",t)},expression:"tempparams.required"}},[e._v(" "+e._s(e.$translateTitle("product.no"))+" ")])],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.chinesetitle"),prop:"title"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempparams.title.zh,callback:function(t){e.$set(e.tempparams.title,"zh",t)},expression:"tempparams.title.zh"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.englishtitle"),prop:"title"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempparams.title.en,callback:function(t){e.$set(e.tempparams.title,"en",t)},expression:"tempparams.title.en"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("equipment.defaultvalue"),prop:"default"}},["Boolean"==e.tempparams.type?a("el-select",{staticClass:"notauto",attrs:{readonly:""},model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",t)},expression:"tempparams.default"}},[a("el-option",{attrs:{label:e.$translateTitle("product.yes"),value:!0}}),a("el-option",{attrs:{label:e.$translateTitle("product.no"),value:!1}})],1):"Number"==e.tempparams.type?a("el-input",{model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",e._n(t))},expression:"tempparams.default"}}):a("el-input",{model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",t)},expression:"tempparams.default"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.chinesedescription"),prop:"title"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempparams.description.zh,callback:function(t){e.$set(e.tempparams.description,"zh",t)},expression:"tempparams.description.zh"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.englishdescription"),prop:"title"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempparams.description.en,callback:function(t){e.$set(e.tempparams.description,"en",t)},expression:"tempparams.description.en"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitFormTempDict()}}},[e._v(" "+e._s(e.$translateTitle("application.submit"))+" ")])],1)],1)],1)],1),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("developer.dictionarytemplatemanagement"),name:"字典模板管理"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:e.$translateTitle("developer.pleaseenterdictionarytemplatename"),size:"mini"},model:{value:e.search_dict,callback:function(t){e.search_dict=t},expression:"search_dict"}}),a("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:function(t){return e.searchDict(e.search_dict)}}},[e._v(" "+e._s(e.$translateTitle("task.Search"))+" ")]),a("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.createDictTemp}},[e._v(" "+e._s(e.$translateTitle("developer.createdictionarytemplate"))+" ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.dictRecord,"header-cell-style":{"text-align":"center"},height:e.height,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.indexes"),type:"index",width:"50"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarytemplatenumber"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.objectId?[e._v(" "+e._s(t.row.objectId)+" ")]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarytemplatename"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.data.name)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarytemplatetype"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.data.cType)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarytemplatestatus"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.data.enable?a("el-tag",{attrs:{type:"success"}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]):a("el-tag",{attrs:{type:"warning"}},[e._v(" "+e._s(e.$translateTitle("developer.disable"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.data.description)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("task.Operation"),width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.objectId?[a("el-button",{attrs:{plain:"",size:"mini",type:"success"},on:{click:function(a){return e.editDictTemp(t.row)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")]),"0"==t.row.data.enable?a("el-button",{attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(a){return e.disabledAllDict(t.row,"1")}}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]):a("el-button",{attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(a){return e.disabledAllDict(t.row,"0")}}},[e._v(" "+e._s(e.$translateTitle("developer.disable"))+" ")]),a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return e.deleteDict(t.row,"字典模板")}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]:void 0}}],null,!0)})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length1,"page-sizes":[10,20,30,50],total:e.total1},on:{"current-change":e.channelCurrentChange1,"size-change":e.channelSizeChange1}})],1)],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("developer.dictionarymanagement"),name:"字典管理"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:e.$translateTitle("task.Select"),size:"mini"},on:{change:e.selectDictChange},model:{value:e.dictType,callback:function(t){e.dictType=t},expression:"dictType"}},e._l(e.dictRecordOpt,(function(e){return a("el-option",{key:e.data.name,attrs:{label:e.data.name,value:e.objectId}})})),1),a("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.showDictDialog}},[e._v(" "+e._s(e.$translateTitle("developer.createdictionary"))+" ")]),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.isALL,expression:"isALL"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{border:"","cell-style":{"text-align":"center"},data:e.dictData,"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.loadingdesperately"),"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName,stripe:""}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.indexes"),type:"index",width:"50"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionaryname"),prop:"key"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarynumber"),prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.objectId)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarytype"),prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.data.templateName)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("concentrator.status")},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.data.enable?a("el-tag",{attrs:{type:"success"}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]):a("el-tag",{attrs:{type:"warning"}},[e._v(" "+e._s(e.$translateTitle("developer.scrap"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("user.Remarks")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.data.description)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.commandoperation"),width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"mini",type:"success"},on:{click:function(a){return e.editAllDict(t.row)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")]),"0"==t.row.data.enable?a("el-button",{attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(a){return e.disabledAllDict(t.row,"1")}}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]):a("el-button",{attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(a){return e.disabledAllDict(t.row,"0")}}},[e._v(" "+e._s(e.$translateTitle("developer.disable"))+" ")]),a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return e.deleteDict(t.row,"字典")}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.isALL,expression:"!isALL"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"filterObj",staticClass:"filter_obj",staticStyle:{width:"100%"},attrs:{border:"","cell-style":{"text-align":"center"},data:e.dictList,"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.loadingdesperately"),"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.dictionarytype"),prop:"templateName",width:"150"}}),e._l(e.dialogtempconfig,(function(t,r){return["Boolean"==t.type?a("el-table-column",{key:r,attrs:{label:t.title.zh,prop:t.name},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row[t.name]?a("span",[e._v(" "+e._s(e.$translateTitle("product.yes"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("product.no"))+" ")])]}}],null,!0)}):a("el-table-column",{key:r,attrs:{label:t.title.zh,prop:t.name}})]})),a("el-table-column",{attrs:{fixed:"right",label:e.$translateTitle("product.commandoperation"),width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"mini",type:"success"},on:{click:function(a){return e.editDict(t.row)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")]),"0"==t.row.enable?a("el-button",{attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(a){return e.disabledDict(t.row,"1")}}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]):a("el-button",{attrs:{plain:"",size:"mini",type:"warning"},on:{click:function(a){return e.disabledDict(t.row,"0")}}},[e._v(" "+e._s(e.$translateTitle("developer.disable"))+" ")]),a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return e.deleteDict(t.row,"字典")}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],2),e.isALL?a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.channelCurrentChange,"size-change":e.channelSizeChange}})],1):e._e()],1)],1)],1)},l=[],n=a("2909"),i=a("1da1"),s=a("5530"),o=(a("96cf"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("d81d"),a("b0c0"),a("a434"),a("e9c4"),a("99af"),a("a8be")),c=a("5880"),d=a("1b07"),u={name:"Dict",components:{},data:function(){return{height:this.$baseTableHeight(0)-50,queryid:this.$route.query.dictid,arrlist:[],addDictForm:{templateId:"",key:""},rules:{},rules1:{},loading:!1,defaultProps:{children:"children",label:"label"},count:0,start:0,total:0,length:10,count1:0,start1:0,total1:0,length1:10,isALL:!0,filterObj:[],tempObjectId:"",dictType:"ALL",allApps:[],showTree:!1,editIndexId:void 0,editDictId:"",editDictTempId:"",infoData:new Date,elactiveName:"Table",activeName:"字典模板管理",title_dict_edit_dialog:"新增字典数据",title_temp_dialog:"新增字典模板",title_dict_dialog:"新增字典",search_dict:"",add_dict_dialog:!1,dict_temp_dialog:!1,edit_dict_temp_dialog:!1,dialogtempconfigVisible:!1,dialogtempconfig:[],dictData:[],dictRecord:[],listLoading:!1,dictRecordOpt:[],dictOptions:["String","Boolean","Number"],dictForm:{type:"",name:"",nameEncrypt:"",needReply:"",enable:"",description:"",tempconfig:[]},tempparams:{name:"",type:"",order:0,title:{en:"",zh:""},default:5,required:!1,description:{en:"",zh:""}},dictList:[],dictTempForm:{name:"",cType:"",enable:"1",description:"",params:[]},formLabelWidth:"120px"}},computed:Object(s["a"])(Object(s["a"])({},Object(c["mapGetters"])({roleTree:"user/roleTree"})),{},{dragOptions:function(){return{animation:600,group:"description"}},finallyColumns:function(){var e=this;return this.columns.filter((function(t){return e.checkList.includes(t.label)}))}}),mounted:function(){this.getDictData(),this.getDictRecord(),this.dialogType()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{opendialog:function(e){var t=this;this.$nextTick((function(){t.$refs[e].clearValidate()}))},selectDictChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("0"!=e){a.next=6;break}t.listLoading=!0,t.getDictRecord(),t.isALL=!0,a.next=18;break;case 6:return Object(o["getDict"])(e).then((function(e){t.dialogtempconfig=e.data.params})),t.listLoading=!0,r={order:"-createdAt",limit:100,skip:0,where:{type:e}},a.next=11,Object(o["queryDict"])(r);case 11:l=a.sent,n=l.results,t.isALL=!1,t.filterObj=n,t.listLoading=!1,t.dictList=[],t.filterObj.map((function(e){var a={objectId:e.objectId};for(var r in e.data)a[r]=e.data[r];t.dictList.push(a)}));case 18:case"end":return a.stop()}}),a)})))()},dialogType:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allApps=e.roleTree,t.next=3,Object(d["resourceTypes"])();case 3:a=t.sent,e.channelregion=a;case 5:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(e){this.showTree=!this.showTree,this.addDictForm.applicationtText=e.name},editAllDict:function(e){this.editDictId=e.objectId,this.selectChange(e.type),this.addDictForm=e.data,this.addDictForm.type=e.type,this.add_dict_dialog=!0,this.title_dict_dialog="编辑字典"},editDict:function(e){this.editDictId=e.objectId,this.selectChange(e.templateId),this.addDictForm=e,this.add_dict_dialog=!0,this.title_dict_dialog="编辑字典"},tempTypeChange:function(e){this.tempparams.default="Boolean"==e||("Number"==e?0:void 0)},selectChange:function(e){var t=this,a={};Object(o["getDict"])(e).then((function(r){t.listLoading=!0,t.arrlist=r.data.params;var l={key:[{required:!0,message:"请输入字典名称",trigger:"blur"}],templateId:[{required:!0,message:"请选择字典类型",trigger:"blur"}],rolesObj:[{required:!0,message:"请选择所属应用",trigger:"change"}]};t.arrlist.map((function(e){e.default?a[e.name]=e.default:a[e.name]="",e.required&&("Boolean"==e.type?l[e.name]=[{required:!0,message:"请选择"+e.title.zh,trigger:"change"}]:l[e.name]=[{required:!0,message:"请输入"+e.title.zh,trigger:"blur"}])})),t.rules1=l,t.editDictId||(t.addDictForm=a),t.addDictForm.templateId=e,t.addDictForm.templateName=r.data.name,t.listLoading=!1}))},submitFormTempDict:function(){this.edit_dict_temp_dialog=!1,void 0!=this.editIndexId?(this.dictTempForm.params[this.editIndexId]=this.tempparams,this.$message("编辑成功")):(this.dictTempForm.params.push(this.tempparams),this.$message("新增成功"))},addRow:function(e){this.editIndexId=void 0,this.title_dict_edit_dialog="新增字典数据",this.edit_dict_temp_dialog=!0,this.tempparams={name:"",type:"",order:0,title:{en:"",zh:""},default:0,required:!1,description:{en:"",zh:""}}},delRow:function(e,t){t.splice(e,1)},editRow:function(e,t,a){this.editIndexId=t,this.title_dict_edit_dialog="修改字典数据",this.edit_dict_temp_dialog=!0,this.tempparams=e},clearFormValidate:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},onError:function(){this.$message("非Json数据类型")},onJsonChange:function(){},onJsonSave:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.editDictTempId?t.put_Dict_temp(t.editDictTempId,t.dictTempForm):t.addDict_temp(t.dictTempForm)}))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""},searchDict:function(e){this.queryid="",this.getDictData()},createDictTemp:function(){this.dict_temp_dialog=!0,this.editDictTempId="",this.title_temp_dialog="创建字典模板",this.dictTempForm={name:"",cType:"",enable:"1",description:"",params:[]},this.rules={name:[{required:!0,message:"请输入字典模板名称",trigger:"blur"}],cType:[{required:!0,message:"请输入字典模板类型",trigger:"blur"}],enable:[{required:!0,message:"请选择状态",trigger:"change"}]}},detailsTemp:function(e){alert(JSON.stringify(e))},showDictDialog:function(){this.add_dict_dialog=!0,this.title_dict_dialog="新增字典",this.editDictId="",this.addDictForm={},this.arrlist=[],this.rules1={key:[{required:!0,message:"请输入字典名称",trigger:"blur"}],templateId:[{required:!0,message:"请选择字典类型",trigger:"blur"}],rolesObj:[{required:!0,message:"请选择所属应用",trigger:"change"}]}},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){t.addDictForm.applicationtText?e&&(t.editDictId?t.put_Dict(t.editDictId,t.addDictForm):t.addDict(t.addDictForm)):t.$message("请选择所属应用")}))},addDict_temp:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={data:e,ACL:t.$aclObj,key:e.name,type:"dict_template"},a.next=3,Object(o["postDict"])(r);case 3:l=a.sent,void 0!=l.createdAt?(t.$message("创建成功"),t.dict_temp_dialog=!1,t.getDictData()):137==l.code?t.$message("字典名称重复"):t.$message("创建失败");case 5:case"end":return a.stop()}}),a)})))()},addDict:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,l,n,i,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(l in r={},e.templateTypekey="dict_template",e)r[l]=e[l];return n="role:"+e.applicationtText,i={},i[n]={read:!0,write:!0},s={data:r,ACL:i,key:e.key,type:e.templateId},a.next=9,Object(o["postDict"])(s);case 9:c=a.sent,c&&(t.$message("创建成功"),t.add_dict_dialog=!1,t.dictType=e.templateName,t.selectDictChange(e.templateId));case 11:case"end":return a.stop()}}),a)})))()},editDictTemp:function(e){this.editDictTempId=e.objectId,this.dictTempForm=e.data;var t=e.data.params,a=void 0===t?{}:t;this.dictTempForm.params=a,this.dict_temp_dialog=!0,this.title_temp_dialog="编辑字典模板"},put_Dict_temp:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var l,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return l={data:t,key:t.key},r.next=3,Object(o["putDict"])(e,l);case 3:n=r.sent,i=n.updatedAt,void 0!=i?(a.getDictData(),a.dict_temp_dialog=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 6:case"end":return r.stop()}}),r)})))()},put_Dict:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var l,n,i,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(n in l={},t)l[n]=t[n];return i={data:l},r.next=5,Object(o["putDict"])(e,i);case 5:s=r.sent,c=s.updatedAt,c?(a.dictType=t.templateName,a.selectDictChange(t.templateId),a.add_dict_dialog=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 8:case"end":return r.stop()}}),r)})))()},disabledDict:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var l,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.enable=t,l={key:e.key,data:e},r.next=4,Object(o["putDict"])(e.objectId,l);case 4:n=r.sent,i=n.updatedAt,i?a.$message("字典状态设置成功"):a.$message("字典状态设置失败");case 7:case"end":return r.stop()}}),r)})))()},disabledAllDict:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var l,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.data.enable=t,l={data:e.data},r.next=4,Object(o["putDict"])(e.objectId,l);case 4:n=r.sent,i=n.updatedAt,i?a.$message("字典状态设置成功"):a.$message("字典状态设置失败");case 7:case"end":return r.stop()}}),r)})))()},deleteDict:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$del_object("Dict",e.objectId);case 2:l=r.sent,l?("字典"==t?(a.selectDictChange(e.templateId),a.getDictRecord()):(a.selectDictChange("0"),a.getDictData()),a.$message(t+"删除成功")):a.$message(t+"删除失败");case 4:case"end":return r.stop()}}),r)})))()},getDictData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,l,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,r={order:"-createdAt",count:"objectId",limit:e.length,skip:e.start,where:{type:"dict_template"}},e.queryid&&(r.where["objectId"]=e.queryid),e.search_dict&&(r.where["data.name"]=e.search_dict),t.next=6,Object(o["queryDict"])(r);case 6:l=t.sent,i=l.results,s=l.count,e.total1=s,e.dictRecordOpt=[],e.dictRecord=i,e.queryid&&(e.search_dict=e.dictRecord[0].data.name),e.listLoading=!1,(a=e.dictRecordOpt).push.apply(a,[{data:{name:"ALL"},objectId:"0"}].concat(Object(n["a"])(i)));case 15:case"end":return t.stop()}}),t)})))()},channelSizeChange1:function(e){this.length1=e,this.getDictData()},channelSizeChange:function(e){this.length=e,this.getDictRecord()},channelCurrentChange1:function(e){this.start1=(e-1)*this.length1,this.getDictData()},channelCurrentChange:function(e){this.start=(e-1)*this.length,this.getDictRecord()},getDictRecord:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,a={order:"-createdAt",count:"objectId",limit:e.length,skip:e.start,where:{"data.templateTypekey":"dict_template"}},t.next=4,Object(o["queryDict"])(a);case 4:r=t.sent,l=r.results,n=r.count,e.total=n,e.listLoading=!1,e.dictData=l;case 10:case"end":return t.stop()}}),t)})))()}}},p=u,m=(a("6af1f"),a("2877")),b=Object(m["a"])(p,r,l,!1,null,"4a3d001e",null);t["default"]=b.exports},a107:function(e,t,a){"use strict";a("6da0")},ae63:function(e,t,a){"use strict";a("2f31")},ae64:function(e){e.exports=JSON.parse('{"type":"page","title":"列表","remark":null,"name":"page-demo","toolbar":[{"type":"button","actionType":"link","link":"/crud/new","label":"新增","primary":true}],"body":[{"type":"crud","name":"sample","api":"/api/sample","filter":{"title":"","mode":"inline","wrapWithPanel":false,"submitText":"","controls":[{"type":"text","name":"keywords","placeholder":"通过关键字搜索","addOn":{"label":"搜索","type":"submit","className":"btn-success"},"clearable":true}],"className":"m-b-sm"},"bulkActions":[{"label":"批量修改","type":"button","actionType":"dialog","level":"primary","dialog":{"title":"批量编辑","name":"sample-bulk-edit","body":{"type":"form","api":"/api/sample/bulkUpdate2","controls":[{"type":"text","name":"engine","label":"Engine"}]}}},{"label":"批量删除","type":"button","level":"danger","actionType":"ajax","api":"delete:/api/sample/$ids","confirmText":"确定要批量删除?"}],"columns":[{"name":"engine","label":"Rendering engine","sortable":true},{"name":"id","label":"ID","width":20,"sortable":true},{"name":"browser","label":"Browser","sortable":true},{"name":"platform","label":"Platform(s)","sortable":true},{"name":"version","label":"Engine version"},{"name":"grade","label":"CSS grade"},{"type":"operation","label":"操作","width":"","buttons":[{"type":"button-group","buttons":[{"type":"button","label":"查看","level":"primary","actionType":"link","link":"/crud/${id}"},{"type":"button","label":"修改","level":"info","actionType":"link","link":"/crud/${id}/edit"},{"type":"button","label":"删除","level":"danger","actionType":"ajax","confirmText":"您确认要删除?","api":"delete:/api/sample/$id"}]}],"placeholder":"-","fixed":"right"}],"affixHeader":true,"columnsTogglable":"auto","placeholder":"暂无数据","tableClassName":"table-db table-striped","headerClassName":"crud-table-header","footerClassName":"crud-table-footer","toolbarClassName":"crud-table-toolbar","combineNum":0,"bodyClassName":"panel-default"}]}')},c4b2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"instruct"},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入指令名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.Instruct(0)}}},[e._v(" 查询 ")])],1)],1)],1),a("div",{staticClass:"instruct_button"},[a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.dialogBtn_em("form","3",e.form)}}},[e._v(" 新增指令 ")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.deleteAll}},[e._v(" 删 除 ")])],1),a("div",[a("el-button",{attrs:{size:"small",type:"success"}},[e._v(" 启 用 ")]),a("el-button",{attrs:{size:"small",type:"warning"}},[e._v(" 禁 用 ")])],1)]),a("div",{staticClass:"instruct_table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.instructData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",label:"指令名称",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"指令类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["Read"==t.row.op?a("el-tag",{attrs:{type:"primary"}},[e._v(" 读 ")]):a("el-tag",{attrs:{type:"success"}},[e._v(" 写 ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"指令标识"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.di)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"指令序号",prop:"order"}}),a("el-table-column",{attrs:{align:"center",label:"超时时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.duration+"秒")+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"子网编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pn)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"生效轮次"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rotation)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否启用",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enable?a("el-tag",{attrs:{type:"success"}},[e._v(" 是 ")]):a("el-tag",{attrs:{type:"danger"}},[e._v(" 否 ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.dialogBtn_em("","2",t.row)}}},[e._v(" 编 辑 ")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.deleteInstruct(t.row.objectId)}}},[e._v(" 删 除 ")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[10,20,30,40],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{"append-to-body":!0,title:e.dialogTitle+"指令",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},open:e.openDialog}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formrule,size:"small"}},[a("h4",[e._v("  指令信息")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"指令名称","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入指令名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"操作类型","label-width":e.formLabelWidth,prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择操作类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"读",value:"r"}}),a("el-option",{attrs:{label:"写",value:"w"}})],1)],1),a("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth,prop:"enable"}},[a("el-radio-group",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}},[a("el-radio",{attrs:{label:!0}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:!1}},[e._v(" 否 ")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"指令指标","label-width":e.formLabelWidth,prop:"pointer"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入指令指标"},model:{value:e.form.pointer,callback:function(t){e.$set(e.form,"pointer",t)},expression:"form.pointer"}})],1),a("el-form-item",{attrs:{label:"指令序号","label-width":e.formLabelWidth,prop:"order"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入指令序号"},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),a("p",{staticStyle:{"padding-left":"125px","font-size":"12px","line-height":"20px"}},[e._v(" 1. 指令序号相同,会作为同一组消息发送 "),a("br"),e._v(" 2. 消息的发送顺序按照指令序号排序 ")])],1)],1),a("h4",[e._v("  指令下发策略")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"超时时长","label-width":e.formLabelWidth,prop:"duration"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入超时时长"},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",e._n(t))},expression:"form.duration"}},[a("template",{slot:"append"},[e._v(" 秒 ")])],2)],1),a("el-form-item",{attrs:{label:"生效轮次","label-width":e.formLabelWidth,prop:"rotation"}},[a("el-select",{attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:"",placeholder:"请选择生效轮次"},model:{value:e.form.rotation,callback:function(t){e.$set(e.form,"rotation",t)},expression:"form.rotation"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("p",{staticStyle:{position:"absolute",top:"40px",margin:"0","font-size":"12px",color:"black"}},[e._v(" 例如:1,3,5,8;(可选可自主填写)(注意:逗号为英文逗号) ")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"子网编号","label-width":e.formLabelWidth,prop:"subnet"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入子网编号"},model:{value:e.form.subnet,callback:function(t){e.$set(e.form,"subnet",t)},expression:"form.subnet"}})],1),a("el-form-item",{attrs:{label:"发送间隔","label-width":e.formLabelWidth,prop:"interval"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入发送间隔"},model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval",e._n(t))},expression:"form.interval"}},[a("template",{slot:"append"},[e._v(" 秒 ")])],2)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.check("form")}}},[e._v(" 确 定 ")])],1)],1)],1)},l=[],n=a("1da1"),i=(a("96cf"),a("b0c0"),a("d81d"),a("926a"),a("e0e9")),s={name:"Instruct",props:{productId:{type:String,default:""},devicesId:{type:String,default:""}},data:function(){return{formInline:{name:""},options:[{value:"first",label:"第一轮"},{value:"last",label:"最后一轮"},{value:"all",label:"全部"}],instructData:[],multipleTable:[],pagesize:10,start:0,total:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",pointer:"",type:"",enable:"",duration:"",order:"",interval:"",rotation:"",subnet:""},formrule:{duration:[{required:!0,message:"请输入",trigger:"blur"}],interval:[{required:!0,message:"请输入",trigger:"blur"}],name:[{required:!0,message:"指标名称不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择操作类型",trigger:"blur"}],enable:[{required:!0,message:"指标是否启用不能为空",trigger:"change"}],order:[{required:!0,message:"指标序号不能为空",trigger:"blur"}],rotation:[{required:!0,message:"生效轮次不能为空",trigger:"change"}],subnet:[{required:!0,message:"子网编号不能为空",trigger:"blur"}],pointer:[{required:!0,message:"指令指标不能为空",trigger:"blur"}]},instructid:"",dialogTitle:"新增"}},watch:{dialogFormVisible:{handler:function(e){e||this.$refs.form.resetFields()},deep:!0},devicesId:{handler:function(e){},deep:!0}},mounted:function(){this.Instruct()},updated:function(){},methods:{dialogClosed:function(){this.dialogFormVisible=!1},openDialog:function(e,t,a){var r=this;this.$nextTick((function(){switch(r.$refs[e]&&r.$refs[e].resetFields(),t){case"2":r.dialogTitle="编辑",r.form=a;break;case"3":r.dialogTitle="添加";break;default:break}}))},Instruct:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,l,n,s,o,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:9,0==r&&(t.start=0),l={where:{device:t.devicesId},skip:t.start,limit:t.pagesize,order:"-createdAt",count:"objectId"},t.formInline.name&&(l.where.name=t.formInline.name),a.next=6,Object(i["queryIndustry"])(l);case 6:n=a.sent,s=n.count,o=void 0===s?0:s,c=n.results,d=void 0===c?[]:c,t.total=o,t.instructData=d;case 13:case"end":return a.stop()}}),a)})))()},addInstruct:function(){this.dialogFormVisible=!0,this.$refs.form.resetFields()},check:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var r,l,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r={className:"Product",objectId:t.productId,__type:"Pointer"},l={className:"Device",objectId:t.devicesId,__type:"Pointer"},!a){e.next=17;break}if(n={device:l,product:r,name:t.form.name,enable:t.form.enable,op:t.form.type,rotation:t.form.rotation,duration:t.form.duration,order:t.form.order,interval:t.form.interval,di:t.form.pointer,pn:t.form.subnet,devaddr:t.form.lowerhair},""==t.instructid){e.next=10;break}return e.next=7,Object(i["updateIndustry"])(t.instructid,n);case 7:s=e.sent,e.next=14;break;case 10:return n.ACL=t.$aclObj,e.next=13,Object(i["postIndustry"])(n);case 13:s=e.sent;case 14:s.objectId&&(t.$message({type:"success",message:"".concat(t.dialogTitle,"成功")}),t.$refs.form.resetFields(),t.dialogClosed(),t.instructid="",t.Instruct()),e.next=19;break;case 17:return t.$message("有必填项未填写"),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSizeChange:function(e){this.pagesize=e,this.Instruct()},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.Instruct()},dialogBtn_em:function(e,t,a){this.dialogFormVisible=!0;var r,l={};2==t?(r={name:a.name,pointer:a.di,type:a.op,enable:a.enable,duration:a.duration,order:a.order,interval:a.interval,lowerhair:a.devaddr,rotation:a.rotation,subnet:a.pn},l=Object.assign({},r),this.instructid=a.objectId):l=Object.assign({},a),this.openDialog(e,t,l)},deleteInstruct:function(e){var t=this;this.$confirm("此操作将永久删除该指令, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["delIndustry"])(e);case 2:r=a.sent,r&&(t.$message({type:"success",message:"删除成功!"}),t.Instruct());case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},handleSelectionChange:function(e){this.multipleTable=e},deleteAll:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.multipleTable.length){e.next=5;break}return t.$message({message:"请挑选要删除的指令",type:"warning"}),e.abrupt("return");case 5:return a=[],t.multipleTable.map(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.push({body:{},method:"DELETE",path:"/classes/Instruct/".concat(t.objectId)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r={requests:a},e.next=10,t.$shuwa_batch(r);case 10:l=e.sent,l.error?t.$message({message:"删除失败".concat(l.error),type:"error"}):(t.$message({message:"删除成功",type:"success"}),t.Instruct());case 12:case"end":return e.stop()}}),e)})))()}}},o=s,c=(a("81eb"),a("2877")),d=Object(c["a"])(o,r,l,!1,null,"29ce36c8",null);t["default"]=d.exports},d057:function(e,t,a){"use strict";a.r(t);var r,l,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addengine"},[a("div",{staticClass:"addcontent"},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"formInline",attrs:{"label-width":"80px",model:e.formInline,rules:e.formlinerule,size:"medium"}},[a("div",{staticClass:"form-block__title"},[e._v(" "+e._s(e.$translateTitle("rule.condtion"))+" "),a("div",{staticClass:"form-block__title-tips"},[e._v(" "+e._s(e.$translateTitle("rule.Processing"))+" ")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:e.row1}},[a("el-form-item",[a("div",{staticClass:"show-guess"},[a("p",[e._v(e._s(e.$translateTitle("rule.RuleSQLexample")))]),a("div",{staticClass:"code"},[a("code",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.sqlexample))])])])]),a("el-form-item",{attrs:{label:e.$translateTitle("rule.RuleSQL"),prop:"enginesql"}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px"},attrs:{id:"editor1"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"},model:{value:e.formInline.enginesql,callback:function(t){e.$set(e.formInline,"enginesql",t)},expression:"formInline.enginesql"}})],1)]),a("el-form-item",{attrs:{label:e.$translateTitle("rule.rule Id")}},[a("el-input",{attrs:{readonly:"编辑"==e.title,type:"text"},model:{value:e.formInline.ruleId,callback:function(t){e.$set(e.formInline,"ruleId",t)},expression:"formInline.ruleId"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("rule.Remarks")}},[a("el-input",{attrs:{type:"text"},model:{value:e.formInline.remarks,callback:function(t){e.$set(e.formInline,"remarks",t)},expression:"formInline.remarks"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("rule.SQLtest")}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"gray"},on:{change:e.getEditor2},model:{value:e.formInline.sqltest,callback:function(t){e.$set(e.formInline,"sqltest",t)},expression:"formInline.sqltest"}}),a("el-popover",{attrs:{content:"自定义模拟数据进行 SQL 命令测试，仅用于测试功能",placement:"top-start",trigger:"hover",width:"200"}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#71737d"},attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-col",{attrs:{span:4}}),a("el-col",{staticClass:"animated fadeInRightBig",attrs:{span:e.row2}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formInline.sqltest,expression:"formInline.sqltest == true"}],attrs:{label:"clientid",prop:"clientid",rules:[{required:!0,message:"clientid 不能为空",trigger:"blur"}]}},[a("el-input",{model:{value:e.formInline.clientid,callback:function(t){e.$set(e.formInline,"clientid",t)},expression:"formInline.clientid"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formInline.sqltest,expression:"formInline.sqltest == true"}],attrs:{label:"username",prop:"username",rules:[{required:!0,message:"username 不能为空",trigger:"blur"}]}},[a("el-input",{model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formInline.sqltest,expression:"formInline.sqltest == true"}],attrs:{label:"topic",prop:"topic",rules:[{required:!0,message:"topic 不能为空",trigger:"blur"}]}},[a("el-input",{model:{value:e.formInline.topic,callback:function(t){e.$set(e.formInline,"topic",t)},expression:"formInline.topic"}})],1),1==e.formInline.sqltest?a("el-form-item",{attrs:{label:"qos",prop:"qos",rules:[{required:!0,message:"qos 不能为空",trigger:"blur"}]}},[a("el-input",{model:{value:e.formInline.qos,callback:function(t){e.$set(e.formInline,"qos",e._n(t))},expression:"formInline.qos"}})],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formInline.sqltest,expression:"formInline.sqltest == true"}],attrs:{label:"payload",prop:"payload",rules:[{required:!0,message:"请填写payload",trigger:"blur"}]}},[a("el-input",{staticStyle:{visibility:"hidden"},attrs:{type:"text"},model:{value:e.formInline.payload,callback:function(t){e.$set(e.formInline,"payload",t)},expression:"formInline.payload"}}),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px"},attrs:{id:"editor2"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"},model:{value:e.formInline.payload,callback:function(t){e.$set(e.formInline,"payload",t)},expression:"formInline.payload"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formInline.sqltest,expression:"formInline.sqltest == true"}],attrs:{label:" "}},[a("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.testRule("formInline")}}},[e._v(" "+e._s(e.$translateTitle("rule.Test"))+" ")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formInline.sqltest,expression:"formInline.sqltest == true"}],attrs:{label:e.$translateTitle("rule.TestJie")}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.formInline.result,callback:function(t){e.$set(e.formInline,"result",t)},expression:"formInline.result"}})],1)],1)],1),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"form-block__title"},[a("span",{staticStyle:{color:"rgb(255, 109, 109)"}},[e._v("*")]),e._v(" "+e._s(e.$translateTitle("rule.ResponseAction"))+" "),a("div",{staticClass:"form-block__title-tips"},[e._v(" "+e._s(e.$translateTitle("rule.Processing"))+" ")])]),a("div",{staticClass:"bottomtable",staticStyle:{"padding-left":"20px"}},[a("div",{staticClass:"tableaction"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.actionData,"header-cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{label:e.$translateTitle("rule.channel")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.params.$resource?a("span",[e._v(" "+e._s("关联资源:"+t.row.params.$resource)+" ")]):a("span")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("rule.target_topic")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.params.target_topic)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("rule.target_qos")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.params.target_qos)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("rule.payload_tmpl")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.params.payload_tmpl)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.editAisle(t.row)}}},[e._v(" "+e._s(e.$translateTitle("button.edit"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteOneData(t.$index)}}},[e._v(" "+e._s(e.$translateTitle("button.delete"))+" ")])]}}])})],1),a("div",[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",size:"small",type:"success"},on:{click:e.addresouce}},[e._v(" "+e._s(e.$translateTitle("rule.Addto"))+" ")])],1)],1)]),a("div",[a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("rule.ResponseAction"),top:"10%",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.resetForm("params")}}},[a("el-form",{ref:"params",attrs:{"label-position":"left","label-width":"140px",model:e.params,rules:e.paramsrules}},[a("el-form-item",{attrs:{prop:"channel"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"span-box"},[a("i",{staticClass:"icon-dd-schetit"}),a("span",[e._v(e._s(e.$translateTitle("rule.channel")))]),a("el-tooltip",{staticClass:"item",attrs:{content:"重新发布消息到物联网通道",effect:"dark",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1)]),a("el-select",{model:{value:e.params.channel,callback:function(t){e.$set(e.params,"channel",t)},expression:"params.channel"}},e._l(e.channellist,(function(t){return a("el-option",{key:t.name,attrs:{disabled:"dgiot"!=t.name,label:t.title.zh,value:t.title.zh}},[a("span",{staticStyle:{float:"left"}},[t.title?a("i",[e._v(" "+e._s(t.title.zh)+" ")]):e._e()]),a("span",{staticStyle:{float:"right",color:"#8492a6"}},[e._v(" "+e._s(t.description.zh)+" ")])])})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("rule.resource"),prop:"resources"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"span-box"},[a("i",{staticClass:"icon-dd-schetit"}),a("span",[e._v(e._s(e.$translateTitle("rule.resource")))]),a("el-tooltip",{staticClass:"item",attrs:{content:e.$translateTitle("rule.resource"),effect:"dark",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1)]),a("el-select",{model:{value:e.params.resources,callback:function(t){e.$set(e.params,"resources",t)},expression:"params.resources"}},e._l(e.resources,(function(t){return a("el-option",{key:t.id,attrs:{label:t.description,value:t.id}},[a("span",{staticStyle:{float:"left"}},[t.description?a("i",[e._v(" "+e._s(t.description)+" ")]):e._e()]),a("span",{staticStyle:{float:"right",color:"#8492a6"}},[e._v(" "+e._s(t.id)+" ")])])})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("rule.target_qos")}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"span-box"},[a("i",{staticClass:"icon-dd-schetit"}),a("span",[e._v(e._s(e.$translateTitle("rule.target_qos")))]),a("el-tooltip",{staticClass:"item",attrs:{content:"重新发布消息时用的 QoS 级别, 设置为 -1 以使用原消息中的 QoS",effect:"dark",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1)]),a("el-select",{model:{value:e.params.target_qos,callback:function(t){e.$set(e.params,"target_qos",t)},expression:"params.target_qos"}},e._l(e.params.target_qosSelect,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("rule.target_topic")}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"span-box"},[a("i",{staticClass:"icon-dd-schetit"}),a("span",[e._v(e._s(e.$translateTitle("rule.target_topic")))]),a("el-tooltip",{staticClass:"item",attrs:{content:"重新发布消息到哪个主题",effect:"dark",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1)]),a("el-input",{model:{value:e.params.target_topic,callback:function(t){e.$set(e.params,"target_topic",t)},expression:"params.target_topic"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("rule.payload_tmpl")}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticClass:"span-box"},[a("i",{staticClass:"icon-dd-schetit"}),a("span",[e._v(e._s(e.$translateTitle("rule.payload_tmpl")))]),a("el-tooltip",{staticClass:"item",attrs:{content:"消息内容模板，支持变量",effect:"dark",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})])],1)]),a("el-input",{attrs:{rows:2,type:"textarea"},model:{value:e.params.payload_tmpl,callback:function(t){e.$set(e.params,"payload_tmpl",t)},expression:"params.payload_tmpl"}})],1),a("el-form-item",[e.aisleRow.name?a("el-button",{on:{click:function(t){return e.editFom("formInline")}}},[e._v(" "+e._s(e.$translateTitle("button.modify"))+" ")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("params")}}},[e._v(" "+e._s(e.$translateTitle("button.create"))+" ")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!e.dialogFormVisible}}},[e._v(" "+e._s(e.$translateTitle("button.cancel"))+" ")])],1)],1)],1)],1)]),a("el-form-item",{attrs:{"label-width":"90"}},[e.ruleId.length?a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.editrules(e.ruleId,"formInline")}}},[e._v(" "+e._s(e.$translateTitle("button.modify"))+" ")]):a("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.addrules("formInline")}}},[e._v(" "+e._s(e.$translateTitle("button.create"))+" ")]),a("el-button",[e._v(e._s(e.$translateTitle("button.cancel")))])],1)],1)],1)],1)])},i=[],s=a("1da1"),o=(a("96cf"),a("a4d3"),a("e01a"),a("b0c0"),a("ac1f"),a("466d"),a("99af"),a("a434"),a("1b07")),c=a("9e6fe"),d={data:function(){return{ruleId:this.$route.query.id||"",uid:this.$route.query.uid||"",ruleType:this.$route.query.type||"",resources:[],aisleRow:{},params:{name:"",payload_tmpl:"${payload}",target_qos:0,target_qosSelect:[-1,0,1,2],target_topic:"thing/${productid}/${clientid}/post",$resource:"",resources:"",channel:""},dialogVisible:!1,resourceform:{objectId:"",region:"data_resource",desc:""},resourcerule:{objectId:[{required:!0,message:"请填写通道编号",trigger:"blur"}],desc:[{required:!0,message:"请填写通道描述",trigger:"blur"}]},row1:24,row2:0,dialogFormVisible:!1,title:"",formInline:{user:"",region:"",enginesql:"SELECT\n      payload.msg as msg,\n      clientid,\n      'productid' as productid\n    FROM\n      \"t/#\"\n    WHERE\n      msg = 'hello'",remarks:"",sqltest:!1,clientid:"c_swqx",username:"u_swqx",qos:1,topic:"t/a",payload:"",result:""},formlinerule:{region:[{required:!0,message:"请选择触发事件",trigger:"change"}],enginesql:[{required:!0,message:"请填写规则SQL",trigger:"blur"}]},actionData:[],form:{action:"dgiot_resource",resource:""},paramsrules:{channel:[{required:!0,message:"请选择通道",trigger:"change"}],resources:[{required:!0,message:"请选择关联资源",trigger:"change"}]},formrule:{action:[{required:!0,message:"请选择动作",trigger:"change"}]},productid:"",resourcelist:[],channellist:[],ctype:"",client:[],sqlexample:"SELECT\n      payload.msg as msg\n    FROM\n      \"t/#\"\n    WHERE\n      msg = 'hello'",actionslist:[],allChannelstart:0}},mounted:function(){this.ruleId&&this.queryRule(this.ruleId),this.title=this.$route.query.title,this.productid=this.$route.query.productid,r=ace.edit("editor1"),r.session.setMode("ace/mode/sql"),r.setTheme("ace/theme/eclipse"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0});var e=ace.require("ace/ext/language_tools");e.addCompleter({getCompletions:function(e,t,a,r,l){l(null,c["default"])}}),r.setValue(this.formInline.enginesql),l=ace.edit("editor2"),l.session.setMode("ace/mode/json"),l.setTheme("ace/theme/eclipse"),l.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),l.setValue('{"msg":"hello"}')},methods:{getEditor2:function(e){1==e?(this.row1=12,this.row2=12):(this.row1=24,this.row2=0)},queryRule:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["get_rule_id"])(e);case 2:l=a.sent,n=l.data,t.actionData=n.actions,t.formInline.enginesql=n.rawsql,r.setValue(t.formInline.enginesql),t.formInline.ruleId=n.id,t.formInline.remarks=n.description,r.setValue(n.rawsql);case 10:case"end":return a.stop()}}),a)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.relationChannel(t.params)}))},editFom:function(e){this.aisleRow.name=this.params.name,this.aisleRow.params.payload_tmpl=this.params.payload_tmpl,this.aisleRow.params.target_qos=this.params.target_qos,this.aisleRow.params.target_topic=this.params.target_topic,this.aisleRow.params.$resource=this.params.$resource,this.aisleRow.params.resources=this.params.resources,this.aisleRow.params.channel=this.params.channel,this.dialogFormVisible=!this.dialogFormVisible,this.aisleRow={}},resetForm:function(e){this.$refs[e].resetFields(),this.aisleRow={}},relationChannel:function(e){this.actionData.push({name:"dgiot",params:{$resource:e.resources,target_topic:e.target_topic,target_qos:e.target_qos,payload_tmpl:e.payload_tmpl,channel:this.params.channel},fallbacks:[]}),this.dialogFormVisible=!this.dialogFormVisible},_get_actions:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["get_actions"])();case 2:a=t.sent,r=a.data,e.channellist=r;case 5:case"end":return t.stop()}}),t)})))()},_get_resources:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["get_resources"])();case 2:a=t.sent,r=a.data,e.resources=r;case 5:case"end":return t.stop()}}),t)})))()},testRule:function(e){var t=this;this.formInline.result="",this.formInline.payload=l.getValue(),this.formInline.enginesql=r.getValue(),this.$refs[e].validate((function(e){if(e){var a=/from[^"]+?"([^"]+)"/im,n={clientid:t.formInline.clientid,payload:l.getValue(),qos:t.formInline.qos,topic:t.formInline.topic,username:t.formInline.username},i={actions:t.actionData,ctx:n,description:t.formInline.remarks,for:r.getValue().match(a)[1],name:t.formInline.username,rawsql:r.getValue(),test:"true"};Object(o["addRule"])(i).then((function(e){var a=e.code;0==a?t.formInline.result=e.data.msg:t.$message.error("SQL Not Match")})).catch((function(e){t.$message.error(e)}))}}))},editrules:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={clientid:a.formInline.clientid,payload:l.getValue(),qos:a.formInline.qos,topic:a.formInline.topic,username:a.formInline.username},i={actions:a.actionData,ctx:n,description:a.formInline.remarks,for:'["t/#"]',rawsql:r.getValue()},t.next=4,Object(o["put_rule_id"])(e,i);case 4:t.sent,a.$message("修改成功"),a.$router.push({path:"/dashboard/engine"});case 7:case"end":return t.stop()}}),t)})))()},addrules:function(e){var t=this;this.formInline.payload=l.getValue(),this.formInline.enginesql=r.getValue(),this.$refs[e].validate((function(e){if(e){if(0==t.actionData.length)return void t.$message("动作不能为空");var a={clientid:t.formInline.clientid,payload:l.getValue(),qos:t.formInline.qos,topic:t.formInline.topic,username:t.formInline.username},n={actions:t.actionData,ctx:a,description:t.formInline.remarks,for:'["t/#"]',rawsql:r.getValue()};t.uid&&t.productid&&(n.id="rule:".concat(t.ruleType,"_").concat(t.productid,"_").concat(t.uid)),Object(o["addRule"])(n).then((function(e){e&&(t.$message("创建成功"),t.$router.push({path:"/dashboard/engine"}))})).catch((function(e){t.$message.error(e.error)}))}else t.$message("有必填项未填写")}))},addresouce:function(){this._get_actions(),this._get_resources(),this.aisleRow.name&&(this.params={name:this.aisleRow.name,payload_tmpl:this.aisleRow.params.payload_tmpl,target_qos:this.aisleRow.params.target_qos,target_qosSelect:[-1,0,1,2],target_topic:this.aisleRow.params.target_topic,$resource:this.aisleRow.params.$resource,resources:this.aisleRow.params.$resource,channel:this.aisleRow.params.channel}),this.dialogFormVisible=!0},addRes:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return t.$message.error("error submit!!"),!1;Object(o["postResource"])({channel:t.resourceform.objectId},t.resourceform.desc,"","data_resource").then((function(a){a&&(t.$message("创建成功"),t.$refs[e].resetFields(),t.dialogVisible=!1)}))}))},deleteOneData:function(e){this.actionData.splice(e,1)},editAisle:function(e){this.aisleRow=e,this.addresouce()}}},u=d,p=(a("229d"),a("2877")),m=Object(p["a"])(u,n,i,!1,null,"374cd628",null);t["default"]=m.exports},d2b5:function(e){e.exports=JSON.parse('{"type":"page","title":"新增","remark":null,"toolbar":[{"type":"button","actionType":"link","link":"/crud/list","label":"返回列表"}],"body":[{"title":"","type":"form","redirect":"/crud/list","name":"sample-edit-form","api":"/api/sample","controls":[{"type":"text","name":"engine","label":"Engine","required":true,"inline":false,"description":"","descriptionClassName":"help-block","placeholder":"","addOn":null},{"type":"divider"},{"type":"text","name":"browser","label":"Browser","required":true},{"type":"divider"},{"type":"text","name":"platform","label":"Platform(s)","required":true},{"type":"divider"},{"type":"text","name":"version","label":"Engine version"},{"type":"divider"},{"type":"text","name":"grade","label":"CSS grade"}]}]}')},d727:function(e){e.exports=JSON.parse('{"type":"page","title":"代码编辑器","subTitle":"使用的monaco-editor,用到了 worker, 如果控制台没有报错，说明一起正常。","body":[{"type":"form","controls":[{"type":"editor","name":"js","label":"Javascript","size":"md"}]}]}')},d92d:function(e,t,a){var r={"./mqttLog.vue":"29f4"};function l(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}l.keys=function(){return Object.keys(r)},l.resolve=n,e.exports=l,l.id="d92d"},dfe1:function(e,t,a){"use strict";a("03ee")},e2b2:function(e){e.exports=JSON.parse('{"type":"page","title":"表单向导","subTitle":"可以通过表单向导，将一个超长的表单页面拆分成多个步骤，一步一步指引用户完成。","body":[{"type":"wizard","actionFinishLabel":"确认","api":"/api/saveWizard","steps":[{"title":"填写活动信息","controls":[{"type":"text","name":"title","label":"活动标题","required":true,"size":"md"},{"type":"date","name":"date","label":"举办时间","size":"md"},{"type":"number","name":"num","label":"参与人数","value":10,"size":"md"}]},{"title":"填写赞助商信息","controls":[{"type":"text","name":"company","label":"公司名称","required":true,"size":"md"},{"type":"text","name":"money","label":"赞助金额","addOn":{"type":"text","label":"￥"},"size":"md"}]},{"title":"确认","mode":"horizontal","horizontal":{"leftFixed":"sm"},"controls":[{"type":"static","name":"company","label":"活动标题","labelClassName":"text-muted"},{"type":"static-date","name":"date","label":"举办时间","labelClassName":"text-muted"},{"type":"static","name":"num","label":"参与人数","labelClassName":"text-muted"},{"type":"static","name":"company","label":"公司名称","labelClassName":"text-muted"},{"type":"static","name":"money","label":"赞助金额","labelClassName":"text-muted"}]}]}]}')},e6a7:function(e,t,a){},ee55:function(e,t,a){},f56d:function(e,t,a){},f820:function(e){e.exports=JSON.parse('{"type":"page","title":"基础表单","subTitle":"展示一些常规的表单，包括验证、提示等等","body":[{"type":"form","mode":"horizontal","title":"常规表单示例","affixFooter":true,"api":"/api/form/save","actions":[{"label":"保存","type":"submit","level":"success"}],"controls":[{"label":" 标题","type":"text","placeholder":"请输入标题","description":"请输入一个能吸引眼球的标题","name":"title","size":"md"},{"label":"编号","required":true,"type":"text","placeholder":"请输入编号","name":"b","size":"md","validations":{"matchRegexp":"/^\\\\w{4}-\\\\w{4}-\\\\w{4}$/"},"validationErrors":{"matchRegexp":"您输入的内容格式不对，请按提示输入！"},"hint":"输入范例：xxxx-xxxx-xxxx"},{"label":"置顶","type":"switch","name":"c","inline":true,"labelRemark":"开启后将置顶这条数据！"},{"label":"活动时间","type":"date-range","name":"range","size":"md","remark":"这是一个字段时间范围"},{"label":"日期范围","type":"group","controls":[{"type":"date","size":"md","name":"start","mode":"inline","maxDate":"${end}"},{"label":"到","type":"date","size":"md","name":"end","inputClassName":"m-l-sm","mode":"inline","minDate":"${start}","remark":"这是两个字段的时间范围"}]},{"label":"浏览器","type":"button-group","name":"browser","value":"chrome","options":[{"label":"Chrome","value":"chrome"},{"label":"火狐","value":"firefox"},{"label":"IE","value":"ie"}]},{"type":"list","name":"taocan","label":"套餐选择","options":[{"value":1,"body":"<div class=\'m-l-sm m-r-sm m-b-sm m-t-xs\'>  <div class=\'text-md p-b-xs b-b m-b-xs\'>套餐：C01</div>   <div class=\'text-sm\'>CPU：2核</div> <div class=\'text-sm\'>内存：1GB</div> <div class=\'text-sm\'>SSD盘：10GB</div>  </div>"},{"value":2,"body":"<div class=\'m-l-sm m-r-sm m-b-sm m-t-xs\'>  <div class=\'text-md p-b-xs b-b m-b-xs\'>套餐：C02</div>   <div class=\'text-sm\'>CPU：4核</div> <div class=\'text-sm\'>内存：4GB</div> <div class=\'text-sm\'>SSD盘：20GB</div>  </div>"},{"value":3,"disabled":true,"body":"<div class=\'m-l-sm m-r-sm m-b-sm m-t-xs\'>  <div class=\'text-md p-b-xs b-b m-b-xs\'>套餐：C03</div>   <div class=\'text-sm\'>CPU：8核</div> <div class=\'text-sm\'>内存：8GB</div> <div class=\'text-sm\'>SSD盘：50GB</div>  </div>"}]},{"label":"最爱周几","type":"select","name":"select","size":"md","clearable":true,"options":[{"label":"周一","value":"0"},{"label":"周二","value":"1"},{"label":"周三","value":"2"},{"label":"周四","value":"3"},{"label":"周五","value":"4"},{"label":"周六","value":"5"},{"label":"周日","value":"6"}]},{"label":"休息日","type":"list","name":"freeday","value":["5","6"],"multiple":true,"extractValue":true,"options":[{"label":"周一","value":"0"},{"label":"周二","value":"1"},{"label":"周三","value":"2"},{"label":"周四","value":"3"},{"label":"周五","value":"4"},{"label":"周六","value":"5"},{"label":"周日","value":"6"}]},{"label":"人数","type":"number","name":"num","size":"md","value":10},{"label":"比率","type":"range","name":"percent"},{"label":"简介","type":"textarea","name":"textarea"}]}]}')},fab5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkengine"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"fonty-size":"16px"}},[e._v("基本信息")])]),a("div",{staticClass:"box-form"},[a("el-form",{attrs:{"label-width":"80px",model:e.engineform}},[a("el-form-item",{attrs:{label:"触发事件:"}},[a("span",[e._v(e._s(e.engineform.region))])]),a("el-form-item",{attrs:{label:"规则SQL:"}},[a("span",[e._v(e._s(e.engineform.sql))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(e.engineform.remarks))])])],1)],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("度量指标")])]),a("div",{staticClass:"box-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.engineData,"default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{label:"节点",prop:"node"}}),a("el-table-column",{attrs:{label:"已命中",prop:"matched",sortable:"",width:"180"}}),a("el-table-column",{attrs:{label:"命中速度",prop:"speed",sortable:"",width:"180"}}),a("el-table-column",{attrs:{label:"最大命中速度",prop:"speed_max"}}),a("el-table-column",{attrs:{label:"5分钟平均速度",prop:"speed_last5m"}})],1)],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("响应动作")])]),a("div",{staticClass:"box-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rulesdata}},[a("el-table-column",{attrs:{label:"类型",prop:"name",width:"180"}}),a("el-table-column",{attrs:{label:"参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.params))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"度量指标"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",[e._l(t.row.metrics,(function(t,r){return a("li",{key:r},[a("span",{staticStyle:{display:"inline-block",width:"120px"}},[e._v(" "+e._s(t.node)+" ")]),a("span",{staticClass:"type"},[e._v(e._s("成功:"+t.success))]),a("span",{staticClass:"type"},[e._v(e._s("失败:"+t.failed))])])})),a("li",[a("span",{staticStyle:{display:"inline-block",width:"120px","margin-top":"20px"}},[e._v(" 合计 ")]),a("span",{staticClass:"type"},[e._v(" "+e._s("成功:"+e.allsuccss(t.row.metrics))+" ")]),a("span",{staticClass:"type"},[e._v(" "+e._s("失败:"+e.allfailed(t.row.metrics))+" ")])])],2)]}}])})],1)],1)])],1)},l=[],n=(a("a15b"),a("a4d3"),a("e01a"),a("d81d"),a("1b07")),i={data:function(){return{engineform:{region:"",remarks:"",sql:""},engineData:[],ruleid:"",rulesdata:[]}},mounted:function(){this.detailForRule()},methods:{detailForRule:function(){var e=this;this.rulesdata=[],this.ruleid=this.$route.query.id,Object(n["getRuleDetail"])(this.ruleid).then((function(t){t.data&&(e.engineform.region=t.data.for.join(","),e.engineform.remarks=t.data.description,e.engineform.sql=t.data.rawsql,e.engineData=t.data.metrics,e.rulesdata=t.data.actions)})).catch((function(t){e.$message(t.error)}))},allsuccss:function(e){var t=0;return e.map((function(e){t+=e.success})),t},allfailed:function(e){var t=0;return e.map((function(e){t+=e.failed})),t}}},s=i,o=(a("6698"),a("2877")),c=Object(o["a"])(s,r,l,!1,null,"af8bd4ea",null);t["default"]=c.exports}}]);