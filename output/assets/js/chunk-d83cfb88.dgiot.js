/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  time: Tue Nov 16 2021 10:43:22 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d83cfb88"],{"112b":function(e,t,i){},"268a":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));var o=i("7ffe"),n=i("c715");class s extends n["a"]{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class r{static write(e,t){o["a"],e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){let i=[],o=0;while(e&&e!==document.body){if(e===t)break;e.nodeType===e.ELEMENT_NODE&&(i[o++]=this.read(e)),e=e.parentElement}const n=new Uint8Array(o);for(let s=0;s<o;s++)n[s]=i[o-s-1];return n}}},2936:function(e,t,i){},"44a15":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return a}));var o,n=i("7ffe"),s=i("5433");class r{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;const i=this.getStartLineNumber(),o=this.getEndLineNumber();if(t<i){const i=t-e+1;return this._rendLineNumberStart-=i,null}if(e>o)return null;let n=0,s=0;for(let a=i;a<=o;a++){const i=a-this._rendLineNumberStart;e<=a&&a<=t&&(0===s?(n=i,s=1):s++)}if(e<i){let o=0;o=t<i?t-e+1:i-e,this._rendLineNumberStart-=o}const r=this._lines.splice(n,s);return r}onLinesChanged(e,t){if(0===this.getCount())return!1;const i=this.getStartLineNumber(),o=this.getEndLineNumber();let n=!1;for(let s=e;s<=t;s++)s>=i&&s<=o&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),n=!0);return n}onLinesInserted(e,t){if(0===this.getCount())return null;const i=t-e+1,o=this.getStartLineNumber(),n=this.getEndLineNumber();if(e<=o)return this._rendLineNumberStart+=i,null;if(e>n)return null;if(i+e>n){const t=this._lines.splice(e-this._rendLineNumberStart,n-e+1);return t}const s=[];for(let l=0;l<i;l++)s[l]=this._createLine();const r=e-this._rendLineNumberStart,a=this._lines.slice(0,r),d=this._lines.slice(r,this._lines.length-i),h=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=a.concat(s).concat(d),h}onTokensChanged(e){if(0===this.getCount())return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let o=!1;for(let n=0,s=e.length;n<s;n++){const s=e[n];if(s.toLineNumber<t||s.fromLineNumber>i)continue;const r=Math.max(t,s.fromLineNumber),a=Math.min(i,s.toLineNumber);for(let e=r;e<=a;e++){const t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),o=!0}}return o}}class a{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new r(()=>this._host.createVisibleLine())}_createDomNode(){const e=Object(n["b"])(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,o=t.length;i<o;i++){const e=t[i].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,o=t.length;i<o;i++){const e=t[i].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new d(this.domNode.domNode,this._host,e),o={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},n=i.render(o,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(n.rendLineNumberStart,n.lines)}}class d{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,o){const n={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(n.rendLineNumberStart+n.linesLength-1<t||i<n.rendLineNumberStart){n.rendLineNumberStart=t,n.linesLength=i-t+1,n.lines=[];for(let e=t;e<=i;e++)n.lines[e-t]=this.host.createVisibleLine();return this._finishRendering(n,!0,o),n}if(this._renderUntouchedLines(n,Math.max(t-n.rendLineNumberStart,0),Math.min(i-n.rendLineNumberStart,n.linesLength-1),o,t),n.rendLineNumberStart>t){const e=t,s=Math.min(i,n.rendLineNumberStart-1);e<=s&&(this._insertLinesBefore(n,e,s,o,t),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart<t){const e=Math.min(n.linesLength,t-n.rendLineNumberStart);e>0&&(this._removeLinesBefore(n,e),n.linesLength-=e)}if(n.rendLineNumberStart=t,n.rendLineNumberStart+n.linesLength-1<i){const e=n.rendLineNumberStart+n.linesLength,s=i;e<=s&&(this._insertLinesAfter(n,e,s,o,t),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart+n.linesLength-1>i){const e=Math.max(0,i-n.rendLineNumberStart+1),t=n.linesLength-1,o=t-e+1;o>0&&(this._removeLinesAfter(n,o),n.linesLength-=o)}return this._finishRendering(n,!1,o),n}_renderUntouchedLines(e,t,i,o,n){const s=e.rendLineNumberStart,r=e.lines;for(let a=t;a<=i;a++){const e=s+a;r[a].layoutLine(e,o[e-n])}}_insertLinesBefore(e,t,i,o,n){const s=[];let r=0;for(let a=t;a<=i;a++)s[r++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const t=e.lines[i].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,o,n){const s=[];let r=0;for(let a=t;a<=i;a++)s[r++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let o=0;o<t;o++){const t=e.lines[i+o].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,o){d._ttPolicy&&(i=d._ttPolicy.createHTML(i));const n=this.domNode.lastChild;t||!n?this.domNode.innerHTML=i:n.insertAdjacentHTML("afterend",i);let s=this.domNode.lastChild;for(let r=e.linesLength-1;r>=0;r--){const t=e.lines[r];o[r]&&(t.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const o=document.createElement("div");d._ttPolicy&&(t=d._ttPolicy.createHTML(t)),o.innerHTML=t;for(let n=0;n<e.linesLength;n++){const t=e.lines[n];if(i[n]){const e=o.firstChild,i=t.getDomNode();i.parentNode.replaceChild(e,i),t.setDomNode(e)}}}_finishRendering(e,t,i){const o=d._sb,n=e.linesLength,s=e.lines,r=e.rendLineNumberStart,a=[];{o.reset();let d=!1;for(let e=0;e<n;e++){const t=s[e];a[e]=!1;const n=t.getDomNode();if(n)continue;const h=t.renderLine(e+r,i[e],this.viewportData,o);h&&(a[e]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,o.build(),a)}{o.reset();let t=!1;const d=[];for(let e=0;e<n;e++){const n=s[e];if(d[e]=!1,a[e])continue;const h=n.renderLine(e+r,i[e],this.viewportData,o);h&&(d[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,o.build(),d)}}}d._ttPolicy=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("editorViewLayer",{createHTML:e=>e}),d._sb=Object(s["a"])(1e5)},"52a1":function(e,t,i){"use strict";i.d(t,"a",(function(){return Me}));i("95ed7"),i("2936");var o=i("05b0"),n=i("9ffb"),s=i("c59a"),r=i("5ee7"),a=i("71e2"),d=i("4f7d"),h=i("6632"),l=i("9550"),c=i("38cf"),u=i("c5d4"),g=i("a24f"),m=i("7ffe"),_=i("7f65"),f=i("96bd"),p=i("c1df"),v=i("abda"),w=i("de9c");class b{constructor(e,t,i,o){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=o}paste(e,t,i,o){this.commandDelegate.paste(e,t,i,o)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,o){this.commandDelegate.compositionType(e,t,i,o)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){p["b"].SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new v["a"](e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=w["d"]&&t.get(96),o=t.get(17);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):2===e.mouseDownCount?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||o?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){p["b"].MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){p["b"].MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,i){e=this._validateViewColumn(e),p["b"].ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),p["b"].CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){p["b"].LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){p["b"].WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){p["b"].WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){p["b"].LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){p["b"].LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){p["b"].LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){p["b"].LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){p["b"].LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){p["b"].SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}var C=i("6718");class D{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return D.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new L(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class L{constructor(e,t,i,o,n,s){this.element=e,this.type=t,this.mouseColumn=i,this.position=o,this.range=n,this.detail=s}toString(){return C["b"].toString(this)}}var S=i("44a15"),N=i("268a");class E extends N["b"]{constructor(e){super(e),this._visibleLines=new S["b"](this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++){const t=this._dynamicOverlays[e];if(t.shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++){const t=this._dynamicOverlays[e];t.dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new y(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=t;o<=i;o++){const t=this._visibleLines.getVisibleLine(o);t.onConfigurationChanged(e)}return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(e=>e.shouldRender());for(let i=0,o=t.length;i<o;i++){const o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class y{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Object(m["b"])(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,i,o){let n="";for(let s=0,r=this._dynamicOverlays.length;s<r;s++){const t=this._dynamicOverlays[s];n+=t.render(i.startLineNumber,e)}return this._renderedContent!==n&&(this._renderedContent=n,o.appendASCIIString('<div style="position:absolute;top:'),o.appendASCIIString(String(t)),o.appendASCIIString("px;width:100%;height:"),o.appendASCIIString(String(this._lineHeight)),o.appendASCIIString('px;">'),o.appendASCIIString(n),o.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class M extends E{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(130);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(130);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class R extends E{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(130);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),h["a"].applyFontInfo(this.domNode,t.get(42))}onConfigurationChanged(e){const t=this._context.configuration.options;h["a"].applyFontInfo(this.domNode,t.get(42));const i=t.get(130);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}var I=i("d170e"),O=i("799d"),T=i("56fb"),x=i("985e"),W=i("3347"),P=i("893e"),V=i("9a7e"),F=i("ae3c"),A=i("65dc"),H=i("8d3a"),k=i("bdb3"),j=i("2445"),U=i("20f0"),z=i("c035"),B=i("1967d"),Z=i("728d"),K=i("dda8"),q=i("7ce6"),$=i("ddd3"),G=i("b825"),X=i("537c"),Y=i("fcee"),J=i("b980"),Q=i("26f0b"),ee=i("c715"),te=i("662c");class ie extends ee["a"]{constructor(e,t,i,o,n,s){super(),this._selections=[new g["a"](1,1,1,1)],this._renderAnimationFrame=null;const r=new b(t,o,n,e);this._context=new J["a"](t,i.getColorTheme(),o),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(i.onDidColorThemeChange(e=>{this._context.theme.update(e),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new f["a"](this._context,r,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Object(m["b"])(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Object(m["b"])(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Object(m["b"])(document.createElement("div")),N["a"].write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new x["a"](this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new F["a"](this._context,this._linesContent),this._viewZones=new G["a"](this._context),this._viewParts.push(this._viewZones);const a=new z["a"](this._context);this._viewParts.push(a);const d=new K["a"](this._context);this._viewParts.push(d);const h=new M(this._context);this._viewParts.push(h),h.addDynamicOverlay(new O["a"](this._context)),h.addDynamicOverlay(new q["a"](this._context)),h.addDynamicOverlay(new P["a"](this._context)),h.addDynamicOverlay(new T["a"](this._context));const l=new R(this._context);this._viewParts.push(l),l.addDynamicOverlay(new O["b"](this._context)),l.addDynamicOverlay(new W["c"](this._context)),l.addDynamicOverlay(new k["a"](this._context)),l.addDynamicOverlay(new A["a"](this._context)),l.addDynamicOverlay(new V["a"](this._context));const c=new H["a"](this._context);c.getDomNode().appendChild(this._viewZones.marginDomNode),c.getDomNode().appendChild(l.getDomNode()),this._viewParts.push(c),this._contentWidgets=new I["a"](this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new $["a"](this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new U["a"](this._context),this._viewParts.push(this._overlayWidgets);const u=new Z["a"](this._context);this._viewParts.push(u);const p=new j["a"](this._context);if(this._viewParts.push(p),a){const e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(a.getDomNode(),e.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(u.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new _["a"](this._context,r,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new C["d"](e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new v["a"](e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new v["a"](e,t)))}}_applyLayout(){const e=this._context.configuration.options,t=e.get(130);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+Object(te["e"])(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=n["T"](this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){oe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!n["N"](this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new Q["a"](this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const o=new Y["e"](this._context.viewLayout,i,this._viewLines);for(const n of e)n.prepareRender(o);for(const n of e)n.render(o),n.onDidRender();Math.abs(u["a"]()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const i=this._context.model.validateModelPosition({lineNumber:e,column:t}),o=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const n=this._viewLines.visibleRangeForPosition(new v["a"](o.lineNumber,o.column));return n?n.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?D.convertViewToModelMouseTarget(i,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new B["a"](this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(null===t){const i=e.position?e.position.position:null;null!==i&&(t=new X["a"](i.lineNumber,i.column,i.lineNumber,i.column))}const i=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,i),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null,i=this._overlayWidgets.setWidgetPosition(e.widget,t);i&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function oe(e){try{return e()}catch(t){Object(s["f"])(t)}}var ne=i("ae6d"),se=i("f424"),re=i("fa9c"),ae=i("82bb"),de=i("80ea"),he=i("a55e"),le=i("2b64"),ce=i("35bf"),ue=i("09ad"),ge=i("9987"),me=i("646b"),_e=i("321b"),fe=i("2279"),pe=i("4823"),ve=i("6fea"),we=i("4058"),be=i("a0e2"),Ce=i("9541"),De=i("f20c"),Le=i("82cc"),Se=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Ne=function(e,t){return function(i,o){t(i,o,e)}};let Ee=0;class ye{constructor(e,t,i,o,n){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=o,this.listenersToRemove=n}dispose(){Object(a["f"])(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let Me=class e extends a["a"]{constructor(e,t,i,o,n,a,d,h,c,u){super(),this._onDidDispose=this._register(new r["b"]),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new r["b"]),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new r["b"]),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new r["b"]),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new r["b"]),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new r["b"]),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new r["b"]),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new r["b"]),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new r["b"]),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new r["b"]),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new r["b"]),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new r["b"]),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Re),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Re),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new r["b"]),this.onWillType=this._onWillType.event,this._onDidType=this._register(new r["b"]),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new r["b"]),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new r["b"]),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new r["b"]),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new r["b"]),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new r["b"]),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new r["b"]),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new r["b"]),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new r["b"]),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new r["b"]),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new r["b"]),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new r["b"]),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new r["b"]),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new r["b"]),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new r["b"]),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new r["b"]),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new r["b"]),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new r["b"]),this.onDidChangeViewZones=this._onDidChangeViewZones.event;const g=Object.assign({},t);let m;this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++Ee,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=i.isSimpleWidget||!1,this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(g,u)),this._register(this._configuration.onDidChange(e=>{this._onDidChangeConfiguration.fire(e);const t=this._configuration.options;if(e.hasChanged(130)){const e=t.get(130);this._onDidLayoutChange.fire(e)}})),this._contextKeyService=this._register(d.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=n,this._commandService=a,this._themeService=h,this._register(new Ie(this,this._contextKeyService)),this._register(new Oe(this,this._contextKeyService)),this._instantiationService=o.createChild(new pe["a"]([_e["b"],this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new Te(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},m=Array.isArray(i.contributions)?i.contributions:l["d"].getEditorContributions();for(const r of m)if(this._contributions[r.id])Object(s["f"])(new Error("Cannot have two contributions with the same id "+r.id));else try{const e=this._instantiationService.createInstance(r.ctor,this);this._contributions[r.id]=e}catch(_){Object(s["f"])(_)}l["d"].getEditorActions().forEach(e=>{if(this._actions[e.id])return void Object(s["f"])(new Error("Cannot have two actions with the same id "+e.id));const t=new ae["a"](e.id,e.label,e.alias,Object(be["o"])(e.precondition),()=>this._instantiationService.invokeFunction(t=>Promise.resolve(e.runEditorCommand(t,this,null))),this._contextKeyService);this._actions[t.id]=t}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new h["a"](this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return de["a"].ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,i=e.length;t<i;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Le["a"].getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!(!e||!e.preserveBOM);let i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(null===this._modelData&&null===t)return;if(this._modelData&&this._modelData.model===t)return;const i=this.hasTextFocus(),o=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();const n={oldModelUrl:o?o.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(o)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,i){const o=e.model.validatePosition({lineNumber:t,column:i}),n=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)}getTopForLineNumber(t){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,1):-1}getTopForPosition(t,i){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,i):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(e=>X["a"].lift(e)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return re["a"].visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!v["a"].isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,o){if(!this._modelData)return;if(!X["a"].isIRange(e))throw new Error("Invalid arguments");const n=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.viewModel.revealRange("api",i,s,t,o)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new X["a"](e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,o){if(!v["a"].isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new X["a"](e.lineNumber,e.column,e.lineNumber,e.column),t,i,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=g["a"].isISelection(e),i=X["a"].isIRange(e);if(!t&&!i)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(i){const t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new g["a"](e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,o){if("number"!==typeof e||"number"!==typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new X["a"](e,1,t,1),i,!1,o)}revealRange(e,t=0,i=!1,o=!0){this._revealRange(e,i?1:0,o,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,o){if(!X["a"].isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(X["a"].lift(e),t,i,o)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let t=0,i=e.length;t<i;t++)if(!g["a"].isISelection(e[t]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const n of t){const t=this._contributions[n];"function"===typeof t.saveViewState&&(e[n]=t.saveViewState())}const i=this._modelData.viewModel.saveCursorState(),o=this._modelData.viewModel.saveState();return{cursorState:i,viewState:o,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const e=t.cursorState;Array.isArray(e)?this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]);const i=t.contributionsState||{},o=Object.keys(this._contributions);for(let t=0,s=o.length;t<s;t++){const e=o[t],n=this._contributions[e];"function"===typeof n.restoreViewState&&n.restoreViewState(i[e])}const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let i=0,o=t.length;i<o;i++){const o=t[i];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(e=>e.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const t=i;return void this._type(e,t.text||"")}case"replacePreviousChar":{const t=i;return void this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0)}case"compositionType":{const t=i;return void this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0)}case"paste":{const t=i;return void this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null)}case"cut":return void this._cut(e)}const o=this.getAction(t);o?Promise.resolve(o.run()).then(void 0,s["f"]):this._modelData&&(this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,i,o,n){this._modelData&&this._modelData.viewModel.compositionType(t,i,o,n,e)}_paste(e,t,i,o,n){if(!this._modelData||0===t.length)return;const s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,i,o,e);const r=this._modelData.viewModel.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new X["a"](s.lineNumber,s.column,r.lineNumber,r.column),mode:n})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const o=l["d"].getEditorCommand(t);return!!o&&(i=i||{},i.source=e,this._instantiationService.invokeFunction(e=>{Promise.resolve(o.runEditorCommand(e,this,i)).then(void 0,s["f"])}),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(80)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(80)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,t,i){if(!this._modelData)return!1;if(this._configuration.options.get(80))return!1;let o;return o=i?Array.isArray(i)?()=>i:i:()=>null,this._modelData.viewModel.executeEdits(e,t,o),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Object(ne["m"])(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){const e=this._configuration.options,t=e.get(130);return t}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarMouseDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(t){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(t),o=this._configuration.options,n=o.get(130),s=e._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:s,left:r,height:o.get(58)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){h["a"].applyFontInfoSlow(e,this._configuration.options.get(42))}_attachModel(e){if(!e)return void(this._modelData=null);const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const i=new ge["a"](this._id,this._configuration,e,De["a"].create(),Ce["a"].create(this._configuration.options),e=>n["V"](e));t.push(e.onDidChangeDecorations(e=>this._onDidChangeModelDecorations.fire(e))),t.push(e.onDidChangeLanguage(t=>{this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._onDidChangeModelLanguage.fire(t)})),t.push(e.onDidChangeLanguageConfiguration(e=>this._onDidChangeModelLanguageConfiguration.fire(e))),t.push(e.onDidChangeContent(e=>this._onDidChangeModelContent.fire(e))),t.push(e.onDidChangeOptions(e=>this._onDidChangeModelOptions.fire(e))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(e=>{switch(e.kind){case 0:this._onDidContentSizeChange.fire(e);break;case 1:this._editorTextFocus.setValue(e.hasFocus);break;case 2:this._onDidScrollChange.fire(e);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidAttemptReadOnlyEdit.fire();break;case 5:{e.reachedMaxCursorCount&&this._notificationService.warn(o["a"]("cursors.maximum","The number of cursors has been limited to {0}.",se["a"].MAX_CURSOR_COUNT));const t=[];for(let o=0,s=e.selections.length;o<s;o++)t[o]=e.selections[o].getPosition();const i={position:t[0],secondaryPositions:t.slice(1),reason:e.reason,source:e.source};this._onDidChangeCursorPosition.fire(i);const n={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};this._onDidChangeCursorSelection.fire(n);break}}}));const[s,r]=this._createView(i);if(r){this._domElement.appendChild(s.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addContentWidget(this._contentWidgets[i])}t=Object.keys(this._overlayWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addOverlayWidget(this._overlayWidgets[i])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ye(e,i,s,r,t)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,i,o)=>{this._paste("keyboard",e,t,i,o)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,i,o)=>{this._compositionType("keyboard",e,t,i,o)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,i,o)=>{const n={text:e,pasteOnNewLine:t,multicursorText:i,mode:o};this._commandService.executeCommand("paste",n)},type:e=>{const t={text:e};this._commandService.executeCommand("type",t)},compositionType:(e,t,i,o)=>{if(i||o){const n={text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:o};this._commandService.executeCommand("compositionType",n)}else{const i={text:e,replaceCharCnt:t};this._commandService.executeCommand("replacePreviousChar",i)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new D(e.coordinatesConverter);i.onKeyDown=e=>this._onKeyDown.fire(e),i.onKeyUp=e=>this._onKeyUp.fire(e),i.onContextMenu=e=>this._onContextMenu.fire(e),i.onMouseMove=e=>this._onMouseMove.fire(e),i.onMouseLeave=e=>this._onMouseLeave.fire(e),i.onMouseDown=e=>this._onMouseDown.fire(e),i.onMouseUp=e=>this._onMouseUp.fire(e),i.onMouseDrag=e=>this._onMouseDrag.fire(e),i.onMouseDrop=e=>this._onMouseDrop.fire(e),i.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),i.onMouseWheel=e=>this._onMouseWheel.fire(e);const o=new ie(t,this._configuration,this._themeService,e,i,this._overflowWidgetsDomNode);return[o,!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}};Me=Se([Ne(3,fe["a"]),Ne(4,c["a"]),Ne(5,me["b"]),Ne(6,_e["b"]),Ne(7,te["b"]),Ne(8,ve["a"]),Ne(9,we["b"])],Me);class Re extends a["a"]{constructor(){super(),this._onDidChangeToTrue=this._register(new r["b"]),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new r["b"]),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class Ie extends a["a"]{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=he["a"].editorSimpleInput.bindTo(t),this._editorFocus=he["a"].focus.bindTo(t),this._textInputFocus=he["a"].textInputFocus.bindTo(t),this._editorTextFocus=he["a"].editorTextFocus.bindTo(t),this._editorTabMovesFocus=he["a"].tabMovesFocus.bindTo(t),this._editorReadonly=he["a"].readOnly.bindTo(t),this._inDiffEditor=he["a"].inDiffEditor.bindTo(t),this._editorColumnSelection=he["a"].columnSelection.bindTo(t),this._hasMultipleSelections=he["a"].hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=he["a"].hasNonEmptySelection.bindTo(t),this._canUndo=he["a"].canUndo.bindTo(t),this._canRedo=he["a"].canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(17))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(e=>!e.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class Oe extends a["a"]{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=he["a"].languageId.bindTo(t),this._hasCompletionItemProvider=he["a"].hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=he["a"].hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=he["a"].hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=he["a"].hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=he["a"].hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=he["a"].hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=he["a"].hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=he["a"].hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=he["a"].hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=he["a"].hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=he["a"].hasReferenceProvider.bindTo(t),this._hasRenameProvider=he["a"].hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=he["a"].hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=he["a"].hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=he["a"].hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=he["a"].hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=he["a"].hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=he["a"].hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=he["a"].isInWalkThroughSnippet.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(le["d"].onDidChange(i)),this._register(le["a"].onDidChange(i)),this._register(le["b"].onDidChange(i)),this._register(le["f"].onDidChange(i)),this._register(le["e"].onDidChange(i)),this._register(le["q"].onDidChange(i)),this._register(le["G"].onDidChange(i)),this._register(le["p"].onDidChange(i)),this._register(le["i"].onDidChange(i)),this._register(le["m"].onDidChange(i)),this._register(le["y"].onDidChange(i)),this._register(le["z"].onDidChange(i)),this._register(le["g"].onDidChange(i)),this._register(le["j"].onDidChange(i)),this._register(le["B"].onDidChange(i)),this._register(le["r"].onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageIdentifier().language),this._hasCompletionItemProvider.set(le["d"].has(e)),this._hasCodeActionsProvider.set(le["a"].has(e)),this._hasCodeLensProvider.set(le["b"].has(e)),this._hasDefinitionProvider.set(le["f"].has(e)),this._hasDeclarationProvider.set(le["e"].has(e)),this._hasImplementationProvider.set(le["q"].has(e)),this._hasTypeDefinitionProvider.set(le["G"].has(e)),this._hasHoverProvider.set(le["p"].has(e)),this._hasDocumentHighlightProvider.set(le["i"].has(e)),this._hasDocumentSymbolProvider.set(le["m"].has(e)),this._hasReferenceProvider.set(le["y"].has(e)),this._hasRenameProvider.set(le["z"].has(e)),this._hasSignatureHelpProvider.set(le["B"].has(e)),this._hasInlayHintsProvider.set(le["r"].has(e)),this._hasDocumentFormattingProvider.set(le["g"].has(e)||le["j"].has(e)),this._hasDocumentSelectionFormattingProvider.set(le["j"].has(e)),this._hasMultipleDocumentFormattingProvider.set(le["g"].all(e).length+le["j"].all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(le["j"].all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===d["c"].walkThroughSnippet)}):this.reset()}}class Te extends a["a"]{constructor(e){super(),this._onChange=this._register(new r["b"]),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(n["Y"](e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const xe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),We=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function Pe(e){return xe+encodeURIComponent(e.toString())+We}const Ve=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Fe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Ae(e){return Ve+encodeURIComponent(e.toString())+Fe}Object(te["f"])((e,t)=>{const i=e.getColor(ue["t"]);i&&t.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${i}; }`);const o=e.getColor(ue["u"]);o&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Pe(o)}") repeat-x bottom left; }`);const n=e.getColor(ue["s"]);n&&t.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${n}; }`);const s=e.getColor(ue["W"]);s&&t.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const r=e.getColor(ue["X"]);r&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Pe(r)}") repeat-x bottom left; }`);const a=e.getColor(ue["V"]);a&&t.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const d=e.getColor(ue["L"]);d&&t.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${d}; }`);const h=e.getColor(ue["M"]);h&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Pe(h)}") repeat-x bottom left; }`);const l=e.getColor(ue["K"]);l&&t.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${l}; }`);const c=e.getColor(ue["C"]);c&&t.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${c}; }`);const u=e.getColor(ue["D"]);u&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${Ae(u)}") no-repeat bottom left; }`);const g=e.getColor(ce["w"]);g&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${g.rgba.a}; }`);const m=e.getColor(ce["v"]);m&&t.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${m}; }`);const _=e.getColor(ue["B"])||"inherit";t.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${_}}`)})},"8ee7":function(e,t,i){"use strict";i.d(t,"a",(function(){return ge}));i("bdd8");var o,n=i("05b0"),s=i("9ffb"),r=i("7ffe"),a=i("1bb1"),d=i("ae74"),h=i("5ee7"),l=i("71e2"),c=i("6632"),u=i("c794"),g=i("38cf"),m=i("52a1"),_=(i("112b"),i("7b3c")),f=i("92e8"),p=i("9382"),v=i("9550"),w=i("ae6d"),b=i("3f16"),C=i("abda"),D=i("35bf"),L=i("3935"),S=i("50da"),N=i("321b"),E=i("09ad"),y=i("662c"),M=i("1dea"),R=i("99f1"),I=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const O=3;class T{constructor(e,t,i,o){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=o}getType(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}class x{constructor(e){this.entries=e}}const W=Object(R["b"])("diff-review-insert",M["b"].add,n["a"]("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),P=Object(R["b"])("diff-review-remove",M["b"].remove,n["a"]("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),V=Object(R["b"])("diff-review-close",M["b"].close,n["a"]("diffReviewCloseIcon","Icon for 'Close' in diff review."));class F extends l["a"]{constructor(e){super(),this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=Object(r["b"])(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=Object(r["b"])(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new _["a"](this.actionBarContainer.domNode)),this._actionBar.push(new p["a"]("diffreview.close",n["a"]("label.close","Close"),"close-diff-review "+y["d"].asClassName(V),!0,()=>I(this,void 0,void 0,(function*(){return this.hide()}))),{label:!1,icon:!0}),this.domNode=Object(r["b"])(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=Object(r["b"])(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new f["a"](this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(s["o"](this.domNode.domNode,"click",e=>{e.preventDefault();let t=s["x"](e.target,"diff-review-row");t&&this._goToRow(t)})),this._register(s["o"](this.domNode.domNode,"keydown",e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._goToRow(this._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._goToRow(this._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,i=this._diffs.length;e<i;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=this._diffs.length+t-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new C["a"](t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,i=this._diffs.length;e<i;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=t+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new C["a"](t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new C["a"](e,1)),this._diffEditor.revealPosition(new C["a"](e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||0===e.length)return[];const t=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return t&&i?F._mergeAdjacent(e,t.getLineCount(),i.getLineCount()):[]}static _mergeAdjacent(e,t,i){if(!e||0===e.length)return[];let o=[],n=0;for(let d=0,h=e.length;d<h;d++){const s=e[d],r=s.originalStartLineNumber,a=s.originalEndLineNumber,l=s.modifiedStartLineNumber,c=s.modifiedEndLineNumber;let u=[],g=0;{const t=0===a?r:r-1,i=0===c?l:l-1;let o=1,n=1;if(d>0){const t=e[d-1];o=0===t.originalEndLineNumber?t.originalStartLineNumber+1:t.originalEndLineNumber+1,n=0===t.modifiedEndLineNumber?t.modifiedStartLineNumber+1:t.modifiedEndLineNumber+1}let s=t-O+1,h=i-O+1;if(s<o){const e=o-s;s+=e,h+=e}if(h<n){const e=n-h;s+=e,h+=e}u[g++]=new T(s,t,h,i)}0!==a&&(u[g++]=new T(r,a,0,0)),0!==c&&(u[g++]=new T(0,0,l,c));{const o=0===a?r+1:a+1,n=0===c?l+1:c+1;let s=t,m=i;if(d+1<h){const t=e[d+1];s=0===t.originalEndLineNumber?t.originalStartLineNumber:t.originalStartLineNumber-1,m=0===t.modifiedEndLineNumber?t.modifiedStartLineNumber:t.modifiedStartLineNumber-1}let _=o+O-1,f=n+O-1;if(_>s){const e=s-_;_+=e,f+=e}if(f>m){const e=m-f;_+=e,f+=e}u[g++]=new T(o,_,n,f)}o[n++]=new x(u)}let s=o[0].entries,r=[],a=0;for(let d=1,h=o.length;d<h;d++){const e=o[d].entries,t=s[s.length-1],i=e[0];0===t.getType()&&0===i.getType()&&i.originalLineStart<=t.originalLineEnd?(s[s.length-1]=new T(t.originalLineStart,i.originalLineEnd,t.modifiedLineStart,i.modifiedLineEnd),s=s.concat(e.slice(1))):(r[a++]=new x(s),s=e)}return r[a++]=new x(s),r}_findDiffIndex(e){const t=e.lineNumber;for(let i=0,o=this._diffs.length;i<o;i++){const e=this._diffs[i].entries,o=e[e.length-1].modifiedLineEnd;if(t<=o)return i}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel(),r=i.getOptions(),a=o.getOptions();if(!this._isVisible||!i||!o)return s["t"](this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});const d=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[d]===this._currentDiff)return;this._currentDiff=this._diffs[d];const h=this._diffs[d].entries;let l=document.createElement("div");l.className="diff-review-table",l.setAttribute("role","list"),l.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),c["a"].applyFontInfoSlow(l,t.get(42));let u=0,g=0,m=0,_=0;for(let n=0,s=h.length;n<s;n++){const e=h[n],t=e.originalLineStart,i=e.originalLineEnd,o=e.modifiedLineStart,s=e.modifiedLineEnd;0!==t&&(0===u||t<u)&&(u=t),0!==i&&(0===g||i>g)&&(g=i),0!==o&&(0===m||o<m)&&(m=o),0!==s&&(0===_||s>_)&&(_=s)}let f=document.createElement("div");f.className="diff-review-row";let p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const v=g-u+1,w=_-m+1;p.appendChild(document.createTextNode(`${d+1}/${this._diffs.length}: @@ -${u},${v} +${m},${w} @@`)),f.setAttribute("data-line",String(m));const b=e=>0===e?n["a"]("no_lines_changed","no lines changed"):1===e?n["a"]("one_line_changed","1 line changed"):n["a"]("more_lines_changed","{0} lines changed",e),C=b(v),D=b(w);f.setAttribute("aria-label",n["a"]({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",d+1,this._diffs.length,u,C,m,D)),f.appendChild(p),f.setAttribute("role","listitem"),l.appendChild(f);const L=t.get(58);let S=m;for(let n=0,s=h.length;n<s;n++){const s=h[n];F._renderSection(l,s,S,L,this._width,e,i,r,t,o,a),0!==s.modifiedLineStart&&(S=s.modifiedLineEnd)}s["t"](this._content.domNode),this._content.domNode.appendChild(l),this.scrollbar.scanDomNode()}static _renderSection(e,t,i,o,s,r,a,d,h,l,c){const u=t.getType();let g="diff-review-row",m="";const _="diff-review-spacer";let f=null;switch(u){case 1:g="diff-review-row line-insert",m=" char-insert",f=W;break;case 2:g="diff-review-row line-delete",m=" char-delete",f=P;break}const p=t.originalLineStart,v=t.originalLineEnd,w=t.modifiedLineStart,b=t.modifiedLineEnd,C=Math.max(b-w,v-p),D=r.get(130),L=D.glyphMarginWidth+D.lineNumbersWidth,S=h.get(130),N=10+S.glyphMarginWidth+S.lineNumbersWidth;for(let E=0;E<=C;E++){const t=0===p?0:p+E,v=0===w?0:w+E,b=document.createElement("div");b.style.minWidth=s+"px",b.className=g,b.setAttribute("role","listitem"),0!==v&&(i=v),b.setAttribute("data-line",String(i));let C=document.createElement("div");C.className="diff-review-cell",C.style.height=o+"px",b.appendChild(C);const D=document.createElement("span");D.style.width=L+"px",D.style.minWidth=L+"px",D.className="diff-review-line-number"+m,0!==t?D.appendChild(document.createTextNode(String(t))):D.innerText=" ",C.appendChild(D);const S=document.createElement("span");S.style.width=N+"px",S.style.minWidth=N+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+m,0!==v?S.appendChild(document.createTextNode(String(v))):S.innerText=" ",C.appendChild(S);const M=document.createElement("span");if(M.className=_,f){const e=document.createElement("span");e.className=y["d"].asClassName(f),e.innerText="  ",M.appendChild(e)}else M.innerText="  ";let R;if(C.appendChild(M),0!==v){let e=this._renderLine(l,h,c.tabSize,v);F._ttPolicy&&(e=F._ttPolicy.createHTML(e)),C.insertAdjacentHTML("beforeend",e),R=l.getLineContent(v)}else{let e=this._renderLine(a,r,d.tabSize,t);F._ttPolicy&&(e=F._ttPolicy.createHTML(e)),C.insertAdjacentHTML("beforeend",e),R=a.getLineContent(t)}0===R.length&&(R=n["a"]("blankLine","blank"));let I="";switch(u){case 0:I=t===v?n["a"]({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",R,t):n["a"]("equalLine","{0} original line {1} modified line {2}",R,t,v);break;case 1:I=n["a"]("insertLine","+ {0} modified line {1}",R,v);break;case 2:I=n["a"]("deleteLine","- {0} original line {1}",R,t);break}b.setAttribute("aria-label",I),e.appendChild(b)}}static _renderLine(e,t,i,o){const n=e.getLineContent(o),s=t.get(42),r=b["a"].createEmpty(n),a=S["f"].isBasicASCII(n,e.mightContainNonBasicASCII()),d=S["f"].containsRTL(n,a,e.mightContainRTL()),h=Object(L["e"])(new L["c"](s.isMonospace&&!t.get(28),s.canUseHalfwidthRightwardsArrow,n,!1,a,d,0,r,[],i,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,t.get(105),t.get(88),t.get(82),t.get(43)!==w["e"].OFF,null));return h.html}}F._ttPolicy=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("diffReview",{createHTML:e=>e}),Object(y["f"])((e,t)=>{const i=e.getColor(D["r"]);i&&t.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${i}; }`);const o=e.getColor(E["yc"]);o&&t.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${o} 0 -6px 6px -6px inset; }`)});class A extends v["b"]{constructor(){super({id:"editor.action.diffReview.next",label:n["a"]("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:N["a"].has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const i=k(e);i&&i.diffReviewNext()}}class H extends v["b"]{constructor(){super({id:"editor.action.diffReview.prev",label:n["a"]("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:N["a"].has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const i=k(e);i&&i.diffReviewPrev()}}function k(e){const t=e.get(g["a"]),i=t.listDiffEditors(),o=t.getActiveCodeEditor();if(!o)return null;for(let n=0,s=i.length;n<s;n++){const e=i[n];if(e.getModifiedEditor().getId()===o.getId()||e.getOriginalEditor().getId()===o.getId())return e}return null}Object(v["j"])(A),Object(v["j"])(H);var j=i("537c"),U=i("5433"),z=i("80ea"),B=i("9afb"),Z=i("1f37"),K=i("51f6"),q=i("b9ab"),$=i("2279"),G=i("4823"),X=i("6fea"),Y=i("48963"),J=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class Q extends l["a"]{constructor(e,t,i,o,r,a){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=o,this._contextMenuService=r,this._clipboardService=a,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=M["b"].lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=i.getOption(58),h=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=d+"px",this._diffActions.style.lineHeight=d+"px",this._marginDomNode.appendChild(this._diffActions);const l=[];l.push(new p["a"]("diff.clipboard.copyDeletedContent",o.originalEndLineNumber>o.modifiedStartLineNumber?n["a"]("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):n["a"]("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"),void 0,!0,()=>J(this,void 0,void 0,(function*(){const e=new j["a"](o.originalStartLineNumber,1,o.originalEndLineNumber+1,1),t=o.originalModel.getValueInRange(e);yield this._clipboardService.writeText(t)}))));let c=0,u=void 0;o.originalEndLineNumber>o.modifiedStartLineNumber&&(u=new p["a"]("diff.clipboard.copyDeletedLineContent",n["a"]("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber),void 0,!0,()=>J(this,void 0,void 0,(function*(){const e=o.originalModel.getLineContent(o.originalStartLineNumber+c);yield this._clipboardService.writeText(e)}))),l.push(u));const g=i.getOption(80);g||l.push(new p["a"]("diff.inline.revertChange",n["a"]("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>J(this,void 0,void 0,(function*(){const e=new j["a"](o.originalStartLineNumber,1,o.originalEndLineNumber,o.originalModel.getLineMaxColumn(o.originalEndLineNumber)),t=o.originalModel.getValueInRange(e);if(0===o.modifiedEndLineNumber){const e=i.getModel().getLineMaxColumn(o.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new j["a"](o.modifiedStartLineNumber,e,o.modifiedStartLineNumber,e),text:h+t}])}else{const e=i.getModel().getLineMaxColumn(o.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new j["a"](o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,e),text:t}])}}))));const m=(e,t)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:e,y:t}),getActions:()=>(u&&(u.label=n["a"]("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber+c)),l),autoSelectFirstItem:!0})};this._register(s["o"](this._diffActions,"mousedown",e=>{const{top:t,height:i}=s["D"](this._diffActions);let o=Math.floor(d/3);e.preventDefault(),m(e.posx,t+i+o)})),this._register(i.onMouseMove(e=>{if(8===e.target.type||5===e.target.type){const t=e.target.detail.viewZoneId;t===this._viewZoneId?(this.visibility=!0,c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,d)):this.visibility=!1}else this.visibility=!1})),this._register(i.onMouseDown(e=>{if(e.event.rightButton&&(8===e.target.type||5===e.target.type)){const t=e.target.detail.viewZoneId;t===this._viewZoneId&&(e.event.preventDefault(),c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,d),m(e.event.posx,e.event.posy+d))}}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,t,i){const{top:o}=s["D"](e),n=t-o,r=Math.floor(n/i),a=r*i;if(this._diffActions.style.top=a+"px",this.diff.viewLineCounts){let e=0;for(let t=0;t<this.diff.viewLineCounts.length;t++)if(e+=this.diff.viewLineCounts[t],r<e)return t}return r}}var ee,te=i("5726"),ie=i("c59a"),oe=i("6115"),ne=i("4449"),se=i("1a99"),re=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ae=function(e,t){return function(i,o){t(i,o,e)}};class de{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(e=>!this._zonesMap[String(e.id)])}clean(e){this._zones.length>0&&e.changeViewZones(e=>{for(const t of this._zones)e.removeZone(t)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,i,o){const n=o?u["c"].capture(e):null;e.changeViewZones(t=>{for(const e of this._zones)t.removeZone(e);for(const e of this._inlineDiffMargins)e.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let o=0,n=i.zones.length;o<n;o++){const n=i.zones[o];n.suppressMouseDown=!0;const s=t.addZone(n);this._zones.push(s),this._zonesMap[String(s)]=!0,i.zones[o].diff&&n.marginDomNode&&(n.suppressMouseDown=!1,this._inlineDiffMargins.push(new Q(s,n.marginDomNode,e,i.zones[o].diff,this._contextMenuService,this._clipboardService)))}}),n&&n.restore(e),this._decorations=e.deltaDecorations(this._decorations,i.decorations),t&&t.setZones(i.overviewZones)}}let he=0;const le=Object(R["b"])("diff-insert",M["b"].add,n["a"]("diffInsertIcon","Line decoration for inserts in the diff editor.")),ce=Object(R["b"])("diff-remove",M["b"].remove,n["a"]("diffRemoveIcon","Line decoration for removals in the diff editor.")),ue=null===(ee=window.trustedTypes)||void 0===ee?void 0:ee.createPolicy("diffEditorWidget",{createHTML:e=>e});let ge=class e extends l["a"]{constructor(t,i,o,n,a,l,c,u,g,m,_,f){super(),this._editorProgressService=f,this._onDidDispose=this._register(new h["b"]),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new h["b"]),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new h["b"]),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=a,this._codeEditorService=u,this._contextKeyService=this._register(l.createScoped(t)),this._instantiationService=c.createChild(new G["a"]([N["b"],this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=g,this._notificationService=m,this._id=++he,this._state=0,this._updatingDiffProgress=null,this._domElement=t,i=i||{},this._renderSideBySide=!0,"undefined"!==typeof i.renderSideBySide&&(this._renderSideBySide=i.renderSideBySide),this._maxComputationTime=5e3,"undefined"!==typeof i.maxComputationTime&&(this._maxComputationTime=i.maxComputationTime),this._ignoreTrimWhitespace=!0,"undefined"!==typeof i.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=i.ignoreTrimWhitespace),this._renderIndicators=!0,"undefined"!==typeof i.renderIndicators&&(this._renderIndicators=i.renderIndicators),this._originalIsEditable=Object(w["k"])(i.originalEditable,!1),this._diffCodeLens=Object(w["k"])(i.diffCodeLens,!1),this._diffWordWrap=Le(i.diffWordWrap,"inherit"),"undefined"!==typeof i.isInEmbeddedEditor?this._contextKeyService.createKey("isInEmbeddedDiffEditor",i.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._renderOverviewRuler=!0,"undefined"!==typeof i.renderOverviewRuler&&(this._renderOverviewRuler=Boolean(i.renderOverviewRuler)),this._updateDecorationsRunner=this._register(new d["e"](()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=Object(r["b"])(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(s["o"](this._overviewDomElement,"mousedown",e=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(e)})),this._renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new de(_,n),this._modifiedEditorState=new de(_,n),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new ne["a"](this._containerDomElement,i.dimension,()=>this._onDidContainerSizeChanged())),i.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(i,o.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(i,o.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=new F(this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._enableSplitViewResizing=!0,"undefined"!==typeof i.enableSplitViewResizing&&(this._enableSplitViewResizing=i.enableSplitViewResizing),this._renderSideBySide?this._setStrategy(new we(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new Ce(this._createDataSource(),this._enableSplitViewResizing)),this._register(g.onDidColorThemeChange(t=>{this._strategy&&this._strategy.applyColors(t)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._renderSideBySide)}));const p=v["d"].getDiffEditorContributions();for(const e of p)try{this._register(c.createInstance(e.ctor,this))}catch(b){Object(ie["f"])(b)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=Object(y["e"])(e.type),i}_recreateOverviewRulers(){this._renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(t,i){const o=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(t),i);this._register(o.onDidScrollChange(e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(e=>{o.getModel()&&(e.hasChanged(42)&&this._updateDecorationsRunner.schedule(),e.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(o.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const n=this._contextKeyService.createKey("isInDiffLeftEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget(()=>n.set(!0))),this._register(o.onDidBlurEditorWidget(()=>n.set(!1))),this._register(o.onDidContentSizeChange(t=>{const i=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,o=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})})),o}_createRightHandSideEditor(t,i){const o=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(t),i);this._register(o.onDidScrollChange(e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(e=>{o.getModel()&&(e.hasChanged(42)&&this._updateDecorationsRunner.schedule(),e.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(o.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(o.onDidChangeModelOptions(e=>{e.tabSize&&this._updateDecorationsRunner.schedule()}));const n=this._contextKeyService.createKey("isInDiffRightEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget(()=>n.set(!0))),this._register(o.onDidBlurEditorWidget(()=>n.set(!1))),this._register(o.onDidContentSizeChange(t=>{const i=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,o=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})})),o}_createInnerEditor(e,t,i,o){return e.createInstance(m["a"],t,i,o)}dispose(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return z["a"].IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(t){let i=!1;"undefined"!==typeof t.renderSideBySide&&this._renderSideBySide!==t.renderSideBySide&&(this._renderSideBySide=t.renderSideBySide,i=!0),"undefined"!==typeof t.maxComputationTime&&(this._maxComputationTime=t.maxComputationTime,this._isVisible&&this._beginUpdateDecorationsSoon());let o=!1;"undefined"!==typeof t.ignoreTrimWhitespace&&this._ignoreTrimWhitespace!==t.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=t.ignoreTrimWhitespace,o=!0),"undefined"!==typeof t.renderIndicators&&this._renderIndicators!==t.renderIndicators&&(this._renderIndicators=t.renderIndicators,o=!0),o&&this._beginUpdateDecorations(),this._originalIsEditable=Object(w["k"])(t.originalEditable,this._originalIsEditable),this._diffCodeLens=Object(w["k"])(t.diffCodeLens,this._diffCodeLens),this._diffWordWrap=Le(t.diffWordWrap,this._diffWordWrap),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(t)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(t)),"undefined"!==typeof t.enableSplitViewResizing&&(this._enableSplitViewResizing=t.enableSplitViewResizing),this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),i&&(this._renderSideBySide?this._setStrategy(new we(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new Ce(this._createDataSource(),this._enableSplitViewResizing)),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._renderSideBySide)),"undefined"!==typeof t.renderOverviewRuler&&this._renderOverviewRuler!==t.renderOverviewRuler&&(this._renderOverviewRuler=t.renderOverviewRuler,this._renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,o=!0){this._modifiedEditor.revealRange(e,t,i,o)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._renderOverviewRuler)return;if(!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),o=e.ENTIRE_DIFF_OVERVIEW_WIDTH-2*e.ONE_OVERVIEW_WIDTH,n=this._modifiedEditor.getLayoutInfo();n&&(this._originalOverviewRuler.setLayout({top:0,width:e.ONE_OVERVIEW_WIDTH,right:o+e.ONE_OVERVIEW_WIDTH,height:t-i}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:e.ONE_OVERVIEW_WIDTH,height:t-i}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),e.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t||!(!e||!t)&&e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const t=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!t||!i)return;this._diffComputationToken++;const o=this._diffComputationToken;this._setState(1),this._editorWorkerService.canComputeDiff(t.uri,i.uri)?this._editorWorkerService.computeDiff(t.uri,i.uri,this._ignoreTrimWhitespace,this._maxComputationTime).then(e=>{o===this._diffComputationToken&&t===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=e,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},e=>{o===this._diffComputationToken&&t===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())}):e._equals(t.uri,this._lastOriginalWarning)&&e._equals(i.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=t.uri,this._lastModifiedWarning=i.uri,this._notificationService.warn(n["a"]("diff.tooLarge","Cannot compare files because one file is too large.")))}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),o=this._strategy.getEditorsDiffDecorations(e,this._ignoreTrimWhitespace,this._renderIndicators,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._renderSideBySide?t.wordWrapOverride1=this._diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._originalIsEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.wordWrapOverride1=this._diffWordWrap,i.revealHorizontalRightPadding=w["g"].revealHorizontalRightPadding.defaultValue+e.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const t=this._elementSizeObserver.getWidth(),i=this._elementSizeObserver.getHeight(),o=this._getReviewHeight(),n=this._strategy.layout();this._originalDomNode.style.width=n+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=t-n+"px",this._modifiedDomNode.style.left=n+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=i-o+"px",this._overviewDomElement.style.width=e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=t-e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(e.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:n,height:i-o}),this._modifiedEditor.layout({width:t-n-(this._renderOverviewRuler?e.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:i-o}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(i-o,t,o),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),o=Math.max(0,e.height),n=Math.max(0,o-0),s=i>0?n/i:0,r=Math.max(0,Math.floor(e.height*s)),a=Math.floor(t*s);return{height:r,top:a}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const i=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===i.length||e<t(i[0]))return null;let o=0,n=i.length-1;while(o<n){const s=Math.floor((o+n)/2),r=t(i[s]),a=s+1<=n?t(i[s+1]):1073741824;e<r?n=s-1:e>=a?o=s+1:(o=s,n=s)}return i[o]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,e=>e.originalStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),n=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,r=e-i;return r<=n?o+Math.min(r,s):o+s-n+r}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,e=>e.modifiedStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),n=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,r=e-o;return r<=s?i+Math.min(r,n):i+n-s+r}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};ge.ONE_OVERVIEW_WIDTH=15,ge.ENTIRE_DIFF_OVERVIEW_WIDTH=30,ge.UPDATE_DIFF_DECORATIONS_DELAY=200,ge=re([ae(3,te["a"]),ae(4,Z["a"]),ae(5,N["b"]),ae(6,$["a"]),ae(7,g["a"]),ae(8,y["b"]),ae(9,X["a"]),ae(10,Y["a"]),ae(11,oe["a"])],ge);class me extends l["a"]{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(E["m"])||E["i"]).transparent(2),i=(e.getColor(E["o"])||E["j"]).transparent(2),o=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,o}getEditorsDiffDecorations(e,t,i,o,n){n=n.sort((e,t)=>e.afterLineNumber-t.afterLineNumber),o=o.sort((e,t)=>e.afterLineNumber-t.afterLineNumber);const s=this._getViewZones(e,o,n,i),r=this._getOriginalEditorDecorations(e,t,i),a=this._getModifiedEditorDecorations(e,t,i);return{original:{decorations:r.decorations,overviewZones:r.overviewZones,zones:s.original},modified:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.modified}}}}class _e{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class fe{constructor(e,t,i,o,n){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=o,this._modifiedEditor=n}static _getViewLineCount(e,t,i){const o=e.getModel(),n=e._getViewModel();if(o&&n){const e=ye(o,n,t,i);return e.endLineNumber-e.startLineNumber+1}return i-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),i=-1!==this._originalEditor.getOption(131).wrappingColumn,o=-1!==this._modifiedEditor.getOption(131).wrappingColumn,n=i||o,s=this._originalEditor.getModel(),r=this._originalEditor._getViewModel().coordinatesConverter,a=this._modifiedEditor._getViewModel().coordinatesConverter,d={original:[],modified:[]};let h=0,l=0,c=0,u=0,g=0,m=0;const _=(e,t)=>e.afterLineNumber-t.afterLineNumber,f=(e,t)=>{if(null===t.domNode&&e.length>0){const i=e[e.length-1];if(i.afterLineNumber===t.afterLineNumber&&null===i.domNode)return void(i.heightInLines+=t.heightInLines)}e.push(t)},p=new _e(this._modifiedForeignVZ),v=new _e(this._originalForeignVZ);let w=1,b=1;for(let C=0,D=this._lineChanges.length;C<=D;C++){const i=C<D?this._lineChanges[C]:null;null!==i?(c=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),u=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),l=i.originalEndLineNumber>0?fe._getViewLineCount(this._originalEditor,i.originalStartLineNumber,i.originalEndLineNumber):0,h=i.modifiedEndLineNumber>0?fe._getViewLineCount(this._modifiedEditor,i.modifiedStartLineNumber,i.modifiedEndLineNumber):0,g=Math.max(i.originalStartLineNumber,i.originalEndLineNumber),m=Math.max(i.modifiedStartLineNumber,i.modifiedEndLineNumber)):(c+=1e7+l,u+=1e7+h,g=c,m=u);let o=[],L=[];if(n){let e;e=i?i.originalEndLineNumber>0?i.originalStartLineNumber-w:i.modifiedStartLineNumber-b:s.getLineCount()-w;for(let t=0;t<e;t++){const e=w+t,i=b+t,n=r.getModelLineViewLineCount(e),s=a.getModelLineViewLineCount(i);n<s?o.push({afterLineNumber:e,heightInLines:s-n,domNode:null,marginDomNode:null}):n>s&&L.push({afterLineNumber:i,heightInLines:n-s,domNode:null,marginDomNode:null})}i&&(w=(i.originalEndLineNumber>0?i.originalEndLineNumber:i.originalStartLineNumber)+1,b=(i.modifiedEndLineNumber>0?i.modifiedEndLineNumber:i.modifiedStartLineNumber)+1)}while(p.current&&p.current.afterLineNumber<=m){let e;e=p.current.afterLineNumber<=u?c-u+p.current.afterLineNumber:g;let n=null;i&&i.modifiedStartLineNumber<=p.current.afterLineNumber&&p.current.afterLineNumber<=i.modifiedEndLineNumber&&(n=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),o.push({afterLineNumber:e,heightInLines:p.current.height/t,domNode:null,marginDomNode:n}),p.advance()}while(v.current&&v.current.afterLineNumber<=g){let t;t=v.current.afterLineNumber<=c?u-c+v.current.afterLineNumber:m,L.push({afterLineNumber:t,heightInLines:v.current.height/e,domNode:null}),v.advance()}if(null!==i&&Se(i)){const e=this._produceOriginalFromDiff(i,l,h);e&&o.push(e)}if(null!==i&&Ne(i)){const e=this._produceModifiedFromDiff(i,l,h);e&&L.push(e)}let S=0,N=0;o=o.sort(_),L=L.sort(_);while(S<o.length&&N<L.length){const e=o[S],t=L[N],i=e.afterLineNumber-c,n=t.afterLineNumber-u;i<n?(f(d.original,e),S++):n<i?(f(d.modified,t),N++):e.shouldNotShrink?(f(d.original,e),S++):t.shouldNotShrink?(f(d.modified,t),N++):e.heightInLines>=t.heightInLines?(e.heightInLines-=t.heightInLines,N++):(t.heightInLines-=e.heightInLines,S++)}while(S<o.length)f(d.original,o[S]),S++;while(N<L.length)f(d.modified,L[N]),N++}return{original:fe._ensureDomNodes(d.original),modified:fe._ensureDomNodes(d.modified)}}static _ensureDomNodes(e){return e.map(e=>(e.domNode||(e.domNode=Ee()),e))}}function pe(e,t,i,o,n){return{range:new j["a"](e,t,i,o),options:n}}const ve={charDelete:B["a"].register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:B["a"].register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:B["a"].register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:B["a"].register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:B["a"].register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:B["a"].register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+y["d"].asClassName(le),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:B["a"].register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:B["a"].register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+y["d"].asClassName(ce),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:B["a"].register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class we extends me{constructor(e,t){super(e),this._disableSash=!1===t,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new a["b"](this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(e=>this._onSashDrag(e)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=!1===e;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const t=this._dataSource.getWidth(),i=t-(this._dataSource.getOptions().renderOverviewRuler?ge.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let o=Math.floor((e||.5)*i);const n=Math.floor(.5*i);return o=this._disableSash?n:o||n,i>2*we.MINIMUM_EDITOR_WIDTH?(o<we.MINIMUM_EDITOR_WIDTH&&(o=we.MINIMUM_EDITOR_WIDTH),o>i-we.MINIMUM_EDITOR_WIDTH&&(o=i-we.MINIMUM_EDITOR_WIDTH)):o=n,this._sashPosition!==o&&(this._sashPosition=o,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const t=this._dataSource.getWidth(),i=t-(this._dataSource.getOptions().renderOverviewRuler?ge.ENTIRE_DIFF_OVERVIEW_WIDTH:0),o=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=o/i,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,i){const o=this._dataSource.getOriginalEditor(),n=this._dataSource.getModifiedEditor(),s=new be(e,t,i,o,n);return s.getViewZones()}_getOriginalEditorDecorations(e,t,i){const o=this._dataSource.getOriginalEditor(),n=String(this._removeColor),s={decorations:[],overviewZones:[]},r=o.getModel(),a=o._getViewModel();for(const d of e)if(Ne(d)){s.decorations.push({range:new j["a"](d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:i?ve.lineDeleteWithSign:ve.lineDelete}),Se(d)&&d.charChanges||s.decorations.push(pe(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,ve.charDeleteWholeLine));const e=ye(r,a,d.originalStartLineNumber,d.originalEndLineNumber);if(s.overviewZones.push(new K["a"](e.startLineNumber,e.endLineNumber,n)),d.charChanges)for(const i of d.charChanges)if(Ne(i))if(t)for(let e=i.originalStartLineNumber;e<=i.originalEndLineNumber;e++){let t,o;t=e===i.originalStartLineNumber?i.originalStartColumn:r.getLineFirstNonWhitespaceColumn(e),o=e===i.originalEndLineNumber?i.originalEndColumn:r.getLineLastNonWhitespaceColumn(e),s.decorations.push(pe(e,t,e,o,ve.charDelete))}else s.decorations.push(pe(i.originalStartLineNumber,i.originalStartColumn,i.originalEndLineNumber,i.originalEndColumn,ve.charDelete))}return s}_getModifiedEditorDecorations(e,t,i){const o=this._dataSource.getModifiedEditor(),n=String(this._insertColor),s={decorations:[],overviewZones:[]},r=o.getModel(),a=o._getViewModel();for(const d of e)if(Se(d)){s.decorations.push({range:new j["a"](d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:i?ve.lineInsertWithSign:ve.lineInsert}),Ne(d)&&d.charChanges||s.decorations.push(pe(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,ve.charInsertWholeLine));const e=ye(r,a,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(s.overviewZones.push(new K["a"](e.startLineNumber,e.endLineNumber,n)),d.charChanges)for(const i of d.charChanges)if(Se(i))if(t)for(let e=i.modifiedStartLineNumber;e<=i.modifiedEndLineNumber;e++){let t,o;t=e===i.modifiedStartLineNumber?i.modifiedStartColumn:r.getLineFirstNonWhitespaceColumn(e),o=e===i.modifiedEndLineNumber?i.modifiedEndColumn:r.getLineLastNonWhitespaceColumn(e),s.decorations.push(pe(e,t,e,o,ve.charInsert))}else s.decorations.push(pe(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn,ve.charInsert))}return s}}we.MINIMUM_EDITOR_WIDTH=100;class be extends fe{constructor(e,t,i,o,n){super(e,t,i,o,n)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}}class Ce extends me{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(t=>{this._decorationsLeft!==t.decorationsLeft&&(this._decorationsLeft=t.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,o){const n=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor(),r=new De(e,t,i,n,s,o);return r.getViewZones()}_getOriginalEditorDecorations(e,t,i){const o=String(this._removeColor),n={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),r=s.getModel(),a=s._getViewModel();for(const d of e)if(Ne(d)){n.decorations.push({range:new j["a"](d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:ve.lineDeleteMargin});const e=ye(r,a,d.originalStartLineNumber,d.originalEndLineNumber);n.overviewZones.push(new K["a"](e.startLineNumber,e.endLineNumber,o))}return n}_getModifiedEditorDecorations(e,t,i){const o=this._dataSource.getModifiedEditor(),n=String(this._insertColor),s={decorations:[],overviewZones:[]},r=o.getModel(),a=o._getViewModel();for(const d of e)if(Se(d)){s.decorations.push({range:new j["a"](d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:i?ve.lineInsertWithSign:ve.lineInsert});const e=ye(r,a,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(s.overviewZones.push(new K["a"](e.startLineNumber,e.endLineNumber,n)),d.charChanges){for(const i of d.charChanges)if(Se(i))if(t)for(let e=i.modifiedStartLineNumber;e<=i.modifiedEndLineNumber;e++){let t,o;t=e===i.modifiedStartLineNumber?i.modifiedStartColumn:r.getLineFirstNonWhitespaceColumn(e),o=e===i.modifiedEndLineNumber?i.modifiedEndColumn:r.getLineLastNonWhitespaceColumn(e),s.decorations.push(pe(e,t,e,o,ve.charInsert))}else s.decorations.push(pe(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn,ve.charInsert))}else s.decorations.push(pe(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,ve.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}}class De extends fe{constructor(e,t,i,o,n,s){super(e,t,i,o,n),this._originalModel=o.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){const o=document.createElement("div");return o.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:o}}_produceModifiedFromDiff(e,t,i){const o=document.createElement("div");o.className="view-lines line-delete "+se["a"];const n=document.createElement("div");n.className="inline-deleted-margin-view-zone";const s={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:o,marginDomNode:n,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let r=e.originalStartLineNumber;r<=e.originalEndLineNumber;r++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(r),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){const t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,o=t.get(42),n=t.get(28),s=o.typicalHalfwidthCharacterWidth,r=t.get(93),a=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),h=t.get(58),l=t.get(130),u=l.decorationsWidth,g=t.get(105),m=t.get(88),_=t.get(82),f=t.get(43),p=this._lineBreaksComputer.finalize();let v=0;for(let w=0;w<this._pendingLineChange.length;w++){const t=this._pendingLineChange[w],l=this._pendingViewZones[w],b=l.domNode;c["a"].applyFontInfoSlow(b,o);const C=l.marginDomNode;c["a"].applyFontInfoSlow(C,o);const D=[];if(t.charChanges)for(const e of t.charChanges)Ne(e)&&D.push(new S["a"](new j["a"](e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),"char-delete",0));const L=D.length>0,N=Object(U["a"])(1e4);let E=0,y=0,M=null;for(let s=t.originalStartLineNumber;s<=t.originalEndLineNumber;s++){const r=s-t.originalStartLineNumber,c=this._originalModel.getLineTokens(s),w=c.getLineContent(),b=p[v++],S=q["a"].filter(D,s,1,w.length+1);if(b){let t=0;for(const e of b.breakOffsets){const s=c.sliceAndInflate(t,e,0),r=w.substring(t,e);E=Math.max(E,this._renderOriginalLine(y++,r,s,q["a"].extractWrapped(S,t,e),L,a,d,o,n,h,u,g,m,_,f,i,N,C)),t=e}M||(M=[]);while(M.length<r)M[M.length]=1;M[r]=b.breakOffsets.length,l.heightInLines+=b.breakOffsets.length-1;const p=document.createElement("div");p.className="line-delete",e.original.push({afterLineNumber:s,afterColumn:0,heightInLines:b.breakOffsets.length-1,domNode:Ee(),marginDomNode:p})}else E=Math.max(E,this._renderOriginalLine(y++,w,c,S,L,a,d,o,n,h,u,g,m,_,f,i,N,C))}E+=r;const R=N.build(),I=ue?ue.createHTML(R):R;if(b.innerHTML=I,l.minWidthInPx=E*s,M){const e=t.originalEndLineNumber-t.originalStartLineNumber;while(M.length<=e)M[M.length]=1}l.diff.viewLineCounts=M}e.original.sort((e,t)=>e.afterLineNumber-t.afterLineNumber)}_renderOriginalLine(e,t,i,o,n,s,r,a,d,h,l,c,u,g,m,_,f,p){f.appendASCIIString('<div class="view-line'),n||f.appendASCIIString(" char-delete"),f.appendASCIIString('" style="top:'),f.appendASCIIString(String(e*h)),f.appendASCIIString('px;width:1000000px;">');const v=S["f"].isBasicASCII(t,s),b=S["f"].containsRTL(t,v,r),C=Object(L["d"])(new L["c"](a.isMonospace&&!d,a.canUseHalfwidthRightwardsArrow,t,!1,v,b,0,i,o,_,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,c,u,g,m!==w["e"].OFF,null),f);if(f.appendASCIIString("</div>"),this._renderIndicators){const t=document.createElement("div");t.className="delete-sign "+y["d"].asClassName(ce),t.setAttribute("style",`position:absolute;top:${e*h}px;width:${l}px;height:${h}px;right:0;`),p.appendChild(t)}return C.characterMapping.getAbsoluteOffset(C.characterMapping.length)}}function Le(e,t){return Object(w["n"])(e,t,["off","on","inherit"])}function Se(e){return e.modifiedEndLineNumber>0}function Ne(e){return e.originalEndLineNumber>0}function Ee(){const e=document.createElement("div");return e.className="diagonal-fill",e}function ye(e,t,i,o){const n=e.getLineCount();return i=Math.min(n,Math.max(1,i)),o=Math.min(n,Math.max(1,o)),t.coordinatesConverter.convertModelRangeToViewRange(new j["a"](i,e.getLineMinColumn(i),o,e.getLineMaxColumn(o)))}Object(y["f"])((e,t)=>{const i=e.getColor(E["m"]);i&&(t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${i}; }`),t.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${i}; }`),t.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${i}; }`));const o=e.getColor(E["o"]);o&&(t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${o}; }`),t.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${o}; }`),t.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${o}; }`));const n=e.getColor(E["n"]);n&&t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${"hc"===e.type?"dashed":"solid"} ${n}; }`);const s=e.getColor(E["p"]);s&&t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${"hc"===e.type?"dashed":"solid"} ${s}; }`);const r=e.getColor(E["yc"]);r&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${r}; }`);const a=e.getColor(E["k"]);a&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const d=e.getColor(E["Ac"]);d&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ${d};\n\t\t\t}\n\t\t`);const h=e.getColor(E["Bc"]);h&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ${h};\n\t\t\t}\n\t\t`);const l=e.getColor(E["zc"]);l&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ${l};\n\t\t\t}\n\t\t`);const c=e.getColor(E["l"]);t.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${c} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${c} 50%, ${c} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`)})},aa1d:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var o=i("6977"),n=i("38cf"),s=i("52a1"),r=i("646b"),a=i("321b"),d=i("2279"),h=i("6fea"),l=i("662c"),c=i("4058"),u=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,o){t(i,o,e)}};let m=class extends s["a"]{constructor(e,t,i,o,n,s,r,a,d,h){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),{},o,n,s,r,a,d,h),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(e=>this._onParentConfigurationChanged(e)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){o["f"](this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};m=u([g(3,d["a"]),g(4,n["a"]),g(5,r["b"]),g(6,a["b"]),g(7,l["b"]),g(8,h["a"]),g(9,c["b"])],m)},bdd8:function(e,t,i){},ce55:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var o=i("e55f"),n=i("5ee7"),s=i("71e2"),r=i("6977"),a=i("537c");const d={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class h extends s["a"]{constructor(e,t={}){super(),this._onDidUpdate=this._register(new n["b"]),this._editor=e,this._options=r["f"](t,d,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(e=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(e=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach(e=>{this.ranges.push({rhs:!0,range:new a["a"](e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})}):this.ranges.push({rhs:!0,range:new a["a"](e.modifiedStartLineNumber,1,e.modifiedStartLineNumber,1)})}),this.ranges.sort((e,t)=>e.range.getStartPosition().isBeforeOrEqual(t.range.getStartPosition())?-1:t.range.getStartPosition().isBeforeOrEqual(e.range.getStartPosition())?1:0),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,i=this._editor.getPosition();if(i){for(let o=0,n=this.ranges.length;o<n&&!t;o++){let n=this.ranges[o].range;i.isBeforeOrEqual(n.getStartPosition())&&(this.nextIdx=o+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(e,t){if(o["a"](!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let e=i.range.getStartPosition();this._editor.setPosition(e),this._editor.revealPositionInCenter(e,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}}}]);